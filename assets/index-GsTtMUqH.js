import{a as La,b as Ma,c as e,r as R,g as Ua}from"./vendor-9bZoipD1.js";import{u as _t,L as Se,a as Ps,b as ja,B as $a,R as qa,c as Fe,N as pt}from"./router-BAAhKjlc.js";import{V as F,S as xt,L as Vl,X as Je,M as Ds,H as Rs,a as Fs,C as Va,U as ot,b as Ht,B as El,T as Ue,D as Yr,W as ml,c as Ka,d as nl,e as vr,f as ir,g as $e,h as Kl,i as Ke,j as Et,k as ut,l as Ts,m as jt,K as Ba,n as Ga,o as za,P as Ha,A as Wa,p as Pt,q as et,Q as Qa,r as mt,s as or,F as Ja,E as ct,t as vl,u as sr,v as Ya,w as wr,x as ar,y as St,z as Rt,G as xe,I as Zr,J as nt,N as $t,O as Ct,R as tt,Y as Tt,Z as Is,_ as wl,$ as Sl,a0 as vt,a1 as Sr,a2 as Za,a3 as zt,a4 as Xa,a5 as Cr,a6 as il,a7 as em,a8 as tm,a9 as qt,aa as rm,ab as Bl,ac as ol,ad as Gl,ae as lm,af as zl,ag as kr,ah as Ar,ai as ul,aj as sm,ak as am,al as mm,am as nm}from"./ui-CygV_qQ7.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const m of a)if(m.type==="childList")for(const n of m.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function l(a){const m={};return a.integrity&&(m.integrity=a.integrity),a.referrerPolicy&&(m.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?m.credentials="include":a.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function s(a){if(a.ep)return;a.ep=!0;const m=l(a);fetch(a.href,m)}})();var cl={},Hl=La;cl.createRoot=Hl.createRoot,cl.hydrateRoot=Hl.hydrateRoot;function _l(t,r){return _l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,s){return l.__proto__=s,l},_l(t,r)}function Ur(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_l(t,r)}var jr=function(){function t(){this.listeners=[]}var r=t.prototype;return r.subscribe=function(s){var a=this,m=s||function(){};return this.listeners.push(m),this.onSubscribe(),function(){a.listeners=a.listeners.filter(function(n){return n!==m}),a.onUnsubscribe()}},r.hasListeners=function(){return this.listeners.length>0},r.onSubscribe=function(){},r.onUnsubscribe=function(){},t}();function Re(){return Re=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var s in l)({}).hasOwnProperty.call(l,s)&&(t[s]=l[s])}return t},Re.apply(null,arguments)}var Os=typeof window>"u";function Ze(){}function im(t,r){return typeof t=="function"?t(r):t}function om(t){return typeof t=="number"&&t>=0&&t!==1/0}function Pr(t){return Array.isArray(t)?t:[t]}function um(t,r){return Math.max(t+(r||0)-Date.now(),0)}function Xr(t,r,l){return $r(t)?typeof r=="function"?Re({},l,{queryKey:t,queryFn:r}):Re({},r,{queryKey:t}):t}function Dt(t,r,l){return $r(t)?[Re({},r,{queryKey:t}),l]:[t||{},r]}function cm(t,r){if(t===!0&&r===!0||t==null&&r==null)return"all";if(t===!1&&r===!1)return"none";var l=t??!r;return l?"active":"inactive"}function Wl(t,r){var l=t.active,s=t.exact,a=t.fetching,m=t.inactive,n=t.predicate,i=t.queryKey,N=t.stale;if($r(i)){if(s){if(r.queryHash!==Cl(i,r.options))return!1}else if(!Dr(r.queryKey,i))return!1}var u=cm(l,m);if(u==="none")return!1;if(u!=="all"){var c=r.isActive();if(u==="active"&&!c||u==="inactive"&&c)return!1}return!(typeof N=="boolean"&&r.isStale()!==N||typeof a=="boolean"&&r.isFetching()!==a||n&&!n(r))}function Ql(t,r){var l=t.exact,s=t.fetching,a=t.predicate,m=t.mutationKey;if($r(m)){if(!r.options.mutationKey)return!1;if(l){if(Ot(r.options.mutationKey)!==Ot(m))return!1}else if(!Dr(r.options.mutationKey,m))return!1}return!(typeof s=="boolean"&&r.state.status==="loading"!==s||a&&!a(r))}function Cl(t,r){var l=r?.queryKeyHashFn||Ot;return l(t)}function Ot(t){var r=Pr(t);return _m(r)}function _m(t){return JSON.stringify(t,function(r,l){return Nl(l)?Object.keys(l).sort().reduce(function(s,a){return s[a]=l[a],s},{}):l})}function Dr(t,r){return Ls(Pr(t),Pr(r))}function Ls(t,r){return t===r?!0:typeof t!=typeof r?!1:t&&r&&typeof t=="object"&&typeof r=="object"?!Object.keys(r).some(function(l){return!Ls(t[l],r[l])}):!1}function Ms(t,r){if(t===r)return t;var l=Array.isArray(t)&&Array.isArray(r);if(l||Nl(t)&&Nl(r)){for(var s=l?t.length:Object.keys(t).length,a=l?r:Object.keys(r),m=a.length,n=l?[]:{},i=0,N=0;N<m;N++){var u=l?N:a[N];n[u]=Ms(t[u],r[u]),n[u]===t[u]&&i++}return s===m&&i===s?t:n}return r}function Nl(t){if(!Jl(t))return!1;var r=t.constructor;if(typeof r>"u")return!0;var l=r.prototype;return!(!Jl(l)||!l.hasOwnProperty("isPrototypeOf"))}function Jl(t){return Object.prototype.toString.call(t)==="[object Object]"}function $r(t){return typeof t=="string"||Array.isArray(t)}function Nm(t){return new Promise(function(r){setTimeout(r,t)})}function Yl(t){Promise.resolve().then(t).catch(function(r){return setTimeout(function(){throw r})})}function Us(){if(typeof AbortController=="function")return new AbortController}var fm=function(t){Ur(r,t);function r(){var s;return s=t.call(this)||this,s.setup=function(a){var m;if(!Os&&((m=window)!=null&&m.addEventListener)){var n=function(){return a()};return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),function(){window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}},s}var l=r.prototype;return l.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},l.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},l.setEventListener=function(a){var m,n=this;this.setup=a,(m=this.cleanup)==null||m.call(this),this.cleanup=a(function(i){typeof i=="boolean"?n.setFocused(i):n.onFocus()})},l.setFocused=function(a){this.focused=a,a&&this.onFocus()},l.onFocus=function(){this.listeners.forEach(function(a){a()})},l.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},r}(jr),hr=new fm,bm=function(t){Ur(r,t);function r(){var s;return s=t.call(this)||this,s.setup=function(a){var m;if(!Os&&((m=window)!=null&&m.addEventListener)){var n=function(){return a()};return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),function(){window.removeEventListener("online",n),window.removeEventListener("offline",n)}}},s}var l=r.prototype;return l.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},l.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},l.setEventListener=function(a){var m,n=this;this.setup=a,(m=this.cleanup)==null||m.call(this),this.cleanup=a(function(i){typeof i=="boolean"?n.setOnline(i):n.onOnline()})},l.setOnline=function(a){this.online=a,a&&this.onOnline()},l.onOnline=function(){this.listeners.forEach(function(a){a()})},l.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},r}(jr),gr=new bm;function dm(t){return Math.min(1e3*Math.pow(2,t),3e4)}function Rr(t){return typeof t?.cancel=="function"}var js=function(r){this.revert=r?.revert,this.silent=r?.silent};function el(t){return t instanceof js}var $s=function(r){var l=this,s=!1,a,m,n,i;this.abort=r.abort,this.cancel=function(f){return a?.(f)},this.cancelRetry=function(){s=!0},this.continueRetry=function(){s=!1},this.continue=function(){return m?.()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(f,h){n=f,i=h});var N=function(h){l.isResolved||(l.isResolved=!0,r.onSuccess==null||r.onSuccess(h),m?.(),n(h))},u=function(h){l.isResolved||(l.isResolved=!0,r.onError==null||r.onError(h),m?.(),i(h))},c=function(){return new Promise(function(h){m=h,l.isPaused=!0,r.onPause==null||r.onPause()}).then(function(){m=void 0,l.isPaused=!1,r.onContinue==null||r.onContinue()})},o=function f(){if(!l.isResolved){var h;try{h=r.fn()}catch(A){h=Promise.reject(A)}a=function(g){if(!l.isResolved&&(u(new js(g)),l.abort==null||l.abort(),Rr(h)))try{h.cancel()}catch{}},l.isTransportCancelable=Rr(h),Promise.resolve(h).then(N).catch(function(A){var g,b;if(!l.isResolved){var S=(g=r.retry)!=null?g:3,v=(b=r.retryDelay)!=null?b:dm,L=typeof v=="function"?v(l.failureCount,A):v,G=S===!0||typeof S=="number"&&l.failureCount<S||typeof S=="function"&&S(l.failureCount,A);if(s||!G){u(A);return}l.failureCount++,r.onFail==null||r.onFail(l.failureCount,A),Nm(L).then(function(){if(!hr.isFocused()||!gr.isOnline())return c()}).then(function(){s?u(A):f()})}})}};o()},hm=function(){function t(){this.queue=[],this.transactions=0,this.notifyFn=function(l){l()},this.batchNotifyFn=function(l){l()}}var r=t.prototype;return r.batch=function(s){var a;this.transactions++;try{a=s()}finally{this.transactions--,this.transactions||this.flush()}return a},r.schedule=function(s){var a=this;this.transactions?this.queue.push(s):Yl(function(){a.notifyFn(s)})},r.batchCalls=function(s){var a=this;return function(){for(var m=arguments.length,n=new Array(m),i=0;i<m;i++)n[i]=arguments[i];a.schedule(function(){s.apply(void 0,n)})}},r.flush=function(){var s=this,a=this.queue;this.queue=[],a.length&&Yl(function(){s.batchNotifyFn(function(){a.forEach(function(m){s.notifyFn(m)})})})},r.setNotifyFunction=function(s){this.notifyFn=s},r.setBatchNotifyFunction=function(s){this.batchNotifyFn=s},t}(),He=new hm,qs=console;function Vs(){return qs}function gm(t){qs=t}var pm=function(){function t(l){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=l.defaultOptions,this.setOptions(l.options),this.observers=[],this.cache=l.cache,this.queryKey=l.queryKey,this.queryHash=l.queryHash,this.initialState=l.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=l.meta,this.scheduleGc()}var r=t.prototype;return r.setOptions=function(s){var a;this.options=Re({},this.defaultOptions,s),this.meta=s?.meta,this.cacheTime=Math.max(this.cacheTime||0,(a=this.options.cacheTime)!=null?a:5*60*1e3)},r.setDefaultOptions=function(s){this.defaultOptions=s},r.scheduleGc=function(){var s=this;this.clearGcTimeout(),om(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){s.optionalRemove()},this.cacheTime))},r.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},r.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},r.setData=function(s,a){var m,n,i=this.state.data,N=im(s,i);return(m=(n=this.options).isDataEqual)!=null&&m.call(n,i,N)?N=i:this.options.structuralSharing!==!1&&(N=Ms(i,N)),this.dispatch({data:N,type:"success",dataUpdatedAt:a?.updatedAt}),N},r.setState=function(s,a){this.dispatch({type:"setState",state:s,setStateOptions:a})},r.cancel=function(s){var a,m=this.promise;return(a=this.retryer)==null||a.cancel(s),m?m.then(Ze).catch(Ze):Promise.resolve()},r.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},r.reset=function(){this.destroy(),this.setState(this.initialState)},r.isActive=function(){return this.observers.some(function(s){return s.options.enabled!==!1})},r.isFetching=function(){return this.state.isFetching},r.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(s){return s.getCurrentResult().isStale})},r.isStaleByTime=function(s){return s===void 0&&(s=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!um(this.state.dataUpdatedAt,s)},r.onFocus=function(){var s,a=this.observers.find(function(m){return m.shouldFetchOnWindowFocus()});a&&a.refetch(),(s=this.retryer)==null||s.continue()},r.onOnline=function(){var s,a=this.observers.find(function(m){return m.shouldFetchOnReconnect()});a&&a.refetch(),(s=this.retryer)==null||s.continue()},r.addObserver=function(s){this.observers.indexOf(s)===-1&&(this.observers.push(s),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:s}))},r.removeObserver=function(s){this.observers.indexOf(s)!==-1&&(this.observers=this.observers.filter(function(a){return a!==s}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:s}))},r.getObserversCount=function(){return this.observers.length},r.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},r.fetch=function(s,a){var m=this,n,i,N;if(this.state.isFetching){if(this.state.dataUpdatedAt&&a?.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var u;return(u=this.retryer)==null||u.continueRetry(),this.promise}}if(s&&this.setOptions(s),!this.options.queryFn){var c=this.observers.find(function(v){return v.options.queryFn});c&&this.setOptions(c.options)}var o=Pr(this.queryKey),f=Us(),h={queryKey:o,pageParam:void 0,meta:this.meta};Object.defineProperty(h,"signal",{enumerable:!0,get:function(){if(f)return m.abortSignalConsumed=!0,f.signal}});var A=function(){return m.options.queryFn?(m.abortSignalConsumed=!1,m.options.queryFn(h)):Promise.reject("Missing queryFn")},g={fetchOptions:a,options:this.options,queryKey:o,state:this.state,fetchFn:A,meta:this.meta};if((n=this.options.behavior)!=null&&n.onFetch){var b;(b=this.options.behavior)==null||b.onFetch(g)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((i=g.fetchOptions)==null?void 0:i.meta)){var S;this.dispatch({type:"fetch",meta:(S=g.fetchOptions)==null?void 0:S.meta})}return this.retryer=new $s({fn:g.fetchFn,abort:f==null||(N=f.abort)==null?void 0:N.bind(f),onSuccess:function(L){m.setData(L),m.cache.config.onSuccess==null||m.cache.config.onSuccess(L,m),m.cacheTime===0&&m.optionalRemove()},onError:function(L){el(L)&&L.silent||m.dispatch({type:"error",error:L}),el(L)||(m.cache.config.onError==null||m.cache.config.onError(L,m),Vs().error(L)),m.cacheTime===0&&m.optionalRemove()},onFail:function(){m.dispatch({type:"failed"})},onPause:function(){m.dispatch({type:"pause"})},onContinue:function(){m.dispatch({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay}),this.promise=this.retryer.promise,this.promise},r.dispatch=function(s){var a=this;this.state=this.reducer(this.state,s),He.batch(function(){a.observers.forEach(function(m){m.onQueryUpdate(s)}),a.cache.notify({query:a,type:"queryUpdated",action:s})})},r.getDefaultState=function(s){var a=typeof s.initialData=="function"?s.initialData():s.initialData,m=typeof s.initialData<"u",n=m?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0,i=typeof a<"u";return{data:a,dataUpdateCount:0,dataUpdatedAt:i?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:i?"success":"idle"}},r.reducer=function(s,a){var m,n;switch(a.type){case"failed":return Re({},s,{fetchFailureCount:s.fetchFailureCount+1});case"pause":return Re({},s,{isPaused:!0});case"continue":return Re({},s,{isPaused:!1});case"fetch":return Re({},s,{fetchFailureCount:0,fetchMeta:(m=a.meta)!=null?m:null,isFetching:!0,isPaused:!1},!s.dataUpdatedAt&&{error:null,status:"loading"});case"success":return Re({},s,{data:a.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:(n=a.dataUpdatedAt)!=null?n:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var i=a.error;return el(i)&&i.revert&&this.revertState?Re({},this.revertState):Re({},s,{error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return Re({},s,{isInvalidated:!0});case"setState":return Re({},s,a.state);default:return s}},t}(),ym=function(t){Ur(r,t);function r(s){var a;return a=t.call(this)||this,a.config=s||{},a.queries=[],a.queriesMap={},a}var l=r.prototype;return l.build=function(a,m,n){var i,N=m.queryKey,u=(i=m.queryHash)!=null?i:Cl(N,m),c=this.get(u);return c||(c=new pm({cache:this,queryKey:N,queryHash:u,options:a.defaultQueryOptions(m),state:n,defaultOptions:a.getQueryDefaults(N),meta:m.meta}),this.add(c)),c},l.add=function(a){this.queriesMap[a.queryHash]||(this.queriesMap[a.queryHash]=a,this.queries.push(a),this.notify({type:"queryAdded",query:a}))},l.remove=function(a){var m=this.queriesMap[a.queryHash];m&&(a.destroy(),this.queries=this.queries.filter(function(n){return n!==a}),m===a&&delete this.queriesMap[a.queryHash],this.notify({type:"queryRemoved",query:a}))},l.clear=function(){var a=this;He.batch(function(){a.queries.forEach(function(m){a.remove(m)})})},l.get=function(a){return this.queriesMap[a]},l.getAll=function(){return this.queries},l.find=function(a,m){var n=Dt(a,m),i=n[0];return typeof i.exact>"u"&&(i.exact=!0),this.queries.find(function(N){return Wl(i,N)})},l.findAll=function(a,m){var n=Dt(a,m),i=n[0];return Object.keys(i).length>0?this.queries.filter(function(N){return Wl(i,N)}):this.queries},l.notify=function(a){var m=this;He.batch(function(){m.listeners.forEach(function(n){n(a)})})},l.onFocus=function(){var a=this;He.batch(function(){a.queries.forEach(function(m){m.onFocus()})})},l.onOnline=function(){var a=this;He.batch(function(){a.queries.forEach(function(m){m.onOnline()})})},r}(jr),xm=function(){function t(l){this.options=Re({},l.defaultOptions,l.options),this.mutationId=l.mutationId,this.mutationCache=l.mutationCache,this.observers=[],this.state=l.state||Em(),this.meta=l.meta}var r=t.prototype;return r.setState=function(s){this.dispatch({type:"setState",state:s})},r.addObserver=function(s){this.observers.indexOf(s)===-1&&this.observers.push(s)},r.removeObserver=function(s){this.observers=this.observers.filter(function(a){return a!==s})},r.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Ze).catch(Ze)):Promise.resolve()},r.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},r.execute=function(){var s=this,a,m=this.state.status==="loading",n=Promise.resolve();return m||(this.dispatch({type:"loading",variables:this.options.variables}),n=n.then(function(){s.mutationCache.config.onMutate==null||s.mutationCache.config.onMutate(s.state.variables,s)}).then(function(){return s.options.onMutate==null?void 0:s.options.onMutate(s.state.variables)}).then(function(i){i!==s.state.context&&s.dispatch({type:"loading",context:i,variables:s.state.variables})})),n.then(function(){return s.executeMutation()}).then(function(i){a=i,s.mutationCache.config.onSuccess==null||s.mutationCache.config.onSuccess(a,s.state.variables,s.state.context,s)}).then(function(){return s.options.onSuccess==null?void 0:s.options.onSuccess(a,s.state.variables,s.state.context)}).then(function(){return s.options.onSettled==null?void 0:s.options.onSettled(a,null,s.state.variables,s.state.context)}).then(function(){return s.dispatch({type:"success",data:a}),a}).catch(function(i){return s.mutationCache.config.onError==null||s.mutationCache.config.onError(i,s.state.variables,s.state.context,s),Vs().error(i),Promise.resolve().then(function(){return s.options.onError==null?void 0:s.options.onError(i,s.state.variables,s.state.context)}).then(function(){return s.options.onSettled==null?void 0:s.options.onSettled(void 0,i,s.state.variables,s.state.context)}).then(function(){throw s.dispatch({type:"error",error:i}),i})})},r.executeMutation=function(){var s=this,a;return this.retryer=new $s({fn:function(){return s.options.mutationFn?s.options.mutationFn(s.state.variables):Promise.reject("No mutationFn found")},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:(a=this.options.retry)!=null?a:0,retryDelay:this.options.retryDelay}),this.retryer.promise},r.dispatch=function(s){var a=this;this.state=vm(this.state,s),He.batch(function(){a.observers.forEach(function(m){m.onMutationUpdate(s)}),a.mutationCache.notify(a)})},t}();function Em(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function vm(t,r){switch(r.type){case"failed":return Re({},t,{failureCount:t.failureCount+1});case"pause":return Re({},t,{isPaused:!0});case"continue":return Re({},t,{isPaused:!1});case"loading":return Re({},t,{context:r.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:r.variables});case"success":return Re({},t,{data:r.data,error:null,status:"success",isPaused:!1});case"error":return Re({},t,{data:void 0,error:r.error,failureCount:t.failureCount+1,isPaused:!1,status:"error"});case"setState":return Re({},t,r.state);default:return t}}var wm=function(t){Ur(r,t);function r(s){var a;return a=t.call(this)||this,a.config=s||{},a.mutations=[],a.mutationId=0,a}var l=r.prototype;return l.build=function(a,m,n){var i=new xm({mutationCache:this,mutationId:++this.mutationId,options:a.defaultMutationOptions(m),state:n,defaultOptions:m.mutationKey?a.getMutationDefaults(m.mutationKey):void 0,meta:m.meta});return this.add(i),i},l.add=function(a){this.mutations.push(a),this.notify(a)},l.remove=function(a){this.mutations=this.mutations.filter(function(m){return m!==a}),a.cancel(),this.notify(a)},l.clear=function(){var a=this;He.batch(function(){a.mutations.forEach(function(m){a.remove(m)})})},l.getAll=function(){return this.mutations},l.find=function(a){return typeof a.exact>"u"&&(a.exact=!0),this.mutations.find(function(m){return Ql(a,m)})},l.findAll=function(a){return this.mutations.filter(function(m){return Ql(a,m)})},l.notify=function(a){var m=this;He.batch(function(){m.listeners.forEach(function(n){n(a)})})},l.onFocus=function(){this.resumePausedMutations()},l.onOnline=function(){this.resumePausedMutations()},l.resumePausedMutations=function(){var a=this.mutations.filter(function(m){return m.state.isPaused});return He.batch(function(){return a.reduce(function(m,n){return m.then(function(){return n.continue().catch(Ze)})},Promise.resolve())})},r}(jr);function Sm(){return{onFetch:function(r){r.fetchFn=function(){var l,s,a,m,n,i,N=(l=r.fetchOptions)==null||(s=l.meta)==null?void 0:s.refetchPage,u=(a=r.fetchOptions)==null||(m=a.meta)==null?void 0:m.fetchMore,c=u?.pageParam,o=u?.direction==="forward",f=u?.direction==="backward",h=((n=r.state.data)==null?void 0:n.pages)||[],A=((i=r.state.data)==null?void 0:i.pageParams)||[],g=Us(),b=g?.signal,S=A,v=!1,L=r.options.queryFn||function(){return Promise.reject("Missing queryFn")},G=function(Ne,re,de,Ce){return S=Ce?[re].concat(S):[].concat(S,[re]),Ce?[de].concat(Ne):[].concat(Ne,[de])},T=function(Ne,re,de,Ce){if(v)return Promise.reject("Cancelled");if(typeof de>"u"&&!re&&Ne.length)return Promise.resolve(Ne);var ve={queryKey:r.queryKey,signal:b,pageParam:de,meta:r.meta},Pe=L(ve),Ae=Promise.resolve(Pe).then(function(ie){return G(Ne,de,ie,Ce)});if(Rr(Pe)){var We=Ae;We.cancel=Pe.cancel}return Ae},U;if(!h.length)U=T([]);else if(o){var ae=typeof c<"u",k=ae?c:Zl(r.options,h);U=T(h,ae,k)}else if(f){var E=typeof c<"u",x=E?c:Cm(r.options,h);U=T(h,E,x,!0)}else(function(){S=[];var H=typeof r.options.getNextPageParam>"u",Ne=N&&h[0]?N(h[0],0,h):!0;U=Ne?T([],H,A[0]):Promise.resolve(G([],A[0],h[0]));for(var re=function(ve){U=U.then(function(Pe){var Ae=N&&h[ve]?N(h[ve],ve,h):!0;if(Ae){var We=H?A[ve]:Zl(r.options,Pe);return T(Pe,H,We)}return Promise.resolve(G(Pe,A[ve],h[ve]))})},de=1;de<h.length;de++)re(de)})();var w=U.then(function(H){return{pages:H,pageParams:S}}),Y=w;return Y.cancel=function(){v=!0,g?.abort(),Rr(U)&&U.cancel()},w}}}}function Zl(t,r){return t.getNextPageParam==null?void 0:t.getNextPageParam(r[r.length-1],r)}function Cm(t,r){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(r[0],r)}var km=function(){function t(l){l===void 0&&(l={}),this.queryCache=l.queryCache||new ym,this.mutationCache=l.mutationCache||new wm,this.defaultOptions=l.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var r=t.prototype;return r.mount=function(){var s=this;this.unsubscribeFocus=hr.subscribe(function(){hr.isFocused()&&gr.isOnline()&&(s.mutationCache.onFocus(),s.queryCache.onFocus())}),this.unsubscribeOnline=gr.subscribe(function(){hr.isFocused()&&gr.isOnline()&&(s.mutationCache.onOnline(),s.queryCache.onOnline())})},r.unmount=function(){var s,a;(s=this.unsubscribeFocus)==null||s.call(this),(a=this.unsubscribeOnline)==null||a.call(this)},r.isFetching=function(s,a){var m=Dt(s,a),n=m[0];return n.fetching=!0,this.queryCache.findAll(n).length},r.isMutating=function(s){return this.mutationCache.findAll(Re({},s,{fetching:!0})).length},r.getQueryData=function(s,a){var m;return(m=this.queryCache.find(s,a))==null?void 0:m.state.data},r.getQueriesData=function(s){return this.getQueryCache().findAll(s).map(function(a){var m=a.queryKey,n=a.state,i=n.data;return[m,i]})},r.setQueryData=function(s,a,m){var n=Xr(s),i=this.defaultQueryOptions(n);return this.queryCache.build(this,i).setData(a,m)},r.setQueriesData=function(s,a,m){var n=this;return He.batch(function(){return n.getQueryCache().findAll(s).map(function(i){var N=i.queryKey;return[N,n.setQueryData(N,a,m)]})})},r.getQueryState=function(s,a){var m;return(m=this.queryCache.find(s,a))==null?void 0:m.state},r.removeQueries=function(s,a){var m=Dt(s,a),n=m[0],i=this.queryCache;He.batch(function(){i.findAll(n).forEach(function(N){i.remove(N)})})},r.resetQueries=function(s,a,m){var n=this,i=Dt(s,a,m),N=i[0],u=i[1],c=this.queryCache,o=Re({},N,{active:!0});return He.batch(function(){return c.findAll(N).forEach(function(f){f.reset()}),n.refetchQueries(o,u)})},r.cancelQueries=function(s,a,m){var n=this,i=Dt(s,a,m),N=i[0],u=i[1],c=u===void 0?{}:u;typeof c.revert>"u"&&(c.revert=!0);var o=He.batch(function(){return n.queryCache.findAll(N).map(function(f){return f.cancel(c)})});return Promise.all(o).then(Ze).catch(Ze)},r.invalidateQueries=function(s,a,m){var n,i,N,u=this,c=Dt(s,a,m),o=c[0],f=c[1],h=Re({},o,{active:(n=(i=o.refetchActive)!=null?i:o.active)!=null?n:!0,inactive:(N=o.refetchInactive)!=null?N:!1});return He.batch(function(){return u.queryCache.findAll(o).forEach(function(A){A.invalidate()}),u.refetchQueries(h,f)})},r.refetchQueries=function(s,a,m){var n=this,i=Dt(s,a,m),N=i[0],u=i[1],c=He.batch(function(){return n.queryCache.findAll(N).map(function(f){return f.fetch(void 0,Re({},u,{meta:{refetchPage:N?.refetchPage}}))})}),o=Promise.all(c).then(Ze);return u?.throwOnError||(o=o.catch(Ze)),o},r.fetchQuery=function(s,a,m){var n=Xr(s,a,m),i=this.defaultQueryOptions(n);typeof i.retry>"u"&&(i.retry=!1);var N=this.queryCache.build(this,i);return N.isStaleByTime(i.staleTime)?N.fetch(i):Promise.resolve(N.state.data)},r.prefetchQuery=function(s,a,m){return this.fetchQuery(s,a,m).then(Ze).catch(Ze)},r.fetchInfiniteQuery=function(s,a,m){var n=Xr(s,a,m);return n.behavior=Sm(),this.fetchQuery(n)},r.prefetchInfiniteQuery=function(s,a,m){return this.fetchInfiniteQuery(s,a,m).then(Ze).catch(Ze)},r.cancelMutations=function(){var s=this,a=He.batch(function(){return s.mutationCache.getAll().map(function(m){return m.cancel()})});return Promise.all(a).then(Ze).catch(Ze)},r.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},r.executeMutation=function(s){return this.mutationCache.build(this,s).execute()},r.getQueryCache=function(){return this.queryCache},r.getMutationCache=function(){return this.mutationCache},r.getDefaultOptions=function(){return this.defaultOptions},r.setDefaultOptions=function(s){this.defaultOptions=s},r.setQueryDefaults=function(s,a){var m=this.queryDefaults.find(function(n){return Ot(s)===Ot(n.queryKey)});m?m.defaultOptions=a:this.queryDefaults.push({queryKey:s,defaultOptions:a})},r.getQueryDefaults=function(s){var a;return s?(a=this.queryDefaults.find(function(m){return Dr(s,m.queryKey)}))==null?void 0:a.defaultOptions:void 0},r.setMutationDefaults=function(s,a){var m=this.mutationDefaults.find(function(n){return Ot(s)===Ot(n.mutationKey)});m?m.defaultOptions=a:this.mutationDefaults.push({mutationKey:s,defaultOptions:a})},r.getMutationDefaults=function(s){var a;return s?(a=this.mutationDefaults.find(function(m){return Dr(s,m.mutationKey)}))==null?void 0:a.defaultOptions:void 0},r.defaultQueryOptions=function(s){if(s?._defaulted)return s;var a=Re({},this.defaultOptions.queries,this.getQueryDefaults(s?.queryKey),s,{_defaulted:!0});return!a.queryHash&&a.queryKey&&(a.queryHash=Cl(a.queryKey,a)),a},r.defaultQueryObserverOptions=function(s){return this.defaultQueryOptions(s)},r.defaultMutationOptions=function(s){return s?._defaulted?s:Re({},this.defaultOptions.mutations,this.getMutationDefaults(s?.mutationKey),s,{_defaulted:!0})},r.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},t}(),Am=Ma.unstable_batchedUpdates;He.setBatchNotifyFunction(Am);var Pm=console;gm(Pm);var Xl=e.createContext(void 0),Dm=e.createContext(!1);function Rm(t){return t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Xl),window.ReactQueryClientContext):Xl}var Fm=function(r){var l=r.client,s=r.contextSharing,a=s===void 0?!1:s,m=r.children;e.useEffect(function(){return l.mount(),function(){l.unmount()}},[l]);var n=Rm(a);return e.createElement(Dm.Provider,{value:a},e.createElement(n.Provider,{value:l},m))};const Tm={},es=t=>{let r;const l=new Set,s=(c,o)=>{const f=typeof c=="function"?c(r):c;if(!Object.is(f,r)){const h=r;r=o??(typeof f!="object"||f===null)?f:Object.assign({},r,f),l.forEach(A=>A(r,h))}},a=()=>r,N={setState:s,getState:a,getInitialState:()=>u,subscribe:c=>(l.add(c),()=>l.delete(c)),destroy:()=>{(Tm?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),l.clear()}},u=r=t(s,a,N);return N},Im=t=>t?es(t):es;var Ks={exports:{}},Bs={},Gs={exports:{}},zs={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wt=R;function Om(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Lm=typeof Object.is=="function"?Object.is:Om,Mm=Wt.useState,Um=Wt.useEffect,jm=Wt.useLayoutEffect,$m=Wt.useDebugValue;function qm(t,r){var l=r(),s=Mm({inst:{value:l,getSnapshot:r}}),a=s[0].inst,m=s[1];return jm(function(){a.value=l,a.getSnapshot=r,tl(a)&&m({inst:a})},[t,l,r]),Um(function(){return tl(a)&&m({inst:a}),t(function(){tl(a)&&m({inst:a})})},[t]),$m(l),l}function tl(t){var r=t.getSnapshot;t=t.value;try{var l=r();return!Lm(t,l)}catch{return!0}}function Vm(t,r){return r()}var Km=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Vm:qm;zs.useSyncExternalStore=Wt.useSyncExternalStore!==void 0?Wt.useSyncExternalStore:Km;Gs.exports=zs;var Bm=Gs.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qr=R,Gm=Bm;function zm(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Hm=typeof Object.is=="function"?Object.is:zm,Wm=Gm.useSyncExternalStore,Qm=qr.useRef,Jm=qr.useEffect,Ym=qr.useMemo,Zm=qr.useDebugValue;Bs.useSyncExternalStoreWithSelector=function(t,r,l,s,a){var m=Qm(null);if(m.current===null){var n={hasValue:!1,value:null};m.current=n}else n=m.current;m=Ym(function(){function N(h){if(!u){if(u=!0,c=h,h=s(h),a!==void 0&&n.hasValue){var A=n.value;if(a(A,h))return o=A}return o=h}if(A=o,Hm(c,h))return A;var g=s(h);return a!==void 0&&a(A,g)?(c=h,A):(c=h,o=g)}var u=!1,c,o,f=l===void 0?null:l;return[function(){return N(r())},f===null?void 0:function(){return N(f())}]},[r,l,s,a]);var i=Wm(t,m[0],m[1]);return Jm(function(){n.hasValue=!0,n.value=i},[i]),Zm(i),i};Ks.exports=Bs;var Xm=Ks.exports;const en=Ua(Xm),Hs={},{useDebugValue:tn}=e,{useSyncExternalStoreWithSelector:rn}=en;let ts=!1;const ln=t=>t;function sn(t,r=ln,l){(Hs?"production":void 0)!=="production"&&l&&!ts&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ts=!0);const s=rn(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,l);return tn(s),s}const an=t=>{(Hs?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const r=typeof t=="function"?Im(t):t,l=(s,a)=>sn(r,s,a);return Object.assign(l,r),l},Ws=t=>an,mn={};function nn(t,r){let l;try{l=t()}catch{return}return{getItem:a=>{var m;const n=N=>N===null?null:JSON.parse(N,void 0),i=(m=l.getItem(a))!=null?m:null;return i instanceof Promise?i.then(n):n(i)},setItem:(a,m)=>l.setItem(a,JSON.stringify(m,void 0)),removeItem:a=>l.removeItem(a)}}const mr=t=>r=>{try{const l=t(r);return l instanceof Promise?l:{then(s){return mr(s)(l)},catch(s){return this}}}catch(l){return{then(s){return this},catch(s){return mr(s)(l)}}}},on=(t,r)=>(l,s,a)=>{let m={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,S)=>({...S,...b}),...r},n=!1;const i=new Set,N=new Set;let u;try{u=m.getStorage()}catch{}if(!u)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${m.name}', the given storage is currently unavailable.`),l(...b)},s,a);const c=mr(m.serialize),o=()=>{const b=m.partialize({...s()});let S;const v=c({state:b,version:m.version}).then(L=>u.setItem(m.name,L)).catch(L=>{S=L});if(S)throw S;return v},f=a.setState;a.setState=(b,S)=>{f(b,S),o()};const h=t((...b)=>{l(...b),o()},s,a);let A;const g=()=>{var b;if(!u)return;n=!1,i.forEach(v=>v(s()));const S=((b=m.onRehydrateStorage)==null?void 0:b.call(m,s()))||void 0;return mr(u.getItem.bind(u))(m.name).then(v=>{if(v)return m.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==m.version){if(m.migrate)return m.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var L;return A=m.merge(v,(L=s())!=null?L:h),l(A,!0),o()}).then(()=>{S?.(A,void 0),n=!0,N.forEach(v=>v(A))}).catch(v=>{S?.(void 0,v)})};return a.persist={setOptions:b=>{m={...m,...b},b.getStorage&&(u=b.getStorage())},clearStorage:()=>{u?.removeItem(m.name)},getOptions:()=>m,rehydrate:()=>g(),hasHydrated:()=>n,onHydrate:b=>(i.add(b),()=>{i.delete(b)}),onFinishHydration:b=>(N.add(b),()=>{N.delete(b)})},g(),A||h},un=(t,r)=>(l,s,a)=>{let m={storage:nn(()=>localStorage),partialize:g=>g,version:0,merge:(g,b)=>({...b,...g}),...r},n=!1;const i=new Set,N=new Set;let u=m.storage;if(!u)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${m.name}', the given storage is currently unavailable.`),l(...g)},s,a);const c=()=>{const g=m.partialize({...s()});return u.setItem(m.name,{state:g,version:m.version})},o=a.setState;a.setState=(g,b)=>{o(g,b),c()};const f=t((...g)=>{l(...g),c()},s,a);a.getInitialState=()=>f;let h;const A=()=>{var g,b;if(!u)return;n=!1,i.forEach(v=>{var L;return v((L=s())!=null?L:f)});const S=((b=m.onRehydrateStorage)==null?void 0:b.call(m,(g=s())!=null?g:f))||void 0;return mr(u.getItem.bind(u))(m.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==m.version){if(m.migrate)return[!0,m.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var L;const[G,T]=v;if(h=m.merge(T,(L=s())!=null?L:f),l(h,!0),G)return c()}).then(()=>{S?.(h,void 0),h=s(),n=!0,N.forEach(v=>v(h))}).catch(v=>{S?.(void 0,v)})};return a.persist={setOptions:g=>{m={...m,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u?.removeItem(m.name)},getOptions:()=>m,rehydrate:()=>A(),hasHydrated:()=>n,onHydrate:g=>(i.add(g),()=>{i.delete(g)}),onFinishHydration:g=>(N.add(g),()=>{N.delete(g)})},m.skipHydration||A(),h||f},cn=(t,r)=>"getStorage"in r||"serialize"in r||"deserialize"in r?((mn?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),on(t,r)):un(t,r),Qs=cn;function Js(t,r){return function(){return t.apply(r,arguments)}}const{toString:_n}=Object.prototype,{getPrototypeOf:kl}=Object,{iterator:Vr,toStringTag:Ys}=Symbol,Kr=(t=>r=>{const l=_n.call(r);return t[l]||(t[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),dt=t=>(t=t.toLowerCase(),r=>Kr(r)===t),Br=t=>r=>typeof r===t,{isArray:Qt}=Array,nr=Br("undefined");function ur(t){return t!==null&&!nr(t)&&t.constructor!==null&&!nr(t.constructor)&&st(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Zs=dt("ArrayBuffer");function Nn(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&Zs(t.buffer),r}const fn=Br("string"),st=Br("function"),Xs=Br("number"),cr=t=>t!==null&&typeof t=="object",bn=t=>t===!0||t===!1,pr=t=>{if(Kr(t)!=="object")return!1;const r=kl(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Ys in t)&&!(Vr in t)},dn=t=>{if(!cr(t)||ur(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},hn=dt("Date"),gn=dt("File"),pn=dt("Blob"),yn=dt("FileList"),xn=t=>cr(t)&&st(t.pipe),En=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||st(t.append)&&((r=Kr(t))==="formdata"||r==="object"&&st(t.toString)&&t.toString()==="[object FormData]"))},vn=dt("URLSearchParams"),[wn,Sn,Cn,kn]=["ReadableStream","Request","Response","Headers"].map(dt),An=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _r(t,r,{allOwnKeys:l=!1}={}){if(t===null||typeof t>"u")return;let s,a;if(typeof t!="object"&&(t=[t]),Qt(t))for(s=0,a=t.length;s<a;s++)r.call(null,t[s],s,t);else{if(ur(t))return;const m=l?Object.getOwnPropertyNames(t):Object.keys(t),n=m.length;let i;for(s=0;s<n;s++)i=m[s],r.call(null,t[i],i,t)}}function ea(t,r){if(ur(t))return null;r=r.toLowerCase();const l=Object.keys(t);let s=l.length,a;for(;s-- >0;)if(a=l[s],r===a.toLowerCase())return a;return null}const Lt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ta=t=>!nr(t)&&t!==Lt;function fl(){const{caseless:t}=ta(this)&&this||{},r={},l=(s,a)=>{const m=t&&ea(r,a)||a;pr(r[m])&&pr(s)?r[m]=fl(r[m],s):pr(s)?r[m]=fl({},s):Qt(s)?r[m]=s.slice():r[m]=s};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&_r(arguments[s],l);return r}const Pn=(t,r,l,{allOwnKeys:s}={})=>(_r(r,(a,m)=>{l&&st(a)?t[m]=Js(a,l):t[m]=a},{allOwnKeys:s}),t),Dn=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Rn=(t,r,l,s)=>{t.prototype=Object.create(r.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),l&&Object.assign(t.prototype,l)},Fn=(t,r,l,s)=>{let a,m,n;const i={};if(r=r||{},t==null)return r;do{for(a=Object.getOwnPropertyNames(t),m=a.length;m-- >0;)n=a[m],(!s||s(n,t,r))&&!i[n]&&(r[n]=t[n],i[n]=!0);t=l!==!1&&kl(t)}while(t&&(!l||l(t,r))&&t!==Object.prototype);return r},Tn=(t,r,l)=>{t=String(t),(l===void 0||l>t.length)&&(l=t.length),l-=r.length;const s=t.indexOf(r,l);return s!==-1&&s===l},In=t=>{if(!t)return null;if(Qt(t))return t;let r=t.length;if(!Xs(r))return null;const l=new Array(r);for(;r-- >0;)l[r]=t[r];return l},On=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&kl(Uint8Array)),Ln=(t,r)=>{const s=(t&&t[Vr]).call(t);let a;for(;(a=s.next())&&!a.done;){const m=a.value;r.call(t,m[0],m[1])}},Mn=(t,r)=>{let l;const s=[];for(;(l=t.exec(r))!==null;)s.push(l);return s},Un=dt("HTMLFormElement"),jn=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,s,a){return s.toUpperCase()+a}),rs=(({hasOwnProperty:t})=>(r,l)=>t.call(r,l))(Object.prototype),$n=dt("RegExp"),ra=(t,r)=>{const l=Object.getOwnPropertyDescriptors(t),s={};_r(l,(a,m)=>{let n;(n=r(a,m,t))!==!1&&(s[m]=n||a)}),Object.defineProperties(t,s)},qn=t=>{ra(t,(r,l)=>{if(st(t)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const s=t[l];if(st(s)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},Vn=(t,r)=>{const l={},s=a=>{a.forEach(m=>{l[m]=!0})};return Qt(t)?s(t):s(String(t).split(r)),l},Kn=()=>{},Bn=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function Gn(t){return!!(t&&st(t.append)&&t[Ys]==="FormData"&&t[Vr])}const zn=t=>{const r=new Array(10),l=(s,a)=>{if(cr(s)){if(r.indexOf(s)>=0)return;if(ur(s))return s;if(!("toJSON"in s)){r[a]=s;const m=Qt(s)?[]:{};return _r(s,(n,i)=>{const N=l(n,a+1);!nr(N)&&(m[i]=N)}),r[a]=void 0,m}}return s};return l(t,0)},Hn=dt("AsyncFunction"),Wn=t=>t&&(cr(t)||st(t))&&st(t.then)&&st(t.catch),la=((t,r)=>t?setImmediate:r?((l,s)=>(Lt.addEventListener("message",({source:a,data:m})=>{a===Lt&&m===l&&s.length&&s.shift()()},!1),a=>{s.push(a),Lt.postMessage(l,"*")}))(`axios@${Math.random()}`,[]):l=>setTimeout(l))(typeof setImmediate=="function",st(Lt.postMessage)),Qn=typeof queueMicrotask<"u"?queueMicrotask.bind(Lt):typeof process<"u"&&process.nextTick||la,Jn=t=>t!=null&&st(t[Vr]),q={isArray:Qt,isArrayBuffer:Zs,isBuffer:ur,isFormData:En,isArrayBufferView:Nn,isString:fn,isNumber:Xs,isBoolean:bn,isObject:cr,isPlainObject:pr,isEmptyObject:dn,isReadableStream:wn,isRequest:Sn,isResponse:Cn,isHeaders:kn,isUndefined:nr,isDate:hn,isFile:gn,isBlob:pn,isRegExp:$n,isFunction:st,isStream:xn,isURLSearchParams:vn,isTypedArray:On,isFileList:yn,forEach:_r,merge:fl,extend:Pn,trim:An,stripBOM:Dn,inherits:Rn,toFlatObject:Fn,kindOf:Kr,kindOfTest:dt,endsWith:Tn,toArray:In,forEachEntry:Ln,matchAll:Mn,isHTMLForm:Un,hasOwnProperty:rs,hasOwnProp:rs,reduceDescriptors:ra,freezeMethods:qn,toObjectSet:Vn,toCamelCase:jn,noop:Kn,toFiniteNumber:Bn,findKey:ea,global:Lt,isContextDefined:ta,isSpecCompliantForm:Gn,toJSONObject:zn,isAsyncFn:Hn,isThenable:Wn,setImmediate:la,asap:Qn,isIterable:Jn};function ye(t,r,l,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),l&&(this.config=l),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}q.inherits(ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const sa=ye.prototype,aa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{aa[t]={value:t}});Object.defineProperties(ye,aa);Object.defineProperty(sa,"isAxiosError",{value:!0});ye.from=(t,r,l,s,a,m)=>{const n=Object.create(sa);return q.toFlatObject(t,n,function(N){return N!==Error.prototype},i=>i!=="isAxiosError"),ye.call(n,t.message,r,l,s,a),n.cause=t,n.name=t.name,m&&Object.assign(n,m),n};const Yn=null;function bl(t){return q.isPlainObject(t)||q.isArray(t)}function ma(t){return q.endsWith(t,"[]")?t.slice(0,-2):t}function ls(t,r,l){return t?t.concat(r).map(function(a,m){return a=ma(a),!l&&m?"["+a+"]":a}).join(l?".":""):r}function Zn(t){return q.isArray(t)&&!t.some(bl)}const Xn=q.toFlatObject(q,{},null,function(r){return/^is[A-Z]/.test(r)});function Gr(t,r,l){if(!q.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,l=q.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!q.isUndefined(b[g])});const s=l.metaTokens,a=l.visitor||c,m=l.dots,n=l.indexes,N=(l.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(r);if(!q.isFunction(a))throw new TypeError("visitor must be a function");function u(A){if(A===null)return"";if(q.isDate(A))return A.toISOString();if(q.isBoolean(A))return A.toString();if(!N&&q.isBlob(A))throw new ye("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(A)||q.isTypedArray(A)?N&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function c(A,g,b){let S=A;if(A&&!b&&typeof A=="object"){if(q.endsWith(g,"{}"))g=s?g:g.slice(0,-2),A=JSON.stringify(A);else if(q.isArray(A)&&Zn(A)||(q.isFileList(A)||q.endsWith(g,"[]"))&&(S=q.toArray(A)))return g=ma(g),S.forEach(function(L,G){!(q.isUndefined(L)||L===null)&&r.append(n===!0?ls([g],G,m):n===null?g:g+"[]",u(L))}),!1}return bl(A)?!0:(r.append(ls(b,g,m),u(A)),!1)}const o=[],f=Object.assign(Xn,{defaultVisitor:c,convertValue:u,isVisitable:bl});function h(A,g){if(!q.isUndefined(A)){if(o.indexOf(A)!==-1)throw Error("Circular reference detected in "+g.join("."));o.push(A),q.forEach(A,function(S,v){(!(q.isUndefined(S)||S===null)&&a.call(r,S,q.isString(v)?v.trim():v,g,f))===!0&&h(S,g?g.concat(v):[v])}),o.pop()}}if(!q.isObject(t))throw new TypeError("data must be an object");return h(t),r}function ss(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return r[s]})}function Al(t,r){this._pairs=[],t&&Gr(t,this,r)}const na=Al.prototype;na.append=function(r,l){this._pairs.push([r,l])};na.toString=function(r){const l=r?function(s){return r.call(this,s,ss)}:ss;return this._pairs.map(function(a){return l(a[0])+"="+l(a[1])},"").join("&")};function ei(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ia(t,r,l){if(!r)return t;const s=l&&l.encode||ei;q.isFunction(l)&&(l={serialize:l});const a=l&&l.serialize;let m;if(a?m=a(r,l):m=q.isURLSearchParams(r)?r.toString():new Al(r,l).toString(s),m){const n=t.indexOf("#");n!==-1&&(t=t.slice(0,n)),t+=(t.indexOf("?")===-1?"?":"&")+m}return t}class as{constructor(){this.handlers=[]}use(r,l,s){return this.handlers.push({fulfilled:r,rejected:l,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){q.forEach(this.handlers,function(s){s!==null&&r(s)})}}const oa={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ti=typeof URLSearchParams<"u"?URLSearchParams:Al,ri=typeof FormData<"u"?FormData:null,li=typeof Blob<"u"?Blob:null,si={isBrowser:!0,classes:{URLSearchParams:ti,FormData:ri,Blob:li},protocols:["http","https","file","blob","url","data"]},Pl=typeof window<"u"&&typeof document<"u",dl=typeof navigator=="object"&&navigator||void 0,ai=Pl&&(!dl||["ReactNative","NativeScript","NS"].indexOf(dl.product)<0),mi=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ni=Pl&&window.location.href||"http://localhost",ii=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pl,hasStandardBrowserEnv:ai,hasStandardBrowserWebWorkerEnv:mi,navigator:dl,origin:ni},Symbol.toStringTag,{value:"Module"})),Qe={...ii,...si};function oi(t,r){return Gr(t,new Qe.classes.URLSearchParams,{visitor:function(l,s,a,m){return Qe.isNode&&q.isBuffer(l)?(this.append(s,l.toString("base64")),!1):m.defaultVisitor.apply(this,arguments)},...r})}function ui(t){return q.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function ci(t){const r={},l=Object.keys(t);let s;const a=l.length;let m;for(s=0;s<a;s++)m=l[s],r[m]=t[m];return r}function ua(t){function r(l,s,a,m){let n=l[m++];if(n==="__proto__")return!0;const i=Number.isFinite(+n),N=m>=l.length;return n=!n&&q.isArray(a)?a.length:n,N?(q.hasOwnProp(a,n)?a[n]=[a[n],s]:a[n]=s,!i):((!a[n]||!q.isObject(a[n]))&&(a[n]=[]),r(l,s,a[n],m)&&q.isArray(a[n])&&(a[n]=ci(a[n])),!i)}if(q.isFormData(t)&&q.isFunction(t.entries)){const l={};return q.forEachEntry(t,(s,a)=>{r(ui(s),a,l,0)}),l}return null}function _i(t,r,l){if(q.isString(t))try{return(r||JSON.parse)(t),q.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(l||JSON.stringify)(t)}const Nr={transitional:oa,adapter:["xhr","http","fetch"],transformRequest:[function(r,l){const s=l.getContentType()||"",a=s.indexOf("application/json")>-1,m=q.isObject(r);if(m&&q.isHTMLForm(r)&&(r=new FormData(r)),q.isFormData(r))return a?JSON.stringify(ua(r)):r;if(q.isArrayBuffer(r)||q.isBuffer(r)||q.isStream(r)||q.isFile(r)||q.isBlob(r)||q.isReadableStream(r))return r;if(q.isArrayBufferView(r))return r.buffer;if(q.isURLSearchParams(r))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let i;if(m){if(s.indexOf("application/x-www-form-urlencoded")>-1)return oi(r,this.formSerializer).toString();if((i=q.isFileList(r))||s.indexOf("multipart/form-data")>-1){const N=this.env&&this.env.FormData;return Gr(i?{"files[]":r}:r,N&&new N,this.formSerializer)}}return m||a?(l.setContentType("application/json",!1),_i(r)):r}],transformResponse:[function(r){const l=this.transitional||Nr.transitional,s=l&&l.forcedJSONParsing,a=this.responseType==="json";if(q.isResponse(r)||q.isReadableStream(r))return r;if(r&&q.isString(r)&&(s&&!this.responseType||a)){const n=!(l&&l.silentJSONParsing)&&a;try{return JSON.parse(r)}catch(i){if(n)throw i.name==="SyntaxError"?ye.from(i,ye.ERR_BAD_RESPONSE,this,null,this.response):i}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qe.classes.FormData,Blob:Qe.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],t=>{Nr.headers[t]={}});const Ni=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fi=t=>{const r={};let l,s,a;return t&&t.split(`
`).forEach(function(n){a=n.indexOf(":"),l=n.substring(0,a).trim().toLowerCase(),s=n.substring(a+1).trim(),!(!l||r[l]&&Ni[l])&&(l==="set-cookie"?r[l]?r[l].push(s):r[l]=[s]:r[l]=r[l]?r[l]+", "+s:s)}),r},ms=Symbol("internals");function Xt(t){return t&&String(t).trim().toLowerCase()}function yr(t){return t===!1||t==null?t:q.isArray(t)?t.map(yr):String(t)}function bi(t){const r=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=l.exec(t);)r[s[1]]=s[2];return r}const di=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function rl(t,r,l,s,a){if(q.isFunction(s))return s.call(this,r,l);if(a&&(r=l),!!q.isString(r)){if(q.isString(s))return r.indexOf(s)!==-1;if(q.isRegExp(s))return s.test(r)}}function hi(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,l,s)=>l.toUpperCase()+s)}function gi(t,r){const l=q.toCamelCase(" "+r);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+l,{value:function(a,m,n){return this[s].call(this,r,a,m,n)},configurable:!0})})}let at=class{constructor(r){r&&this.set(r)}set(r,l,s){const a=this;function m(i,N,u){const c=Xt(N);if(!c)throw new Error("header name must be a non-empty string");const o=q.findKey(a,c);(!o||a[o]===void 0||u===!0||u===void 0&&a[o]!==!1)&&(a[o||N]=yr(i))}const n=(i,N)=>q.forEach(i,(u,c)=>m(u,c,N));if(q.isPlainObject(r)||r instanceof this.constructor)n(r,l);else if(q.isString(r)&&(r=r.trim())&&!di(r))n(fi(r),l);else if(q.isObject(r)&&q.isIterable(r)){let i={},N,u;for(const c of r){if(!q.isArray(c))throw TypeError("Object iterator must return a key-value pair");i[u=c[0]]=(N=i[u])?q.isArray(N)?[...N,c[1]]:[N,c[1]]:c[1]}n(i,l)}else r!=null&&m(l,r,s);return this}get(r,l){if(r=Xt(r),r){const s=q.findKey(this,r);if(s){const a=this[s];if(!l)return a;if(l===!0)return bi(a);if(q.isFunction(l))return l.call(this,a,s);if(q.isRegExp(l))return l.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,l){if(r=Xt(r),r){const s=q.findKey(this,r);return!!(s&&this[s]!==void 0&&(!l||rl(this,this[s],s,l)))}return!1}delete(r,l){const s=this;let a=!1;function m(n){if(n=Xt(n),n){const i=q.findKey(s,n);i&&(!l||rl(s,s[i],i,l))&&(delete s[i],a=!0)}}return q.isArray(r)?r.forEach(m):m(r),a}clear(r){const l=Object.keys(this);let s=l.length,a=!1;for(;s--;){const m=l[s];(!r||rl(this,this[m],m,r,!0))&&(delete this[m],a=!0)}return a}normalize(r){const l=this,s={};return q.forEach(this,(a,m)=>{const n=q.findKey(s,m);if(n){l[n]=yr(a),delete l[m];return}const i=r?hi(m):String(m).trim();i!==m&&delete l[m],l[i]=yr(a),s[i]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const l=Object.create(null);return q.forEach(this,(s,a)=>{s!=null&&s!==!1&&(l[a]=r&&q.isArray(s)?s.join(", "):s)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,l])=>r+": "+l).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...l){const s=new this(r);return l.forEach(a=>s.set(a)),s}static accessor(r){const s=(this[ms]=this[ms]={accessors:{}}).accessors,a=this.prototype;function m(n){const i=Xt(n);s[i]||(gi(a,n),s[i]=!0)}return q.isArray(r)?r.forEach(m):m(r),this}};at.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(at.prototype,({value:t},r)=>{let l=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(s){this[l]=s}}});q.freezeMethods(at);function ll(t,r){const l=this||Nr,s=r||l,a=at.from(s.headers);let m=s.data;return q.forEach(t,function(i){m=i.call(l,m,a.normalize(),r?r.status:void 0)}),a.normalize(),m}function ca(t){return!!(t&&t.__CANCEL__)}function Jt(t,r,l){ye.call(this,t??"canceled",ye.ERR_CANCELED,r,l),this.name="CanceledError"}q.inherits(Jt,ye,{__CANCEL__:!0});function _a(t,r,l){const s=l.config.validateStatus;!l.status||!s||s(l.status)?t(l):r(new ye("Request failed with status code "+l.status,[ye.ERR_BAD_REQUEST,ye.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}function pi(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function yi(t,r){t=t||10;const l=new Array(t),s=new Array(t);let a=0,m=0,n;return r=r!==void 0?r:1e3,function(N){const u=Date.now(),c=s[m];n||(n=u),l[a]=N,s[a]=u;let o=m,f=0;for(;o!==a;)f+=l[o++],o=o%t;if(a=(a+1)%t,a===m&&(m=(m+1)%t),u-n<r)return;const h=c&&u-c;return h?Math.round(f*1e3/h):void 0}}function xi(t,r){let l=0,s=1e3/r,a,m;const n=(u,c=Date.now())=>{l=c,a=null,m&&(clearTimeout(m),m=null),t(...u)};return[(...u)=>{const c=Date.now(),o=c-l;o>=s?n(u,c):(a=u,m||(m=setTimeout(()=>{m=null,n(a)},s-o)))},()=>a&&n(a)]}const Fr=(t,r,l=3)=>{let s=0;const a=yi(50,250);return xi(m=>{const n=m.loaded,i=m.lengthComputable?m.total:void 0,N=n-s,u=a(N),c=n<=i;s=n;const o={loaded:n,total:i,progress:i?n/i:void 0,bytes:N,rate:u||void 0,estimated:u&&i&&c?(i-n)/u:void 0,event:m,lengthComputable:i!=null,[r?"download":"upload"]:!0};t(o)},l)},ns=(t,r)=>{const l=t!=null;return[s=>r[0]({lengthComputable:l,total:t,loaded:s}),r[1]]},is=t=>(...r)=>q.asap(()=>t(...r)),Ei=Qe.hasStandardBrowserEnv?((t,r)=>l=>(l=new URL(l,Qe.origin),t.protocol===l.protocol&&t.host===l.host&&(r||t.port===l.port)))(new URL(Qe.origin),Qe.navigator&&/(msie|trident)/i.test(Qe.navigator.userAgent)):()=>!0,vi=Qe.hasStandardBrowserEnv?{write(t,r,l,s,a,m){const n=[t+"="+encodeURIComponent(r)];q.isNumber(l)&&n.push("expires="+new Date(l).toGMTString()),q.isString(s)&&n.push("path="+s),q.isString(a)&&n.push("domain="+a),m===!0&&n.push("secure"),document.cookie=n.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function wi(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Si(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function Na(t,r,l){let s=!wi(r);return t&&(s||l==!1)?Si(t,r):r}const os=t=>t instanceof at?{...t}:t;function Vt(t,r){r=r||{};const l={};function s(u,c,o,f){return q.isPlainObject(u)&&q.isPlainObject(c)?q.merge.call({caseless:f},u,c):q.isPlainObject(c)?q.merge({},c):q.isArray(c)?c.slice():c}function a(u,c,o,f){if(q.isUndefined(c)){if(!q.isUndefined(u))return s(void 0,u,o,f)}else return s(u,c,o,f)}function m(u,c){if(!q.isUndefined(c))return s(void 0,c)}function n(u,c){if(q.isUndefined(c)){if(!q.isUndefined(u))return s(void 0,u)}else return s(void 0,c)}function i(u,c,o){if(o in r)return s(u,c);if(o in t)return s(void 0,u)}const N={url:m,method:m,data:m,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:i,headers:(u,c,o)=>a(os(u),os(c),o,!0)};return q.forEach(Object.keys({...t,...r}),function(c){const o=N[c]||a,f=o(t[c],r[c],c);q.isUndefined(f)&&o!==i||(l[c]=f)}),l}const fa=t=>{const r=Vt({},t);let{data:l,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:m,headers:n,auth:i}=r;r.headers=n=at.from(n),r.url=ia(Na(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),i&&n.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let N;if(q.isFormData(l)){if(Qe.hasStandardBrowserEnv||Qe.hasStandardBrowserWebWorkerEnv)n.setContentType(void 0);else if((N=n.getContentType())!==!1){const[u,...c]=N?N.split(";").map(o=>o.trim()).filter(Boolean):[];n.setContentType([u||"multipart/form-data",...c].join("; "))}}if(Qe.hasStandardBrowserEnv&&(s&&q.isFunction(s)&&(s=s(r)),s||s!==!1&&Ei(r.url))){const u=a&&m&&vi.read(m);u&&n.set(a,u)}return r},Ci=typeof XMLHttpRequest<"u",ki=Ci&&function(t){return new Promise(function(l,s){const a=fa(t);let m=a.data;const n=at.from(a.headers).normalize();let{responseType:i,onUploadProgress:N,onDownloadProgress:u}=a,c,o,f,h,A;function g(){h&&h(),A&&A(),a.cancelToken&&a.cancelToken.unsubscribe(c),a.signal&&a.signal.removeEventListener("abort",c)}let b=new XMLHttpRequest;b.open(a.method.toUpperCase(),a.url,!0),b.timeout=a.timeout;function S(){if(!b)return;const L=at.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),T={data:!i||i==="text"||i==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:L,config:t,request:b};_a(function(ae){l(ae),g()},function(ae){s(ae),g()},T),b=null}"onloadend"in b?b.onloadend=S:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(S)},b.onabort=function(){b&&(s(new ye("Request aborted",ye.ECONNABORTED,t,b)),b=null)},b.onerror=function(){s(new ye("Network Error",ye.ERR_NETWORK,t,b)),b=null},b.ontimeout=function(){let G=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const T=a.transitional||oa;a.timeoutErrorMessage&&(G=a.timeoutErrorMessage),s(new ye(G,T.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,t,b)),b=null},m===void 0&&n.setContentType(null),"setRequestHeader"in b&&q.forEach(n.toJSON(),function(G,T){b.setRequestHeader(T,G)}),q.isUndefined(a.withCredentials)||(b.withCredentials=!!a.withCredentials),i&&i!=="json"&&(b.responseType=a.responseType),u&&([f,A]=Fr(u,!0),b.addEventListener("progress",f)),N&&b.upload&&([o,h]=Fr(N),b.upload.addEventListener("progress",o),b.upload.addEventListener("loadend",h)),(a.cancelToken||a.signal)&&(c=L=>{b&&(s(!L||L.type?new Jt(null,t,b):L),b.abort(),b=null)},a.cancelToken&&a.cancelToken.subscribe(c),a.signal&&(a.signal.aborted?c():a.signal.addEventListener("abort",c)));const v=pi(a.url);if(v&&Qe.protocols.indexOf(v)===-1){s(new ye("Unsupported protocol "+v+":",ye.ERR_BAD_REQUEST,t));return}b.send(m||null)})},Ai=(t,r)=>{const{length:l}=t=t?t.filter(Boolean):[];if(r||l){let s=new AbortController,a;const m=function(u){if(!a){a=!0,i();const c=u instanceof Error?u:this.reason;s.abort(c instanceof ye?c:new Jt(c instanceof Error?c.message:c))}};let n=r&&setTimeout(()=>{n=null,m(new ye(`timeout ${r} of ms exceeded`,ye.ETIMEDOUT))},r);const i=()=>{t&&(n&&clearTimeout(n),n=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(m):u.removeEventListener("abort",m)}),t=null)};t.forEach(u=>u.addEventListener("abort",m));const{signal:N}=s;return N.unsubscribe=()=>q.asap(i),N}},Pi=function*(t,r){let l=t.byteLength;if(l<r){yield t;return}let s=0,a;for(;s<l;)a=s+r,yield t.slice(s,a),s=a},Di=async function*(t,r){for await(const l of Ri(t))yield*Pi(l,r)},Ri=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:l,value:s}=await r.read();if(l)break;yield s}}finally{await r.cancel()}},us=(t,r,l,s)=>{const a=Di(t,r);let m=0,n,i=N=>{n||(n=!0,s&&s(N))};return new ReadableStream({async pull(N){try{const{done:u,value:c}=await a.next();if(u){i(),N.close();return}let o=c.byteLength;if(l){let f=m+=o;l(f)}N.enqueue(new Uint8Array(c))}catch(u){throw i(u),u}},cancel(N){return i(N),a.return()}},{highWaterMark:2})},zr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ba=zr&&typeof ReadableStream=="function",Fi=zr&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),da=(t,...r)=>{try{return!!t(...r)}catch{return!1}},Ti=ba&&da(()=>{let t=!1;const r=new Request(Qe.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),cs=64*1024,hl=ba&&da(()=>q.isReadableStream(new Response("").body)),Tr={stream:hl&&(t=>t.body)};zr&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Tr[r]&&(Tr[r]=q.isFunction(t[r])?l=>l[r]():(l,s)=>{throw new ye(`Response type '${r}' is not supported`,ye.ERR_NOT_SUPPORT,s)})})})(new Response);const Ii=async t=>{if(t==null)return 0;if(q.isBlob(t))return t.size;if(q.isSpecCompliantForm(t))return(await new Request(Qe.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(q.isArrayBufferView(t)||q.isArrayBuffer(t))return t.byteLength;if(q.isURLSearchParams(t)&&(t=t+""),q.isString(t))return(await Fi(t)).byteLength},Oi=async(t,r)=>{const l=q.toFiniteNumber(t.getContentLength());return l??Ii(r)},Li=zr&&(async t=>{let{url:r,method:l,data:s,signal:a,cancelToken:m,timeout:n,onDownloadProgress:i,onUploadProgress:N,responseType:u,headers:c,withCredentials:o="same-origin",fetchOptions:f}=fa(t);u=u?(u+"").toLowerCase():"text";let h=Ai([a,m&&m.toAbortSignal()],n),A;const g=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let b;try{if(N&&Ti&&l!=="get"&&l!=="head"&&(b=await Oi(c,s))!==0){let T=new Request(r,{method:"POST",body:s,duplex:"half"}),U;if(q.isFormData(s)&&(U=T.headers.get("content-type"))&&c.setContentType(U),T.body){const[ae,k]=ns(b,Fr(is(N)));s=us(T.body,cs,ae,k)}}q.isString(o)||(o=o?"include":"omit");const S="credentials"in Request.prototype;A=new Request(r,{...f,signal:h,method:l.toUpperCase(),headers:c.normalize().toJSON(),body:s,duplex:"half",credentials:S?o:void 0});let v=await fetch(A,f);const L=hl&&(u==="stream"||u==="response");if(hl&&(i||L&&g)){const T={};["status","statusText","headers"].forEach(E=>{T[E]=v[E]});const U=q.toFiniteNumber(v.headers.get("content-length")),[ae,k]=i&&ns(U,Fr(is(i),!0))||[];v=new Response(us(v.body,cs,ae,()=>{k&&k(),g&&g()}),T)}u=u||"text";let G=await Tr[q.findKey(Tr,u)||"text"](v,t);return!L&&g&&g(),await new Promise((T,U)=>{_a(T,U,{data:G,headers:at.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:A})})}catch(S){throw g&&g(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new ye("Network Error",ye.ERR_NETWORK,t,A),{cause:S.cause||S}):ye.from(S,S&&S.code,t,A)}}),gl={http:Yn,xhr:ki,fetch:Li};q.forEach(gl,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const _s=t=>`- ${t}`,Mi=t=>q.isFunction(t)||t===null||t===!1,ha={getAdapter:t=>{t=q.isArray(t)?t:[t];const{length:r}=t;let l,s;const a={};for(let m=0;m<r;m++){l=t[m];let n;if(s=l,!Mi(l)&&(s=gl[(n=String(l)).toLowerCase()],s===void 0))throw new ye(`Unknown adapter '${n}'`);if(s)break;a[n||"#"+m]=s}if(!s){const m=Object.entries(a).map(([i,N])=>`adapter ${i} `+(N===!1?"is not supported by the environment":"is not available in the build"));let n=r?m.length>1?`since :
`+m.map(_s).join(`
`):" "+_s(m[0]):"as no adapter specified";throw new ye("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return s},adapters:gl};function sl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Jt(null,t)}function Ns(t){return sl(t),t.headers=at.from(t.headers),t.data=ll.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ha.getAdapter(t.adapter||Nr.adapter)(t).then(function(s){return sl(t),s.data=ll.call(t,t.transformResponse,s),s.headers=at.from(s.headers),s},function(s){return ca(s)||(sl(t),s&&s.response&&(s.response.data=ll.call(t,t.transformResponse,s.response),s.response.headers=at.from(s.response.headers))),Promise.reject(s)})}const ga="1.11.0",Hr={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{Hr[t]=function(s){return typeof s===t||"a"+(r<1?"n ":" ")+t}});const fs={};Hr.transitional=function(r,l,s){function a(m,n){return"[Axios v"+ga+"] Transitional option '"+m+"'"+n+(s?". "+s:"")}return(m,n,i)=>{if(r===!1)throw new ye(a(n," has been removed"+(l?" in "+l:"")),ye.ERR_DEPRECATED);return l&&!fs[n]&&(fs[n]=!0,console.warn(a(n," has been deprecated since v"+l+" and will be removed in the near future"))),r?r(m,n,i):!0}};Hr.spelling=function(r){return(l,s)=>(console.warn(`${s} is likely a misspelling of ${r}`),!0)};function Ui(t,r,l){if(typeof t!="object")throw new ye("options must be an object",ye.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let a=s.length;for(;a-- >0;){const m=s[a],n=r[m];if(n){const i=t[m],N=i===void 0||n(i,m,t);if(N!==!0)throw new ye("option "+m+" must be "+N,ye.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new ye("Unknown option "+m,ye.ERR_BAD_OPTION)}}const xr={assertOptions:Ui,validators:Hr},ht=xr.validators;let Ut=class{constructor(r){this.defaults=r||{},this.interceptors={request:new as,response:new as}}async request(r,l){try{return await this._request(r,l)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const m=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?m&&!String(s.stack).endsWith(m.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+m):s.stack=m}catch{}}throw s}}_request(r,l){typeof r=="string"?(l=l||{},l.url=r):l=r||{},l=Vt(this.defaults,l);const{transitional:s,paramsSerializer:a,headers:m}=l;s!==void 0&&xr.assertOptions(s,{silentJSONParsing:ht.transitional(ht.boolean),forcedJSONParsing:ht.transitional(ht.boolean),clarifyTimeoutError:ht.transitional(ht.boolean)},!1),a!=null&&(q.isFunction(a)?l.paramsSerializer={serialize:a}:xr.assertOptions(a,{encode:ht.function,serialize:ht.function},!0)),l.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?l.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:l.allowAbsoluteUrls=!0),xr.assertOptions(l,{baseUrl:ht.spelling("baseURL"),withXsrfToken:ht.spelling("withXSRFToken")},!0),l.method=(l.method||this.defaults.method||"get").toLowerCase();let n=m&&q.merge(m.common,m[l.method]);m&&q.forEach(["delete","get","head","post","put","patch","common"],A=>{delete m[A]}),l.headers=at.concat(n,m);const i=[];let N=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(l)===!1||(N=N&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let c,o=0,f;if(!N){const A=[Ns.bind(this),void 0];for(A.unshift(...i),A.push(...u),f=A.length,c=Promise.resolve(l);o<f;)c=c.then(A[o++],A[o++]);return c}f=i.length;let h=l;for(o=0;o<f;){const A=i[o++],g=i[o++];try{h=A(h)}catch(b){g.call(this,b);break}}try{c=Ns.call(this,h)}catch(A){return Promise.reject(A)}for(o=0,f=u.length;o<f;)c=c.then(u[o++],u[o++]);return c}getUri(r){r=Vt(this.defaults,r);const l=Na(r.baseURL,r.url,r.allowAbsoluteUrls);return ia(l,r.params,r.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(r){Ut.prototype[r]=function(l,s){return this.request(Vt(s||{},{method:r,url:l,data:(s||{}).data}))}});q.forEach(["post","put","patch"],function(r){function l(s){return function(m,n,i){return this.request(Vt(i||{},{method:r,headers:s?{"Content-Type":"multipart/form-data"}:{},url:m,data:n}))}}Ut.prototype[r]=l(),Ut.prototype[r+"Form"]=l(!0)});let ji=class pa{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(m){l=m});const s=this;this.promise.then(a=>{if(!s._listeners)return;let m=s._listeners.length;for(;m-- >0;)s._listeners[m](a);s._listeners=null}),this.promise.then=a=>{let m;const n=new Promise(i=>{s.subscribe(i),m=i}).then(a);return n.cancel=function(){s.unsubscribe(m)},n},r(function(m,n,i){s.reason||(s.reason=new Jt(m,n,i),l(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const l=this._listeners.indexOf(r);l!==-1&&this._listeners.splice(l,1)}toAbortSignal(){const r=new AbortController,l=s=>{r.abort(s)};return this.subscribe(l),r.signal.unsubscribe=()=>this.unsubscribe(l),r.signal}static source(){let r;return{token:new pa(function(a){r=a}),cancel:r}}};function $i(t){return function(l){return t.apply(null,l)}}function qi(t){return q.isObject(t)&&t.isAxiosError===!0}const pl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pl).forEach(([t,r])=>{pl[r]=t});function ya(t){const r=new Ut(t),l=Js(Ut.prototype.request,r);return q.extend(l,Ut.prototype,r,{allOwnKeys:!0}),q.extend(l,r,null,{allOwnKeys:!0}),l.create=function(a){return ya(Vt(t,a))},l}const ue=ya(Nr);ue.Axios=Ut;ue.CanceledError=Jt;ue.CancelToken=ji;ue.isCancel=ca;ue.VERSION=ga;ue.toFormData=Gr;ue.AxiosError=ye;ue.Cancel=ue.CanceledError;ue.all=function(r){return Promise.all(r)};ue.spread=$i;ue.isAxiosError=qi;ue.mergeConfig=Vt;ue.AxiosHeaders=at;ue.formToJSON=t=>ua(q.isHTMLForm(t)?new FormData(t):t);ue.getAdapter=ha.getAdapter;ue.HttpStatusCode=pl;ue.default=ue;const{Axios:_u,AxiosError:Nu,CanceledError:fu,isCancel:bu,CancelToken:du,VERSION:hu,all:gu,Cancel:pu,isAxiosError:yu,spread:xu,toFormData:Eu,AxiosHeaders:vu,HttpStatusCode:wu,formToJSON:Su,getAdapter:Cu,mergeConfig:ku}=ue;ue.interceptors.request.use(t=>(console.log(" Axios Request:",{url:t.url,method:t.method,headers:t.headers,data:t.data,baseURL:t.baseURL}),t),t=>(console.error(" Axios Request Error:",t),Promise.reject(t)));ue.interceptors.response.use(t=>(console.log(" Axios Response:",{status:t.status,statusText:t.statusText,headers:t.headers,data:t.data}),t),t=>(console.error(" Axios Response Error:"),console.error("  Status:",t.response?.status),console.error("  Status Text:",t.response?.statusText),console.error("  Headers:",t.response?.headers),console.error("  Data:",t.response?.data),console.error("  Message:",t.message),console.error("  Config URL:",t.config?.url),console.error("  Full Error:",t),Promise.reject(t)));const Te=Ws()(Qs((t,r)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,login:async(l,s)=>{try{t({isLoading:!0}),console.log(" Login attempt:",{phone:l,apiUrl:"/api",fullUrl:"/api/auth/login"}),console.log(" Request payload:",JSON.stringify({phone:l,password:s})),console.log(" FORCING REAL DATABASE CALLS - All bypasses disabled");const a=await ue.post("/api/auth/login",{phone:l,password:s},{headers:{"Content-Type":"application/json"},timeout:1e4});console.log(" Response status:",a.status),console.log(" Response headers:",a.headers),console.log(" Login success:",a.data);const{user:m,token:n}=a.data;localStorage.setItem("token",n),t({user:m,token:n,isAuthenticated:!0,isLoading:!1})}catch(a){console.error(" Login error:",a),console.error(" Error message:",a.message),console.error(" Error response data:",a.response?.data),console.error(" Error status:",a.response?.status),console.error(" Error status text:",a.response?.statusText),console.error(" Error URL:",a.config?.url),console.error(" Error code:",a.code),console.error(" Error name:",a.name),console.error(" Full error object:",JSON.stringify(a,null,2)),t({isLoading:!1});let m="Login failed";throw a.code==="ERR_NETWORK"||a.name==="AxiosError"&&!a.response?m="Cannot connect to server. Please check if the backend is running.":a.code==="ECONNREFUSED"?m="Connection refused. Server may be down.":a.response?.status===401?m="Invalid phone number or password":a.response?.status===400?m=a.response.data?.error||"Invalid request":a.response?.data?.error?m=a.response.data.error:a.response?.data?.message?m=a.response.data.message:a.message&&a.message!=="[object Object]"&&(m=a.message),console.error(" Final error message:",m),new Error(m)}},loginWithData:(l,s)=>{localStorage.setItem("token",s),t({user:l,token:s,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("token"),t({user:null,token:null,isAuthenticated:!1})},updateUser:l=>{t({user:l})}}),{name:"auth-storage",partialize:t=>({user:t.user,token:t.token,isAuthenticated:t.isAuthenticated})}));var Kt="/app/code/frontend/src/components/ErrorBoundary.tsx";class Vi extends R.Component{state={hasError:!1};static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,l){console.error("Error caught by boundary:",r,l)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",__self:this,__source:{fileName:Kt,lineNumber:33,columnNumber:9}},e.createElement("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6 text-center",__self:this,__source:{fileName:Kt,lineNumber:34,columnNumber:11}},e.createElement("div",{className:"text-red-500 text-6xl mb-4",__self:this,__source:{fileName:Kt,lineNumber:35,columnNumber:13}},""),e.createElement("h1",{className:"text-xl font-semibold text-gray-900 mb-2",__self:this,__source:{fileName:Kt,lineNumber:36,columnNumber:13}},"Something went wrong"),e.createElement("p",{className:"text-gray-600 mb-4",__self:this,__source:{fileName:Kt,lineNumber:39,columnNumber:13}},this.state.error?.message||"An unexpected error occurred"),e.createElement("button",{onClick:()=>{this.setState({hasError:!1,error:void 0}),window.location.reload()},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",__self:this,__source:{fileName:Kt,lineNumber:42,columnNumber:13}},"Reload Page"))):this.props.children}}const Ki=()=>{window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason)}),window.addEventListener("error",t=>{console.error("Global error:",t.error)})},Bi="/api",rt=ue.create({baseURL:Bi,timeout:3e4,headers:{"Content-Type":"application/json"}});rt.interceptors.request.use(t=>{console.group(" API REQUEST"),console.log(" URL:",t.url),console.log(" Method:",t.method?.toUpperCase()),console.log(" Data:",t.data),console.log(" Headers:",{"Content-Type":t.headers["Content-Type"],Authorization:t.headers.Authorization?"[TOKEN PRESENT]":"[NO TOKEN]"}),console.groupEnd();const r=localStorage.getItem("authToken")||localStorage.getItem("token");return r&&(t.headers.Authorization=`Bearer ${r}`),t.metadata={startTime:Date.now()},t});rt.interceptors.response.use(t=>(console.group(" API SUCCESS"),console.log(" URL:",t.config.url),console.log(" Status:",`${t.status} ${t.statusText}`),console.log(" Data:",t.data),console.log(" Duration:",t.config.metadata?.startTime?`${Date.now()-t.config.metadata.startTime}ms`:"Unknown"),console.groupEnd(),t),t=>{const r={url:t.config?.url||"Unknown URL",method:(t.config?.method||"Unknown").toUpperCase(),status:t.response?.status||"No Status",statusText:t.response?.statusText||"No Status Text",data:t.response?.data?JSON.stringify(t.response.data,null,2):"No Response Data",message:t.message||"No Error Message",hostname:window.location.hostname,timestamp:new Date().toISOString()};console.group(" API ERROR DETAILS"),console.error(" Request:",`${r.method} ${r.url}`),console.error(" Status:",`${r.status} - ${r.statusText}`),console.error(" Message:",r.message),console.error(" Response Data:",r.data),console.error(" Timestamp:",r.timestamp),console.error(" Hostname:",r.hostname),console.error(" Full Error Object:",t),console.groupEnd();const l=`API Error: ${r.method} ${r.url} - ${r.status} ${r.statusText} - ${r.message}`;return console.error(" Error Summary:",l),r.status===400?console.warn(" Common 400 causes: Invalid request data, missing required fields, or malformed JSON"):r.status===401?console.warn(" Common 401 causes: Missing or invalid authentication token"):r.status===403?console.warn(" Common 403 causes: Insufficient permissions for this resource"):r.status===404?console.warn(" Common 404 causes: Resource not found or incorrect URL"):r.status===410?console.warn(" 410 Gone: This resource uses an outdated format and is no longer available"):r.status===409?console.warn(" Common 409 causes: Conflict with existing data (duplicate phone/email)"):r.status===500?console.warn(" Common 500 causes: Server-side error, database connection issues"):t.code==="NETWORK_ERROR"&&console.warn(" Network issues: Check internet connection and server availability"),Promise.reject(t)});const It={login:async t=>{console.log(" ATTEMPTING LOGIN with real database:",t.phone);const r=await rt.post("/auth/login",t);return console.log(" LOGIN SUCCESS:",r.data),r.data},register:async t=>{console.log(" ATTEMPTING REGISTRATION with real database");const r=await rt.post("/auth/register",t);return console.log(" REGISTRATION SUCCESS:",r.data),r.data},getProducts:async t=>{const r=t?`/marketplace/products?${t}`:"/marketplace/products";console.log(" FETCHING PRODUCTS from real database:",r);const l=await rt.get(r);return console.log(" PRODUCTS SUCCESS:",l.data.products?.length||l.data.length,"products"),l.data},getProduct:async t=>{if(console.log(" FETCHING SINGLE PRODUCT from real database:",t),!t||t==="undefined"||t==="null"||t.trim()==="")throw new Error("Invalid product ID: ID is empty or undefined");console.log(" Fetching product with ID:",t,"Type:",typeof t);try{const r=await rt.get(`/marketplace/products/${t}`);return console.log(" SINGLE PRODUCT SUCCESS:",r.data),r.data}catch(r){if(r.response?.status===410){const l=r.response.data;throw console.log(" 410 Response handled gracefully - Outdated product link detected:",{productId:t,message:l.message,redirect:l.redirect}),new Error("OUTDATED_PRODUCT_LINK")}throw r}},getCategories:async()=>{console.log(" FETCHING CATEGORIES from real database");const t=await rt.get("/marketplace/categories");return console.log(" CATEGORIES SUCCESS:",t.data),t.data},getCounties:async()=>{console.log(" FETCHING COUNTIES from real database");const t=await rt.get("/marketplace/counties");return console.log(" COUNTIES SUCCESS:",t.data),t.data},getWalletBalance:async()=>{console.log(" FETCHING WALLET BALANCE from real database");const t=await rt.get("/wallet/balance");return console.log(" WALLET SUCCESS:",t.data),t.data},createOrder:async t=>{console.log(" CREATING ORDER in real database");const r=await rt.post("/orders",t);return console.log(" ORDER SUCCESS:",r.data),r.data},getOrders:async()=>{console.log(" FETCHING ORDERS from real database");const t=await rt.get("/orders");return console.log(" ORDERS SUCCESS:",t.data),t.data},getUsers:async()=>{console.log(" FETCHING USERS from real database");const t=await rt.get("/admin/users");return console.log(" USERS SUCCESS:",t.data),t.data},approveUser:async t=>{console.log(" APPROVING USER in real database:",t);const r=await rt.post(`/admin/users/${t}/approve`);return console.log(" USER APPROVAL SUCCESS:",r.data),r.data},get:async t=>{console.log(" GENERIC GET REQUEST to real database:",t);const r=await rt.get(t);return console.log(" GENERIC GET SUCCESS:",r.data),r}},bs={items:[],totalItems:0,totalAmount:0},Bt=t=>{const r=t.reduce((s,a)=>s+a.quantity,0),l=t.reduce((s,a)=>s+(a.pricePerUnit||0)*a.quantity,0);return{totalItems:r,totalAmount:l}},Yt=Ws()(Qs((t,r)=>({cart:bs,isLoading:!1,addToCart:async l=>{try{t({isLoading:!0}),console.log(" Validating product ID:",l.productId,"Type:",typeof l.productId);let s=l.productId;if(!s)throw console.error(" Missing product ID:",l),new Error("Invalid product ID");if(typeof s=="string"){if(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s))throw console.error(" REJECTED UUID product ID:",s),console.log(" This product uses an outdated ID format. Please browse the marketplace for current products."),new Error("This product is no longer available. Please browse the marketplace for current products.");const f=parseInt(s,10);if(isNaN(f)||f<=0)throw console.error(" Invalid string product ID:",s),new Error("Invalid product ID");s=f}else if(typeof s=="number"){if(isNaN(s)||s<=0)throw console.error(" Invalid numeric product ID:",s),new Error("Invalid product ID")}else throw console.error(" Invalid product ID type:",typeof s,s),new Error("Invalid product ID");console.log(" Adding to cart - Product ID:",s,"Type:",typeof s);let a,m=!1;try{const o=await It.getProduct(String(s));o&&o.product&&(a=o.product,m=!0,console.log(" Product data fetched from API successfully"))}catch(o){console.warn(" Could not fetch product from API, using provided data:",o)}if(a||(a={id:s,name:l.name,price_per_unit:l.pricePerUnit,unit:l.unit,stock_quantity:l.maxStock||999,images:l.images||[],farmer_name:l.farmerName,farmer_county:l.farmerCounty,category:l.category},console.log(" Using fallback product data:",a)),m&&a.stock_quantity<=0){F.error("Product is out of stock");return}else m||console.log(" Using cached/fallback data - stock validation skipped");const{cart:n}=r(),i=n.items.findIndex(o=>o.productId===l.productId);let N;if(i>=0){const o=n.items[i],f=Math.min(o.quantity+l.quantity,a.stock_quantity);f>a.stock_quantity&&F.error(`Only ${a.stock_quantity} items available in stock`),N=n.items.map((h,A)=>A===i?{...h,quantity:f,pricePerUnit:a.price_per_unit,name:a.name,unit:a.unit,category:a.category,maxStock:a.stock_quantity,images:a.images||[]}:h)}else{const o={id:`cart-${Date.now()}-${Math.random()}`,productId:s,name:a.name,pricePerUnit:a.price_per_unit,quantity:Math.min(l.quantity,a.stock_quantity),unit:a.unit,category:a.category,maxStock:a.stock_quantity,images:a.images||[],farmerName:a.farmer_name||"Local Farmer",farmerCounty:a.farmer_county||"Kenya"};N=[...n.items,o]}const u=Bt(N),c={items:N,...u};t({cart:c}),F.success("Item added to cart!")}catch(s){console.error("Error adding to cart:",s),console.log("Full error object:",{message:s.message,response:s.response,status:s.response?.status,data:s.response?.data,productId:l.productId});let a="Failed to add item to cart";s.response?.status===400?a="Invalid product - this item may no longer be available":s.response?.status===404?a="Product not found - this item may have been removed":s.message==="Invalid product ID"?a="Cannot add item - invalid product information":s.message==="Product not found in database"?a="Product no longer available in our inventory":s.message&&(a=s.message),F.error(a)}finally{t({isLoading:!1})}},removeFromCart:l=>{const{cart:s}=r(),a=s.items.filter(i=>i.id!==l),m=Bt(a),n={items:a,...m};t({cart:n})},updateQuantity:(l,s)=>{if(s<0)return;const{cart:a}=r();let m;s===0?m=a.items.filter(N=>N.id!==l):m=a.items.map(N=>N.id===l?{...N,quantity:Math.min(s,N.maxStock||999)}:N);const n=Bt(m),i={items:m,...n};t({cart:i})},clearCart:async()=>{t({cart:bs}),F.success("Cart cleared!")},refreshCart:async()=>{const{cart:l}=r(),s=l.items.filter(n=>{const i=n.productId;return!i&&i!==0?(console.warn(" Removing cart item with missing ID:",n.name),!1):!n.pricePerUnit||n.pricePerUnit<=0?(console.warn(" Removing cart item with invalid price:",n.name,"Price:",n.pricePerUnit),!1):typeof i=="string"&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(i)?(console.warn(" Removing cart item with UUID ID (outdated):",n.name,"ID:",i),!1):!0});if(s.length!==l.items.length){const n=l.items.length-s.length;console.log(` Cart cleanup: Removed ${n} invalid items`);const i=Bt(s);t({cart:{items:s,...i}}),n>0&&F.error(`Removed ${n} outdated item${n>1?"s":""} from cart. Please add fresh products from marketplace.`,{duration:5e3})}s.length>0&&await r().validateCartItems();const a=r().cart,m=Bt(a.items);t({cart:{...a,...m}})},validateCartItems:async()=>{try{t({isLoading:!0});const{cart:l}=r();if(l.items.length===0)return;const s=[];let a=!1,m=0;for(const n of l.items)try{if(typeof n.productId=="string"&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(n.productId)){console.log(`Skipping validation for UUID item: ${n.name}`),m++,a=!0;continue}const i=await It.getProduct(String(n.productId));if(i&&i.product){const N=i.product,u={...n,name:N.name,pricePerUnit:N.price_per_unit,unit:N.unit,category:N.category,maxStock:N.stock_quantity,images:N.images||[],farmerName:N.farmer_name||n.farmerName,farmerCounty:N.farmer_county||n.farmerCounty,quantity:Math.min(n.quantity,N.stock_quantity)};(n.pricePerUnit!==N.price_per_unit||n.quantity>N.stock_quantity||n.name!==N.name)&&(a=!0),s.push(u)}else a=!0,m++,console.log(`Product ${n.productId} no longer available`)}catch(i){i.response?.status===404||i.response?.status===410?(console.log(`Product ${n.productId} not found (${i.response?.status})`),a=!0,m++):(console.warn(`Error validating item ${n.productId}, keeping in cart:`,i.message),s.push(n))}if(a){const n=Bt(s),i={items:s,...n};t({cart:i}),m>0&&F.error(`${m} unavailable item(s) removed from cart`)}}catch(l){console.error("Error validating cart items:",l)}finally{t({isLoading:!1})}},getSuggestedProducts:async()=>{try{console.log(" Fetching suggested products for cart reconstruction");const l=await It.getProducts(new URLSearchParams({limit:"8",_t:Date.now().toString(),refresh:"true",nocache:Math.random().toString()})),s=l.products||l||[];console.log(" Fetched suggested products:",s.length);const a=s.filter(m=>{const n=typeof m.id=="number"||typeof m.id=="string"&&/^\d+$/.test(m.id);return n||console.warn(" Filtering out product with invalid ID:",m.id,m.name),n});return console.log(` Validated products: ${a.length}/${s.length} have valid integer IDs`),Array.isArray(a)?a:[]}catch(l){return console.error(" Failed to fetch suggested products:",l),[]}},reconstructCart:async()=>{try{console.log(" Starting cart reconstruction with live data"),t({isLoading:!0}),await r().refreshCart();const{cart:l}=r();l.items.length===0?(console.log(" Cart cleaned and ready for reconstruction"),F.success("Cart updated! Browse fresh products below to rebuild your cart.")):console.log(` Cart reconstruction complete. ${l.items.length} valid items remaining.`)}catch(l){console.error(" Cart reconstruction failed:",l),F.error("Failed to reconstruct cart. Please refresh the page.")}finally{t({isLoading:!1})}}}),{name:"cart-storage"})),Dl=()=>{const t=Yt();return{items:t.cart.items,totalItems:t.cart.totalItems,totalAmount:t.cart.totalAmount,isLoading:t.isLoading,addToCart:async(r,l)=>{if(console.log(" Legacy addToCart called with:",{product:r,quantity:l}),!r||!r.id){console.error(" Product validation failed:",r),F.error("Invalid product - cannot add to cart");return}const s=r.price_per_unit||r.pricePerUnit||0,a=r.stock_quantity||r.stockQuantity||999,m=r.id;console.log(" Extracting values:",{priceValue:s,stockValue:a,idValue:m,priceType:typeof s,stockType:typeof a,idType:typeof m});const n=parseFloat(String(s))||0,i=parseInt(String(a))||999;let N=m;if(typeof m=="string"&&!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(m)){const h=parseInt(m,10);!isNaN(h)&&h>0&&(N=h)}if(!N){console.error(" Invalid product ID - cannot add to cart:"),console.error("ID:",N,"Type:",typeof N),console.error("Original product:",JSON.stringify(r,null,2)),F.error("Invalid product - cannot add to cart");return}const u=isNaN(n)?0:n,c=isNaN(i)?999:i;(u!==n||c!==i)&&console.warn(" Using default values for invalid numeric data:",{originalPrice:n,finalPrice:u,originalStock:i,finalStock:c});const o={productId:N,name:r.name||"Unknown Product",pricePerUnit:u,quantity:Math.max(1,Number(l)||1),unit:r.unit||"kg",images:Array.isArray(r.images)?r.images:[],maxStock:c,farmerName:r.farmer_name||r.farmerName||"Local Farmer",farmerCounty:r.farmer_county||r.farmerCounty||"Kenya",category:r.category||"General"};console.log(" Prepared cart item:",o),await t.addToCart(o)},removeFromCart:t.removeFromCart,updateQuantity:t.updateQuantity,clearCart:t.clearCart,refreshCart:t.refreshCart,repairCart:t.validateCartItems,nuclearReset:t.clearCart,getSuggestedProducts:t.getSuggestedProducts,reconstructCart:t.reconstructCart}};var ge="/app/code/frontend/src/components/layout/Navbar.tsx";function Gi(){const{isAuthenticated:t,user:r,logout:l}=Te(),{cart:s}=Yt(),a=_t(),[m,n]=R.useState(!1),i=()=>{l(),a("/"),n(!1)},N=()=>{switch(r?.role){case"FARMER":return"/farmer/dashboard";case"CUSTOMER":return"/customer/dashboard";case"ADMIN":return"/admin/dashboard";case"DRIVER":return"/driver/dashboard";default:return"/"}},u=()=>{n(!1)};return e.createElement("nav",{className:"bg-white shadow-sm border-b sticky top-0 z-50",__self:this,__source:{fileName:ge,lineNumber:48,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:ge,lineNumber:49,columnNumber:7}},e.createElement("div",{className:"flex justify-between h-16",__self:this,__source:{fileName:ge,lineNumber:50,columnNumber:9}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:ge,lineNumber:52,columnNumber:11}},e.createElement(Se,{to:"/",className:"flex items-center space-x-2",onClick:u,__self:this,__source:{fileName:ge,lineNumber:53,columnNumber:13}},e.createElement("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fd95a59ea13944377b7d57306ce764f34%2Fc3fa5645a777451c8d0a2cfb29e716c1?format=webp&width=800",alt:"Zuasoko Logo",className:"w-8 h-8 rounded-lg object-contain",__self:this,__source:{fileName:ge,lineNumber:58,columnNumber:15}}),e.createElement("span",{className:"text-lg sm:text-xl font-bold text-gray-900",__self:this,__source:{fileName:ge,lineNumber:63,columnNumber:15}},"Zuasoko"))),e.createElement("div",{className:"hidden md:flex items-center space-x-6",__self:this,__source:{fileName:ge,lineNumber:70,columnNumber:11}},e.createElement(Se,{to:"/marketplace",className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",__self:this,__source:{fileName:ge,lineNumber:71,columnNumber:13}},"Marketplace"),t?e.createElement(e.Fragment,null,e.createElement(Se,{to:N(),className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",__self:this,__source:{fileName:ge,lineNumber:80,columnNumber:17}},"Dashboard"),e.createElement(Se,{to:"/cart",className:"relative text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",__self:this,__source:{fileName:ge,lineNumber:88,columnNumber:17}},e.createElement(xt,{className:"w-5 h-5",__self:this,__source:{fileName:ge,lineNumber:92,columnNumber:19}}),s?.totalItems>0&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",__self:this,__source:{fileName:ge,lineNumber:94,columnNumber:21}},s.totalItems)),e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:ge,lineNumber:100,columnNumber:17}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:ge,lineNumber:101,columnNumber:19}},r?.firstName),e.createElement("button",{onClick:i,className:"text-gray-700 hover:text-red-600 p-2 rounded-md transition-colors",__self:this,__source:{fileName:ge,lineNumber:104,columnNumber:19}},e.createElement(Vl,{className:"w-4 h-4",__self:this,__source:{fileName:ge,lineNumber:108,columnNumber:21}})))):e.createElement("div",{className:"flex items-center space-x-3",__self:this,__source:{fileName:ge,lineNumber:113,columnNumber:15}},e.createElement(Se,{to:"/cart",className:"relative text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",__self:this,__source:{fileName:ge,lineNumber:115,columnNumber:17}},e.createElement(xt,{className:"w-5 h-5",__self:this,__source:{fileName:ge,lineNumber:119,columnNumber:19}}),s?.totalItems>0&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",__self:this,__source:{fileName:ge,lineNumber:121,columnNumber:21}},s.totalItems)),e.createElement(Se,{to:"/login",className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",__self:this,__source:{fileName:ge,lineNumber:127,columnNumber:17}},"Login"),e.createElement(Se,{to:"/register",className:"bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:ge,lineNumber:133,columnNumber:17}},"Register"))),e.createElement("div",{className:"md:hidden flex items-center space-x-3",__self:this,__source:{fileName:ge,lineNumber:144,columnNumber:11}},e.createElement(Se,{to:"/cart",className:"relative text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",onClick:u,__self:this,__source:{fileName:ge,lineNumber:146,columnNumber:13}},e.createElement(xt,{className:"w-5 h-5",__self:this,__source:{fileName:ge,lineNumber:151,columnNumber:15}}),s?.totalItems>0&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",__self:this,__source:{fileName:ge,lineNumber:153,columnNumber:17}},s.totalItems)),e.createElement("button",{onClick:()=>n(!m),className:"text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",__self:this,__source:{fileName:ge,lineNumber:160,columnNumber:13}},m?e.createElement(Je,{className:"w-5 h-5",__self:this,__source:{fileName:ge,lineNumber:165,columnNumber:17}}):e.createElement(Ds,{className:"w-5 h-5",__self:this,__source:{fileName:ge,lineNumber:167,columnNumber:17}}))))),m&&e.createElement("div",{className:"md:hidden bg-white border-t border-gray-200",__self:this,__source:{fileName:ge,lineNumber:176,columnNumber:9}},e.createElement("div",{className:"px-2 pt-2 pb-3 space-y-1",__self:this,__source:{fileName:ge,lineNumber:177,columnNumber:11}},e.createElement(Se,{to:"/",className:"flex items-center gap-3 px-3 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 rounded-md transition-colors",onClick:u,__self:this,__source:{fileName:ge,lineNumber:178,columnNumber:13}},e.createElement(Rs,{className:"w-5 h-5",__self:this,__source:{fileName:ge,lineNumber:183,columnNumber:15}}),"Home"),e.createElement(Se,{to:"/marketplace",className:"flex items-center gap-3 px-3 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 rounded-md transition-colors",onClick:u,__self:this,__source:{fileName:ge,lineNumber:187,columnNumber:13}},e.createElement(Fs,{className:"w-5 h-5",__self:this,__source:{fileName:ge,lineNumber:192,columnNumber:15}}),"Marketplace"),t?e.createElement(e.Fragment,null,e.createElement(Se,{to:N(),className:"flex items-center gap-3 px-3 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 rounded-md transition-colors",onClick:u,__self:this,__source:{fileName:ge,lineNumber:198,columnNumber:17}},e.createElement(Va,{className:"w-5 h-5",__self:this,__source:{fileName:ge,lineNumber:203,columnNumber:19}}),"Dashboard"),e.createElement("div",{className:"px-3 py-3 border-t border-gray-200 mt-2",__self:this,__source:{fileName:ge,lineNumber:208,columnNumber:17}},e.createElement("div",{className:"flex items-center gap-3 mb-3",__self:this,__source:{fileName:ge,lineNumber:209,columnNumber:19}},e.createElement("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",__self:this,__source:{fileName:ge,lineNumber:210,columnNumber:21}},e.createElement(ot,{className:"w-4 h-4 text-primary-600",__self:this,__source:{fileName:ge,lineNumber:211,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:ge,lineNumber:213,columnNumber:21}},e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:ge,lineNumber:214,columnNumber:23}},r?.firstName," ",r?.lastName),e.createElement("div",{className:"text-xs text-gray-500 capitalize",__self:this,__source:{fileName:ge,lineNumber:217,columnNumber:23}},r?.role?.toLowerCase()))),e.createElement("button",{onClick:i,className:"flex items-center gap-3 w-full px-3 py-2 text-base font-medium text-red-600 hover:bg-red-50 rounded-md transition-colors",__self:this,__source:{fileName:ge,lineNumber:223,columnNumber:19}},e.createElement(Vl,{className:"w-5 h-5",__self:this,__source:{fileName:ge,lineNumber:227,columnNumber:21}}),"Logout"))):e.createElement("div",{className:"px-3 py-3 border-t border-gray-200 mt-2 space-y-2",__self:this,__source:{fileName:ge,lineNumber:233,columnNumber:15}},e.createElement(Se,{to:"/login",className:"block w-full text-center px-4 py-3 text-base font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",onClick:u,__self:this,__source:{fileName:ge,lineNumber:234,columnNumber:17}},"Login"),e.createElement(Se,{to:"/register",className:"block w-full text-center px-4 py-3 text-base font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-lg transition-colors",onClick:u,__self:this,__source:{fileName:ge,lineNumber:241,columnNumber:17}},"Register")))))}var At="/app/code/frontend/src/components/layout/MobileBottomNav.tsx";function zi(){const{isAuthenticated:t,user:r}=Te(),{cart:l}=Yt(),s=Ps(),a=()=>{const i=[{path:"/",icon:Rs,label:"Home",show:!0},{path:"/marketplace",icon:Fs,label:"Shop",show:!0}];if(!t)return[...i,{path:"/cart",icon:xt,label:"Cart",badge:l?.totalItems||0,show:!0},{path:"/login",icon:ot,label:"Login",show:!0}];switch(r?.role){case"CUSTOMER":return[...i,{path:"/cart",icon:xt,label:"Cart",badge:l?.totalItems||0,show:!0},{path:"/customer/dashboard",icon:ot,label:"Account",show:!0}];case"FARMER":return[...i,{path:"/farmer/consignments",icon:Ht,label:"Consign",show:!0},{path:"/farmer/wallet",icon:ot,label:"Wallet",show:!0}];case"DRIVER":return[...i,{path:"/driver/assignments",icon:Ue,label:"Transport",show:!0},{path:"/driver/warehouse",icon:ot,label:"Warehouse",show:!0}];case"ADMIN":return[...i,{path:"/admin/consignments",icon:Ht,label:"Consign",show:!0},{path:"/admin/analytics",icon:El,label:"Analytics",show:!0}];default:return i}},m=(Array.isArray(a())?a():[]).filter(i=>i?.show),n=i=>!!(i==="/"&&s.pathname==="/"||i!=="/"&&s.pathname.startsWith(i));return e.createElement("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",__self:this,__source:{fileName:At,lineNumber:147,columnNumber:5}},e.createElement("div",{className:"grid grid-cols-4 py-1",__self:this,__source:{fileName:At,lineNumber:148,columnNumber:7}},m.map(i=>{const N=i.icon,u=n(i.path);return e.createElement(Se,{key:i.path,to:i.path,className:`flex flex-col items-center justify-center py-2 px-1 text-xs font-medium transition-colors ${u?"text-primary-600":"text-gray-500 hover:text-gray-700"}`,__self:this,__source:{fileName:At,lineNumber:154,columnNumber:13}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:At,lineNumber:163,columnNumber:15}},e.createElement(N,{className:`w-5 h-5 ${u?"text-primary-600":"text-gray-500"}`,__self:this,__source:{fileName:At,lineNumber:164,columnNumber:17}}),"badge"in i&&i.badge&&i.badge>0&&e.createElement("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center min-w-[16px]",__self:this,__source:{fileName:At,lineNumber:168,columnNumber:19}},i.badge>99?"99+":i.badge)),e.createElement("span",{className:`mt-1 ${u?"text-primary-600":"text-gray-500"}`,__self:this,__source:{fileName:At,lineNumber:173,columnNumber:15}},i.label))})),e.createElement("div",{className:"h-safe-bottom bg-white",__self:this,__source:{fileName:At,lineNumber:184,columnNumber:7}}))}var Nt="/app/code/frontend/src/components/DatabaseStatus.tsx";function Hi(){const[t,r]=R.useState({connected:!1,database:"checking...",loading:!0});if(R.useEffect(()=>{r({connected:!0,database:"connected",loading:!1})},[]),t.loading)return null;const l=t.database==="connected",s=t.database==="demo";return e.createElement("div",{className:"fixed bottom-4 right-4 z-50",__self:this,__source:{fileName:Nt,lineNumber:33,columnNumber:5}},e.createElement("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium shadow-lg ${l?"bg-green-100 text-green-800 border border-green-200":s?"bg-blue-100 text-blue-800 border border-blue-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"}`,__self:this,__source:{fileName:Nt,lineNumber:34,columnNumber:7}},l?e.createElement(e.Fragment,null,e.createElement(Yr,{className:"w-4 h-4",__self:this,__source:{fileName:Nt,lineNumber:45,columnNumber:13}}),e.createElement("span",{__self:this,__source:{fileName:Nt,lineNumber:46,columnNumber:13}},"Render.com DB"),e.createElement(ml,{className:"w-4 h-4",__self:this,__source:{fileName:Nt,lineNumber:47,columnNumber:13}})):s?e.createElement(e.Fragment,null,e.createElement(Yr,{className:"w-4 h-4",__self:this,__source:{fileName:Nt,lineNumber:51,columnNumber:13}}),e.createElement("span",{__self:this,__source:{fileName:Nt,lineNumber:52,columnNumber:13}},"Demo Mode"),e.createElement(ml,{className:"w-4 h-4",__self:this,__source:{fileName:Nt,lineNumber:53,columnNumber:13}})):e.createElement(e.Fragment,null,e.createElement(Yr,{className:"w-4 h-4",__self:this,__source:{fileName:Nt,lineNumber:57,columnNumber:13}}),e.createElement("span",{__self:this,__source:{fileName:Nt,lineNumber:58,columnNumber:13}},"Disconnected"),e.createElement(Ka,{className:"w-4 h-4",__self:this,__source:{fileName:Nt,lineNumber:59,columnNumber:13}}))))}const Wi=()=>{const[t,r]=R.useState(!1),[l,s]=R.useState(null),[a,m]=R.useState(!0),n="/downloads/zuasoko-app.apk",i=()=>{s({version:"1.0.0",versionCode:1,size:"25 MB",releaseDate:new Date().toISOString().split("T")[0],releaseNotes:["Browse fresh produce from local farmers","Secure mobile payments with M-Pesa","Real-time order tracking","Direct farmer-to-consumer marketplace"],features:["Marketplace browsing","Cart management","Secure checkout","Order history","User profiles"],minAndroidVersion:"5.0",targetAndroidVersion:"14.0",permissions:["Internet access","Camera (for profile photos)","Storage (for app data)"],screenshots:["/images/app-screen-1.jpg","/images/app-screen-2.jpg","/images/app-screen-3.jpg"],requirements:{ram:"2 GB",storage:"100 MB",android:"5.0+"}})},N=async()=>{try{console.log(" Checking APK availability at:",n);const c=new AbortController,o=setTimeout(()=>c.abort(),3e3);try{const f=await fetch(n,{method:"HEAD",signal:c.signal,cache:"no-cache",mode:"cors"}).catch(A=>{throw console.log(" Fetch error for APK check:",A.name),A});clearTimeout(o);const h=f.ok;if(console.log(" APK availability check result:",{url:n,status:f.status,ok:f.ok,exists:h}),h)try{const A=new AbortController,g=setTimeout(()=>A.abort(),3e3),b=await fetch("/downloads/app-info.json",{signal:A.signal,cache:"no-cache"});if(clearTimeout(g),b.ok){const S=await b.json();s(S),console.log(" App info loaded successfully")}else console.log(" App info not found, using defaults"),i()}catch(A){console.log(" App info fetch failed, using defaults:",A.name),i()}else console.log(" APK file not found");return r(h),h}catch(f){throw clearTimeout(o),f.name==="AbortError"?console.log(" APK availability check timed out"):console.log(" Network error during APK check:",f.name),f}}catch(c){return console.log(" APK availability check failed:",{error:c.name||"Unknown",message:c.message||"No message",url:n}),i(),r(!1),!1}},u=async()=>{if(console.log(" Download requested, availability:",t),!t){console.log(" Checking availability before download..."),m(!0);const c=await N();if(m(!1),!c){const o=new CustomEvent("show-toast",{detail:{message:"Mobile app is not available for download at this time.",type:"error"}});window.dispatchEvent(o);return}}try{const c=document.createElement("a");c.href=n,c.download="zuasoko-app.apk",c.target="_blank",c.rel="noopener noreferrer",document.body.appendChild(c),c.click(),document.body.removeChild(c),window.gtag&&window.gtag("event","app_download",{event_category:"engagement",event_label:"android_apk",value:1});const o=new CustomEvent("show-toast",{detail:{message:"APK download started! Check your downloads folder.",type:"success"}});window.dispatchEvent(o),console.log(" Download initiated successfully")}catch(c){console.error(" Download failed:",c);const o=new CustomEvent("show-toast",{detail:{message:"Download failed. Please try again later.",type:"error"}});window.dispatchEvent(o)}};return R.useEffect(()=>{const c=async()=>{m(!0),await new Promise(f=>setTimeout(f,1e3));try{await N()}catch{console.log(" Initial availability check failed, will retry on user interaction"),i(),r(!1)}finally{m(!1)}};window.location.hostname.includes("localhost")||window.location.hostname.includes("127.0.0.1")||window.location.hostname.includes("dev"),window.location.search.includes("check-app")?c().catch(f=>{console.log(" Failed to initialize app download check:",f.name),m(!1),r(!1),i()}):(console.log(" Skipping app availability check in development"),m(!1),r(!1),i())},[]),{isAvailable:t,appInfo:l,loading:a,downloadUrl:n,checkAvailability:N,downloadApp:u}};var ne="/app/code/frontend/src/components/ApkInfoModal.tsx";const Qi=({isOpen:t,onClose:r,appInfo:l,onDownload:s})=>{if(!t)return null;const a=m=>m.toLowerCase().includes("internet")?e.createElement(ml,{className:"w-4 h-4",__self:void 0,__source:{fileName:ne,lineNumber:52,columnNumber:14}}):m.toLowerCase().includes("location")?e.createElement(ut,{className:"w-4 h-4",__self:void 0,__source:{fileName:ne,lineNumber:54,columnNumber:14}}):m.toLowerCase().includes("camera")?e.createElement(Ts,{className:"w-4 h-4",__self:void 0,__source:{fileName:ne,lineNumber:56,columnNumber:14}}):m.toLowerCase().includes("storage")?e.createElement(Kl,{className:"w-4 h-4",__self:void 0,__source:{fileName:ne,lineNumber:58,columnNumber:14}}):m.toLowerCase().includes("notification")?e.createElement(jt,{className:"w-4 h-4",__self:void 0,__source:{fileName:ne,lineNumber:60,columnNumber:14}}):e.createElement(Et,{className:"w-4 h-4",__self:void 0,__source:{fileName:ne,lineNumber:61,columnNumber:12}});return e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",__self:void 0,__source:{fileName:ne,lineNumber:65,columnNumber:5}},e.createElement("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",__self:void 0,__source:{fileName:ne,lineNumber:66,columnNumber:7}},e.createElement("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl",__self:void 0,__source:{fileName:ne,lineNumber:68,columnNumber:9}},e.createElement("div",{className:"flex items-center justify-between",__self:void 0,__source:{fileName:ne,lineNumber:69,columnNumber:11}},e.createElement("div",{className:"flex items-center gap-4",__self:void 0,__source:{fileName:ne,lineNumber:70,columnNumber:13}},e.createElement("div",{className:"w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center shadow-lg",__self:void 0,__source:{fileName:ne,lineNumber:71,columnNumber:15}},e.createElement(nl,{className:"w-8 h-8 text-white",__self:void 0,__source:{fileName:ne,lineNumber:72,columnNumber:17}})),e.createElement("div",{__self:void 0,__source:{fileName:ne,lineNumber:74,columnNumber:15}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:void 0,__source:{fileName:ne,lineNumber:75,columnNumber:17}},"Zuasoko Mobile App"),e.createElement("div",{className:"flex items-center gap-4 text-sm text-gray-600",__self:void 0,__source:{fileName:ne,lineNumber:78,columnNumber:17}},e.createElement("span",{__self:void 0,__source:{fileName:ne,lineNumber:79,columnNumber:19}},"Version ",l.version),e.createElement("span",{__self:void 0,__source:{fileName:ne,lineNumber:80,columnNumber:19}},""),e.createElement("span",{__self:void 0,__source:{fileName:ne,lineNumber:81,columnNumber:19}},l.size),e.createElement("span",{__self:void 0,__source:{fileName:ne,lineNumber:82,columnNumber:19}},""),e.createElement("span",{__self:void 0,__source:{fileName:ne,lineNumber:83,columnNumber:19}},"Android ",l.minAndroidVersion,"+")))),e.createElement("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",__self:void 0,__source:{fileName:ne,lineNumber:87,columnNumber:13}},e.createElement(Je,{className:"w-6 h-6 text-gray-600",__self:void 0,__source:{fileName:ne,lineNumber:91,columnNumber:15}})))),e.createElement("div",{className:"p-6 space-y-8",__self:void 0,__source:{fileName:ne,lineNumber:97,columnNumber:9}},e.createElement("div",{className:"text-center",__self:void 0,__source:{fileName:ne,lineNumber:99,columnNumber:11}},e.createElement("button",{onClick:()=>{s(),r()},className:"bg-primary-600 hover:bg-primary-700 text-white px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center gap-3 mx-auto",__self:void 0,__source:{fileName:ne,lineNumber:100,columnNumber:13}},e.createElement(vr,{className:"w-6 h-6",__self:void 0,__source:{fileName:ne,lineNumber:107,columnNumber:15}}),"Download APK (",l.size,")"),e.createElement("p",{className:"text-sm text-gray-600 mt-3",__self:void 0,__source:{fileName:ne,lineNumber:110,columnNumber:13}},"Released on"," ",new Date(l.releaseDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))),e.createElement("div",{__self:void 0,__source:{fileName:ne,lineNumber:121,columnNumber:11}},e.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",__self:void 0,__source:{fileName:ne,lineNumber:122,columnNumber:13}},e.createElement(ir,{className:"w-5 h-5 text-yellow-500",__self:void 0,__source:{fileName:ne,lineNumber:123,columnNumber:15}}),"What's New in v",l.version),e.createElement("div",{className:"space-y-2",__self:void 0,__source:{fileName:ne,lineNumber:126,columnNumber:13}},l.releaseNotes.map((m,n)=>e.createElement("div",{key:n,className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",__self:void 0,__source:{fileName:ne,lineNumber:128,columnNumber:17}},e.createElement($e,{className:"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0",__self:void 0,__source:{fileName:ne,lineNumber:132,columnNumber:19}}),e.createElement("span",{className:"text-gray-700",__self:void 0,__source:{fileName:ne,lineNumber:133,columnNumber:19}},m))))),e.createElement("div",{__self:void 0,__source:{fileName:ne,lineNumber:140,columnNumber:11}},e.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-4",__self:void 0,__source:{fileName:ne,lineNumber:141,columnNumber:13}},"Key Features"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",__self:void 0,__source:{fileName:ne,lineNumber:144,columnNumber:13}},l.features.map((m,n)=>e.createElement("div",{key:n,className:"flex items-start gap-3 p-3 border border-gray-200 rounded-lg",__self:void 0,__source:{fileName:ne,lineNumber:146,columnNumber:17}},e.createElement($e,{className:"w-4 h-4 text-primary-600 mt-1 flex-shrink-0",__self:void 0,__source:{fileName:ne,lineNumber:150,columnNumber:19}}),e.createElement("span",{className:"text-gray-700 text-sm",__self:void 0,__source:{fileName:ne,lineNumber:151,columnNumber:19}},m))))),e.createElement("div",{__self:void 0,__source:{fileName:ne,lineNumber:158,columnNumber:11}},e.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-4",__self:void 0,__source:{fileName:ne,lineNumber:159,columnNumber:13}},"System Requirements"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",__self:void 0,__source:{fileName:ne,lineNumber:162,columnNumber:13}},e.createElement("div",{className:"p-4 bg-blue-50 rounded-lg text-center",__self:void 0,__source:{fileName:ne,lineNumber:163,columnNumber:15}},e.createElement(nl,{className:"w-8 h-8 text-blue-600 mx-auto mb-2",__self:void 0,__source:{fileName:ne,lineNumber:164,columnNumber:17}}),e.createElement("div",{className:"font-semibold text-gray-900",__self:void 0,__source:{fileName:ne,lineNumber:165,columnNumber:17}},"Android Version"),e.createElement("div",{className:"text-sm text-gray-600",__self:void 0,__source:{fileName:ne,lineNumber:168,columnNumber:17}},l.requirements.android)),e.createElement("div",{className:"p-4 bg-green-50 rounded-lg text-center",__self:void 0,__source:{fileName:ne,lineNumber:172,columnNumber:15}},e.createElement(Kl,{className:"w-8 h-8 text-green-600 mx-auto mb-2",__self:void 0,__source:{fileName:ne,lineNumber:173,columnNumber:17}}),e.createElement("div",{className:"font-semibold text-gray-900",__self:void 0,__source:{fileName:ne,lineNumber:174,columnNumber:17}},"Storage"),e.createElement("div",{className:"text-sm text-gray-600",__self:void 0,__source:{fileName:ne,lineNumber:175,columnNumber:17}},l.requirements.storage)),e.createElement("div",{className:"p-4 bg-purple-50 rounded-lg text-center",__self:void 0,__source:{fileName:ne,lineNumber:179,columnNumber:15}},e.createElement(Ke,{className:"w-8 h-8 text-purple-600 mx-auto mb-2",__self:void 0,__source:{fileName:ne,lineNumber:180,columnNumber:17}}),e.createElement("div",{className:"font-semibold text-gray-900",__self:void 0,__source:{fileName:ne,lineNumber:181,columnNumber:17}},"RAM"),e.createElement("div",{className:"text-sm text-gray-600",__self:void 0,__source:{fileName:ne,lineNumber:182,columnNumber:17}},l.requirements.ram)))),e.createElement("div",{__self:void 0,__source:{fileName:ne,lineNumber:190,columnNumber:11}},e.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-4",__self:void 0,__source:{fileName:ne,lineNumber:191,columnNumber:13}},"App Permissions"),e.createElement("div",{className:"space-y-3",__self:void 0,__source:{fileName:ne,lineNumber:194,columnNumber:13}},l.permissions.map((m,n)=>e.createElement("div",{key:n,className:"flex items-start gap-3 p-3 border border-gray-200 rounded-lg",__self:void 0,__source:{fileName:ne,lineNumber:196,columnNumber:17}},e.createElement("div",{className:"p-2 bg-gray-100 rounded-lg flex-shrink-0",__self:void 0,__source:{fileName:ne,lineNumber:200,columnNumber:19}},a(m)),e.createElement("div",{__self:void 0,__source:{fileName:ne,lineNumber:203,columnNumber:19}},e.createElement("div",{className:"font-medium text-gray-900",__self:void 0,__source:{fileName:ne,lineNumber:204,columnNumber:21}},m.split(" - ")[0]),m.includes(" - ")&&e.createElement("div",{className:"text-sm text-gray-600 mt-1",__self:void 0,__source:{fileName:ne,lineNumber:208,columnNumber:23}},m.split(" - ")[1])))))),e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",__self:void 0,__source:{fileName:ne,lineNumber:219,columnNumber:11}},e.createElement("div",{className:"flex items-start gap-3",__self:void 0,__source:{fileName:ne,lineNumber:220,columnNumber:13}},e.createElement(Et,{className:"w-5 h-5 text-yellow-600 mt-0.5",__self:void 0,__source:{fileName:ne,lineNumber:221,columnNumber:15}}),e.createElement("div",{__self:void 0,__source:{fileName:ne,lineNumber:222,columnNumber:15}},e.createElement("h4",{className:"font-semibold text-yellow-800 mb-2",__self:void 0,__source:{fileName:ne,lineNumber:223,columnNumber:17}},"Security Notice"),e.createElement("p",{className:"text-sm text-yellow-700",__self:void 0,__source:{fileName:ne,lineNumber:226,columnNumber:17}},'This APK is signed and verified by Zuasoko. Before installing, make sure to enable "Install from unknown sources" in your Android settings. Only download from this official source to ensure security and authenticity.')))),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",__self:void 0,__source:{fileName:ne,lineNumber:237,columnNumber:11}},e.createElement("h4",{className:"font-semibold text-blue-800 mb-3",__self:void 0,__source:{fileName:ne,lineNumber:238,columnNumber:13}},"Installation Instructions"),e.createElement("ol",{className:"text-sm text-blue-700 space-y-2",__self:void 0,__source:{fileName:ne,lineNumber:241,columnNumber:13}},e.createElement("li",{className:"flex items-start gap-2",__self:void 0,__source:{fileName:ne,lineNumber:242,columnNumber:15}},e.createElement("span",{className:"bg-blue-200 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",__self:void 0,__source:{fileName:ne,lineNumber:243,columnNumber:17}},"1"),"Download the APK file by clicking the download button above"),e.createElement("li",{className:"flex items-start gap-2",__self:void 0,__source:{fileName:ne,lineNumber:248,columnNumber:15}},e.createElement("span",{className:"bg-blue-200 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",__self:void 0,__source:{fileName:ne,lineNumber:249,columnNumber:17}},"2"),'Go to Settings  Security  Enable "Unknown Sources" or "Install unknown apps"'),e.createElement("li",{className:"flex items-start gap-2",__self:void 0,__source:{fileName:ne,lineNumber:255,columnNumber:15}},e.createElement("span",{className:"bg-blue-200 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",__self:void 0,__source:{fileName:ne,lineNumber:256,columnNumber:17}},"3"),'Open the downloaded APK file and tap "Install"'),e.createElement("li",{className:"flex items-start gap-2",__self:void 0,__source:{fileName:ne,lineNumber:261,columnNumber:15}},e.createElement("span",{className:"bg-blue-200 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",__self:void 0,__source:{fileName:ne,lineNumber:262,columnNumber:17}},"4"),"Open the Zuasoko app and log in with your account"))))))};var I="/app/code/frontend/src/pages/HomePage.tsx";function Ji(){const{isAuthenticated:t,user:r}=Te(),[l,s]=R.useState(!1),[a,m]=R.useState(!1),{isAvailable:n,appInfo:i,loading:N,downloadApp:u}=Wi(),c=[{icon:e.createElement(Pt,{className:"w-8 h-8 text-primary-600",__self:this,__source:{fileName:I,lineNumber:39,columnNumber:13}}),title:"Fresh Produce",description:"Direct from farmers to your table, ensuring maximum freshness and quality."},{icon:e.createElement(et,{className:"w-8 h-8 text-primary-600",__self:this,__source:{fileName:I,lineNumber:45,columnNumber:13}}),title:"Support Farmers",description:"Help local farmers get fair prices for their hard work and dedication."},{icon:e.createElement(Ue,{className:"w-8 h-8 text-primary-600",__self:this,__source:{fileName:I,lineNumber:51,columnNumber:13}}),title:"Fast Delivery",description:"Quick and reliable delivery service to get your orders to you fresh."},{icon:e.createElement(ir,{className:"w-8 h-8 text-primary-600",__self:this,__source:{fileName:I,lineNumber:57,columnNumber:13}}),title:"Quality Assured",description:"All produce is quality-checked before delivery to ensure satisfaction."}],o=[{icon:e.createElement(jt,{className:"w-6 h-6 text-primary-600",__self:this,__source:{fileName:I,lineNumber:66,columnNumber:13}}),title:"Push Notifications",description:"Stay updated on orders, deliveries, and fresh produce availability"},{icon:e.createElement(ut,{className:"w-6 h-6 text-primary-600",__self:this,__source:{fileName:I,lineNumber:72,columnNumber:13}}),title:"Live Tracking",description:"Track your deliveries in real-time from farm to your doorstep"},{icon:e.createElement(Ke,{className:"w-6 h-6 text-primary-600",__self:this,__source:{fileName:I,lineNumber:78,columnNumber:13}}),title:"Quick Orders",description:"Reorder your favorites with just one tap"},{icon:e.createElement(mt,{className:"w-6 h-6 text-primary-600",__self:this,__source:{fileName:I,lineNumber:83,columnNumber:13}}),title:"Mobile Payments",description:"Secure M-Pesa integration for seamless transactions"}],f=[{role:"Admin",phone:"+254712345678",description:"Manage users, approve farmers, view analytics",icon:e.createElement(Et,{className:"w-5 h-5",__self:this,__source:{fileName:I,lineNumber:94,columnNumber:13}}),color:"bg-red-100 text-red-800 border-red-200"},{role:"Farmer",phone:"+254734567890",description:"Create consignments, manage produce listings",icon:e.createElement(Pt,{className:"w-5 h-5",__self:this,__source:{fileName:I,lineNumber:101,columnNumber:13}}),color:"bg-green-100 text-green-800 border-green-200"},{role:"Customer",phone:"+254756789012",description:"Browse marketplace, place orders, track deliveries",icon:e.createElement(et,{className:"w-5 h-5",__self:this,__source:{fileName:I,lineNumber:108,columnNumber:13}}),color:"bg-blue-100 text-blue-800 border-blue-200"},{role:"Driver",phone:"+254778901234",description:"Manage deliveries, update delivery status",icon:e.createElement(Ue,{className:"w-5 h-5",__self:this,__source:{fileName:I,lineNumber:115,columnNumber:13}}),color:"bg-purple-100 text-purple-800 border-purple-200"}],h=()=>{switch(r?.role){case"FARMER":return"/farmer/dashboard";case"CUSTOMER":return"/customer/dashboard";case"ADMIN":return"/admin/dashboard";case"DRIVER":return"/driver/dashboard";default:return"/marketplace"}};return e.createElement("div",{className:"min-h-screen bg-white",__self:this,__source:{fileName:I,lineNumber:136,columnNumber:5}},e.createElement("section",{className:"bg-gradient-to-br from-primary-50 to-primary-100 py-20",__self:this,__source:{fileName:I,lineNumber:138,columnNumber:7}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:I,lineNumber:139,columnNumber:9}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:I,lineNumber:140,columnNumber:11}},e.createElement("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",__self:this,__source:{fileName:I,lineNumber:141,columnNumber:13}},"Welcome to ",e.createElement("span",{className:"text-primary-600",__self:this,__source:{fileName:I,lineNumber:142,columnNumber:26}},"Zuasoko")),e.createElement("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 max-w-3xl mx-auto",__self:this,__source:{fileName:I,lineNumber:144,columnNumber:13}},"Connecting farmers and customers across Kenya. Fresh produce, fair prices, and sustainable agriculture for everyone."),e.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",__self:this,__source:{fileName:I,lineNumber:149,columnNumber:13}},t?e.createElement(Se,{to:h(),className:"bg-primary-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:I,lineNumber:151,columnNumber:17}},"Go to Dashboard"):e.createElement(e.Fragment,null,e.createElement(Se,{to:"/marketplace",className:"bg-primary-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:I,lineNumber:159,columnNumber:19}},"Browse Marketplace"),e.createElement(Se,{to:"/register",className:"bg-white text-primary-600 px-8 py-3 rounded-lg text-lg font-semibold border-2 border-primary-600 hover:bg-primary-50 transition-colors",__self:this,__source:{fileName:I,lineNumber:165,columnNumber:19}},"Join Now"))),!t&&e.createElement("div",{className:"max-w-2xl mx-auto",__self:this,__source:{fileName:I,lineNumber:177,columnNumber:15}},e.createElement("button",{onClick:()=>s(!l),className:"flex items-center justify-center gap-2 mx-auto text-sm text-gray-600 hover:text-gray-800 transition-colors",__self:this,__source:{fileName:I,lineNumber:178,columnNumber:17}},e.createElement(Ba,{className:"w-4 h-4",__self:this,__source:{fileName:I,lineNumber:182,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:I,lineNumber:183,columnNumber:19}},"View Demo Credentials"),l?e.createElement(Ga,{className:"w-4 h-4",__self:this,__source:{fileName:I,lineNumber:185,columnNumber:21}}):e.createElement(za,{className:"w-4 h-4",__self:this,__source:{fileName:I,lineNumber:187,columnNumber:21}})),l&&e.createElement("div",{className:"mt-4 p-4 bg-white rounded-lg border border-gray-200 shadow-sm",__self:this,__source:{fileName:I,lineNumber:192,columnNumber:19}},e.createElement("h3",{className:"text-sm font-semibold text-gray-900 mb-3 text-center",__self:this,__source:{fileName:I,lineNumber:193,columnNumber:21}},"Demo Account Access"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",__self:this,__source:{fileName:I,lineNumber:196,columnNumber:21}},f.map((A,g)=>e.createElement("div",{key:g,className:`p-3 rounded-lg border ${A.color} text-xs`,__self:this,__source:{fileName:I,lineNumber:198,columnNumber:25}},e.createElement("div",{className:"flex items-center gap-2 mb-1",__self:this,__source:{fileName:I,lineNumber:202,columnNumber:27}},A.icon,e.createElement("span",{className:"font-semibold",__self:this,__source:{fileName:I,lineNumber:204,columnNumber:29}},A.role)),e.createElement("div",{className:"font-mono text-xs mb-1",__self:this,__source:{fileName:I,lineNumber:208,columnNumber:27}},A.phone),e.createElement("div",{className:"text-xs opacity-80",__self:this,__source:{fileName:I,lineNumber:211,columnNumber:27}},A.description)))),e.createElement("div",{className:"text-center mt-3 text-xs text-gray-600",__self:this,__source:{fileName:I,lineNumber:217,columnNumber:21}},"Password for all accounts:"," ",e.createElement("span",{className:"font-mono font-semibold",__self:this,__source:{fileName:I,lineNumber:219,columnNumber:23}},"password123")),e.createElement("div",{className:"text-center mt-2",__self:this,__source:{fileName:I,lineNumber:223,columnNumber:21}},e.createElement(Se,{to:"/login",className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 font-medium",__self:this,__source:{fileName:I,lineNumber:224,columnNumber:23}},e.createElement(Et,{className:"w-3 h-3",__self:this,__source:{fileName:I,lineNumber:228,columnNumber:25}}),"Login to any demo account"))))))),e.createElement("section",{className:"py-20",__self:this,__source:{fileName:I,lineNumber:241,columnNumber:7}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:I,lineNumber:242,columnNumber:9}},e.createElement("div",{className:"text-center mb-16",__self:this,__source:{fileName:I,lineNumber:243,columnNumber:11}},e.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:I,lineNumber:244,columnNumber:13}},"Why Choose Zuasoko?"),e.createElement("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",__self:this,__source:{fileName:I,lineNumber:247,columnNumber:13}},"We're revolutionizing agriculture in Kenya by creating direct connections between farmers and customers.")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",__self:this,__source:{fileName:I,lineNumber:253,columnNumber:11}},c.map((A,g)=>e.createElement("div",{key:g,className:"text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow",__self:this,__source:{fileName:I,lineNumber:255,columnNumber:15}},e.createElement("div",{className:"flex justify-center mb-4",__self:this,__source:{fileName:I,lineNumber:259,columnNumber:17}},A.icon),e.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-2",__self:this,__source:{fileName:I,lineNumber:260,columnNumber:17}},A.title),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:I,lineNumber:263,columnNumber:17}},A.description)))))),e.createElement("section",{className:"bg-gradient-to-br from-gray-50 to-gray-100 py-20",__self:this,__source:{fileName:I,lineNumber:271,columnNumber:7}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:I,lineNumber:272,columnNumber:9}},e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",__self:this,__source:{fileName:I,lineNumber:273,columnNumber:11}},e.createElement("div",{className:"space-y-8",__self:this,__source:{fileName:I,lineNumber:275,columnNumber:13}},e.createElement("div",{className:"text-center lg:text-left",__self:this,__source:{fileName:I,lineNumber:276,columnNumber:15}},e.createElement("div",{className:"inline-flex items-center gap-2 bg-primary-100 text-primary-700 px-4 py-2 rounded-full text-sm font-medium mb-4",__self:this,__source:{fileName:I,lineNumber:277,columnNumber:17}},e.createElement(nl,{className:"w-4 h-4",__self:this,__source:{fileName:I,lineNumber:278,columnNumber:19}}),"Now Available on Mobile"),e.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:I,lineNumber:281,columnNumber:17}},"Take Zuasoko"," ",e.createElement("span",{className:"text-primary-600",__self:this,__source:{fileName:I,lineNumber:283,columnNumber:19}},"Anywhere")),e.createElement("p",{className:"text-xl text-gray-600 mb-8",__self:this,__source:{fileName:I,lineNumber:285,columnNumber:17}},"Access fresh produce, manage your farm, or track deliveries on the go. Our mobile app brings the complete Zuasoko experience to your smartphone.")),e.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",__self:this,__source:{fileName:I,lineNumber:293,columnNumber:15}},e.createElement("button",{onClick:()=>{n?u():alert(`Android app coming soon! 

We're putting the finishing touches on our mobile app. Stay tuned for the official release!`)},disabled:N,className:`group px-6 py-3 rounded-xl flex items-center gap-3 transition-all duration-300 transform hover:scale-105 shadow-lg ${n?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-900 hover:bg-gray-800 text-white"} ${N?"opacity-50 cursor-not-allowed":""}`,__self:this,__source:{fileName:I,lineNumber:294,columnNumber:17}},e.createElement("div",{className:"bg-white p-1 rounded",__self:this,__source:{fileName:I,lineNumber:311,columnNumber:19}},N?e.createElement("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin",__self:this,__source:{fileName:I,lineNumber:313,columnNumber:23}}):e.createElement(Ha,{className:"w-6 h-6 text-gray-900",__self:this,__source:{fileName:I,lineNumber:315,columnNumber:23}})),e.createElement("div",{className:"text-left",__self:this,__source:{fileName:I,lineNumber:318,columnNumber:19}},e.createElement("div",{className:"text-xs text-gray-300",__self:this,__source:{fileName:I,lineNumber:319,columnNumber:21}},n?"DOWNLOAD":"GET IT ON"),e.createElement("div",{className:"text-lg font-semibold",__self:this,__source:{fileName:I,lineNumber:322,columnNumber:21}},n?"Direct APK":"Google Play"),n&&i&&e.createElement("div",{className:"text-xs text-gray-300",__self:this,__source:{fileName:I,lineNumber:326,columnNumber:23}},"v",i.version,"  ",i.size)),e.createElement(vr,{className:"w-4 h-4 ml-2 group-hover:animate-bounce",__self:this,__source:{fileName:I,lineNumber:331,columnNumber:19}}),n&&e.createElement("div",{className:"bg-green-400 text-green-900 px-2 py-1 rounded text-xs font-bold ml-2",__self:this,__source:{fileName:I,lineNumber:333,columnNumber:21}},"READY")),e.createElement("a",{href:"#",className:"group bg-gray-900 text-white px-6 py-3 rounded-xl flex items-center gap-3 hover:bg-gray-800 transition-all duration-300 transform hover:scale-105 shadow-lg opacity-60 cursor-not-allowed",onClick:A=>{A.preventDefault(),alert(`iOS app coming soon! 

We're working hard to bring Zuasoko to the App Store. Keep an eye out for updates!`)},__self:this,__source:{fileName:I,lineNumber:339,columnNumber:17}},e.createElement("div",{className:"bg-white p-1 rounded",__self:this,__source:{fileName:I,lineNumber:349,columnNumber:19}},e.createElement(Wa,{className:"w-6 h-6 text-gray-900",__self:this,__source:{fileName:I,lineNumber:350,columnNumber:21}})),e.createElement("div",{className:"text-left",__self:this,__source:{fileName:I,lineNumber:352,columnNumber:19}},e.createElement("div",{className:"text-xs text-gray-300",__self:this,__source:{fileName:I,lineNumber:353,columnNumber:21}},"Download on the"),e.createElement("div",{className:"text-lg font-semibold",__self:this,__source:{fileName:I,lineNumber:354,columnNumber:21}},"App Store")),e.createElement("div",{className:"bg-yellow-500 text-yellow-900 px-2 py-1 rounded text-xs font-bold ml-2",__self:this,__source:{fileName:I,lineNumber:356,columnNumber:19}},"SOON"))),n&&i&&e.createElement("div",{className:"text-center mt-6",__self:this,__source:{fileName:I,lineNumber:364,columnNumber:17}},e.createElement("button",{onClick:()=>m(!0),className:"text-primary-600 hover:text-primary-700 font-medium text-sm border border-primary-300 hover:border-primary-500 px-4 py-2 rounded-lg transition-colors",__self:this,__source:{fileName:I,lineNumber:365,columnNumber:19}},"View App Details & Permissions")),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",__self:this,__source:{fileName:I,lineNumber:375,columnNumber:15}},o.map((A,g)=>e.createElement("div",{key:g,className:"flex items-start gap-3 p-4 bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:I,lineNumber:377,columnNumber:19}},e.createElement("div",{className:"flex-shrink-0 p-2 bg-primary-50 rounded-lg",__self:this,__source:{fileName:I,lineNumber:381,columnNumber:21}},A.icon),e.createElement("div",{__self:this,__source:{fileName:I,lineNumber:384,columnNumber:21}},e.createElement("h4",{className:"font-semibold text-gray-900 mb-1",__self:this,__source:{fileName:I,lineNumber:385,columnNumber:23}},A.title),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:I,lineNumber:388,columnNumber:23}},A.description)))))),e.createElement("div",{className:"relative",__self:this,__source:{fileName:I,lineNumber:398,columnNumber:13}},e.createElement("div",{className:"relative mx-auto w-64 h-96 lg:w-80 lg:h-[480px]",__self:this,__source:{fileName:I,lineNumber:400,columnNumber:15}},e.createElement("div",{className:"absolute inset-0 bg-gray-900 rounded-[2.5rem] shadow-2xl",__self:this,__source:{fileName:I,lineNumber:402,columnNumber:17}},e.createElement("div",{className:"absolute inset-2 bg-white rounded-[2rem] overflow-hidden",__self:this,__source:{fileName:I,lineNumber:403,columnNumber:19}},e.createElement("div",{className:"bg-primary-600 h-8 flex items-center justify-between px-4",__self:this,__source:{fileName:I,lineNumber:405,columnNumber:21}},e.createElement("div",{className:"text-white text-xs font-medium",__self:this,__source:{fileName:I,lineNumber:406,columnNumber:23}},"9:41"),e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:I,lineNumber:407,columnNumber:23}},e.createElement("div",{className:"w-1 h-1 bg-white rounded-full",__self:this,__source:{fileName:I,lineNumber:408,columnNumber:25}}),e.createElement("div",{className:"w-1 h-1 bg-white rounded-full",__self:this,__source:{fileName:I,lineNumber:409,columnNumber:25}}),e.createElement("div",{className:"w-1 h-1 bg-white rounded-full",__self:this,__source:{fileName:I,lineNumber:410,columnNumber:25}}))),e.createElement("div",{className:"p-4 space-y-4",__self:this,__source:{fileName:I,lineNumber:415,columnNumber:21}},e.createElement("div",{className:"flex items-center gap-3 mb-6",__self:this,__source:{fileName:I,lineNumber:416,columnNumber:23}},e.createElement("div",{className:"w-10 h-10 bg-primary-600 rounded-xl flex items-center justify-center",__self:this,__source:{fileName:I,lineNumber:417,columnNumber:25}},e.createElement(Pt,{className:"w-6 h-6 text-white",__self:this,__source:{fileName:I,lineNumber:418,columnNumber:27}})),e.createElement("div",{__self:this,__source:{fileName:I,lineNumber:420,columnNumber:25}},e.createElement("div",{className:"font-bold text-gray-900",__self:this,__source:{fileName:I,lineNumber:421,columnNumber:27}},"Zuasoko"),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:I,lineNumber:422,columnNumber:27}},"Fresh from farm"))),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:I,lineNumber:429,columnNumber:23}},e.createElement("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center gap-3",__self:this,__source:{fileName:I,lineNumber:430,columnNumber:25}},e.createElement("div",{className:"w-12 h-12 bg-green-200 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:I,lineNumber:431,columnNumber:27}},e.createElement(Pt,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:I,lineNumber:432,columnNumber:29}})),e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:I,lineNumber:434,columnNumber:27}},e.createElement("div",{className:"font-medium text-sm",__self:this,__source:{fileName:I,lineNumber:435,columnNumber:29}},"Organic Tomatoes"),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:I,lineNumber:438,columnNumber:29}},"Fresh from Nakuru"),e.createElement("div",{className:"text-primary-600 font-bold text-sm",__self:this,__source:{fileName:I,lineNumber:441,columnNumber:29}},"KES 120/kg"))),e.createElement("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center gap-3",__self:this,__source:{fileName:I,lineNumber:447,columnNumber:25}},e.createElement("div",{className:"w-12 h-12 bg-orange-200 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:I,lineNumber:448,columnNumber:27}},e.createElement(Pt,{className:"w-6 h-6 text-orange-600",__self:this,__source:{fileName:I,lineNumber:449,columnNumber:29}})),e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:I,lineNumber:451,columnNumber:27}},e.createElement("div",{className:"font-medium text-sm",__self:this,__source:{fileName:I,lineNumber:452,columnNumber:29}},"Fresh Carrots"),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:I,lineNumber:455,columnNumber:29}},"Direct from farm"),e.createElement("div",{className:"text-primary-600 font-bold text-sm",__self:this,__source:{fileName:I,lineNumber:458,columnNumber:29}},"KES 80/kg"))),e.createElement("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center gap-3",__self:this,__source:{fileName:I,lineNumber:464,columnNumber:25}},e.createElement("div",{className:"w-12 h-12 bg-purple-200 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:I,lineNumber:465,columnNumber:27}},e.createElement(Pt,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:I,lineNumber:466,columnNumber:29}})),e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:I,lineNumber:468,columnNumber:27}},e.createElement("div",{className:"font-medium text-sm",__self:this,__source:{fileName:I,lineNumber:469,columnNumber:29}},"Spinach Bunch"),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:I,lineNumber:472,columnNumber:29}},"Locally grown"),e.createElement("div",{className:"text-primary-600 font-bold text-sm",__self:this,__source:{fileName:I,lineNumber:475,columnNumber:29}},"KES 50/bunch")))),e.createElement("div",{className:"absolute bottom-4 left-4 right-4 bg-white border border-gray-200 rounded-lg p-2",__self:this,__source:{fileName:I,lineNumber:483,columnNumber:23}},e.createElement("div",{className:"flex justify-around",__self:this,__source:{fileName:I,lineNumber:484,columnNumber:25}},e.createElement("div",{className:"p-2 bg-primary-600 rounded-lg",__self:this,__source:{fileName:I,lineNumber:485,columnNumber:27}},e.createElement(Pt,{className:"w-4 h-4 text-white",__self:this,__source:{fileName:I,lineNumber:486,columnNumber:29}})),e.createElement("div",{className:"p-2",__self:this,__source:{fileName:I,lineNumber:488,columnNumber:27}},e.createElement(ut,{className:"w-4 h-4 text-gray-400",__self:this,__source:{fileName:I,lineNumber:489,columnNumber:29}})),e.createElement("div",{className:"p-2",__self:this,__source:{fileName:I,lineNumber:491,columnNumber:27}},e.createElement(jt,{className:"w-4 h-4 text-gray-400",__self:this,__source:{fileName:I,lineNumber:492,columnNumber:29}})),e.createElement("div",{className:"p-2",__self:this,__source:{fileName:I,lineNumber:494,columnNumber:27}},e.createElement(et,{className:"w-4 h-4 text-gray-400",__self:this,__source:{fileName:I,lineNumber:495,columnNumber:29}})))))))),e.createElement("div",{className:"mt-8 text-center",__self:this,__source:{fileName:I,lineNumber:505,columnNumber:15}},e.createElement("div",{className:"inline-block p-4 bg-white rounded-xl shadow-lg border border-gray-200",__self:this,__source:{fileName:I,lineNumber:506,columnNumber:17}},e.createElement("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center mb-3",__self:this,__source:{fileName:I,lineNumber:507,columnNumber:19}},e.createElement(Qa,{className:"w-12 h-12 text-gray-600",__self:this,__source:{fileName:I,lineNumber:508,columnNumber:21}})),e.createElement("div",{className:"text-sm font-medium text-gray-900 mb-1",__self:this,__source:{fileName:I,lineNumber:510,columnNumber:19}},"Scan to Download"),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:I,lineNumber:513,columnNumber:19}},"Coming Soon"))),e.createElement("div",{className:"absolute -top-4 -left-4 w-8 h-8 bg-primary-200 rounded-full animate-pulse",__self:this,__source:{fileName:I,lineNumber:518,columnNumber:15}}),e.createElement("div",{className:"absolute -bottom-8 -right-8 w-12 h-12 bg-green-200 rounded-full animate-pulse delay-300",__self:this,__source:{fileName:I,lineNumber:519,columnNumber:15}}),e.createElement("div",{className:"absolute top-1/2 -right-6 w-6 h-6 bg-yellow-200 rounded-full animate-pulse delay-700",__self:this,__source:{fileName:I,lineNumber:520,columnNumber:15}}))))),t&&r?.role==="ADMIN"&&e.createElement("section",{className:"bg-red-50 py-12",__self:this,__source:{fileName:I,lineNumber:528,columnNumber:9}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:I,lineNumber:529,columnNumber:11}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:I,lineNumber:530,columnNumber:13}},e.createElement("div",{className:"inline-flex items-center gap-2 mb-4",__self:this,__source:{fileName:I,lineNumber:531,columnNumber:15}},e.createElement(Et,{className:"w-6 h-6 text-red-600",__self:this,__source:{fileName:I,lineNumber:532,columnNumber:17}}),e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:I,lineNumber:533,columnNumber:17}},"Admin Dashboard")),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:I,lineNumber:537,columnNumber:15}},"Welcome back, Administrator. Manage your platform efficiently."),e.createElement("div",{className:"flex flex-wrap justify-center gap-4",__self:this,__source:{fileName:I,lineNumber:540,columnNumber:15}},e.createElement(Se,{to:"/admin/dashboard",className:"bg-red-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-red-700 transition-colors",__self:this,__source:{fileName:I,lineNumber:541,columnNumber:17}},"View Dashboard"),e.createElement(Se,{to:"/admin/users",className:"bg-white text-red-600 px-6 py-2 rounded-lg font-medium border border-red-600 hover:bg-red-50 transition-colors",__self:this,__source:{fileName:I,lineNumber:547,columnNumber:17}},"Manage Users"),e.createElement(Se,{to:"/admin/analytics",className:"bg-white text-red-600 px-6 py-2 rounded-lg font-medium border border-red-600 hover:bg-red-50 transition-colors",__self:this,__source:{fileName:I,lineNumber:553,columnNumber:17}},"View Analytics"))))),e.createElement("section",{className:"bg-primary-600 py-16",__self:this,__source:{fileName:I,lineNumber:566,columnNumber:7}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",__self:this,__source:{fileName:I,lineNumber:567,columnNumber:9}},e.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",__self:this,__source:{fileName:I,lineNumber:568,columnNumber:11}},"Ready to Get Started?"),e.createElement("p",{className:"text-xl text-primary-100 mb-8 max-w-2xl mx-auto",__self:this,__source:{fileName:I,lineNumber:571,columnNumber:11}},"Join thousands of farmers and customers who are already part of the Zuasoko community."),!t&&e.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",__self:this,__source:{fileName:I,lineNumber:577,columnNumber:13}},e.createElement(Se,{to:"/register",className:"bg-white text-primary-600 px-8 py-3 rounded-lg text-lg font-semibold hover:bg-gray-100 transition-colors",__self:this,__source:{fileName:I,lineNumber:578,columnNumber:15}},"Register Now"),e.createElement(Se,{to:"/login",className:"bg-transparent text-white px-8 py-3 rounded-lg text-lg font-semibold border-2 border-white hover:bg-white hover:text-primary-600 transition-colors",__self:this,__source:{fileName:I,lineNumber:584,columnNumber:15}},"Login")))),a&&i&&e.createElement(Qi,{isOpen:a,onClose:()=>m(!1),appInfo:i,onDownload:u,__self:this,__source:{fileName:I,lineNumber:597,columnNumber:9}}))}var le="/app/code/frontend/src/pages/marketplace/MarketplacePage.tsx";function Yi(){const[t,r]=R.useState([]),[l,s]=R.useState([]),[a,m]=R.useState([]),[n,i]=R.useState(!0),[N,u]=R.useState({category:"",county:"",search:"",minPrice:"",maxPrice:"",featured:!1}),[c,o]=R.useState(!1),[f,h]=R.useState({page:1,limit:12,total:0,totalPages:0}),{addToCart:A,isLoading:g}=Dl(),{user:b,isAuthenticated:S}=Te(),v=async(k=1)=>{try{i(!0),console.log(" FETCHING PRODUCTS - Page:",k,"Filters:",N);const E=new URLSearchParams({page:k.toString(),limit:f.limit.toString(),...N.category&&{category:N.category},...N.county&&{county:N.county},...N.search&&{search:N.search},...N.minPrice&&{minPrice:N.minPrice},...N.maxPrice&&{maxPrice:N.maxPrice},...N.featured&&{featured:"true"},_t:Date.now().toString(),refresh:"true",nocache:Math.random().toString()}),x=await It.getProducts(E);console.log(" PRODUCTS RESPONSE:",x),x.products&&console.log(" PRODUCT IDS:",x.products.map(H=>({id:H.id,type:typeof H.id,name:H.name})));const w=x.products||x;console.log(" RAW PRODUCTS DATA:",w);const Y=Array.isArray(w)?w.filter(H=>(console.log(" Checking product:",{id:H?.id,name:H?.name,type:typeof H?.id,fullProduct:H}),H?!H.id&&H.id!==0?(console.warn(" Filtering out product with missing ID:",H),!1):(console.log(" Product accepted:",{id:H.id,name:H.name}),!0):(console.warn(" Filtering out null/undefined product"),!1))):[];console.log(" Product filtering results:",{raw:w.length,valid:Y.length,filtered:w.length-Y.length,validProducts:Y}),r(Y),x.pagination?h(H=>({...H,...x.pagination,page:k})):h(H=>({...H,page:k,total:x.products?.length||x.length||0,totalPages:1}))}catch(E){console.error(" FAILED TO FETCH PRODUCTS:",E),F.error("Failed to load products from database")}finally{i(!1)}},L=async()=>{try{console.log(" FETCHING METADATA from real database");const[k,E]=await Promise.all([It.getCategories(),It.getCounties()]);console.log(" CATEGORIES RESPONSE:",k),console.log(" COUNTIES RESPONSE:",E),s(k.categories||k||[]),m(E.counties||E||[])}catch(k){console.error(" FAILED TO FETCH METADATA:",k),F.error("Failed to load categories and counties from database")}};R.useEffect(()=>{L()},[]),R.useEffect(()=>{v(1)},[N]),R.useEffect(()=>{const k=setTimeout(()=>{v(1)},1e3);return()=>clearTimeout(k)},[]);const G=(k,E)=>{u(x=>({...x,[k]:E}))},T=async k=>{try{if(console.log(" Marketplace adding to cart:",k),console.log(" Product ID details:",{id:k.id,type:typeof k.id,hasId:!!k.id,isNumber:typeof k.id=="number",isValidNumber:!isNaN(Number(k.id))}),!k||!k.id){console.error(" Product validation failed:",{product:k,hasProduct:!!k,hasId:!!k?.id}),F.error("Invalid product - cannot add to cart");return}await A(k,1),F.success(`Added ${k.name} to cart`)}catch(E){console.error("Failed to add to cart:",E),F.error("Failed to add item to cart")}},U=()=>{u({category:"",county:"",search:"",minPrice:"",maxPrice:"",featured:!1})},ae=k=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(k);return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:le,lineNumber:248,columnNumber:5}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:le,lineNumber:250,columnNumber:7}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:le,lineNumber:251,columnNumber:9}},e.createElement("div",{__self:this,__source:{fileName:le,lineNumber:252,columnNumber:11}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2",__self:this,__source:{fileName:le,lineNumber:253,columnNumber:13}},"Fresh Marketplace"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:le,lineNumber:256,columnNumber:13}},"Discover fresh produce directly from local farmers")),e.createElement("button",{onClick:async()=>{try{localStorage.removeItem("cart-storage"),sessionStorage.removeItem("cart-storage"),b?.role==="ADMIN"?F.success("Cart reset successfully!"):F.success("Cart reset successfully!"),window.location.reload()}catch{F.success("Cart reset successfully! Page reloading..."),window.location.reload()}},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center",__self:this,__source:{fileName:le,lineNumber:262,columnNumber:11}}," Reset Everything"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-8",__self:this,__source:{fileName:le,lineNumber:292,columnNumber:7}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-center lg:space-x-4 space-y-4 lg:space-y-0",__self:this,__source:{fileName:le,lineNumber:293,columnNumber:9}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:le,lineNumber:295,columnNumber:11}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:le,lineNumber:296,columnNumber:13}},e.createElement(or,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400",__self:this,__source:{fileName:le,lineNumber:297,columnNumber:15}}),e.createElement("input",{type:"text",placeholder:"Search products...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.search,onChange:k=>G("search",k.target.value),__self:this,__source:{fileName:le,lineNumber:298,columnNumber:15}}))),e.createElement("div",{className:"flex flex-wrap gap-2",__self:this,__source:{fileName:le,lineNumber:309,columnNumber:11}},e.createElement("button",{onClick:()=>G("featured",!N.featured),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${N.featured?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,__self:this,__source:{fileName:le,lineNumber:310,columnNumber:13}},e.createElement(ir,{className:`w-4 h-4 inline mr-1 ${N.featured?"fill-current":""}`,__self:this,__source:{fileName:le,lineNumber:318,columnNumber:15}}),"Featured"),e.createElement("button",{onClick:()=>o(!c),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-medium transition-colors",__self:this,__source:{fileName:le,lineNumber:324,columnNumber:13}},e.createElement(Ja,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:le,lineNumber:328,columnNumber:15}}),"Filters"))),c&&e.createElement("div",{className:"mt-6 pt-6 border-t border-gray-200",__self:this,__source:{fileName:le,lineNumber:336,columnNumber:11}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",__self:this,__source:{fileName:le,lineNumber:337,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:le,lineNumber:339,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:le,lineNumber:340,columnNumber:17}},"Category"),e.createElement("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.category,onChange:k=>G("category",k.target.value),__self:this,__source:{fileName:le,lineNumber:343,columnNumber:17}},e.createElement("option",{value:"",__self:this,__source:{fileName:le,lineNumber:350,columnNumber:19}},"All Categories"),(Array.isArray(l)?l:[]).map(k=>e.createElement("option",{key:k,value:k,__self:this,__source:{fileName:le,lineNumber:352,columnNumber:21}},k)))),e.createElement("div",{__self:this,__source:{fileName:le,lineNumber:360,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:le,lineNumber:361,columnNumber:17}},"County"),e.createElement("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.county,onChange:k=>G("county",k.target.value),__self:this,__source:{fileName:le,lineNumber:364,columnNumber:17}},e.createElement("option",{value:"",__self:this,__source:{fileName:le,lineNumber:369,columnNumber:19}},"All Counties"),(Array.isArray(a)?a:[]).map(k=>e.createElement("option",{key:k,value:k,__self:this,__source:{fileName:le,lineNumber:371,columnNumber:21}},k)))),e.createElement("div",{__self:this,__source:{fileName:le,lineNumber:379,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:le,lineNumber:380,columnNumber:17}},"Min Price (KES)"),e.createElement("input",{type:"number",placeholder:"0",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.minPrice,onChange:k=>G("minPrice",k.target.value),__self:this,__source:{fileName:le,lineNumber:383,columnNumber:17}})),e.createElement("div",{__self:this,__source:{fileName:le,lineNumber:394,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:le,lineNumber:395,columnNumber:17}},"Max Price (KES)"),e.createElement("input",{type:"number",placeholder:"1000",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N.maxPrice,onChange:k=>G("maxPrice",k.target.value),__self:this,__source:{fileName:le,lineNumber:398,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex justify-end",__self:this,__source:{fileName:le,lineNumber:410,columnNumber:13}},e.createElement("button",{onClick:U,className:"text-gray-600 hover:text-gray-900 text-sm font-medium",__self:this,__source:{fileName:le,lineNumber:411,columnNumber:15}},"Clear All Filters")))),e.createElement("div",{className:"flex justify-between items-center mb-6",__self:this,__source:{fileName:le,lineNumber:423,columnNumber:7}},e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:le,lineNumber:424,columnNumber:9}},n?"Loading...":`Showing ${t.length} of ${f.total} products`),f.totalPages>1&&e.createElement("div",{className:"text-sm text-gray-600",__self:this,__source:{fileName:le,lineNumber:431,columnNumber:11}},"Page ",f.page," of ",f.totalPages)),n?e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",__self:this,__source:{fileName:le,lineNumber:439,columnNumber:9}},[...Array(8)].map((k,E)=>e.createElement("div",{key:E,className:"bg-white rounded-lg shadow-sm border overflow-hidden animate-pulse",__self:this,__source:{fileName:le,lineNumber:441,columnNumber:13}},e.createElement("div",{className:"h-48 bg-gray-200",__self:this,__source:{fileName:le,lineNumber:445,columnNumber:15}}),e.createElement("div",{className:"p-4",__self:this,__source:{fileName:le,lineNumber:446,columnNumber:15}},e.createElement("div",{className:"h-4 bg-gray-200 rounded mb-2",__self:this,__source:{fileName:le,lineNumber:447,columnNumber:17}}),e.createElement("div",{className:"h-3 bg-gray-200 rounded mb-2",__self:this,__source:{fileName:le,lineNumber:448,columnNumber:17}}),e.createElement("div",{className:"h-6 bg-gray-200 rounded",__self:this,__source:{fileName:le,lineNumber:449,columnNumber:17}}))))):t.length===0?e.createElement("div",{className:"text-center py-16",__self:this,__source:{fileName:le,lineNumber:455,columnNumber:9}},e.createElement("div",{className:"text-gray-400 text-6xl mb-4",__self:this,__source:{fileName:le,lineNumber:456,columnNumber:11}},""),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:le,lineNumber:457,columnNumber:11}},"No products found"),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:le,lineNumber:460,columnNumber:11}},"Try adjusting your search or filter criteria"),e.createElement("button",{onClick:U,className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:le,lineNumber:463,columnNumber:11}},"Clear Filters")):e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",__self:this,__source:{fileName:le,lineNumber:471,columnNumber:9}},(Array.isArray(t)?t:[]).map(k=>e.createElement("div",{key:k.id,className:"bg-white rounded-lg shadow-sm border overflow-hidden hover:shadow-md transition-shadow",__self:this,__source:{fileName:le,lineNumber:473,columnNumber:13}},e.createElement("div",{className:"relative h-48 bg-gray-200",__self:this,__source:{fileName:le,lineNumber:478,columnNumber:15}},k.images&&k.images.length>0?e.createElement("img",{src:k.images[0],alt:k.name,className:"w-full h-full object-cover",onError:E=>{E.currentTarget.src="/api/placeholder/300/200?text="+encodeURIComponent(k.name)},__self:this,__source:{fileName:le,lineNumber:480,columnNumber:19}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400",__self:this,__source:{fileName:le,lineNumber:491,columnNumber:19}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:le,lineNumber:492,columnNumber:21}},e.createElement(ct,{className:"w-8 h-8 mx-auto mb-2",__self:this,__source:{fileName:le,lineNumber:493,columnNumber:23}}),e.createElement("span",{className:"text-sm",__self:this,__source:{fileName:le,lineNumber:494,columnNumber:23}},k.name))),k.stock_quantity<10&&k.stock_quantity>0&&e.createElement("div",{className:"absolute top-2 right-2 bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",__self:this,__source:{fileName:le,lineNumber:503,columnNumber:21}},"Low Stock"),k.stock_quantity===0&&e.createElement("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",__self:this,__source:{fileName:le,lineNumber:509,columnNumber:19}},e.createElement("span",{className:"text-white font-medium",__self:this,__source:{fileName:le,lineNumber:510,columnNumber:21}},"Out of Stock"))),e.createElement("div",{className:"p-4",__self:this,__source:{fileName:le,lineNumber:516,columnNumber:15}},e.createElement("div",{className:"flex items-start justify-between mb-2",__self:this,__source:{fileName:le,lineNumber:517,columnNumber:17}},e.createElement("h3",{className:"font-semibold text-gray-900 text-sm line-clamp-2",__self:this,__source:{fileName:le,lineNumber:518,columnNumber:19}},k.name),e.createElement("button",{className:"text-gray-400 hover:text-red-500 transition-colors ml-2",__self:this,__source:{fileName:le,lineNumber:521,columnNumber:19}},e.createElement(vl,{className:"w-4 h-4",__self:this,__source:{fileName:le,lineNumber:522,columnNumber:21}}))),e.createElement("p",{className:"text-gray-600 text-xs mb-2 line-clamp-2",__self:this,__source:{fileName:le,lineNumber:526,columnNumber:17}},k.description),e.createElement("div",{className:"flex items-center text-xs text-gray-500 mb-3",__self:this,__source:{fileName:le,lineNumber:530,columnNumber:17}},e.createElement(ut,{className:"w-3 h-3 mr-1",__self:this,__source:{fileName:le,lineNumber:531,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:le,lineNumber:532,columnNumber:19}},k.farmer_county||"Unknown"),e.createElement("span",{className:"mx-2",__self:this,__source:{fileName:le,lineNumber:535,columnNumber:19}},""),e.createElement("span",{__self:this,__source:{fileName:le,lineNumber:536,columnNumber:19}},k.farmer_name||"Local Farmer")),e.createElement("div",{className:"flex flex-wrap gap-1 mb-3",__self:this,__source:{fileName:le,lineNumber:542,columnNumber:17}},e.createElement("span",{className:"bg-green-100 text-green-600 px-2 py-1 rounded-full text-xs",__self:this,__source:{fileName:le,lineNumber:543,columnNumber:19}},k.category)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:le,lineNumber:548,columnNumber:17}},e.createElement("div",{__self:this,__source:{fileName:le,lineNumber:549,columnNumber:19}},e.createElement("div",{className:"text-lg font-bold text-gray-900",__self:this,__source:{fileName:le,lineNumber:550,columnNumber:21}},ae(k.price_per_unit)),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:le,lineNumber:553,columnNumber:21}},"per ",k.unit)),e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:le,lineNumber:558,columnNumber:19}},e.createElement(Se,{to:`/marketplace/product/${k.id}`,className:"bg-gray-100 text-gray-700 px-2 py-2 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium flex items-center",onClick:()=>console.log(" Navigating to product:",k.id,"Type:",typeof k.id),__self:this,__source:{fileName:le,lineNumber:559,columnNumber:21}},e.createElement(ct,{className:"w-4 h-4",__self:this,__source:{fileName:le,lineNumber:564,columnNumber:23}})),k.stock_quantity>0?e.createElement("button",{onClick:()=>T(k),disabled:g,className:"bg-primary-600 text-white px-3 py-2 rounded-lg hover:bg-primary-700 disabled:opacity-50 transition-colors text-sm font-medium flex items-center space-x-1",__self:this,__source:{fileName:le,lineNumber:568,columnNumber:23}},e.createElement(xt,{className:"w-4 h-4",__self:this,__source:{fileName:le,lineNumber:573,columnNumber:25}}),e.createElement("span",{__self:this,__source:{fileName:le,lineNumber:574,columnNumber:25}},"Add to Cart")):e.createElement("button",{disabled:!0,className:"bg-gray-300 text-gray-500 px-3 py-2 rounded-lg text-sm font-medium flex items-center space-x-1 cursor-not-allowed",__self:this,__source:{fileName:le,lineNumber:577,columnNumber:23}},e.createElement("span",{__self:this,__source:{fileName:le,lineNumber:581,columnNumber:25}},"Out of Stock")))))))),f.totalPages>1&&e.createElement("div",{className:"mt-8 flex justify-center",__self:this,__source:{fileName:le,lineNumber:594,columnNumber:9}},e.createElement("div",{className:"flex space-x-1",__self:this,__source:{fileName:le,lineNumber:595,columnNumber:11}},e.createElement("button",{onClick:()=>v(f.page-1),disabled:f.page===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:le,lineNumber:596,columnNumber:13}},"Previous"),[...Array(Math.min(5,f.totalPages))].map((k,E)=>{const x=Math.max(1,f.page-2)+E;return x>f.totalPages?null:e.createElement("button",{key:x,onClick:()=>v(x),className:`px-3 py-2 text-sm font-medium border rounded-md ${x===f.page?"bg-primary-600 text-white border-primary-600":"text-gray-500 bg-white border-gray-300 hover:bg-gray-50"}`,__self:this,__source:{fileName:le,lineNumber:609,columnNumber:17}},x)}),e.createElement("button",{onClick:()=>v(f.page+1),disabled:f.page===f.totalPages,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:le,lineNumber:623,columnNumber:13}},"Next"))))}var Z="/app/code/frontend/src/pages/marketplace/ProductPage.tsx";function Zi(){const{id:t}=ja(),r=_t(),[l,s]=R.useState(null),[a,m]=R.useState([]),[n,i]=R.useState(!0),[N,u]=R.useState(0),[c,o]=R.useState(1),[f,h]=R.useState(!1),{addToCart:A,isLoading:g}=Dl(),{user:b,isAuthenticated:S}=Te();R.useEffect(()=>{t&&v()},[t]);const v=async()=>{try{if(i(!0),!t||t==="undefined"||t==="null")throw new Error("Invalid product ID");const x=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t),w=/^\d+$/.test(t);if(x||!w){console.log(" Invalid product ID format detected:",t),F.error("This product link is outdated. Redirecting to marketplace..."),r("/marketplace");return}const Y=await ue.get(`/api/marketplace/products/${t}?_t=${Date.now()}`),H=Y.data.product||Y.data,Ne={id:H.id,name:H.name,category:H.category,price_per_unit:H.price_per_unit,unit:H.unit,description:H.description||"",stock_quantity:H.stock_quantity,quantity:H.quantity||H.stock_quantity,images:Array.isArray(H.images)?H.images:[],farmer_name:H.farmer_name||"Local Farmer",farmer_county:H.farmer_county||"Kenya",created_at:H.created_at||new Date().toISOString()};s(Ne),Ne&&L(Ne.category,Ne.farmer_county||"Kenya")}catch(E){if(console.error("Failed to fetch product:",E),E.response?.status===404)F.error("Product not found"),r("/marketplace");else if(E.response?.status===410){const x=E.response?.data;F.error(x?.message||"This product link is outdated"),r("/marketplace")}else F.error("Failed to load product details")}finally{i(!1)}},L=async(E,x)=>{try{const w=await ue.get(`/api/marketplace/products?category=${E}&county=${x}&limit=4`),Y=w.data.products||w.data,H=Array.isArray(Y)?Y:[];m(H.filter(Ne=>Ne?.id!==Number(t)))}catch(w){console.error("Failed to fetch related products:",w)}},G=async()=>{if(!S){F.error("Please login to add items to cart");return}if(b?.role!=="CUSTOMER"){F.error("Only customers can add items to cart");return}if(l)try{await A(l,c),o(1),F.success(`Added ${l.name} to cart`)}catch{}},T=async()=>{if(navigator.share)try{await navigator.share({title:l?.name,text:l?.description,url:window.location.href})}catch(E){console.log("Error sharing:",E)}else navigator.clipboard.writeText(window.location.href),F.success("Link copied to clipboard!")},U=E=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(E),ae=()=>l?l.stock_quantity===0?{text:"Out of Stock",color:"text-red-600",bgColor:"bg-red-100"}:l.stock_quantity<=5?{text:"Low Stock",color:"text-orange-600",bgColor:"bg-orange-100"}:{text:"In Stock",color:"text-green-600",bgColor:"bg-green-100"}:null;if(n)return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:Z,lineNumber:227,columnNumber:7}},e.createElement("div",{className:"animate-pulse",__self:this,__source:{fileName:Z,lineNumber:228,columnNumber:9}},e.createElement("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8",__self:this,__source:{fileName:Z,lineNumber:229,columnNumber:11}}),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",__self:this,__source:{fileName:Z,lineNumber:230,columnNumber:11}},e.createElement("div",{className:"h-96 bg-gray-200 rounded-lg",__self:this,__source:{fileName:Z,lineNumber:231,columnNumber:13}}),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:Z,lineNumber:232,columnNumber:13}},e.createElement("div",{className:"h-8 bg-gray-200 rounded w-3/4",__self:this,__source:{fileName:Z,lineNumber:233,columnNumber:15}}),e.createElement("div",{className:"h-4 bg-gray-200 rounded w-1/2",__self:this,__source:{fileName:Z,lineNumber:234,columnNumber:15}}),e.createElement("div",{className:"h-12 bg-gray-200 rounded w-1/3",__self:this,__source:{fileName:Z,lineNumber:235,columnNumber:15}}),e.createElement("div",{className:"h-32 bg-gray-200 rounded",__self:this,__source:{fileName:Z,lineNumber:236,columnNumber:15}})))));if(!l)return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:Z,lineNumber:246,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:Z,lineNumber:247,columnNumber:9}},e.createElement("h1",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:Z,lineNumber:248,columnNumber:11}},"Product not found"),e.createElement(Se,{to:"/marketplace",className:"text-primary-600 hover:text-primary-700 mt-4 inline-block",__self:this,__source:{fileName:Z,lineNumber:251,columnNumber:11}},"Back to Marketplace")));const k=ae();return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:Z,lineNumber:265,columnNumber:5}},e.createElement("nav",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-8",__self:this,__source:{fileName:Z,lineNumber:267,columnNumber:7}},e.createElement(Se,{to:"/marketplace",className:"hover:text-gray-900",__self:this,__source:{fileName:Z,lineNumber:268,columnNumber:9}},"Marketplace"),e.createElement("span",{__self:this,__source:{fileName:Z,lineNumber:271,columnNumber:9}},"/"),e.createElement("span",{className:"text-gray-900",__self:this,__source:{fileName:Z,lineNumber:272,columnNumber:9}},l.name)),e.createElement("button",{onClick:()=>r(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",__self:this,__source:{fileName:Z,lineNumber:276,columnNumber:7}},e.createElement(sr,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:Z,lineNumber:280,columnNumber:9}}),"Back"),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",__self:this,__source:{fileName:Z,lineNumber:284,columnNumber:7}},e.createElement("div",{__self:this,__source:{fileName:Z,lineNumber:286,columnNumber:9}},e.createElement("div",{className:"aspect-square bg-gray-200 rounded-lg overflow-hidden mb-4",__self:this,__source:{fileName:Z,lineNumber:287,columnNumber:11}},l.images&&l.images.length>0?e.createElement("img",{src:l.images[N]||l.images[0],alt:l.name,className:"w-full h-full object-cover",onError:E=>{E.currentTarget.src="/api/placeholder/400/400?text="+encodeURIComponent(l.name)},__self:this,__source:{fileName:Z,lineNumber:289,columnNumber:15}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400",__self:this,__source:{fileName:Z,lineNumber:300,columnNumber:15}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:Z,lineNumber:301,columnNumber:17}},e.createElement("div",{className:"text-4xl mb-2",__self:this,__source:{fileName:Z,lineNumber:302,columnNumber:19}},""),e.createElement("span",{__self:this,__source:{fileName:Z,lineNumber:303,columnNumber:19}},l.name)))),l.images&&l.images.length>1&&e.createElement("div",{className:"grid grid-cols-4 gap-2",__self:this,__source:{fileName:Z,lineNumber:311,columnNumber:13}},l.images.slice(0,4).map((E,x)=>e.createElement("button",{key:x,onClick:()=>u(x),className:`aspect-square bg-gray-200 rounded-lg overflow-hidden border-2 ${N===x?"border-primary-600":"border-transparent"}`,__self:this,__source:{fileName:Z,lineNumber:313,columnNumber:17}},e.createElement("img",{src:E,alt:`${l.name} ${x+1}`,className:"w-full h-full object-cover",onError:w=>{w.currentTarget.src="/api/placeholder/100/100?text="+(x+1)},__self:this,__source:{fileName:Z,lineNumber:322,columnNumber:19}}))))),e.createElement("div",{__self:this,__source:{fileName:Z,lineNumber:338,columnNumber:9}},e.createElement("div",{className:"flex items-start justify-between mb-4",__self:this,__source:{fileName:Z,lineNumber:339,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:Z,lineNumber:340,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2",__self:this,__source:{fileName:Z,lineNumber:341,columnNumber:15}},l.name),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:Z,lineNumber:344,columnNumber:15}},l.category)),e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:Z,lineNumber:347,columnNumber:13}},e.createElement("button",{onClick:T,className:"p-2 text-gray-400 hover:text-gray-600 border border-gray-300 rounded-lg",__self:this,__source:{fileName:Z,lineNumber:348,columnNumber:15}},e.createElement(Ya,{className:"w-5 h-5",__self:this,__source:{fileName:Z,lineNumber:352,columnNumber:17}})),e.createElement("button",{className:"p-2 text-gray-400 hover:text-red-500 border border-gray-300 rounded-lg",__self:this,__source:{fileName:Z,lineNumber:354,columnNumber:15}},e.createElement(vl,{className:"w-5 h-5",__self:this,__source:{fileName:Z,lineNumber:355,columnNumber:17}})))),e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:Z,lineNumber:361,columnNumber:11}},e.createElement("div",{className:"text-3xl font-bold text-gray-900 mb-2",__self:this,__source:{fileName:Z,lineNumber:362,columnNumber:13}},U(l.price_per_unit),e.createElement("span",{className:"text-lg font-normal text-gray-600 ml-2",__self:this,__source:{fileName:Z,lineNumber:364,columnNumber:15}},"per ",l.unit)),k&&e.createElement("div",{className:"flex items-center space-x-4",__self:this,__source:{fileName:Z,lineNumber:370,columnNumber:15}},e.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${k.bgColor} ${k.color}`,__self:this,__source:{fileName:Z,lineNumber:371,columnNumber:17}},k.text),e.createElement("span",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:Z,lineNumber:376,columnNumber:17}},l.stock_quantity," ",l.unit," available"))),e.createElement("div",{className:"flex flex-wrap gap-2 mb-6",__self:this,__source:{fileName:Z,lineNumber:384,columnNumber:11}},e.createElement("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",__self:this,__source:{fileName:Z,lineNumber:385,columnNumber:13}},l.category)),e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:Z,lineNumber:391,columnNumber:11}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2",__self:this,__source:{fileName:Z,lineNumber:392,columnNumber:13}},"Description"),e.createElement("p",{className:"text-gray-700 leading-relaxed",__self:this,__source:{fileName:Z,lineNumber:395,columnNumber:13}},l.description)),e.createElement("div",{className:"grid grid-cols-2 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",__self:this,__source:{fileName:Z,lineNumber:401,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:Z,lineNumber:403,columnNumber:13}},e.createElement("span",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:Z,lineNumber:404,columnNumber:15}},"Category"),e.createElement("p",{className:"text-gray-900",__self:this,__source:{fileName:Z,lineNumber:407,columnNumber:15}},l.category)),e.createElement("div",{__self:this,__source:{fileName:Z,lineNumber:409,columnNumber:13}},e.createElement("span",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:Z,lineNumber:410,columnNumber:15}},"Unit"),e.createElement("p",{className:"text-gray-900",__self:this,__source:{fileName:Z,lineNumber:411,columnNumber:15}},l.unit))),S&&b?.role==="CUSTOMER"&&l.stock_quantity>0&&e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:Z,lineNumber:419,columnNumber:15}},e.createElement("div",{className:"flex items-center space-x-4 mb-4",__self:this,__source:{fileName:Z,lineNumber:420,columnNumber:17}},e.createElement("label",{className:"text-sm font-medium text-gray-700",__self:this,__source:{fileName:Z,lineNumber:421,columnNumber:19}},"Quantity:"),e.createElement("div",{className:"flex items-center border border-gray-300 rounded-lg",__self:this,__source:{fileName:Z,lineNumber:424,columnNumber:19}},e.createElement("button",{onClick:()=>o(Math.max(1,c-1)),className:"px-3 py-2 text-gray-600 hover:text-gray-900",__self:this,__source:{fileName:Z,lineNumber:425,columnNumber:21}},"-"),e.createElement("input",{type:"number",min:"1",max:l.stock_quantity,value:c,onChange:E=>o(Math.max(1,parseInt(E.target.value)||1)),className:"w-16 px-2 py-2 text-center border-0 focus:ring-0",__self:this,__source:{fileName:Z,lineNumber:431,columnNumber:21}}),e.createElement("button",{onClick:()=>o(Math.min(l.stock_quantity,c+1)),className:"px-3 py-2 text-gray-600 hover:text-gray-900",__self:this,__source:{fileName:Z,lineNumber:441,columnNumber:21}},"+")),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:Z,lineNumber:452,columnNumber:19}},"Total: ",U(l.price_per_unit*c))),e.createElement("button",{onClick:G,disabled:g,className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg hover:bg-primary-700 disabled:opacity-50 transition-colors font-medium flex items-center justify-center",__self:this,__source:{fileName:Z,lineNumber:457,columnNumber:17}},e.createElement(xt,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:Z,lineNumber:462,columnNumber:19}}),g?"Adding...":"Add to Cart")),e.createElement("div",{className:"border-t border-gray-200 pt-6",__self:this,__source:{fileName:Z,lineNumber:469,columnNumber:11}},e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",__self:this,__source:{fileName:Z,lineNumber:470,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Z,lineNumber:471,columnNumber:15}},e.createElement(Ue,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:Z,lineNumber:472,columnNumber:17}}),e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:Z,lineNumber:473,columnNumber:17}},"Free delivery over KES 1000")),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Z,lineNumber:477,columnNumber:15}},e.createElement(Ke,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:Z,lineNumber:478,columnNumber:17}}),e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:Z,lineNumber:479,columnNumber:17}},"Delivered within 24h")),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Z,lineNumber:481,columnNumber:15}},e.createElement(Et,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:Z,lineNumber:482,columnNumber:17}}),e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:Z,lineNumber:483,columnNumber:17}},"Quality guaranteed")))))),e.createElement("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-8",__self:this,__source:{fileName:Z,lineNumber:491,columnNumber:7}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:Z,lineNumber:492,columnNumber:9}},"About the Farmer"),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:Z,lineNumber:496,columnNumber:9}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Z,lineNumber:497,columnNumber:11}},e.createElement("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mr-4",__self:this,__source:{fileName:Z,lineNumber:498,columnNumber:13}},e.createElement("span",{className:"text-primary-600 font-semibold text-lg",__self:this,__source:{fileName:Z,lineNumber:499,columnNumber:15}},"")),e.createElement("div",{__self:this,__source:{fileName:Z,lineNumber:503,columnNumber:13}},e.createElement("h4",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:Z,lineNumber:504,columnNumber:15}},l.farmer_name||"Local Farmer"),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Z,lineNumber:507,columnNumber:15}},e.createElement(ut,{className:"w-4 h-4 text-gray-400 mr-2",__self:this,__source:{fileName:Z,lineNumber:508,columnNumber:17}}),e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:Z,lineNumber:509,columnNumber:17}},l.farmer_county||"Kenya")))))),a.length>0&&e.createElement("div",{__self:this,__source:{fileName:Z,lineNumber:520,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-6",__self:this,__source:{fileName:Z,lineNumber:521,columnNumber:11}},"Related Products"),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",__self:this,__source:{fileName:Z,lineNumber:525,columnNumber:11}},a.map(E=>e.createElement(Se,{key:E.id,to:`/marketplace/product/${E.id}`,className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",__self:this,__source:{fileName:Z,lineNumber:527,columnNumber:15}},e.createElement("div",{className:"aspect-square bg-gray-200",__self:this,__source:{fileName:Z,lineNumber:532,columnNumber:17}},E.images&&E.images.length>0?e.createElement("img",{src:E.images[0],alt:E.name,className:"w-full h-full object-cover",onError:x=>{x.currentTarget.src="/api/placeholder/200/200?text="+encodeURIComponent(E.name)},__self:this,__source:{fileName:Z,lineNumber:534,columnNumber:21}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400",__self:this,__source:{fileName:Z,lineNumber:545,columnNumber:21}},"")),e.createElement("div",{className:"p-4",__self:this,__source:{fileName:Z,lineNumber:551,columnNumber:17}},e.createElement("h4",{className:"font-semibold text-gray-900 text-sm mb-1 line-clamp-2",__self:this,__source:{fileName:Z,lineNumber:552,columnNumber:19}},E.name),e.createElement("p",{className:"text-xs text-gray-600 mb-2",__self:this,__source:{fileName:Z,lineNumber:555,columnNumber:19}},E.farmer_county||"Kenya","  ",E.farmer_name||"Local Farmer"),e.createElement("div",{className:"text-lg font-bold text-gray-900",__self:this,__source:{fileName:Z,lineNumber:558,columnNumber:19}},U(E.price_per_unit),e.createElement("span",{className:"text-xs font-normal text-gray-600 ml-1",__self:this,__source:{fileName:Z,lineNumber:560,columnNumber:21}},"/",E.unit))))))))}var we="/app/code/frontend/src/pages/auth/LoginPage.tsx";function Xi(){const[t,r]=R.useState({phone:"",password:""}),[l,s]=R.useState(!1),{login:a,isLoading:m}=Te(),n=_t(),N=Ps().state?.from?.pathname||"/",u=async o=>{o.preventDefault();try{const f=t.phone.trim(),h=t.password.trim();console.log(" LoginPage - About to call login with:",{phone:f,password:h,formData:t}),await a(f,h),F.success("Login successful!");const{user:A}=Te.getState();A?.role==="ADMIN"?n("/admin/dashboard",{replace:!0}):A?.role==="FARMER"?n("/farmer/dashboard",{replace:!0}):A?.role==="CUSTOMER"?n("/customer/dashboard",{replace:!0}):A?.role==="DRIVER"?n("/driver/dashboard",{replace:!0}):n(N,{replace:!0})}catch(f){F.error(f.message||"Login failed")}},c=o=>{r({...t,[o.target.name]:o.target.value})};return e.createElement("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",__self:this,__source:{fileName:we,lineNumber:62,columnNumber:5}},e.createElement("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",__self:this,__source:{fileName:we,lineNumber:63,columnNumber:7}},e.createElement("div",{className:"flex justify-center",__self:this,__source:{fileName:we,lineNumber:64,columnNumber:9}},e.createElement("div",{className:"w-12 h-12 bg-primary-600 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:we,lineNumber:65,columnNumber:11}},e.createElement("span",{className:"text-white font-bold text-lg",__self:this,__source:{fileName:we,lineNumber:66,columnNumber:13}},"Z"))),e.createElement("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",__self:this,__source:{fileName:we,lineNumber:69,columnNumber:9}},"Sign in to your account"),e.createElement("p",{className:"mt-2 text-center text-sm text-gray-600",__self:this,__source:{fileName:we,lineNumber:72,columnNumber:9}},"Or"," ",e.createElement(Se,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",__self:this,__source:{fileName:we,lineNumber:74,columnNumber:11}},"create a new account"))),e.createElement("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",__self:this,__source:{fileName:we,lineNumber:83,columnNumber:7}},e.createElement("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",__self:this,__source:{fileName:we,lineNumber:84,columnNumber:9}},e.createElement("form",{className:"space-y-6",onSubmit:u,__self:this,__source:{fileName:we,lineNumber:85,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:we,lineNumber:86,columnNumber:13}},e.createElement("label",{htmlFor:"phone",className:"form-label",__self:this,__source:{fileName:we,lineNumber:87,columnNumber:15}},"Phone Number"),e.createElement("input",{id:"phone",name:"phone",type:"tel",required:!0,placeholder:"e.g., +254712345678 or 0712345678",className:"form-input",value:t.phone,onChange:c,__self:this,__source:{fileName:we,lineNumber:90,columnNumber:15}})),e.createElement("div",{__self:this,__source:{fileName:we,lineNumber:102,columnNumber:13}},e.createElement("label",{htmlFor:"password",className:"form-label",__self:this,__source:{fileName:we,lineNumber:103,columnNumber:15}},"Password"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:we,lineNumber:106,columnNumber:15}},e.createElement("input",{id:"password",name:"password",type:l?"text":"password",required:!0,className:"form-input pr-10",value:t.password,onChange:c,__self:this,__source:{fileName:we,lineNumber:107,columnNumber:17}}),e.createElement("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!l),__self:this,__source:{fileName:we,lineNumber:116,columnNumber:17}},l?e.createElement(wr,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:we,lineNumber:122,columnNumber:21}}):e.createElement(ct,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:we,lineNumber:124,columnNumber:21}})))),e.createElement("div",{__self:this,__source:{fileName:we,lineNumber:130,columnNumber:13}},e.createElement("button",{type:"submit",disabled:m,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:we,lineNumber:131,columnNumber:15}},m?"Signing in...":"Sign in"))),e.createElement("div",{className:"mt-6",__self:this,__source:{fileName:we,lineNumber:141,columnNumber:11}},e.createElement("button",{type:"button",onClick:()=>{r({phone:"+254712345678",password:"password123"}),u({preventDefault:()=>{}})},className:"w-full mb-4 bg-green-600 text-white py-2 px-4 rounded-md text-sm font-medium hover:bg-green-700",__self:this,__source:{fileName:we,lineNumber:142,columnNumber:13}}," Test Admin Login (+254712345678 / password123)"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:we,lineNumber:156,columnNumber:13}},e.createElement("div",{className:"absolute inset-0 flex items-center",__self:this,__source:{fileName:we,lineNumber:157,columnNumber:15}},e.createElement("div",{className:"w-full border-t border-gray-300",__self:this,__source:{fileName:we,lineNumber:158,columnNumber:17}})),e.createElement("div",{className:"relative flex justify-center text-sm",__self:this,__source:{fileName:we,lineNumber:160,columnNumber:15}},e.createElement("span",{className:"px-2 bg-white text-gray-500",__self:this,__source:{fileName:we,lineNumber:161,columnNumber:17}},"Demo Accounts"))),e.createElement("div",{className:"mt-4 space-y-2 text-xs text-gray-600",__self:this,__source:{fileName:we,lineNumber:167,columnNumber:13}},e.createElement("p",{__self:this,__source:{fileName:we,lineNumber:168,columnNumber:15}},e.createElement("strong",{__self:this,__source:{fileName:we,lineNumber:169,columnNumber:17}},"Admin:")," +254712345678 / password123"),e.createElement("p",{__self:this,__source:{fileName:we,lineNumber:171,columnNumber:15}},e.createElement("strong",{__self:this,__source:{fileName:we,lineNumber:172,columnNumber:17}},"Farmer:")," +254734567890 / password123"),e.createElement("p",{__self:this,__source:{fileName:we,lineNumber:174,columnNumber:15}},e.createElement("strong",{__self:this,__source:{fileName:we,lineNumber:175,columnNumber:17}},"Customer:")," +254756789012 / password123"),e.createElement("p",{__self:this,__source:{fileName:we,lineNumber:177,columnNumber:15}},e.createElement("strong",{__self:this,__source:{fileName:we,lineNumber:178,columnNumber:17}},"Driver:")," +254778901234 / password123"))))))}var fr=t=>t.type==="checkbox",Mt=t=>t instanceof Date,Xe=t=>t==null;const xa=t=>typeof t=="object";var Ve=t=>!Xe(t)&&!Array.isArray(t)&&xa(t)&&!Mt(t),eo=t=>Ve(t)&&t.target?fr(t.target)?t.target.checked:t.target.value:t,to=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,ro=(t,r)=>t.has(to(r)),lo=t=>{const r=t.constructor&&t.constructor.prototype;return Ve(r)&&r.hasOwnProperty("isPrototypeOf")},Rl=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ze(t){let r;const l=Array.isArray(t),s=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)r=new Date(t);else if(!(Rl&&(t instanceof Blob||s))&&(l||Ve(t)))if(r=l?[]:{},!l&&!lo(t))r=t;else for(const a in t)t.hasOwnProperty(a)&&(r[a]=ze(t[a]));else return t;return r}var Wr=t=>/^\w*$/.test(t),Ge=t=>t===void 0,Fl=t=>Array.isArray(t)?t.filter(Boolean):[],Tl=t=>Fl(t.replace(/["|']|\]/g,"").split(/\.|\[/)),fe=(t,r,l)=>{if(!r||!Ve(t))return l;const s=(Wr(r)?[r]:Tl(r)).reduce((a,m)=>Xe(a)?a:a[m],t);return Ge(s)||s===t?Ge(t[r])?l:t[r]:s},gt=t=>typeof t=="boolean",Le=(t,r,l)=>{let s=-1;const a=Wr(r)?[r]:Tl(r),m=a.length,n=m-1;for(;++s<m;){const i=a[s];let N=l;if(s!==n){const u=t[i];N=Ve(u)||Array.isArray(u)?u:isNaN(+a[s+1])?{}:[]}if(i==="__proto__"||i==="constructor"||i==="prototype")return;t[i]=N,t=t[i]}};const ds={BLUR:"blur",FOCUS_OUT:"focusout"},ft={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},wt={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},so=e.createContext(null);so.displayName="HookFormContext";var ao=(t,r,l,s=!0)=>{const a={defaultValues:r._defaultValues};for(const m in t)Object.defineProperty(a,m,{get:()=>{const n=m;return r._proxyFormState[n]!==ft.all&&(r._proxyFormState[n]=!s||ft.all),t[n]}});return a};const mo=typeof window<"u"?e.useLayoutEffect:e.useEffect;var yt=t=>typeof t=="string",no=(t,r,l,s,a)=>yt(t)?(s&&r.watch.add(t),fe(l,t,a)):Array.isArray(t)?t.map(m=>(s&&r.watch.add(m),fe(l,m))):(s&&(r.watchAll=!0),l),yl=t=>Xe(t)||!xa(t);function Ft(t,r,l=new WeakSet){if(yl(t)||yl(r))return t===r;if(Mt(t)&&Mt(r))return t.getTime()===r.getTime();const s=Object.keys(t),a=Object.keys(r);if(s.length!==a.length)return!1;if(l.has(t)||l.has(r))return!0;l.add(t),l.add(r);for(const m of s){const n=t[m];if(!a.includes(m))return!1;if(m!=="ref"){const i=r[m];if(Mt(n)&&Mt(i)||Ve(n)&&Ve(i)||Array.isArray(n)&&Array.isArray(i)?!Ft(n,i,l):n!==i)return!1}}return!0}var io=(t,r,l,s,a)=>r?{...l[t],types:{...l[t]&&l[t].types?l[t].types:{},[s]:a||!0}}:{},rr=t=>Array.isArray(t)?t:[t],hs=()=>{let t=[];return{get observers(){return t},next:a=>{for(const m of t)m.next&&m.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(m=>m!==a)}}),unsubscribe:()=>{t=[]}}},lt=t=>Ve(t)&&!Object.keys(t).length,Il=t=>t.type==="file",bt=t=>typeof t=="function",Ir=t=>{if(!Rl)return!1;const r=t?t.ownerDocument:0;return t instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},Ea=t=>t.type==="select-multiple",Ol=t=>t.type==="radio",oo=t=>Ol(t)||fr(t),al=t=>Ir(t)&&t.isConnected;function uo(t,r){const l=r.slice(0,-1).length;let s=0;for(;s<l;)t=Ge(t)?s++:t[r[s++]];return t}function co(t){for(const r in t)if(t.hasOwnProperty(r)&&!Ge(t[r]))return!1;return!0}function Be(t,r){const l=Array.isArray(r)?r:Wr(r)?[r]:Tl(r),s=l.length===1?t:uo(t,l),a=l.length-1,m=l[a];return s&&delete s[m],a!==0&&(Ve(s)&&lt(s)||Array.isArray(s)&&co(s))&&Be(t,l.slice(0,-1)),t}var va=t=>{for(const r in t)if(bt(t[r]))return!0;return!1};function Or(t,r={}){const l=Array.isArray(t);if(Ve(t)||l)for(const s in t)Array.isArray(t[s])||Ve(t[s])&&!va(t[s])?(r[s]=Array.isArray(t[s])?[]:{},Or(t[s],r[s])):Xe(t[s])||(r[s]=!0);return r}function wa(t,r,l){const s=Array.isArray(t);if(Ve(t)||s)for(const a in t)Array.isArray(t[a])||Ve(t[a])&&!va(t[a])?Ge(r)||yl(l[a])?l[a]=Array.isArray(t[a])?Or(t[a],[]):{...Or(t[a])}:wa(t[a],Xe(r)?{}:r[a],l[a]):l[a]=!Ft(t[a],r[a]);return l}var er=(t,r)=>wa(t,r,Or(r));const gs={value:!1,isValid:!1},ps={value:!0,isValid:!0};var Sa=t=>{if(Array.isArray(t)){if(t.length>1){const r=t.filter(l=>l&&l.checked&&!l.disabled).map(l=>l.value);return{value:r,isValid:!!r.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ge(t[0].attributes.value)?Ge(t[0].value)||t[0].value===""?ps:{value:t[0].value,isValid:!0}:ps:gs}return gs},Ca=(t,{valueAsNumber:r,valueAsDate:l,setValueAs:s})=>Ge(t)?t:r?t===""?NaN:t&&+t:l&&yt(t)?new Date(t):s?s(t):t;const ys={isValid:!1,value:null};var ka=t=>Array.isArray(t)?t.reduce((r,l)=>l&&l.checked&&!l.disabled?{isValid:!0,value:l.value}:r,ys):ys;function xs(t){const r=t.ref;return Il(r)?r.files:Ol(r)?ka(t.refs).value:Ea(r)?[...r.selectedOptions].map(({value:l})=>l):fr(r)?Sa(t.refs).value:Ca(Ge(r.value)?t.ref.value:r.value,t)}var _o=(t,r,l,s)=>{const a={};for(const m of t){const n=fe(r,m);n&&Le(a,m,n._f)}return{criteriaMode:l,names:[...t],fields:a,shouldUseNativeValidation:s}},Lr=t=>t instanceof RegExp,tr=t=>Ge(t)?t:Lr(t)?t.source:Ve(t)?Lr(t.value)?t.value.source:t.value:t,Es=t=>({isOnSubmit:!t||t===ft.onSubmit,isOnBlur:t===ft.onBlur,isOnChange:t===ft.onChange,isOnAll:t===ft.all,isOnTouch:t===ft.onTouched});const vs="AsyncFunction";var No=t=>!!t&&!!t.validate&&!!(bt(t.validate)&&t.validate.constructor.name===vs||Ve(t.validate)&&Object.values(t.validate).find(r=>r.constructor.name===vs)),fo=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),ws=(t,r,l)=>!l&&(r.watchAll||r.watch.has(t)||[...r.watch].some(s=>t.startsWith(s)&&/^\.\w+/.test(t.slice(s.length))));const lr=(t,r,l,s)=>{for(const a of l||Object.keys(t)){const m=fe(t,a);if(m){const{_f:n,...i}=m;if(n){if(n.refs&&n.refs[0]&&r(n.refs[0],a)&&!s)return!0;if(n.ref&&r(n.ref,n.name)&&!s)return!0;if(lr(i,r))break}else if(Ve(i)&&lr(i,r))break}}};function Ss(t,r,l){const s=fe(t,l);if(s||Wr(l))return{error:s,name:l};const a=l.split(".");for(;a.length;){const m=a.join("."),n=fe(r,m),i=fe(t,m);if(n&&!Array.isArray(n)&&l!==m)return{name:l};if(i&&i.type)return{name:m,error:i};if(i&&i.root&&i.root.type)return{name:`${m}.root`,error:i.root};a.pop()}return{name:l}}var bo=(t,r,l,s)=>{l(t);const{name:a,...m}=t;return lt(m)||Object.keys(m).length>=Object.keys(r).length||Object.keys(m).find(n=>r[n]===(!s||ft.all))},ho=(t,r,l)=>!t||!r||t===r||rr(t).some(s=>s&&(l?s===r:s.startsWith(r)||r.startsWith(s))),go=(t,r,l,s,a)=>a.isOnAll?!1:!l&&a.isOnTouch?!(r||t):(l?s.isOnBlur:a.isOnBlur)?!t:(l?s.isOnChange:a.isOnChange)?t:!0,po=(t,r)=>!Fl(fe(t,r)).length&&Be(t,r),yo=(t,r,l)=>{const s=rr(fe(t,l));return Le(s,"root",r[l]),Le(t,l,s),t},Er=t=>yt(t);function Cs(t,r,l="validate"){if(Er(t)||Array.isArray(t)&&t.every(Er)||gt(t)&&!t)return{type:l,message:Er(t)?t:"",ref:r}}var Gt=t=>Ve(t)&&!Lr(t)?t:{value:t,message:""},ks=async(t,r,l,s,a,m)=>{const{ref:n,refs:i,required:N,maxLength:u,minLength:c,min:o,max:f,pattern:h,validate:A,name:g,valueAsNumber:b,mount:S}=t._f,v=fe(l,g);if(!S||r.has(g))return{};const L=i?i[0]:n,G=Y=>{a&&L.reportValidity&&(L.setCustomValidity(gt(Y)?"":Y||""),L.reportValidity())},T={},U=Ol(n),ae=fr(n),k=U||ae,E=(b||Il(n))&&Ge(n.value)&&Ge(v)||Ir(n)&&n.value===""||v===""||Array.isArray(v)&&!v.length,x=io.bind(null,g,s,T),w=(Y,H,Ne,re=wt.maxLength,de=wt.minLength)=>{const Ce=Y?H:Ne;T[g]={type:Y?re:de,message:Ce,ref:n,...x(Y?re:de,Ce)}};if(m?!Array.isArray(v)||!v.length:N&&(!k&&(E||Xe(v))||gt(v)&&!v||ae&&!Sa(i).isValid||U&&!ka(i).isValid)){const{value:Y,message:H}=Er(N)?{value:!!N,message:N}:Gt(N);if(Y&&(T[g]={type:wt.required,message:H,ref:L,...x(wt.required,H)},!s))return G(H),T}if(!E&&(!Xe(o)||!Xe(f))){let Y,H;const Ne=Gt(f),re=Gt(o);if(!Xe(v)&&!isNaN(v)){const de=n.valueAsNumber||v&&+v;Xe(Ne.value)||(Y=de>Ne.value),Xe(re.value)||(H=de<re.value)}else{const de=n.valueAsDate||new Date(v),Ce=Ae=>new Date(new Date().toDateString()+" "+Ae),ve=n.type=="time",Pe=n.type=="week";yt(Ne.value)&&v&&(Y=ve?Ce(v)>Ce(Ne.value):Pe?v>Ne.value:de>new Date(Ne.value)),yt(re.value)&&v&&(H=ve?Ce(v)<Ce(re.value):Pe?v<re.value:de<new Date(re.value))}if((Y||H)&&(w(!!Y,Ne.message,re.message,wt.max,wt.min),!s))return G(T[g].message),T}if((u||c)&&!E&&(yt(v)||m&&Array.isArray(v))){const Y=Gt(u),H=Gt(c),Ne=!Xe(Y.value)&&v.length>+Y.value,re=!Xe(H.value)&&v.length<+H.value;if((Ne||re)&&(w(Ne,Y.message,H.message),!s))return G(T[g].message),T}if(h&&!E&&yt(v)){const{value:Y,message:H}=Gt(h);if(Lr(Y)&&!v.match(Y)&&(T[g]={type:wt.pattern,message:H,ref:n,...x(wt.pattern,H)},!s))return G(H),T}if(A){if(bt(A)){const Y=await A(v,l),H=Cs(Y,L);if(H&&(T[g]={...H,...x(wt.validate,H.message)},!s))return G(H.message),T}else if(Ve(A)){let Y={};for(const H in A){if(!lt(Y)&&!s)break;const Ne=Cs(await A[H](v,l),L,H);Ne&&(Y={...Ne,...x(H,Ne.message)},G(Ne.message),s&&(T[g]=Y))}if(!lt(Y)&&(T[g]={ref:L,...Y},!s))return T}}return G(!0),T};const xo={mode:ft.onSubmit,reValidateMode:ft.onChange,shouldFocusError:!0};function Eo(t={}){let r={...xo,...t},l={submitCount:0,isDirty:!1,isReady:!1,isLoading:bt(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},s={},a=Ve(r.defaultValues)||Ve(r.values)?ze(r.defaultValues||r.values)||{}:{},m=r.shouldUnregister?{}:ze(a),n={action:!1,mount:!1,watch:!1},i={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},N,u=0;const c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let o={...c};const f={array:hs(),state:hs()},h=r.criteriaMode===ft.all,A=y=>M=>{clearTimeout(u),u=setTimeout(y,M)},g=async y=>{if(!r.disabled&&(c.isValid||o.isValid||y)){const M=r.resolver?lt((await ae()).errors):await E(s,!0);M!==l.isValid&&f.state.next({isValid:M})}},b=(y,M)=>{!r.disabled&&(c.isValidating||c.validatingFields||o.isValidating||o.validatingFields)&&((y||Array.from(i.mount)).forEach(B=>{B&&(M?Le(l.validatingFields,B,M):Be(l.validatingFields,B))}),f.state.next({validatingFields:l.validatingFields,isValidating:!lt(l.validatingFields)}))},S=(y,M=[],B,ce,oe=!0,me=!0)=>{if(ce&&B&&!r.disabled){if(n.action=!0,me&&Array.isArray(fe(s,y))){const be=B(fe(s,y),ce.argA,ce.argB);oe&&Le(s,y,be)}if(me&&Array.isArray(fe(l.errors,y))){const be=B(fe(l.errors,y),ce.argA,ce.argB);oe&&Le(l.errors,y,be),po(l.errors,y)}if((c.touchedFields||o.touchedFields)&&me&&Array.isArray(fe(l.touchedFields,y))){const be=B(fe(l.touchedFields,y),ce.argA,ce.argB);oe&&Le(l.touchedFields,y,be)}(c.dirtyFields||o.dirtyFields)&&(l.dirtyFields=er(a,m)),f.state.next({name:y,isDirty:w(y,M),dirtyFields:l.dirtyFields,errors:l.errors,isValid:l.isValid})}else Le(m,y,M)},v=(y,M)=>{Le(l.errors,y,M),f.state.next({errors:l.errors})},L=y=>{l.errors=y,f.state.next({errors:l.errors,isValid:!1})},G=(y,M,B,ce)=>{const oe=fe(s,y);if(oe){const me=fe(m,y,Ge(B)?fe(a,y):B);Ge(me)||ce&&ce.defaultChecked||M?Le(m,y,M?me:xs(oe._f)):Ne(y,me),n.mount&&g()}},T=(y,M,B,ce,oe)=>{let me=!1,be=!1;const De={name:y};if(!r.disabled){if(!B||ce){(c.isDirty||o.isDirty)&&(be=l.isDirty,l.isDirty=De.isDirty=w(),me=be!==De.isDirty);const Ie=Ft(fe(a,y),M);be=!!fe(l.dirtyFields,y),Ie?Be(l.dirtyFields,y):Le(l.dirtyFields,y,!0),De.dirtyFields=l.dirtyFields,me=me||(c.dirtyFields||o.dirtyFields)&&be!==!Ie}if(B){const Ie=fe(l.touchedFields,y);Ie||(Le(l.touchedFields,y,B),De.touchedFields=l.touchedFields,me=me||(c.touchedFields||o.touchedFields)&&Ie!==B)}me&&oe&&f.state.next(De)}return me?De:{}},U=(y,M,B,ce)=>{const oe=fe(l.errors,y),me=(c.isValid||o.isValid)&&gt(M)&&l.isValid!==M;if(r.delayError&&B?(N=A(()=>v(y,B)),N(r.delayError)):(clearTimeout(u),N=null,B?Le(l.errors,y,B):Be(l.errors,y)),(B?!Ft(oe,B):oe)||!lt(ce)||me){const be={...ce,...me&&gt(M)?{isValid:M}:{},errors:l.errors,name:y};l={...l,...be},f.state.next(be)}},ae=async y=>{b(y,!0);const M=await r.resolver(m,r.context,_o(y||i.mount,s,r.criteriaMode,r.shouldUseNativeValidation));return b(y),M},k=async y=>{const{errors:M}=await ae(y);if(y)for(const B of y){const ce=fe(M,B);ce?Le(l.errors,B,ce):Be(l.errors,B)}else l.errors=M;return M},E=async(y,M,B={valid:!0})=>{for(const ce in y){const oe=y[ce];if(oe){const{_f:me,...be}=oe;if(me){const De=i.array.has(me.name),Ie=oe._f&&No(oe._f);Ie&&c.validatingFields&&b([ce],!0);const it=await ks(oe,i.disabled,m,h,r.shouldUseNativeValidation&&!M,De);if(Ie&&c.validatingFields&&b([ce]),it[me.name]&&(B.valid=!1,M))break;!M&&(fe(it,me.name)?De?yo(l.errors,it,me.name):Le(l.errors,me.name,it[me.name]):Be(l.errors,me.name))}!lt(be)&&await E(be,M,B)}}return B.valid},x=()=>{for(const y of i.unMount){const M=fe(s,y);M&&(M._f.refs?M._f.refs.every(B=>!al(B)):!al(M._f.ref))&&ke(y)}i.unMount=new Set},w=(y,M)=>!r.disabled&&(y&&M&&Le(m,y,M),!Ft(Ae(),a)),Y=(y,M,B)=>no(y,i,{...n.mount?m:Ge(M)?a:yt(y)?{[y]:M}:M},B,M),H=y=>Fl(fe(n.mount?m:a,y,r.shouldUnregister?fe(a,y,[]):[])),Ne=(y,M,B={})=>{const ce=fe(s,y);let oe=M;if(ce){const me=ce._f;me&&(!me.disabled&&Le(m,y,Ca(M,me)),oe=Ir(me.ref)&&Xe(M)?"":M,Ea(me.ref)?[...me.ref.options].forEach(be=>be.selected=oe.includes(be.value)):me.refs?fr(me.ref)?me.refs.forEach(be=>{(!be.defaultChecked||!be.disabled)&&(Array.isArray(oe)?be.checked=!!oe.find(De=>De===be.value):be.checked=oe===be.value||!!oe)}):me.refs.forEach(be=>be.checked=be.value===oe):Il(me.ref)?me.ref.value="":(me.ref.value=oe,me.ref.type||f.state.next({name:y,values:ze(m)})))}(B.shouldDirty||B.shouldTouch)&&T(y,oe,B.shouldTouch,B.shouldDirty,!0),B.shouldValidate&&Pe(y)},re=(y,M,B)=>{for(const ce in M){if(!M.hasOwnProperty(ce))return;const oe=M[ce],me=y+"."+ce,be=fe(s,me);(i.array.has(y)||Ve(oe)||be&&!be._f)&&!Mt(oe)?re(me,oe,B):Ne(me,oe,B)}},de=(y,M,B={})=>{const ce=fe(s,y),oe=i.array.has(y),me=ze(M);Le(m,y,me),oe?(f.array.next({name:y,values:ze(m)}),(c.isDirty||c.dirtyFields||o.isDirty||o.dirtyFields)&&B.shouldDirty&&f.state.next({name:y,dirtyFields:er(a,m),isDirty:w(y,me)})):ce&&!ce._f&&!Xe(me)?re(y,me,B):Ne(y,me,B),ws(y,i)&&f.state.next({...l,name:y}),f.state.next({name:n.mount?y:void 0,values:ze(m)})},Ce=async y=>{n.mount=!0;const M=y.target;let B=M.name,ce=!0;const oe=fe(s,B),me=Ie=>{ce=Number.isNaN(Ie)||Mt(Ie)&&isNaN(Ie.getTime())||Ft(Ie,fe(m,B,Ie))},be=Es(r.mode),De=Es(r.reValidateMode);if(oe){let Ie,it;const dr=M.type?xs(oe._f):eo(y),kt=y.type===ds.BLUR||y.type===ds.FOCUS_OUT,Ta=!fo(oe._f)&&!r.resolver&&!fe(l.errors,B)&&!oe._f.deps||go(kt,fe(l.touchedFields,B),l.isSubmitted,De,be),Qr=ws(B,i,kt);Le(m,B,dr),kt?(oe._f.onBlur&&oe._f.onBlur(y),N&&N(0)):oe._f.onChange&&oe._f.onChange(y);const Jr=T(B,dr,kt),Ia=!lt(Jr)||Qr;if(!kt&&f.state.next({name:B,type:y.type,values:ze(m)}),Ta)return(c.isValid||o.isValid)&&(r.mode==="onBlur"?kt&&g():kt||g()),Ia&&f.state.next({name:B,...Qr?{}:Jr});if(!kt&&Qr&&f.state.next({...l}),r.resolver){const{errors:$l}=await ae([B]);if(me(dr),ce){const Oa=Ss(l.errors,s,B),ql=Ss($l,s,Oa.name||B);Ie=ql.error,B=ql.name,it=lt($l)}}else b([B],!0),Ie=(await ks(oe,i.disabled,m,h,r.shouldUseNativeValidation))[B],b([B]),me(dr),ce&&(Ie?it=!1:(c.isValid||o.isValid)&&(it=await E(s,!0)));ce&&(oe._f.deps&&Pe(oe._f.deps),U(B,it,Ie,Jr))}},ve=(y,M)=>{if(fe(l.errors,M)&&y.focus)return y.focus(),1},Pe=async(y,M={})=>{let B,ce;const oe=rr(y);if(r.resolver){const me=await k(Ge(y)?y:oe);B=lt(me),ce=y?!oe.some(be=>fe(me,be)):B}else y?(ce=(await Promise.all(oe.map(async me=>{const be=fe(s,me);return await E(be&&be._f?{[me]:be}:be)}))).every(Boolean),!(!ce&&!l.isValid)&&g()):ce=B=await E(s);return f.state.next({...!yt(y)||(c.isValid||o.isValid)&&B!==l.isValid?{}:{name:y},...r.resolver||!y?{isValid:B}:{},errors:l.errors}),M.shouldFocus&&!ce&&lr(s,ve,y?oe:i.mount),ce},Ae=y=>{const M={...n.mount?m:a};return Ge(y)?M:yt(y)?fe(M,y):y.map(B=>fe(M,B))},We=(y,M)=>({invalid:!!fe((M||l).errors,y),isDirty:!!fe((M||l).dirtyFields,y),error:fe((M||l).errors,y),isValidating:!!fe(l.validatingFields,y),isTouched:!!fe((M||l).touchedFields,y)}),ie=y=>{y&&rr(y).forEach(M=>Be(l.errors,M)),f.state.next({errors:y?l.errors:{}})},pe=(y,M,B)=>{const ce=(fe(s,y,{_f:{}})._f||{}).ref,oe=fe(l.errors,y)||{},{ref:me,message:be,type:De,...Ie}=oe;Le(l.errors,y,{...Ie,...M,ref:ce}),f.state.next({name:y,errors:l.errors,isValid:!1}),B&&B.shouldFocus&&ce&&ce.focus&&ce.focus()},qe=(y,M)=>bt(y)?f.state.subscribe({next:B=>"values"in B&&y(Y(void 0,M),B)}):Y(y,M,!0),$=y=>f.state.subscribe({next:M=>{ho(y.name,M.name,y.exact)&&bo(M,y.formState||c,Fa,y.reRenderRoot)&&y.callback({values:{...m},...l,...M,defaultValues:a})}}).unsubscribe,he=y=>(n.mount=!0,o={...o,...y.formState},$({...y,formState:o})),ke=(y,M={})=>{for(const B of y?rr(y):i.mount)i.mount.delete(B),i.array.delete(B),M.keepValue||(Be(s,B),Be(m,B)),!M.keepError&&Be(l.errors,B),!M.keepDirty&&Be(l.dirtyFields,B),!M.keepTouched&&Be(l.touchedFields,B),!M.keepIsValidating&&Be(l.validatingFields,B),!r.shouldUnregister&&!M.keepDefaultValue&&Be(a,B);f.state.next({values:ze(m)}),f.state.next({...l,...M.keepDirty?{isDirty:w()}:{}}),!M.keepIsValid&&g()},Me=({disabled:y,name:M})=>{(gt(y)&&n.mount||y||i.disabled.has(M))&&(y?i.disabled.add(M):i.disabled.delete(M))},je=(y,M={})=>{let B=fe(s,y);const ce=gt(M.disabled)||gt(r.disabled);return Le(s,y,{...B||{},_f:{...B&&B._f?B._f:{ref:{name:y}},name:y,mount:!0,...M}}),i.mount.add(y),B?Me({disabled:gt(M.disabled)?M.disabled:r.disabled,name:y}):G(y,!0,M.value),{...ce?{disabled:M.disabled||r.disabled}:{},...r.progressive?{required:!!M.required,min:tr(M.min),max:tr(M.max),minLength:tr(M.minLength),maxLength:tr(M.maxLength),pattern:tr(M.pattern)}:{},name:y,onChange:Ce,onBlur:Ce,ref:oe=>{if(oe){je(y,M),B=fe(s,y);const me=Ge(oe.value)&&oe.querySelectorAll&&oe.querySelectorAll("input,select,textarea")[0]||oe,be=oo(me),De=B._f.refs||[];if(be?De.find(Ie=>Ie===me):me===B._f.ref)return;Le(s,y,{_f:{...B._f,...be?{refs:[...De.filter(al),me,...Array.isArray(fe(a,y))?[{}]:[]],ref:{type:me.type,name:y}}:{ref:me}}}),G(y,!1,void 0,me)}else B=fe(s,y,{}),B._f&&(B._f.mount=!1),(r.shouldUnregister||M.shouldUnregister)&&!(ro(i.array,y)&&n.action)&&i.unMount.add(y)}}},Zt=()=>r.shouldFocusError&&lr(s,ve,i.mount),br=y=>{gt(y)&&(f.state.next({disabled:y}),lr(s,(M,B)=>{const ce=fe(s,B);ce&&(M.disabled=ce._f.disabled||y,Array.isArray(ce._f.refs)&&ce._f.refs.forEach(oe=>{oe.disabled=ce._f.disabled||y}))},0,!1))},Ll=(y,M)=>async B=>{let ce;B&&(B.preventDefault&&B.preventDefault(),B.persist&&B.persist());let oe=ze(m);if(f.state.next({isSubmitting:!0}),r.resolver){const{errors:me,values:be}=await ae();l.errors=me,oe=ze(be)}else await E(s);if(i.disabled.size)for(const me of i.disabled)Be(oe,me);if(Be(l.errors,"root"),lt(l.errors)){f.state.next({errors:{}});try{await y(oe,B)}catch(me){ce=me}}else M&&await M({...l.errors},B),Zt(),setTimeout(Zt);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:lt(l.errors)&&!ce,submitCount:l.submitCount+1,errors:l.errors}),ce)throw ce},Da=(y,M={})=>{fe(s,y)&&(Ge(M.defaultValue)?de(y,ze(fe(a,y))):(de(y,M.defaultValue),Le(a,y,ze(M.defaultValue))),M.keepTouched||Be(l.touchedFields,y),M.keepDirty||(Be(l.dirtyFields,y),l.isDirty=M.defaultValue?w(y,ze(fe(a,y))):w()),M.keepError||(Be(l.errors,y),c.isValid&&g()),f.state.next({...l}))},Ml=(y,M={})=>{const B=y?ze(y):a,ce=ze(B),oe=lt(y),me=oe?a:ce;if(M.keepDefaultValues||(a=B),!M.keepValues){if(M.keepDirtyValues){const be=new Set([...i.mount,...Object.keys(er(a,m))]);for(const De of Array.from(be))fe(l.dirtyFields,De)?Le(me,De,fe(m,De)):de(De,fe(me,De))}else{if(Rl&&Ge(y))for(const be of i.mount){const De=fe(s,be);if(De&&De._f){const Ie=Array.isArray(De._f.refs)?De._f.refs[0]:De._f.ref;if(Ir(Ie)){const it=Ie.closest("form");if(it){it.reset();break}}}}if(M.keepFieldsRef)for(const be of i.mount)de(be,fe(me,be));else s={}}m=r.shouldUnregister?M.keepDefaultValues?ze(a):{}:ze(me),f.array.next({values:{...me}}),f.state.next({values:{...me}})}i={mount:M.keepDirtyValues?i.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},n.mount=!c.isValid||!!M.keepIsValid||!!M.keepDirtyValues,n.watch=!!r.shouldUnregister,f.state.next({submitCount:M.keepSubmitCount?l.submitCount:0,isDirty:oe?!1:M.keepDirty?l.isDirty:!!(M.keepDefaultValues&&!Ft(y,a)),isSubmitted:M.keepIsSubmitted?l.isSubmitted:!1,dirtyFields:oe?{}:M.keepDirtyValues?M.keepDefaultValues&&m?er(a,m):l.dirtyFields:M.keepDefaultValues&&y?er(a,y):M.keepDirty?l.dirtyFields:{},touchedFields:M.keepTouched?l.touchedFields:{},errors:M.keepErrors?l.errors:{},isSubmitSuccessful:M.keepIsSubmitSuccessful?l.isSubmitSuccessful:!1,isSubmitting:!1})},Ul=(y,M)=>Ml(bt(y)?y(m):y,M),Ra=(y,M={})=>{const B=fe(s,y),ce=B&&B._f;if(ce){const oe=ce.refs?ce.refs[0]:ce.ref;oe.focus&&(oe.focus(),M.shouldSelect&&bt(oe.select)&&oe.select())}},Fa=y=>{l={...l,...y}},jl={control:{register:je,unregister:ke,getFieldState:We,handleSubmit:Ll,setError:pe,_subscribe:$,_runSchema:ae,_focusError:Zt,_getWatch:Y,_getDirty:w,_setValid:g,_setFieldArray:S,_setDisabledField:Me,_setErrors:L,_getFieldArray:H,_reset:Ml,_resetDefaultValues:()=>bt(r.defaultValues)&&r.defaultValues().then(y=>{Ul(y,r.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:x,_disableForm:br,_subjects:f,_proxyFormState:c,get _fields(){return s},get _formValues(){return m},get _state(){return n},set _state(y){n=y},get _defaultValues(){return a},get _names(){return i},set _names(y){i=y},get _formState(){return l},get _options(){return r},set _options(y){r={...r,...y}}},subscribe:he,trigger:Pe,register:je,handleSubmit:Ll,watch:qe,setValue:de,getValues:Ae,reset:Ul,resetField:Da,clearErrors:ie,unregister:ke,setError:pe,setFocus:Ra,getFieldState:We};return{...jl,formControl:jl}}function Aa(t={}){const r=e.useRef(void 0),l=e.useRef(void 0),[s,a]=e.useState({isDirty:!1,isValidating:!1,isLoading:bt(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:bt(t.defaultValues)?void 0:t.defaultValues});if(!r.current)if(t.formControl)r.current={...t.formControl,formState:s},t.defaultValues&&!bt(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:n,...i}=Eo(t);r.current={...i,formState:s}}const m=r.current.control;return m._options=t,mo(()=>{const n=m._subscribe({formState:m._proxyFormState,callback:()=>a({...m._formState}),reRenderRoot:!0});return a(i=>({...i,isReady:!0})),m._formState.isReady=!0,n},[m]),e.useEffect(()=>m._disableForm(t.disabled),[m,t.disabled]),e.useEffect(()=>{t.mode&&(m._options.mode=t.mode),t.reValidateMode&&(m._options.reValidateMode=t.reValidateMode)},[m,t.mode,t.reValidateMode]),e.useEffect(()=>{t.errors&&(m._setErrors(t.errors),m._focusError())},[m,t.errors]),e.useEffect(()=>{t.shouldUnregister&&m._subjects.state.next({values:m._getWatch()})},[m,t.shouldUnregister]),e.useEffect(()=>{if(m._proxyFormState.isDirty){const n=m._getDirty();n!==s.isDirty&&m._subjects.state.next({isDirty:n})}},[m,s.isDirty]),e.useEffect(()=>{t.values&&!Ft(t.values,l.current)?(m._reset(t.values,{keepFieldsRef:!0,...m._options.resetOptions}),l.current=t.values,a(n=>({...n}))):m._resetDefaultValues()},[m,t.values]),e.useEffect(()=>{m._state.mount||(m._setValid(),m._state.mount=!0),m._state.watch&&(m._state.watch=!1,m._subjects.state.next({...m._formState})),m._removeUnmounted()}),r.current.formState=ao(s,m),r.current}var P="/app/code/frontend/src/pages/auth/RegisterPage.tsx";const As=["Nairobi","Mombasa","Kiambu","Nakuru","Machakos","Kajiado","Murang'a","Nyeri","Meru","Embu","Tharaka-Nithi","Kirinyaga","Nyandarua","Laikipia","Samburu","Trans-Nzoia","Uasin-Gishu","Elgeyo-Marakwet","Nandi","Baringo","Kericho","Bomet","Kakamega","Vihiga","Bungoma","Busia","Siaya","Kisumu","Homa Bay","Migori","Kisii","Nyamira","Narok","Turkana","West Pokot","Isiolo","Marsabit","Mandera","Wajir","Garissa","Tana River","Lamu","Taita-Taveta","Kwale","Kilifi"],vo=["Motorcycle","Three-wheeler","Pickup Truck","Van","Small Truck","Large Truck"],wo=[{value:"CUSTOMER",label:"Customer",description:"Shop for fresh produce from local farmers",icon:e.createElement(ot,{className:"w-8 h-8",__self:void 0,__source:{fileName:P,lineNumber:121,columnNumber:11}}),color:"bg-blue-500"},{value:"FARMER",label:"Farmer",description:"Sell your produce directly to customers",icon:e.createElement(Pt,{className:"w-8 h-8",__self:void 0,__source:{fileName:P,lineNumber:128,columnNumber:11}}),color:"bg-green-500"},{value:"DRIVER",label:"Driver",description:"Deliver products and earn money",icon:e.createElement(Ue,{className:"w-8 h-8",__self:void 0,__source:{fileName:P,lineNumber:135,columnNumber:11}}),color:"bg-orange-500"},{value:"FARMER_AGENT",label:"Farmer Agent",description:"Help farmers join the platform",icon:e.createElement(et,{className:"w-8 h-8",__self:void 0,__source:{fileName:P,lineNumber:142,columnNumber:11}}),color:"bg-purple-500"}];function So(){const t=_t(),[r,l]=R.useState(1),[s,a]=R.useState(!1),[m,n]=R.useState(!1),[i,N]=R.useState(!1),[u,c]=R.useState([]),[o,f]=R.useState([]),{register:h,handleSubmit:A,watch:g,setValue:b,formState:{errors:S}}=Aa(),v=g("role"),L=g("password");R.useEffect(()=>{(async()=>{try{const x=await ue.get("/api/farmer-categories");c(x.data.categories||[])}catch(x){console.error("Failed to fetch farmer categories:",x),F.error("Failed to load farmer categories")}})()},[]);const G=E=>{f(x=>x.includes(E)?x.filter(w=>w!==E):[...x,E])},T=async E=>{if(E.password!==E.confirmPassword){F.error("Passwords do not match");return}if(E.role==="FARMER"&&o.length===0){F.error("Please select at least one farming category");return}N(!0);try{const x={firstName:E.firstName,lastName:E.lastName,phone:E.phone,email:E.email,password:E.password,role:E.role,county:E.county};E.role==="FARMER"?(E.farmName&&(x.farmName=E.farmName),E.farmSize&&(x.farmSize=E.farmSize),E.kraPin&&(x.kraPin=E.kraPin),E.subCounty&&(x.subCounty=E.subCounty),x.categories=o):E.role==="DRIVER"?(x.licenseNumber=E.licenseNumber,x.vehicleType=E.vehicleType,x.vehicleRegNo=E.vehicleRegNo,x.idNumber=E.idNumber):E.role==="FARMER_AGENT"&&(x.assignedCounty=E.assignedCounty);const w=await ue.post("/api/auth/register",x);F.success("Registration successful! Please login to continue."),w.data.requiresPayment&&F("You will need to pay the activation fee after login",{icon:""}),w.data.requiresApproval&&F("Your application will be reviewed by our team",{icon:""}),t("/login")}catch(x){console.error("Registration error:",x),console.log("Error response data:",x.response?.data),console.log("Error status:",x.response?.status),console.log("Error headers:",x.response?.headers);let w="Registration failed";if(x.response?.data){const Y=x.response.data;if(console.log("Full error data object:",Y),w=Y.message||Y.error||Y.details||Y.msg||w,x.response.status===409){w.toLowerCase().includes("phone")?w="This phone number is already registered. Please use a different phone number or try logging in.":w.toLowerCase().includes("email")?w="This email address is already registered. Please use a different email or try logging in.":w.toLowerCase().includes("user")||w.toLowerCase().includes("exist")?w="An account with these details already exists. Please try logging in or use different credentials.":w=`Registration conflict: ${w}`,F.error(w,{duration:8e3}),setTimeout(()=>{F(" Click here to go to login page",{duration:5e3,style:{cursor:"pointer",backgroundColor:"#3B82F6",color:"white"}})},2e3);return}}else x.message&&(w=x.message);console.log("Processed error message:",w),F.error(w)}finally{N(!1)}},U=()=>{r<3&&l(r+1)},ae=()=>{r>1&&l(r-1)},k=E=>{b("role",E),U()};return e.createElement("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",__self:this,__source:{fileName:P,lineNumber:314,columnNumber:5}},e.createElement("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",__self:this,__source:{fileName:P,lineNumber:315,columnNumber:7}},e.createElement("div",{className:"flex justify-center",__self:this,__source:{fileName:P,lineNumber:316,columnNumber:9}},e.createElement("div",{className:"w-12 h-12 bg-primary-600 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:P,lineNumber:317,columnNumber:11}},e.createElement("span",{className:"text-white font-bold text-lg",__self:this,__source:{fileName:P,lineNumber:318,columnNumber:13}},"Z"))),e.createElement("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",__self:this,__source:{fileName:P,lineNumber:321,columnNumber:9}},"Create your account"),e.createElement("p",{className:"mt-2 text-center text-sm text-gray-600",__self:this,__source:{fileName:P,lineNumber:324,columnNumber:9}},"Already have an account?"," ",e.createElement(Se,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",__self:this,__source:{fileName:P,lineNumber:326,columnNumber:11}},"Sign in here"))),e.createElement("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",__self:this,__source:{fileName:P,lineNumber:335,columnNumber:7}},e.createElement("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",__self:this,__source:{fileName:P,lineNumber:336,columnNumber:9}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:P,lineNumber:338,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:P,lineNumber:339,columnNumber:13}},[1,2,3].map(E=>e.createElement("div",{key:E,className:`flex items-center ${r>=E?"text-primary-600":"text-gray-400"}`,__self:this,__source:{fileName:P,lineNumber:341,columnNumber:17}},e.createElement("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${r>=E?"border-primary-600 bg-primary-600 text-white":"border-gray-300"}`,__self:this,__source:{fileName:P,lineNumber:347,columnNumber:19}},r>E?e.createElement(ar,{className:"w-4 h-4",__self:this,__source:{fileName:P,lineNumber:354,columnNumber:39}}):E),E<3&&e.createElement("div",{className:`w-16 h-0.5 mx-2 ${r>E?"bg-primary-600":"bg-gray-200"}`,__self:this,__source:{fileName:P,lineNumber:357,columnNumber:21}})))),e.createElement("div",{className:"flex justify-between mt-2 text-xs text-gray-600",__self:this,__source:{fileName:P,lineNumber:366,columnNumber:13}},e.createElement("span",{__self:this,__source:{fileName:P,lineNumber:367,columnNumber:15}},"Role"),e.createElement("span",{__self:this,__source:{fileName:P,lineNumber:368,columnNumber:15}},"Info"),e.createElement("span",{__self:this,__source:{fileName:P,lineNumber:369,columnNumber:15}},"Details"))),e.createElement("form",{onSubmit:A(T),__self:this,__source:{fileName:P,lineNumber:373,columnNumber:11}},r===1&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:P,lineNumber:376,columnNumber:15}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4",__self:this,__source:{fileName:P,lineNumber:377,columnNumber:17}},"Choose your role"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:P,lineNumber:381,columnNumber:17}},wo.map(E=>e.createElement("button",{key:E.value,type:"button",onClick:()=>k(E.value),className:"w-full p-4 border border-gray-300 rounded-lg hover:border-primary-500 hover:bg-primary-50 transition-colors text-left",__self:this,__source:{fileName:P,lineNumber:383,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:P,lineNumber:389,columnNumber:23}},e.createElement("div",{className:`${E.color} text-white p-2 rounded-lg mr-4`,__self:this,__source:{fileName:P,lineNumber:390,columnNumber:25}},E.icon),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:395,columnNumber:25}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:P,lineNumber:396,columnNumber:27}},E.label),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:P,lineNumber:399,columnNumber:27}},E.description))))))),r===2&&e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:P,lineNumber:412,columnNumber:15}},e.createElement("div",{className:"flex items-center mb-4",__self:this,__source:{fileName:P,lineNumber:413,columnNumber:17}},e.createElement("button",{type:"button",onClick:ae,className:"mr-4 text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:P,lineNumber:414,columnNumber:19}},e.createElement(sr,{className:"w-5 h-5",__self:this,__source:{fileName:P,lineNumber:419,columnNumber:21}})),e.createElement("h3",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:P,lineNumber:421,columnNumber:19}},"Basic Information")),e.createElement("div",{className:"grid grid-cols-2 gap-4",__self:this,__source:{fileName:P,lineNumber:426,columnNumber:17}},e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:427,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:428,columnNumber:21}},"First Name *"),e.createElement("input",{...h("firstName",{required:"First name is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:431,columnNumber:21}}),S.firstName&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:P,lineNumber:438,columnNumber:23}},S.firstName.message)),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:444,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:445,columnNumber:21}},"Last Name *"),e.createElement("input",{...h("lastName",{required:"Last name is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:448,columnNumber:21}}),S.lastName&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:P,lineNumber:455,columnNumber:23}},S.lastName.message))),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:462,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:463,columnNumber:19}},"Phone Number *"),e.createElement("input",{...h("phone",{required:"Phone number is required",pattern:{value:/^(\+254|0)[7-9]\d{8}$/,message:"Please enter a valid Kenyan phone number"}}),placeholder:"+254712345678 or 0712345678",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:466,columnNumber:19}}),S.phone&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:P,lineNumber:478,columnNumber:21}},S.phone.message),e.createElement("p",{className:"mt-1 text-xs text-gray-500",__self:this,__source:{fileName:P,lineNumber:482,columnNumber:19}},"This phone number will be used for login and notifications")),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:487,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:488,columnNumber:19}},"Email Address"),e.createElement("input",{...h("email",{pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"}}),type:"email",placeholder:"your@email.com (optional)",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:491,columnNumber:19}}),S.email&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:P,lineNumber:503,columnNumber:21}},S.email.message),e.createElement("p",{className:"mt-1 text-xs text-gray-500",__self:this,__source:{fileName:P,lineNumber:507,columnNumber:19}},"Optional - used for account recovery and important updates")),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:512,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:513,columnNumber:19}},"County *"),e.createElement("select",{...h("county",{required:"County is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:516,columnNumber:19}},e.createElement("option",{value:"",__self:this,__source:{fileName:P,lineNumber:520,columnNumber:21}},"Select County"),As.map(E=>e.createElement("option",{key:E,value:E,__self:this,__source:{fileName:P,lineNumber:522,columnNumber:23}},E))),S.county&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:P,lineNumber:528,columnNumber:21}},S.county.message)),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:534,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:535,columnNumber:19}},"Password *"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:P,lineNumber:538,columnNumber:19}},e.createElement("input",{...h("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:s?"text":"password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:539,columnNumber:21}}),e.createElement("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!s),__self:this,__source:{fileName:P,lineNumber:550,columnNumber:21}},s?e.createElement(wr,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:P,lineNumber:556,columnNumber:25}}):e.createElement(ct,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:P,lineNumber:558,columnNumber:25}}))),S.password&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:P,lineNumber:563,columnNumber:21}},S.password.message)),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:569,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:570,columnNumber:19}},"Confirm Password *"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:P,lineNumber:573,columnNumber:19}},e.createElement("input",{...h("confirmPassword",{required:"Please confirm your password",validate:E=>E===L||"Passwords do not match"}),type:m?"text":"password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:574,columnNumber:21}}),e.createElement("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>n(!m),__self:this,__source:{fileName:P,lineNumber:583,columnNumber:21}},m?e.createElement(wr,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:P,lineNumber:591,columnNumber:25}}):e.createElement(ct,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:P,lineNumber:593,columnNumber:25}}))),S.confirmPassword&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:P,lineNumber:598,columnNumber:21}},S.confirmPassword.message)),e.createElement("button",{type:"button",onClick:U,className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 transition-colors font-medium flex items-center justify-center",__self:this,__source:{fileName:P,lineNumber:604,columnNumber:17}},"Next",e.createElement(St,{className:"w-5 h-5 ml-2",__self:this,__source:{fileName:P,lineNumber:610,columnNumber:19}}))),r===3&&e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:P,lineNumber:617,columnNumber:15}},e.createElement("div",{className:"flex items-center mb-4",__self:this,__source:{fileName:P,lineNumber:618,columnNumber:17}},e.createElement("button",{type:"button",onClick:ae,className:"mr-4 text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:P,lineNumber:619,columnNumber:19}},e.createElement(sr,{className:"w-5 h-5",__self:this,__source:{fileName:P,lineNumber:624,columnNumber:21}})),e.createElement("h3",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:P,lineNumber:626,columnNumber:19}},v==="FARMER"&&"Farm Details",v==="DRIVER"&&"Driver Information",v==="FARMER_AGENT"&&"Agent Information",v==="CUSTOMER"&&"Almost Done!")),v==="FARMER"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:P,lineNumber:636,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:637,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:638,columnNumber:23}},"Farm Name"),e.createElement("input",{...h("farmName"),placeholder:"e.g., Green Valley Farm",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:641,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:648,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:649,columnNumber:23}},"Sub-County"),e.createElement("input",{...h("subCounty"),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:652,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:658,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:659,columnNumber:23}},"Farm Size (acres)"),e.createElement("input",{...h("farmSize"),type:"number",step:"0.1",placeholder:"e.g., 5.5",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:662,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:671,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:672,columnNumber:23}},"KRA PIN"),e.createElement("input",{...h("kraPin"),placeholder:"e.g., A123456789K",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:675,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:682,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-3",__self:this,__source:{fileName:P,lineNumber:683,columnNumber:23}},"Farming Categories *"),e.createElement("p",{className:"text-sm text-gray-600 mb-3",__self:this,__source:{fileName:P,lineNumber:686,columnNumber:23}},"Select one or more categories that describe what you farm:"),u.length>0?e.createElement("div",{className:"grid grid-cols-2 gap-3 max-h-48 overflow-y-auto",__self:this,__source:{fileName:P,lineNumber:690,columnNumber:25}},u.map(E=>e.createElement("label",{key:E.id,className:"flex items-start p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",__self:this,__source:{fileName:P,lineNumber:692,columnNumber:29}},e.createElement("input",{type:"checkbox",checked:o.includes(E.id),onChange:()=>G(E.id),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500 mt-0.5 mr-3",__self:this,__source:{fileName:P,lineNumber:696,columnNumber:31}}),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:P,lineNumber:702,columnNumber:31}},e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:P,lineNumber:703,columnNumber:33}},E.name),E.description&&e.createElement("div",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:P,lineNumber:707,columnNumber:35}},E.description))))):e.createElement("div",{className:"text-center py-4 text-gray-500 border border-gray-200 rounded-lg",__self:this,__source:{fileName:P,lineNumber:716,columnNumber:25}},"Loading categories..."),o.length>0&&e.createElement("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",__self:this,__source:{fileName:P,lineNumber:722,columnNumber:25}},e.createElement("p",{className:"text-sm text-green-800",__self:this,__source:{fileName:P,lineNumber:723,columnNumber:27}},"Selected ",o.length," categor",o.length===1?"y":"ies",":",e.createElement("span",{className:"font-medium ml-1",__self:this,__source:{fileName:P,lineNumber:725,columnNumber:29}},u.filter(E=>o.includes(E.id)).map(E=>E.name).join(", ")))),o.length===0&&e.createElement("p",{className:"text-sm text-red-600 mt-2",__self:this,__source:{fileName:P,lineNumber:736,columnNumber:25}},"Please select at least one farming category.")),e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",__self:this,__source:{fileName:P,lineNumber:742,columnNumber:21}},e.createElement("div",{className:"flex",__self:this,__source:{fileName:P,lineNumber:743,columnNumber:23}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:P,lineNumber:744,columnNumber:25}},e.createElement("svg",{className:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",__self:this,__source:{fileName:P,lineNumber:745,columnNumber:27}},e.createElement("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd",__self:this,__source:{fileName:P,lineNumber:750,columnNumber:29}}))),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:P,lineNumber:757,columnNumber:25}},e.createElement("h3",{className:"text-sm font-medium text-yellow-800",__self:this,__source:{fileName:P,lineNumber:758,columnNumber:27}},"Activation Fee Required"),e.createElement("div",{className:"mt-2 text-sm text-yellow-700",__self:this,__source:{fileName:P,lineNumber:761,columnNumber:27}},e.createElement("p",{__self:this,__source:{fileName:P,lineNumber:762,columnNumber:29}},"Farmers need to pay a one-time activation fee of KES 300 after registration.")))))),v==="DRIVER"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:P,lineNumber:775,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:776,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:777,columnNumber:23}},"Driving License Number *"),e.createElement("input",{...h("licenseNumber",{required:"License number is required for drivers"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:780,columnNumber:23}}),S.licenseNumber&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:P,lineNumber:787,columnNumber:25}},S.licenseNumber.message)),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:793,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:794,columnNumber:23}},"Vehicle Type *"),e.createElement("select",{...h("vehicleType",{required:"Vehicle type is required for drivers"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:797,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:P,lineNumber:803,columnNumber:25}},"Select Vehicle Type"),vo.map(E=>e.createElement("option",{key:E,value:E,__self:this,__source:{fileName:P,lineNumber:805,columnNumber:27}},E))),S.vehicleType&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:P,lineNumber:811,columnNumber:25}},S.vehicleType.message)),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:817,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:818,columnNumber:23}},"Vehicle Registration Number *"),e.createElement("input",{...h("vehicleRegNo",{required:"Vehicle registration number is required for drivers"}),placeholder:"e.g., KCA 123X",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:821,columnNumber:23}}),S.vehicleRegNo&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:P,lineNumber:830,columnNumber:25}},S.vehicleRegNo.message)),e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:836,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:837,columnNumber:23}},"National ID Number *"),e.createElement("input",{...h("idNumber",{required:"ID number is required for drivers"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:840,columnNumber:23}}),S.idNumber&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:P,lineNumber:847,columnNumber:25}},S.idNumber.message)),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",__self:this,__source:{fileName:P,lineNumber:853,columnNumber:21}},e.createElement("div",{className:"flex",__self:this,__source:{fileName:P,lineNumber:854,columnNumber:23}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:P,lineNumber:855,columnNumber:25}},e.createElement("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",__self:this,__source:{fileName:P,lineNumber:856,columnNumber:27}},e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd",__self:this,__source:{fileName:P,lineNumber:861,columnNumber:29}}))),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:P,lineNumber:868,columnNumber:25}},e.createElement("h3",{className:"text-sm font-medium text-blue-800",__self:this,__source:{fileName:P,lineNumber:869,columnNumber:27}},"Approval Required"),e.createElement("div",{className:"mt-2 text-sm text-blue-700",__self:this,__source:{fileName:P,lineNumber:872,columnNumber:27}},e.createElement("p",{__self:this,__source:{fileName:P,lineNumber:873,columnNumber:29}},"Driver applications require verification and approval by our team.")))))),v==="FARMER_AGENT"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:P,lineNumber:886,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:P,lineNumber:887,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:P,lineNumber:888,columnNumber:23}},"Assigned County *"),e.createElement("select",{...h("assignedCounty",{required:"Assigned county is required for agents"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:P,lineNumber:891,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:P,lineNumber:897,columnNumber:25}},"Select County"),As.map(E=>e.createElement("option",{key:E,value:E,__self:this,__source:{fileName:P,lineNumber:899,columnNumber:27}},E))),S.assignedCounty&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:P,lineNumber:905,columnNumber:25}},S.assignedCounty.message)),e.createElement("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",__self:this,__source:{fileName:P,lineNumber:911,columnNumber:21}},e.createElement("div",{className:"flex",__self:this,__source:{fileName:P,lineNumber:912,columnNumber:23}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:P,lineNumber:913,columnNumber:25}},e.createElement("svg",{className:"h-5 w-5 text-purple-400",fill:"currentColor",viewBox:"0 0 20 20",__self:this,__source:{fileName:P,lineNumber:914,columnNumber:27}},e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd",__self:this,__source:{fileName:P,lineNumber:919,columnNumber:29}}))),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:P,lineNumber:926,columnNumber:25}},e.createElement("h3",{className:"text-sm font-medium text-purple-800",__self:this,__source:{fileName:P,lineNumber:927,columnNumber:27}},"Agent Responsibilities"),e.createElement("div",{className:"mt-2 text-sm text-purple-700",__self:this,__source:{fileName:P,lineNumber:930,columnNumber:27}},e.createElement("p",{__self:this,__source:{fileName:P,lineNumber:931,columnNumber:29}},"As an agent, you'll help onboard farmers in your assigned county and earn commissions.")))))),v==="CUSTOMER"&&e.createElement("div",{className:"text-center py-8",__self:this,__source:{fileName:P,lineNumber:944,columnNumber:19}},e.createElement("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",__self:this,__source:{fileName:P,lineNumber:945,columnNumber:21}},e.createElement(ar,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:P,lineNumber:946,columnNumber:23}})),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:P,lineNumber:948,columnNumber:21}},"You're all set!"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:P,lineNumber:951,columnNumber:21}},"Complete your registration to start shopping for fresh produce.")),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",__self:this,__source:{fileName:P,lineNumber:959,columnNumber:17}},e.createElement("div",{className:"flex",__self:this,__source:{fileName:P,lineNumber:960,columnNumber:19}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:P,lineNumber:961,columnNumber:21}},e.createElement("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",__self:this,__source:{fileName:P,lineNumber:962,columnNumber:23}},e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd",__self:this,__source:{fileName:P,lineNumber:963,columnNumber:25}}))),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:P,lineNumber:966,columnNumber:21}},e.createElement("h3",{className:"text-sm font-medium text-blue-800",__self:this,__source:{fileName:P,lineNumber:967,columnNumber:23}},"Account Check"),e.createElement("div",{className:"mt-2 text-sm text-blue-700",__self:this,__source:{fileName:P,lineNumber:970,columnNumber:23}},e.createElement("p",{__self:this,__source:{fileName:P,lineNumber:971,columnNumber:25}},"If you get an error about existing account, it means this phone number or email is already registered."," ",e.createElement(Se,{to:"/login",className:"font-medium underline hover:text-blue-900",__self:this,__source:{fileName:P,lineNumber:973,columnNumber:27}},"Try logging in instead"),"."))))),e.createElement("button",{type:"submit",disabled:i,className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",__self:this,__source:{fileName:P,lineNumber:982,columnNumber:17}},i?"Creating Account...":"Create Account"))))))}var _="/app/code/frontend/src/pages/farmer/FarmerDashboard.tsx";function Co(){const{user:t}=Te(),[r,l]=R.useState(!1),[s,a]=R.useState("overview"),[m,n]=R.useState([]),[i,N]=R.useState(null),[u,c]=R.useState([]),[o,f]=R.useState(!0),[h,A]=R.useState({totalConsignments:0,pendingConsignments:0,completedConsignments:0,totalEarnings:0}),[g,b]=R.useState(!1),[S,v]=R.useState(""),[L,G]=R.useState(!1);R.useEffect(()=>{T()},[]);const T=async()=>{try{f(!0);const w=localStorage.getItem("authToken")||localStorage.getItem("token"),[Y,H,Ne]=await Promise.all([ue.get("/api/consignments",{headers:{Authorization:`Bearer ${w}`}}),ue.get("/api/wallet",{headers:{Authorization:`Bearer ${w}`}}),ue.get("/api/notifications",{headers:{Authorization:`Bearer ${w}`}})]);console.log(" Raw API responses:",{consignments:Y.data,wallet:H.data,notifications:Ne.data});let re=[];Y.data&&Y.data.consignments&&Array.isArray(Y.data.consignments)?re=Y.data.consignments:Array.isArray(Y.data)&&(re=Y.data);let de={balance:0,transactions:[]};H.data&&H.data.wallet?de={balance:parseFloat(H.data.wallet.balance)||0,transactions:Array.isArray(H.data.wallet.transactions)?H.data.wallet.transactions:[]}:H.data&&typeof H.data=="object"&&(de={balance:parseFloat(H.data.balance)||0,transactions:Array.isArray(H.data.transactions)?H.data.transactions:[]});let Ce=[];Ne.data&&Ne.data.notifications&&Array.isArray(Ne.data.notifications)?Ce=Ne.data.notifications:Array.isArray(Ne.data)&&(Ce=Ne.data),console.log(" Processed data:",{consignments:re.length,wallet:de,notifications:Ce.length}),n(re),N(de),c(Ce);const ve=Array.isArray(re)?re:[],Pe=ve.length,Ae=ve.filter(qe=>qe&&qe.status==="PENDING").length,We=ve.filter(qe=>qe&&qe.status==="COMPLETED").length,ie=Array.isArray(de.transactions)?de.transactions:[],pe=(Number(de.balance)||0)+ie.filter(qe=>qe&&qe.type==="DEBIT").reduce((qe,$)=>qe+(parseFloat($.amount)||0),0);console.log(" Calculated stats:",{totalConsignments:Pe,pendingConsignments:Ae,completedConsignments:We,totalEarnings:pe}),A({totalConsignments:Pe,pendingConsignments:Ae,completedConsignments:We,totalEarnings:pe})}catch(w){console.error("Failed to fetch dashboard data:",w),F.error("Failed to load dashboard data")}finally{f(!1)}},U=async(w,Y)=>{try{const H=localStorage.getItem("authToken")||localStorage.getItem("token"),Ne=await ue.post("/api/wallet/withdraw",{amount:w,phoneNumber:Y},{headers:{Authorization:`Bearer ${H}`}});F.success("Withdrawal initiated! Check your phone for M-Pesa prompt."),T()}catch(H){F.error(H.response?.data?.error||"Withdrawal failed")}},ae=async()=>{if(!S.trim()){F.error("Please enter your phone number");return}if(!/^(\+254|254|0)[17]\d{8}$/.test(S.replace(/\s/g,""))){F.error("Please enter a valid Kenyan phone number");return}G(!0);try{const Y=localStorage.getItem("authToken")||localStorage.getItem("token"),H=await ue.post("/api/admin/registration-fees/stk-push",{farmer_id:t?.id,phone_number:S,amount:300},{headers:{Authorization:`Bearer ${Y}`}});H.data.success?(F.success("Registration fee payment initiated! Check your phone for M-Pesa prompt."),b(!1),v("")):F.error(H.data.message||"Failed to initiate payment")}catch(Y){console.error("Payment error:",Y),F.error(Y.response?.data?.message||"Failed to initiate payment. Please try again.")}finally{G(!1)}},k=[{id:"overview",label:"Overview",icon:Rt},{id:"consignments",label:"Consignments",icon:xe},{id:"wallet",label:"Wallet",icon:Zr},{id:"notifications",label:"Notifications",icon:jt},{id:"profile",label:"Profile",icon:Ht}],E=w=>({PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",PRICE_SUGGESTED:"bg-blue-100 text-blue-800",DRIVER_ASSIGNED:"bg-indigo-100 text-indigo-800",IN_TRANSIT:"bg-purple-100 text-purple-800",DELIVERED:"bg-cyan-100 text-cyan-800",COMPLETED:"bg-green-100 text-green-800"})[w]||"bg-gray-100 text-gray-800",x=w=>{const H={PENDING:Ke,APPROVED:$e,REJECTED:Je,PRICE_SUGGESTED:tt,DRIVER_ASSIGNED:Ue,IN_TRANSIT:Ue,DELIVERED:$e,COMPLETED:$e}[w]||nt;return e.createElement(H,{className:"w-4 h-4",__self:this,__source:{fileName:_,lineNumber:288,columnNumber:12}})};return o?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:_,lineNumber:293,columnNumber:7}},e.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600",__self:this,__source:{fileName:_,lineNumber:294,columnNumber:9}})):e.createElement("div",{className:"min-h-screen bg-gray-50 flex",__self:this,__source:{fileName:_,lineNumber:300,columnNumber:5}},e.createElement("div",{className:`${r?"translate-x-0":"-translate-x-full"} fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0`,__self:this,__source:{fileName:_,lineNumber:302,columnNumber:7}},e.createElement("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",__self:this,__source:{fileName:_,lineNumber:305,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-800",__self:this,__source:{fileName:_,lineNumber:306,columnNumber:11}},"Farmer Dashboard"),e.createElement("button",{onClick:()=>l(!1),className:"lg:hidden text-gray-500 hover:text-gray-700",__self:this,__source:{fileName:_,lineNumber:309,columnNumber:11}},e.createElement(Je,{className:"w-6 h-6",__self:this,__source:{fileName:_,lineNumber:313,columnNumber:13}}))),e.createElement("nav",{className:"mt-6",__self:this,__source:{fileName:_,lineNumber:317,columnNumber:9}},k.map(w=>{const Y=w.icon;return e.createElement("button",{key:w.id,onClick:()=>{a(w.id),l(!1)},className:`w-full flex items-center px-6 py-3 text-left hover:bg-gray-50 transition-colors ${s===w.id?"bg-green-50 text-green-600 border-r-2 border-green-600":"text-gray-600"}`,__self:this,__source:{fileName:_,lineNumber:321,columnNumber:15}},e.createElement(Y,{className:"w-5 h-5 mr-3",__self:this,__source:{fileName:_,lineNumber:333,columnNumber:17}}),w.label)})),e.createElement("div",{className:"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-200",__self:this,__source:{fileName:_,lineNumber:341,columnNumber:9}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:342,columnNumber:11}},e.createElement("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white font-semibold",__self:this,__source:{fileName:_,lineNumber:343,columnNumber:13}},t?.firstName?.[0],t?.lastName?.[0]),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:_,lineNumber:347,columnNumber:13}},e.createElement("p",{className:"text-sm font-medium text-gray-800",__self:this,__source:{fileName:_,lineNumber:348,columnNumber:15}},t?.firstName," ",t?.lastName),e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:_,lineNumber:351,columnNumber:15}},t?.county))))),e.createElement("div",{className:"flex-1 flex flex-col overflow-hidden",__self:this,__source:{fileName:_,lineNumber:358,columnNumber:7}},e.createElement("div",{className:"bg-white shadow-sm border-b border-gray-200",__self:this,__source:{fileName:_,lineNumber:360,columnNumber:9}},e.createElement("div",{className:"flex items-center justify-between h-16 px-6",__self:this,__source:{fileName:_,lineNumber:361,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:362,columnNumber:13}},e.createElement("button",{onClick:()=>l(!0),className:"lg:hidden text-gray-500 hover:text-gray-700 mr-3",__self:this,__source:{fileName:_,lineNumber:363,columnNumber:15}},e.createElement(Ds,{className:"w-6 h-6",__self:this,__source:{fileName:_,lineNumber:367,columnNumber:17}})),e.createElement("h1",{className:"text-xl font-semibold text-gray-800 capitalize",__self:this,__source:{fileName:_,lineNumber:369,columnNumber:15}},s)),!t?.registrationFeePaid&&e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg px-4 py-2",__self:this,__source:{fileName:_,lineNumber:375,columnNumber:15}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:376,columnNumber:17}},e.createElement(nt,{className:"w-4 h-4 text-red-600 mr-2",__self:this,__source:{fileName:_,lineNumber:377,columnNumber:19}}),e.createElement("span",{className:"text-sm text-red-800",__self:this,__source:{fileName:_,lineNumber:378,columnNumber:19}},"Registration fee required"),e.createElement("button",{onClick:()=>b(!0),className:"ml-3 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",__self:this,__source:{fileName:_,lineNumber:381,columnNumber:19}},"Pay KES 300"))))),e.createElement("div",{className:"flex-1 overflow-auto p-6",__self:this,__source:{fileName:_,lineNumber:394,columnNumber:9}},s==="overview"&&e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:_,lineNumber:396,columnNumber:13}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",__self:this,__source:{fileName:_,lineNumber:398,columnNumber:15}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:_,lineNumber:399,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:400,columnNumber:19}},e.createElement(xe,{className:"w-8 h-8 text-blue-600",__self:this,__source:{fileName:_,lineNumber:401,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:_,lineNumber:402,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:_,lineNumber:403,columnNumber:23}},"Total Consignments"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:_,lineNumber:406,columnNumber:23}},h.totalConsignments)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:_,lineNumber:413,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:414,columnNumber:19}},e.createElement(Ke,{className:"w-8 h-8 text-yellow-600",__self:this,__source:{fileName:_,lineNumber:415,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:_,lineNumber:416,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:_,lineNumber:417,columnNumber:23}},"Pending"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:_,lineNumber:420,columnNumber:23}},h.pendingConsignments)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:_,lineNumber:427,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:428,columnNumber:19}},e.createElement($e,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:_,lineNumber:429,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:_,lineNumber:430,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:_,lineNumber:431,columnNumber:23}},"Completed"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:_,lineNumber:434,columnNumber:23}},h.completedConsignments)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:_,lineNumber:441,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:442,columnNumber:19}},e.createElement(Zr,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:_,lineNumber:443,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:_,lineNumber:444,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:_,lineNumber:445,columnNumber:23}},"Wallet Balance"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:_,lineNumber:448,columnNumber:23}},"KES ",i?.balance?.toLocaleString()||0))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:_,lineNumber:457,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:_,lineNumber:458,columnNumber:17}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",__self:this,__source:{fileName:_,lineNumber:461,columnNumber:17}},e.createElement("button",{onClick:()=>a("consignments"),className:"flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",disabled:!t?.registrationFeePaid,__self:this,__source:{fileName:_,lineNumber:462,columnNumber:19}},e.createElement($t,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:_,lineNumber:467,columnNumber:21}}),"Submit Consignment"),e.createElement("button",{onClick:()=>a("wallet"),className:"flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",__self:this,__source:{fileName:_,lineNumber:471,columnNumber:19}},e.createElement(Zr,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:_,lineNumber:475,columnNumber:21}}),"Manage Wallet"),e.createElement("button",{onClick:()=>a("consignments"),className:"flex items-center justify-center px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",__self:this,__source:{fileName:_,lineNumber:479,columnNumber:19}},e.createElement(ct,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:_,lineNumber:483,columnNumber:21}}),"View Consignments"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:_,lineNumber:490,columnNumber:15}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:_,lineNumber:491,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:_,lineNumber:492,columnNumber:19}},"Recent Consignments")),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:_,lineNumber:496,columnNumber:17}},(Array.isArray(m)?m:[]).slice(0,5).map(w=>e.createElement("div",{key:w.id,className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0",__self:this,__source:{fileName:_,lineNumber:500,columnNumber:23}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:504,columnNumber:25}},e.createElement("img",{src:Array.isArray(w.images)&&w.images.length>0&&w.images[0]&&w.images[0].trim()!==""?w.images[0]:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=400&h=400&fit=crop",alt:w.title,className:"w-12 h-12 rounded-lg object-cover",onError:Y=>{const H=Y.target;H.src="https://images.unsplash.com/photo-1542838132-92c53300491e?w=400&h=400&fit=crop"},__self:this,__source:{fileName:_,lineNumber:505,columnNumber:27}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:_,lineNumber:521,columnNumber:27}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:_,lineNumber:522,columnNumber:29}},w.title),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:_,lineNumber:525,columnNumber:29}},w.quantity," ",w.unit))),e.createElement("div",{className:"flex items-center space-x-3",__self:this,__source:{fileName:_,lineNumber:530,columnNumber:25}},e.createElement("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E(w.status)}`,__self:this,__source:{fileName:_,lineNumber:531,columnNumber:27}},x(w.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:_,lineNumber:535,columnNumber:29}},w.status.replace("_"," "))),e.createElement("span",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:_,lineNumber:539,columnNumber:27}},"KES"," ",w.finalPricePerUnit||w.bidPricePerUnit,"/kg"))))))),s==="consignments"&&e.createElement(ko,{consignments:m,onRefresh:T,canSubmit:t?.registrationFeePaid||!1,showPaymentModal:g,setShowPaymentModal:b,__self:this,__source:{fileName:_,lineNumber:554,columnNumber:13}}),s==="wallet"&&e.createElement(Ao,{wallet:i,onWithdraw:U,onRefresh:T,__self:this,__source:{fileName:_,lineNumber:564,columnNumber:13}}),s==="notifications"&&e.createElement(Po,{notifications:u,onRefresh:T,__self:this,__source:{fileName:_,lineNumber:572,columnNumber:13}}),s==="profile"&&e.createElement(Do,{user:t,__self:this,__source:{fileName:_,lineNumber:578,columnNumber:43}}))),g&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",__self:this,__source:{fileName:_,lineNumber:584,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-sm w-full max-h-[80vh] flex flex-col",__self:this,__source:{fileName:_,lineNumber:585,columnNumber:11}},e.createElement("div",{className:"px-4 py-3 border-b border-gray-200 flex-shrink-0",__self:this,__source:{fileName:_,lineNumber:586,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:_,lineNumber:587,columnNumber:15}},e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:_,lineNumber:588,columnNumber:17}},e.createElement("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",__self:this,__source:{fileName:_,lineNumber:589,columnNumber:19}},e.createElement(mt,{className:"w-4 h-4 text-green-600",__self:this,__source:{fileName:_,lineNumber:590,columnNumber:21}})),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:592,columnNumber:19}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:_,lineNumber:593,columnNumber:21}},"Pay Registration Fee"),e.createElement("p",{className:"text-xs text-gray-600",__self:this,__source:{fileName:_,lineNumber:596,columnNumber:21}},"KES 300.00"))),e.createElement("button",{onClick:()=>{b(!1),v("")},className:"text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:_,lineNumber:599,columnNumber:17}},e.createElement(Je,{className:"w-5 h-5",__self:this,__source:{fileName:_,lineNumber:606,columnNumber:19}})))),e.createElement("div",{className:"flex-1 overflow-y-auto px-4 py-4",__self:this,__source:{fileName:_,lineNumber:611,columnNumber:13}},e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:_,lineNumber:612,columnNumber:15}},e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",__self:this,__source:{fileName:_,lineNumber:613,columnNumber:17}},e.createElement("div",{className:"flex items-start space-x-2",__self:this,__source:{fileName:_,lineNumber:614,columnNumber:19}},e.createElement(Ct,{className:"w-4 h-4 text-blue-600 mt-0.5",__self:this,__source:{fileName:_,lineNumber:615,columnNumber:21}}),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:616,columnNumber:21}},e.createElement("h4",{className:"text-sm font-medium text-blue-800",__self:this,__source:{fileName:_,lineNumber:617,columnNumber:23}},"M-Pesa Payment"),e.createElement("p",{className:"text-xs text-blue-700 mt-1",__self:this,__source:{fileName:_,lineNumber:620,columnNumber:23}},"Enter your M-Pesa phone number for STK push.")))),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:627,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:628,columnNumber:19}},"Phone Number *"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:_,lineNumber:631,columnNumber:19}},e.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",__self:this,__source:{fileName:_,lineNumber:632,columnNumber:21}},e.createElement(Ct,{className:"w-4 h-4 text-gray-400",__self:this,__source:{fileName:_,lineNumber:633,columnNumber:23}})),e.createElement("input",{type:"tel",value:S,onChange:w=>v(w.target.value),placeholder:"+254712345678",className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:L,__self:this,__source:{fileName:_,lineNumber:635,columnNumber:21}})),e.createElement("p",{className:"text-xs text-gray-600 mt-1",__self:this,__source:{fileName:_,lineNumber:644,columnNumber:19}},"M-Pesa registered number")),e.createElement("div",{className:"bg-gray-50 rounded-lg p-3",__self:this,__source:{fileName:_,lineNumber:649,columnNumber:17}},e.createElement("h5",{className:"text-sm font-medium text-gray-900 mb-2",__self:this,__source:{fileName:_,lineNumber:650,columnNumber:19}},"Payment Summary"),e.createElement("div",{className:"space-y-1 text-xs",__self:this,__source:{fileName:_,lineNumber:653,columnNumber:19}},e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:_,lineNumber:654,columnNumber:21}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:_,lineNumber:655,columnNumber:23}},"Registration Fee:"),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:_,lineNumber:656,columnNumber:23}},"KES 300.00")),e.createElement("div",{className:"flex justify-between border-t border-gray-200 pt-1",__self:this,__source:{fileName:_,lineNumber:658,columnNumber:21}},e.createElement("span",{className:"font-medium text-gray-900",__self:this,__source:{fileName:_,lineNumber:659,columnNumber:23}},"Total:"),e.createElement("span",{className:"font-semibold text-green-600",__self:this,__source:{fileName:_,lineNumber:660,columnNumber:23}},"KES 300.00")))),e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",__self:this,__source:{fileName:_,lineNumber:667,columnNumber:17}},e.createElement("p",{className:"text-xs text-yellow-800",__self:this,__source:{fileName:_,lineNumber:668,columnNumber:19}},e.createElement("strong",{__self:this,__source:{fileName:_,lineNumber:669,columnNumber:21}},"Note:")," After payment, you can submit consignments. STK push appears within 30 seconds.")))),e.createElement("div",{className:"px-4 py-3 border-t border-gray-200 flex-shrink-0",__self:this,__source:{fileName:_,lineNumber:676,columnNumber:13}},e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:_,lineNumber:677,columnNumber:15}},e.createElement("button",{onClick:()=>{b(!1),v("")},disabled:L,className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50",__self:this,__source:{fileName:_,lineNumber:678,columnNumber:17}},"Cancel"),e.createElement("button",{onClick:ae,disabled:L||!S.trim(),className:"flex-1 bg-green-600 text-white px-3 py-2 text-sm rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-1",__self:this,__source:{fileName:_,lineNumber:688,columnNumber:17}},L?e.createElement(e.Fragment,null,e.createElement("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin",__self:this,__source:{fileName:_,lineNumber:695,columnNumber:23}}),e.createElement("span",{__self:this,__source:{fileName:_,lineNumber:696,columnNumber:23}},"Processing...")):e.createElement(e.Fragment,null,e.createElement(mt,{className:"w-3 h-3",__self:this,__source:{fileName:_,lineNumber:700,columnNumber:23}}),e.createElement("span",{__self:this,__source:{fileName:_,lineNumber:701,columnNumber:23}},"Pay KES 300"))))))))}function ko({consignments:t,onRefresh:r,canSubmit:l,showPaymentModal:s,setShowPaymentModal:a}){const[m,n]=R.useState(!1),[i,N]=R.useState({title:"",description:"",category:"Vegetables",quantity:"",unit:"kg",bidPricePerUnit:"",location:"",harvestDate:"",expiryDate:"",images:[""]}),u=async f=>{if(f.preventDefault(),!l){F.error("Please pay the registration fee first");return}try{const h=localStorage.getItem("authToken")||localStorage.getItem("token");await ue.post("/api/consignments",{...i,quantity:parseFloat(i.quantity),bidPricePerUnit:parseFloat(i.bidPricePerUnit)},{headers:{Authorization:`Bearer ${h}`}}),F.success("Consignment submitted successfully!"),n(!1),N({title:"",description:"",category:"Vegetables",quantity:"",unit:"kg",bidPricePerUnit:"",location:"",harvestDate:"",expiryDate:"",images:[""]}),r()}catch(h){F.error(h.response?.data?.error||"Failed to submit consignment")}},c=f=>({PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",PRICE_SUGGESTED:"bg-blue-100 text-blue-800",DRIVER_ASSIGNED:"bg-indigo-100 text-indigo-800",IN_TRANSIT:"bg-purple-100 text-purple-800",DELIVERED:"bg-cyan-100 text-cyan-800",COMPLETED:"bg-green-100 text-green-800"})[f]||"bg-gray-100 text-gray-800",o=f=>{const A={PENDING:Ke,APPROVED:$e,REJECTED:Je,PRICE_SUGGESTED:tt,DRIVER_ASSIGNED:Ue,IN_TRANSIT:Ue,DELIVERED:$e,COMPLETED:$e}[f]||nt;return e.createElement(A,{className:"w-4 h-4",__self:this,__source:{fileName:_,lineNumber:803,columnNumber:12}})};return e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:_,lineNumber:807,columnNumber:5}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:_,lineNumber:808,columnNumber:7}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:_,lineNumber:809,columnNumber:9}},"My Consignments"),e.createElement("button",{onClick:()=>n(!0),disabled:!l,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",__self:this,__source:{fileName:_,lineNumber:810,columnNumber:9}},e.createElement($t,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:_,lineNumber:815,columnNumber:11}}),"Submit New Consignment")),!l&&e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",__self:this,__source:{fileName:_,lineNumber:821,columnNumber:9}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:_,lineNumber:822,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:823,columnNumber:13}},e.createElement(nt,{className:"w-5 h-5 text-yellow-600 mr-2",__self:this,__source:{fileName:_,lineNumber:824,columnNumber:15}}),e.createElement("span",{className:"text-yellow-800",__self:this,__source:{fileName:_,lineNumber:825,columnNumber:15}},"You must pay the KES 300 registration fee before submitting consignments.")),e.createElement("button",{onClick:()=>a(!0),className:"ml-3 bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",__self:this,__source:{fileName:_,lineNumber:830,columnNumber:13}},"Pay Now"))),m&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:_,lineNumber:841,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",__self:this,__source:{fileName:_,lineNumber:842,columnNumber:11}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:_,lineNumber:843,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:_,lineNumber:844,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:_,lineNumber:845,columnNumber:17}},"Submit New Consignment"),e.createElement("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700",__self:this,__source:{fileName:_,lineNumber:848,columnNumber:17}},e.createElement(Je,{className:"w-6 h-6",__self:this,__source:{fileName:_,lineNumber:852,columnNumber:19}})))),e.createElement("form",{onSubmit:u,className:"p-6 space-y-4",__self:this,__source:{fileName:_,lineNumber:857,columnNumber:13}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",__self:this,__source:{fileName:_,lineNumber:858,columnNumber:15}},e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:859,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:860,columnNumber:19}},"Title"),e.createElement("input",{type:"text",required:!0,value:i.title,onChange:f=>N(h=>({...h,title:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Fresh Tomatoes",__self:this,__source:{fileName:_,lineNumber:863,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:878,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:879,columnNumber:19}},"Category"),e.createElement("select",{value:i.category,onChange:f=>N(h=>({...h,category:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:_,lineNumber:882,columnNumber:19}},e.createElement("option",{value:"Vegetables",__self:this,__source:{fileName:_,lineNumber:892,columnNumber:21}},"Vegetables"),e.createElement("option",{value:"Fruits",__self:this,__source:{fileName:_,lineNumber:893,columnNumber:21}},"Fruits"),e.createElement("option",{value:"Grains",__self:this,__source:{fileName:_,lineNumber:894,columnNumber:21}},"Grains"),e.createElement("option",{value:"Legumes",__self:this,__source:{fileName:_,lineNumber:895,columnNumber:21}},"Legumes"))),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:899,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:900,columnNumber:19}},"Quantity"),e.createElement("input",{type:"number",required:!0,value:i.quantity,onChange:f=>N(h=>({...h,quantity:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 500",__self:this,__source:{fileName:_,lineNumber:903,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:918,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:919,columnNumber:19}},"Unit"),e.createElement("select",{value:i.unit,onChange:f=>N(h=>({...h,unit:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:_,lineNumber:922,columnNumber:19}},e.createElement("option",{value:"kg",__self:this,__source:{fileName:_,lineNumber:929,columnNumber:21}},"Kilograms (kg)"),e.createElement("option",{value:"tonnes",__self:this,__source:{fileName:_,lineNumber:930,columnNumber:21}},"Tonnes"),e.createElement("option",{value:"bags",__self:this,__source:{fileName:_,lineNumber:931,columnNumber:21}},"Bags"),e.createElement("option",{value:"pieces",__self:this,__source:{fileName:_,lineNumber:932,columnNumber:21}},"Pieces"))),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:936,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:937,columnNumber:19}},"Bid Price per Unit (KES)"),e.createElement("input",{type:"number",required:!0,value:i.bidPricePerUnit,onChange:f=>N(h=>({...h,bidPricePerUnit:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 80",__self:this,__source:{fileName:_,lineNumber:940,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:955,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:956,columnNumber:19}},"Location"),e.createElement("input",{type:"text",required:!0,value:i.location,onChange:f=>N(h=>({...h,location:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Nakuru",__self:this,__source:{fileName:_,lineNumber:959,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:974,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:975,columnNumber:19}},"Harvest Date"),e.createElement("input",{type:"date",required:!0,value:i.harvestDate,onChange:f=>N(h=>({...h,harvestDate:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:_,lineNumber:978,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:992,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:993,columnNumber:19}},"Expiry Date"),e.createElement("input",{type:"date",required:!0,value:i.expiryDate,onChange:f=>N(h=>({...h,expiryDate:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:_,lineNumber:996,columnNumber:19}}))),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:1011,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:1012,columnNumber:17}},"Description"),e.createElement("textarea",{required:!0,value:i.description,onChange:f=>N(h=>({...h,description:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:3,placeholder:"Describe your produce quality, farming methods, etc.",__self:this,__source:{fileName:_,lineNumber:1015,columnNumber:17}})),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:1030,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:1031,columnNumber:17}},"Image URL"),e.createElement("input",{type:"url",value:Array.isArray(i.images)&&i.images.length>0?i.images[0]:"",onChange:f=>N(h=>({...h,images:[f.target.value]})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"https://example.com/image.jpg",__self:this,__source:{fileName:_,lineNumber:1034,columnNumber:17}})),e.createElement("div",{className:"flex justify-end space-x-3 pt-4",__self:this,__source:{fileName:_,lineNumber:1052,columnNumber:15}},e.createElement("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",__self:this,__source:{fileName:_,lineNumber:1053,columnNumber:17}},"Cancel"),e.createElement("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",__self:this,__source:{fileName:_,lineNumber:1060,columnNumber:17}},"Submit Consignment"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:_,lineNumber:1073,columnNumber:7}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:_,lineNumber:1074,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:_,lineNumber:1075,columnNumber:11}},"All Consignments (",(Array.isArray(t)?t:[]).length,")")),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:_,lineNumber:1080,columnNumber:9}},(Array.isArray(t)?t:[]).map(f=>e.createElement("div",{key:f.id,className:"p-6",__self:this,__source:{fileName:_,lineNumber:1083,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:_,lineNumber:1084,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:1085,columnNumber:19}},e.createElement("img",{src:Array.isArray(f.images)&&f.images.length>0&&f.images[0]&&f.images[0].trim()!==""?f.images[0]:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=400&h=400&fit=crop",alt:f.title,className:"w-16 h-16 rounded-lg object-cover",onError:h=>{const A=h.target;A.src="https://images.unsplash.com/photo-1542838132-92c53300491e?w=400&h=400&fit=crop"},__self:this,__source:{fileName:_,lineNumber:1086,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:_,lineNumber:1102,columnNumber:21}},e.createElement("h4",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:_,lineNumber:1103,columnNumber:23}},f.title),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:_,lineNumber:1106,columnNumber:23}},f.description),e.createElement("div",{className:"flex items-center space-x-4 mt-2",__self:this,__source:{fileName:_,lineNumber:1109,columnNumber:23}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:_,lineNumber:1110,columnNumber:25}},f.quantity," ",f.unit),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:_,lineNumber:1113,columnNumber:25}},"KES ",f.bidPricePerUnit,"/",f.unit),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:_,lineNumber:1116,columnNumber:25}},f.location)))),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:_,lineNumber:1122,columnNumber:19}},e.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${c(f.status)}`,__self:this,__source:{fileName:_,lineNumber:1123,columnNumber:21}},o(f.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:_,lineNumber:1127,columnNumber:23}},f.status.replace("_"," "))),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:_,lineNumber:1131,columnNumber:21}},new Date(f.createdAt).toLocaleDateString()))),f.adminNotes&&e.createElement("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",__self:this,__source:{fileName:_,lineNumber:1137,columnNumber:19}},e.createElement("p",{className:"text-sm text-gray-700",__self:this,__source:{fileName:_,lineNumber:1138,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:_,lineNumber:1139,columnNumber:23}},"Admin Notes:")," ",f.adminNotes)))))))}function Ao({wallet:t,onWithdraw:r,onRefresh:l}){const[s,a]=R.useState(!1),[m,n]=R.useState(""),[i,N]=R.useState(""),u=async c=>{c.preventDefault();const o=parseFloat(m);if(o<10){F.error("Minimum withdrawal amount is KES 10");return}if(o>t.balance){F.error("Insufficient balance");return}await r(o,i),a(!1),n(""),N("")};return e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:_,lineNumber:1179,columnNumber:5}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:_,lineNumber:1180,columnNumber:7}},e.createElement("div",{className:"flex items-center justify-between mb-6",__self:this,__source:{fileName:_,lineNumber:1181,columnNumber:9}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:_,lineNumber:1182,columnNumber:11}},"Wallet"),e.createElement("button",{onClick:()=>a(!0),disabled:!t?.balance||t.balance<10,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed",__self:this,__source:{fileName:_,lineNumber:1183,columnNumber:11}},"Withdraw Funds")),e.createElement("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-6 text-white",__self:this,__source:{fileName:_,lineNumber:1192,columnNumber:9}},e.createElement("h3",{className:"text-lg font-medium mb-2",__self:this,__source:{fileName:_,lineNumber:1193,columnNumber:11}},"Available Balance"),e.createElement("p",{className:"text-3xl font-bold",__self:this,__source:{fileName:_,lineNumber:1194,columnNumber:11}},"KES ",t?.balance?.toLocaleString()||0))),s&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:_,lineNumber:1201,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full",__self:this,__source:{fileName:_,lineNumber:1202,columnNumber:11}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:_,lineNumber:1203,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:_,lineNumber:1204,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:_,lineNumber:1205,columnNumber:17}},"Withdraw Funds"),e.createElement("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700",__self:this,__source:{fileName:_,lineNumber:1208,columnNumber:17}},e.createElement(Je,{className:"w-6 h-6",__self:this,__source:{fileName:_,lineNumber:1212,columnNumber:19}})))),e.createElement("form",{onSubmit:u,className:"p-6 space-y-4",__self:this,__source:{fileName:_,lineNumber:1217,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:1218,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:1219,columnNumber:17}},"Amount (KES)"),e.createElement("input",{type:"number",min:"10",max:t?.balance||0,required:!0,value:m,onChange:c=>n(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter amount",__self:this,__source:{fileName:_,lineNumber:1222,columnNumber:17}}),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:_,lineNumber:1232,columnNumber:17}},"Minimum: KES 10 | Available: KES"," ",t?.balance?.toLocaleString()||0)),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:1238,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:1239,columnNumber:17}},"M-Pesa Phone Number"),e.createElement("input",{type:"tel",required:!0,value:i,onChange:c=>N(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"+254712345678",__self:this,__source:{fileName:_,lineNumber:1242,columnNumber:17}})),e.createElement("div",{className:"flex justify-end space-x-3 pt-4",__self:this,__source:{fileName:_,lineNumber:1252,columnNumber:15}},e.createElement("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",__self:this,__source:{fileName:_,lineNumber:1253,columnNumber:17}},"Cancel"),e.createElement("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",__self:this,__source:{fileName:_,lineNumber:1260,columnNumber:17}},"Withdraw"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:_,lineNumber:1273,columnNumber:7}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:_,lineNumber:1274,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:_,lineNumber:1275,columnNumber:11}},"Transaction History")),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:_,lineNumber:1279,columnNumber:9}},(Array.isArray(t?.transactions)?t.transactions:[]).map(c=>e.createElement("div",{key:c.id,className:"p-6 flex items-center justify-between",__self:this,__source:{fileName:_,lineNumber:1282,columnNumber:15}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:1286,columnNumber:17}},e.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${c.type==="CREDIT"?"bg-green-100":"bg-red-100"}`,__self:this,__source:{fileName:_,lineNumber:1287,columnNumber:19}},c.type==="CREDIT"?e.createElement(Rt,{className:"w-5 h-5 text-green-600",__self:this,__source:{fileName:_,lineNumber:1295,columnNumber:23}}):e.createElement(Rt,{className:"w-5 h-5 text-red-600 transform rotate-180",__self:this,__source:{fileName:_,lineNumber:1297,columnNumber:23}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:_,lineNumber:1302,columnNumber:19}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:_,lineNumber:1303,columnNumber:21}},c.description),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:_,lineNumber:1306,columnNumber:21}},new Date(c.createdAt).toLocaleDateString()," at"," ",new Date(c.createdAt).toLocaleTimeString()))),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:_,lineNumber:1312,columnNumber:17}},e.createElement("p",{className:`font-semibold ${c.type==="CREDIT"?"text-green-600":"text-red-600"}`,__self:this,__source:{fileName:_,lineNumber:1313,columnNumber:19}},c.type==="CREDIT"?"+":"-","KES"," ",c.amount.toLocaleString())))),(!t?.transactions||t.transactions.length===0)&&e.createElement("div",{className:"p-6 text-center text-gray-500",__self:this,__source:{fileName:_,lineNumber:1328,columnNumber:13}},"No transactions yet"))))}function Po({notifications:t,onRefresh:r}){const l=async s=>{try{const a=localStorage.getItem("authToken")||localStorage.getItem("token");await ue.put("/api/notifications/${notificationId}/read",{},{headers:{Authorization:`Bearer ${a}`}}),r()}catch(a){console.error("Failed to mark notification as read:",a),F.error("Failed to mark notification as read")}};return e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:_,lineNumber:1356,columnNumber:5}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:_,lineNumber:1357,columnNumber:7}},"Notifications"),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:_,lineNumber:1359,columnNumber:7}},e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:_,lineNumber:1360,columnNumber:9}},(Array.isArray(t)?t:[]).map(s=>e.createElement("div",{key:s.id,className:`p-6 ${s.isRead?"bg-white":"bg-blue-50"}`,__self:this,__source:{fileName:_,lineNumber:1363,columnNumber:15}},e.createElement("div",{className:"flex items-start justify-between",__self:this,__source:{fileName:_,lineNumber:1367,columnNumber:17}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:_,lineNumber:1368,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:1369,columnNumber:21}},e.createElement("h4",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:_,lineNumber:1370,columnNumber:23}},s.title),!s.isRead&&e.createElement("span",{className:"ml-2 w-2 h-2 bg-blue-600 rounded-full",__self:this,__source:{fileName:_,lineNumber:1374,columnNumber:25}})),e.createElement("p",{className:"text-gray-700 mt-1",__self:this,__source:{fileName:_,lineNumber:1377,columnNumber:21}},s.message),e.createElement("p",{className:"text-sm text-gray-500 mt-2",__self:this,__source:{fileName:_,lineNumber:1378,columnNumber:21}},new Date(s.createdAt).toLocaleDateString()," at"," ",new Date(s.createdAt).toLocaleTimeString())),!s.isRead&&e.createElement("button",{onClick:()=>l(s.id),className:"ml-4 text-blue-600 hover:text-blue-800 text-sm font-medium",__self:this,__source:{fileName:_,lineNumber:1384,columnNumber:21}},"Mark as read")))),(Array.isArray(t)?t:[]).length===0&&e.createElement("div",{className:"p-6 text-center text-gray-500",__self:this,__source:{fileName:_,lineNumber:1396,columnNumber:13}},"No notifications yet"))))}function Do({user:t}){return e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:_,lineNumber:1409,columnNumber:5}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:_,lineNumber:1410,columnNumber:7}},"Profile"),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:_,lineNumber:1412,columnNumber:7}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:_,lineNumber:1413,columnNumber:9}},e.createElement("div",{className:"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",__self:this,__source:{fileName:_,lineNumber:1414,columnNumber:11}},t?.firstName?.[0],t?.lastName?.[0]),e.createElement("div",{className:"ml-6",__self:this,__source:{fileName:_,lineNumber:1418,columnNumber:11}},e.createElement("h3",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:_,lineNumber:1419,columnNumber:13}},t?.firstName," ",t?.lastName),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:_,lineNumber:1422,columnNumber:13}},t?.email),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:_,lineNumber:1423,columnNumber:13}},t?.phone))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:_,lineNumber:1427,columnNumber:9}},e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:1428,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:1429,columnNumber:13}},"Role"),e.createElement("p",{className:"text-gray-900 capitalize",__self:this,__source:{fileName:_,lineNumber:1432,columnNumber:13}},t?.role)),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:1434,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:1435,columnNumber:13}},"County"),e.createElement("p",{className:"text-gray-900",__self:this,__source:{fileName:_,lineNumber:1438,columnNumber:13}},t?.county)),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:1440,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:1441,columnNumber:13}},"Registration Status"),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:1444,columnNumber:13}},t?.registrationFeePaid?e.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",__self:this,__source:{fileName:_,lineNumber:1446,columnNumber:17}},e.createElement($e,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:_,lineNumber:1447,columnNumber:19}}),"Paid"):e.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",__self:this,__source:{fileName:_,lineNumber:1451,columnNumber:17}},e.createElement(nt,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:_,lineNumber:1452,columnNumber:19}}),"Fee Required"))),e.createElement("div",{__self:this,__source:{fileName:_,lineNumber:1458,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:_,lineNumber:1459,columnNumber:13}},"Verification Status"),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_,lineNumber:1462,columnNumber:13}},t?.verified?e.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",__self:this,__source:{fileName:_,lineNumber:1464,columnNumber:17}},e.createElement($e,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:_,lineNumber:1465,columnNumber:19}}),"Verified"):e.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",__self:this,__source:{fileName:_,lineNumber:1469,columnNumber:17}},e.createElement(Ke,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:_,lineNumber:1470,columnNumber:19}}),"Pending"))))))}var _e="/app/code/frontend/src/pages/customer/CustomerDashboard.tsx";function Ro(){const{user:t}=Te(),r=_t(),[l,s]=R.useState([]),[a,m]=R.useState(!0),[n,i]=R.useState({totalOrders:0,completedOrders:0,totalSpent:0,pendingOrders:0});R.useEffect(()=>{r("/customer/profile",{replace:!0})},[r]),R.useEffect(()=>{N()},[]);const N=async()=>{try{m(!0);const o=localStorage.getItem("authToken")||localStorage.getItem("token"),f=await ue.get("/api/orders",{headers:{Authorization:`Bearer ${o}`}});console.log(" Raw orders response:",f.data);let h=[];f.data&&Array.isArray(f.data.orders)?h=f.data.orders:Array.isArray(f.data)&&(h=f.data),console.log(" Processed orders:",h.length),s(h);const A=Array.isArray(h)?h:[],g=A.length,b=A.filter(L=>L&&L.status==="DELIVERED").length,S=A.filter(L=>L&&L.paymentStatus==="COMPLETED").reduce((L,G)=>L+(parseFloat(G.totalAmount)||0),0),v=A.filter(L=>L&&L.status==="PENDING").length;i({totalOrders:g,completedOrders:b,totalSpent:S,pendingOrders:v})}catch(o){if(console.error("Failed to fetch orders:",o),o.response?.status===404){console.log(" Using fallback demo orders (endpoint not found)");const f=[{id:"order_1",orderNumber:"ORD-2024-001",totalAmount:2500,paymentStatus:"COMPLETED",status:"DELIVERED",deliveryAddress:"123 Main Street, Nairobi",notes:"Please deliver in the morning",createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:new Date().toISOString(),customerName:"John Doe",items:[{id:"item_1",productName:"Organic Tomatoes",quantity:5,unit:"kg",pricePerUnit:120,totalPrice:600}]},{id:"order_2",orderNumber:"ORD-2024-002",totalAmount:1800,paymentStatus:"PENDING",status:"PROCESSING",deliveryAddress:"456 Oak Avenue, Nakuru",notes:"Call before delivery",createdAt:new Date(Date.now()-36e5).toISOString(),updatedAt:new Date().toISOString(),customerName:"John Doe",items:[{id:"item_3",productName:"Premium Maize",quantity:2,unit:"bags",pricePerUnit:900,totalPrice:1800}]}];s(f),i({totalOrders:2,completedOrders:1,totalSpent:2500,pendingOrders:1}),F("Using demo data - backend deployment needed",{icon:""})}else F.error("Failed to load orders")}finally{m(!1)}},u=o=>({PENDING:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",PROCESSING:"bg-indigo-100 text-indigo-800",SHIPPED:"bg-purple-100 text-purple-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",c=o=>{const h={PENDING:Ke,CONFIRMED:xe,PROCESSING:xe,SHIPPED:Ue,DELIVERED:xe,CANCELLED:xe}[o]||xe;return e.createElement(h,{className:"w-4 h-4",__self:this,__source:{fileName:_e,lineNumber:206,columnNumber:12}})};return a?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:_e,lineNumber:211,columnNumber:7}},e.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600",__self:this,__source:{fileName:_e,lineNumber:212,columnNumber:9}})):e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:_e,lineNumber:218,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:_e,lineNumber:219,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:_e,lineNumber:221,columnNumber:9}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:_e,lineNumber:222,columnNumber:11}},"Welcome back, ",t?.firstName,"!"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:_e,lineNumber:225,columnNumber:11}},"Manage your profile and view your order history")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:_e,lineNumber:231,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:_e,lineNumber:232,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_e,lineNumber:233,columnNumber:13}},e.createElement(Tt,{className:"w-8 h-8 text-blue-600",__self:this,__source:{fileName:_e,lineNumber:234,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:_e,lineNumber:235,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:_e,lineNumber:236,columnNumber:17}},"Total Orders"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:_e,lineNumber:239,columnNumber:17}},n.totalOrders)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:_e,lineNumber:246,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_e,lineNumber:247,columnNumber:13}},e.createElement(Ke,{className:"w-8 h-8 text-yellow-600",__self:this,__source:{fileName:_e,lineNumber:248,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:_e,lineNumber:249,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:_e,lineNumber:250,columnNumber:17}},"Pending Orders"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:_e,lineNumber:253,columnNumber:17}},n.pendingOrders)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:_e,lineNumber:260,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_e,lineNumber:261,columnNumber:13}},e.createElement(xe,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:_e,lineNumber:262,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:_e,lineNumber:263,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:_e,lineNumber:264,columnNumber:17}},"Completed"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:_e,lineNumber:265,columnNumber:17}},n.completedOrders)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:_e,lineNumber:272,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_e,lineNumber:273,columnNumber:13}},e.createElement(mt,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:_e,lineNumber:274,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:_e,lineNumber:275,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:_e,lineNumber:276,columnNumber:17}},"Total Spent"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:_e,lineNumber:277,columnNumber:17}},"KES ",n.totalSpent.toLocaleString()))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 mb-8",__self:this,__source:{fileName:_e,lineNumber:286,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:_e,lineNumber:287,columnNumber:11}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",__self:this,__source:{fileName:_e,lineNumber:290,columnNumber:11}},e.createElement("button",{onClick:()=>r("/marketplace"),className:"flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",__self:this,__source:{fileName:_e,lineNumber:291,columnNumber:13}},e.createElement(Tt,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:_e,lineNumber:295,columnNumber:15}}),"Browse Marketplace"),e.createElement("button",{onClick:()=>r("/customer/orders"),className:"flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",__self:this,__source:{fileName:_e,lineNumber:299,columnNumber:13}},e.createElement(xe,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:_e,lineNumber:303,columnNumber:15}}),"View Orders"),e.createElement("button",{onClick:()=>r("/customer/profile"),className:"flex items-center justify-center px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",__self:this,__source:{fileName:_e,lineNumber:307,columnNumber:13}},e.createElement(ot,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:_e,lineNumber:311,columnNumber:15}}),"Edit Profile"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:_e,lineNumber:318,columnNumber:9}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:_e,lineNumber:319,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:_e,lineNumber:320,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:_e,lineNumber:321,columnNumber:15}},"Recent Orders"),e.createElement("button",{onClick:()=>r("/customer/orders"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",__self:this,__source:{fileName:_e,lineNumber:324,columnNumber:15}},"View All"))),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:_e,lineNumber:332,columnNumber:11}},(Array.isArray(l)?l:[]).slice(0,3).map(o=>e.createElement("div",{key:o.id,className:"flex items-center justify-between py-4 border-b border-gray-100 last:border-b-0",__self:this,__source:{fileName:_e,lineNumber:334,columnNumber:15}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:_e,lineNumber:338,columnNumber:17}},e.createElement("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:_e,lineNumber:339,columnNumber:19}},Array.isArray(o?.items)&&o.items[0]?.product?.images?.[0]?e.createElement("img",{src:o.items[0].product.images[0],alt:o.items[0].product.name||"Product",className:"w-12 h-12 rounded-lg object-cover",__self:this,__source:{fileName:_e,lineNumber:341,columnNumber:23}}):e.createElement(xe,{className:"w-6 h-6 text-gray-400",__self:this,__source:{fileName:_e,lineNumber:347,columnNumber:23}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:_e,lineNumber:350,columnNumber:19}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:_e,lineNumber:351,columnNumber:21}},"Order #",o?.id?String(o.id).slice(-8):"N/A"),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:_e,lineNumber:354,columnNumber:21}},Array.isArray(o?.items)?o.items.length:0," item",Array.isArray(o?.items)&&o.items.length>1?"s":"","  KES"," ",(o?.totalAmount||0).toLocaleString()),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:_e,lineNumber:359,columnNumber:21}},o?.orderDate?new Date(o.orderDate).toLocaleDateString():o?.createdAt?new Date(o.createdAt).toLocaleDateString():"Unknown date"))),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:_e,lineNumber:365,columnNumber:17}},e.createElement("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u(o.status)}`,__self:this,__source:{fileName:_e,lineNumber:366,columnNumber:19}},c(o.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:_e,lineNumber:370,columnNumber:21}},o.status)),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:_e,lineNumber:372,columnNumber:19}},o.paymentMethod||"Payment method not specified")))),l.length===0&&e.createElement("div",{className:"text-center py-8",__self:this,__source:{fileName:_e,lineNumber:379,columnNumber:15}},e.createElement(xe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:_e,lineNumber:380,columnNumber:17}}),e.createElement("p",{className:"text-gray-500",__self:this,__source:{fileName:_e,lineNumber:381,columnNumber:17}},"No orders yet"),e.createElement("button",{onClick:()=>r("/marketplace"),className:"mt-3 text-blue-600 hover:text-blue-800 font-medium",__self:this,__source:{fileName:_e,lineNumber:382,columnNumber:17}},"Start Shopping"))))))}var z="/app/code/frontend/src/pages/customer/ProfilePage.tsx";function Fo(){const{user:t,updateUser:r}=Te(),l=_t(),[s,a]=R.useState(!1),[m,n]=R.useState(!1),[i,N]=R.useState([]),[u,c]=R.useState({totalOrders:0,completedOrders:0,totalSpent:0,pendingOrders:0}),[o,f]=R.useState({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",county:t?.county||""});R.useEffect(()=>{h()},[]);const h=async()=>{try{const S=localStorage.getItem("token"),v=await ue.get("/api/orders",{headers:{Authorization:`Bearer ${S}`}}),L=v.data.orders||v.data;N(L);const G=Array.isArray(L)?L:[],T=G.length,U=G.filter(E=>E?.status==="DELIVERED").length,ae=G.filter(E=>E?.paymentStatus==="COMPLETED").reduce((E,x)=>E+(x?.totalAmount||0),0),k=G.filter(E=>E?.status==="PENDING").length;c({totalOrders:T,completedOrders:U,totalSpent:ae,pendingOrders:k})}catch(S){if(console.error("Failed to fetch orders:",S),S.response?.status===404){console.log(" Using fallback demo orders (endpoint not found)");const v=[{id:"order_1",orderNumber:"ORD-2024-001",totalAmount:2500,paymentStatus:"COMPLETED",status:"DELIVERED",deliveryAddress:"123 Main Street, Nairobi",createdAt:new Date(Date.now()-864e5).toISOString(),items:[{productName:"Organic Tomatoes",quantity:5,totalPrice:600}]}];N(v),c({totalOrders:1,completedOrders:1,totalSpent:2500,pendingOrders:0})}}},A=async()=>{try{n(!0);const S=localStorage.getItem("token"),v=await ue.put("/api/profile",o,{headers:{Authorization:`Bearer ${S}`}});r(v.data.user),a(!1),F.success("Profile updated successfully!")}catch(S){F.error(S.response?.data?.error||"Failed to update profile")}finally{n(!1)}},g=()=>{f({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",county:t?.county||""}),a(!1)},b=S=>({PENDING:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",PROCESSING:"bg-indigo-100 text-indigo-800",SHIPPED:"bg-purple-100 text-purple-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[S]||"bg-gray-100 text-gray-800";return e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:z,lineNumber:179,columnNumber:5}},e.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:z,lineNumber:180,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:z,lineNumber:182,columnNumber:9}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:z,lineNumber:183,columnNumber:11}},"My Profile"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:z,lineNumber:184,columnNumber:11}},"Manage your personal information and preferences")),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",__self:this,__source:{fileName:z,lineNumber:189,columnNumber:9}},e.createElement("div",{className:"lg:col-span-2",__self:this,__source:{fileName:z,lineNumber:191,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:z,lineNumber:192,columnNumber:13}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:z,lineNumber:193,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:z,lineNumber:194,columnNumber:17}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:z,lineNumber:195,columnNumber:19}},"Personal Information"),s?e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:z,lineNumber:207,columnNumber:21}},e.createElement("button",{onClick:A,disabled:m,className:"flex items-center text-green-600 hover:text-green-800 disabled:opacity-50",__self:this,__source:{fileName:z,lineNumber:208,columnNumber:23}},e.createElement(wl,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:z,lineNumber:213,columnNumber:25}}),"Save"),e.createElement("button",{onClick:g,className:"flex items-center text-red-600 hover:text-red-800",__self:this,__source:{fileName:z,lineNumber:216,columnNumber:23}},e.createElement(Je,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:z,lineNumber:220,columnNumber:25}}),"Cancel")):e.createElement("button",{onClick:()=>a(!0),className:"flex items-center text-blue-600 hover:text-blue-800",__self:this,__source:{fileName:z,lineNumber:199,columnNumber:21}},e.createElement(Is,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:z,lineNumber:203,columnNumber:23}}),"Edit"))),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:z,lineNumber:228,columnNumber:15}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:z,lineNumber:230,columnNumber:17}},e.createElement("div",{className:"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",__self:this,__source:{fileName:z,lineNumber:231,columnNumber:19}},t?.firstName?.[0],t?.lastName?.[0]),e.createElement("div",{className:"ml-6",__self:this,__source:{fileName:z,lineNumber:235,columnNumber:19}},e.createElement("h3",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:z,lineNumber:236,columnNumber:21}},t?.firstName," ",t?.lastName),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:z,lineNumber:239,columnNumber:21}},t?.role),e.createElement("div",{className:"flex items-center mt-1",__self:this,__source:{fileName:z,lineNumber:240,columnNumber:21}},e.createElement(Et,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:z,lineNumber:241,columnNumber:23}}),e.createElement("span",{className:"text-sm text-green-600",__self:this,__source:{fileName:z,lineNumber:242,columnNumber:23}},"Verified Account")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:z,lineNumber:250,columnNumber:17}},e.createElement("div",{__self:this,__source:{fileName:z,lineNumber:251,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:z,lineNumber:252,columnNumber:21}},e.createElement(ot,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:z,lineNumber:253,columnNumber:23}}),"First Name"),s?e.createElement("input",{type:"text",value:o.firstName,onChange:S=>f(v=>({...v,firstName:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:z,lineNumber:257,columnNumber:23}}):e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:z,lineNumber:269,columnNumber:23}},t?.firstName)),e.createElement("div",{__self:this,__source:{fileName:z,lineNumber:273,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:z,lineNumber:274,columnNumber:21}},e.createElement(ot,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:z,lineNumber:275,columnNumber:23}}),"Last Name"),s?e.createElement("input",{type:"text",value:o.lastName,onChange:S=>f(v=>({...v,lastName:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:z,lineNumber:279,columnNumber:23}}):e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:z,lineNumber:291,columnNumber:23}},t?.lastName)),e.createElement("div",{__self:this,__source:{fileName:z,lineNumber:295,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:z,lineNumber:296,columnNumber:21}},e.createElement(Sl,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:z,lineNumber:297,columnNumber:23}}),"Email Address"),s?e.createElement("input",{type:"email",value:o.email,onChange:S=>f(v=>({...v,email:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:z,lineNumber:301,columnNumber:23}}):e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:z,lineNumber:313,columnNumber:23}},t?.email)),e.createElement("div",{__self:this,__source:{fileName:z,lineNumber:317,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:z,lineNumber:318,columnNumber:21}},e.createElement(Ct,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:z,lineNumber:319,columnNumber:23}}),"Phone Number"),e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:z,lineNumber:322,columnNumber:21}},t?.phone),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:z,lineNumber:323,columnNumber:21}},"Phone number cannot be changed")),e.createElement("div",{__self:this,__source:{fileName:z,lineNumber:328,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:z,lineNumber:329,columnNumber:21}},e.createElement(ut,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:z,lineNumber:330,columnNumber:23}}),"County"),s?e.createElement("select",{value:o.county,onChange:S=>f(v=>({...v,county:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:z,lineNumber:334,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:z,lineNumber:344,columnNumber:25}},"Select County"),e.createElement("option",{value:"Nairobi",__self:this,__source:{fileName:z,lineNumber:345,columnNumber:25}},"Nairobi"),e.createElement("option",{value:"Kiambu",__self:this,__source:{fileName:z,lineNumber:346,columnNumber:25}},"Kiambu"),e.createElement("option",{value:"Nakuru",__self:this,__source:{fileName:z,lineNumber:347,columnNumber:25}},"Nakuru"),e.createElement("option",{value:"Mombasa",__self:this,__source:{fileName:z,lineNumber:348,columnNumber:25}},"Mombasa"),e.createElement("option",{value:"Kisumu",__self:this,__source:{fileName:z,lineNumber:349,columnNumber:25}},"Kisumu"),e.createElement("option",{value:"Eldoret",__self:this,__source:{fileName:z,lineNumber:350,columnNumber:25}},"Eldoret"),e.createElement("option",{value:"Thika",__self:this,__source:{fileName:z,lineNumber:351,columnNumber:25}},"Thika"),e.createElement("option",{value:"Nyeri",__self:this,__source:{fileName:z,lineNumber:352,columnNumber:25}},"Nyeri")):e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:z,lineNumber:355,columnNumber:23}},t?.county)),e.createElement("div",{__self:this,__source:{fileName:z,lineNumber:359,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:z,lineNumber:360,columnNumber:21}},e.createElement(vt,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:z,lineNumber:361,columnNumber:23}}),"Member Since"),e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:z,lineNumber:364,columnNumber:21}},new Date(t?.createdAt||new Date).toLocaleDateString())))))),e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:z,lineNumber:376,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:z,lineNumber:378,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:z,lineNumber:379,columnNumber:15}},"Account Summary"),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:z,lineNumber:382,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:z,lineNumber:383,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:z,lineNumber:384,columnNumber:19}},e.createElement(Tt,{className:"w-5 h-5 text-blue-600 mr-2",__self:this,__source:{fileName:z,lineNumber:385,columnNumber:21}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:z,lineNumber:386,columnNumber:21}},"Total Orders")),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:z,lineNumber:388,columnNumber:19}},u.totalOrders)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:z,lineNumber:393,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:z,lineNumber:394,columnNumber:19}},e.createElement(Ke,{className:"w-5 h-5 text-yellow-600 mr-2",__self:this,__source:{fileName:z,lineNumber:395,columnNumber:21}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:z,lineNumber:396,columnNumber:21}},"Pending")),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:z,lineNumber:398,columnNumber:19}},u.pendingOrders)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:z,lineNumber:403,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:z,lineNumber:404,columnNumber:19}},e.createElement(xe,{className:"w-5 h-5 text-green-600 mr-2",__self:this,__source:{fileName:z,lineNumber:405,columnNumber:21}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:z,lineNumber:406,columnNumber:21}},"Completed")),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:z,lineNumber:408,columnNumber:19}},u.completedOrders)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:z,lineNumber:413,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:z,lineNumber:414,columnNumber:19}},e.createElement(mt,{className:"w-5 h-5 text-green-600 mr-2",__self:this,__source:{fileName:z,lineNumber:415,columnNumber:21}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:z,lineNumber:416,columnNumber:21}},"Total Spent")),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:z,lineNumber:418,columnNumber:19}},"KES ",u.totalSpent.toLocaleString())))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:z,lineNumber:426,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:z,lineNumber:427,columnNumber:15}},"Quick Actions"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:z,lineNumber:430,columnNumber:15}},e.createElement("button",{onClick:()=>l("/marketplace"),className:"w-full flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",__self:this,__source:{fileName:z,lineNumber:431,columnNumber:17}},e.createElement(Tt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:z,lineNumber:435,columnNumber:19}}),"Browse Marketplace"),e.createElement("button",{onClick:()=>l("/customer/orders"),className:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",__self:this,__source:{fileName:z,lineNumber:439,columnNumber:17}},e.createElement(xe,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:z,lineNumber:443,columnNumber:19}}),"View Order History"),e.createElement("button",{onClick:()=>l("/cart"),className:"w-full flex items-center justify-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",__self:this,__source:{fileName:z,lineNumber:447,columnNumber:17}},e.createElement(Tt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:z,lineNumber:451,columnNumber:19}}),"View Cart"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:z,lineNumber:458,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between mb-4",__self:this,__source:{fileName:z,lineNumber:459,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:z,lineNumber:460,columnNumber:17}},"Recent Orders"),e.createElement("button",{onClick:()=>l("/customer/orders"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",__self:this,__source:{fileName:z,lineNumber:463,columnNumber:17}},"View All")),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:z,lineNumber:470,columnNumber:15}},(Array.isArray(i)?i:[]).slice(0,3).map(S=>e.createElement("div",{key:S.id,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",__self:this,__source:{fileName:z,lineNumber:472,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:z,lineNumber:476,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:z,lineNumber:477,columnNumber:23}},"Order #",S.id.slice(-6)),e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:z,lineNumber:480,columnNumber:23}},new Date(S.orderDate).toLocaleDateString())),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:z,lineNumber:484,columnNumber:21}},e.createElement("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${b(S.status)}`,__self:this,__source:{fileName:z,lineNumber:485,columnNumber:23}},S.status),e.createElement("p",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:z,lineNumber:490,columnNumber:23}},"KES ",S.totalAmount.toLocaleString())))),i.length===0&&e.createElement("div",{className:"text-center py-4",__self:this,__source:{fileName:z,lineNumber:497,columnNumber:19}},e.createElement(xe,{className:"w-8 h-8 text-gray-400 mx-auto mb-2",__self:this,__source:{fileName:z,lineNumber:498,columnNumber:21}}),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:z,lineNumber:499,columnNumber:21}},"No orders yet"),e.createElement("button",{onClick:()=>l("/marketplace"),className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium",__self:this,__source:{fileName:z,lineNumber:500,columnNumber:21}},"Start Shopping"))))))))}var X="/app/code/frontend/src/pages/customer/OrderHistoryPage.tsx";function To(){const{user:t}=Te(),[r,l]=R.useState([]),[s,a]=R.useState(!0),[m,n]=R.useState(null);R.useEffect(()=>{i()},[]);const i=async()=>{try{a(!0);const o=localStorage.getItem("authToken")||localStorage.getItem("token"),f=await ue.get("/api/orders",{headers:{Authorization:`Bearer ${o}`}});let h=[];f.data&&Array.isArray(f.data.orders)?h=f.data.orders:Array.isArray(f.data)&&(h=f.data),l(h)}catch(o){console.error("Failed to fetch orders:",o),F.error("Failed to load orders")}finally{a(!1)}},N=o=>({PENDING:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",PROCESSING:"bg-indigo-100 text-indigo-800",SHIPPED:"bg-purple-100 text-purple-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",u=o=>{const h={PENDING:Ke,CONFIRMED:xe,PROCESSING:xe,SHIPPED:Ue,DELIVERED:$e,CANCELLED:Je}[o]||xe;return e.createElement(h,{className:"w-4 h-4",__self:this,__source:{fileName:X,lineNumber:102,columnNumber:12}})},c=o=>({PENDING:"bg-yellow-100 text-yellow-800",COMPLETED:"bg-green-100 text-green-800",FAILED:"bg-red-100 text-red-800",CANCELLED:"bg-gray-100 text-gray-800"})[o]||"bg-gray-100 text-gray-800";return s?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:X,lineNumber:117,columnNumber:7}},e.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600",__self:this,__source:{fileName:X,lineNumber:118,columnNumber:9}})):e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:X,lineNumber:124,columnNumber:5}},e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:X,lineNumber:125,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:X,lineNumber:127,columnNumber:9}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:X,lineNumber:128,columnNumber:11}},"Order History"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:X,lineNumber:129,columnNumber:11}},"Track and manage your orders")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:X,lineNumber:133,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:X,lineNumber:134,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:X,lineNumber:135,columnNumber:13}},e.createElement(xe,{className:"w-8 h-8 text-blue-600",__self:this,__source:{fileName:X,lineNumber:136,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:X,lineNumber:137,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:X,lineNumber:138,columnNumber:17}},"Total Orders"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:X,lineNumber:141,columnNumber:17}},r.length)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:X,lineNumber:148,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:X,lineNumber:149,columnNumber:13}},e.createElement(Ke,{className:"w-8 h-8 text-yellow-600",__self:this,__source:{fileName:X,lineNumber:150,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:X,lineNumber:151,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:X,lineNumber:152,columnNumber:17}},"Pending"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:X,lineNumber:153,columnNumber:17}},(Array.isArray(r)?r:[]).filter(o=>o?.status==="PENDING").length)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:X,lineNumber:160,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:X,lineNumber:161,columnNumber:13}},e.createElement($e,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:X,lineNumber:162,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:X,lineNumber:163,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:X,lineNumber:164,columnNumber:17}},"Delivered"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:X,lineNumber:165,columnNumber:17}},(Array.isArray(r)?r:[]).filter(o=>o?.status==="DELIVERED").length)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:X,lineNumber:172,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:X,lineNumber:173,columnNumber:13}},e.createElement(mt,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:X,lineNumber:174,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:X,lineNumber:175,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:X,lineNumber:176,columnNumber:17}},"Total Spent"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:X,lineNumber:177,columnNumber:17}},"KES"," ",(Array.isArray(r)?r:[]).filter(o=>o?.paymentStatus==="COMPLETED").reduce((o,f)=>o+(f?.totalAmount||0),0).toLocaleString()))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:X,lineNumber:190,columnNumber:9}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:X,lineNumber:191,columnNumber:11}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:X,lineNumber:192,columnNumber:13}},"All Orders")),r.length===0?e.createElement("div",{className:"p-12 text-center",__self:this,__source:{fileName:X,lineNumber:196,columnNumber:13}},e.createElement(xe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:X,lineNumber:197,columnNumber:15}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:X,lineNumber:198,columnNumber:15}},"No orders yet"),e.createElement("p",{className:"text-gray-500 mb-6",__self:this,__source:{fileName:X,lineNumber:201,columnNumber:15}},"Start shopping to see your orders here"),e.createElement("button",{onClick:()=>window.location.href="/marketplace",className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700",__self:this,__source:{fileName:X,lineNumber:204,columnNumber:15}},"Browse Marketplace")):e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:X,lineNumber:212,columnNumber:13}},(Array.isArray(r)?r:[]).map(o=>e.createElement("div",{key:o.id,className:"p-6",__self:this,__source:{fileName:X,lineNumber:214,columnNumber:17}},e.createElement("div",{className:"flex items-center justify-between mb-4",__self:this,__source:{fileName:X,lineNumber:215,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:X,lineNumber:216,columnNumber:21}},e.createElement("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:X,lineNumber:217,columnNumber:23}},o.items[0]?.product?.images?.[0]?e.createElement("img",{src:o.items[0].product.images[0],alt:o.items[0].product.name,className:"w-12 h-12 rounded-lg object-cover",__self:this,__source:{fileName:X,lineNumber:219,columnNumber:27}}):e.createElement(xe,{className:"w-6 h-6 text-gray-400",__self:this,__source:{fileName:X,lineNumber:225,columnNumber:27}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:X,lineNumber:228,columnNumber:23}},e.createElement("h3",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:X,lineNumber:229,columnNumber:25}},"Order #",o.id.slice(-8)),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:X,lineNumber:232,columnNumber:25}},Array.isArray(o?.items)?o.items.length:0," item",Array.isArray(o?.items)&&o.items.length>1?"s":"","  KES"," ",(o.totalAmount||0).toLocaleString()))),e.createElement("div",{className:"flex items-center space-x-3",__self:this,__source:{fileName:X,lineNumber:240,columnNumber:21}},e.createElement("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N(o.status)}`,__self:this,__source:{fileName:X,lineNumber:241,columnNumber:23}},u(o.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:X,lineNumber:245,columnNumber:25}},o.status)),e.createElement("button",{onClick:()=>n(o),className:"text-blue-600 hover:text-blue-800 font-medium text-sm flex items-center",__self:this,__source:{fileName:X,lineNumber:247,columnNumber:23}},e.createElement(ct,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:X,lineNumber:251,columnNumber:25}}),"View Details"))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",__self:this,__source:{fileName:X,lineNumber:257,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:X,lineNumber:258,columnNumber:21}},e.createElement(vt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:X,lineNumber:259,columnNumber:23}}),"Ordered: ",new Date(o.orderDate).toLocaleDateString()),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:X,lineNumber:262,columnNumber:21}},e.createElement(mt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:X,lineNumber:263,columnNumber:23}}),"Payment:"," ",e.createElement("span",{className:`ml-1 px-2 py-0.5 rounded text-xs ${c(o.paymentStatus)}`,__self:this,__source:{fileName:X,lineNumber:265,columnNumber:23}},o.paymentStatus)),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:X,lineNumber:271,columnNumber:21}},e.createElement(Ue,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:X,lineNumber:272,columnNumber:23}}),"Method: ",o.paymentMethod)),o.status==="SHIPPED"||o.status==="DELIVERED"?e.createElement("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",__self:this,__source:{fileName:X,lineNumber:279,columnNumber:21}},e.createElement("p",{className:"text-sm text-green-800",__self:this,__source:{fileName:X,lineNumber:280,columnNumber:23}},o.status==="DELIVERED"?"Order delivered successfully!":"Your order is on the way!")):null)))),m&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:X,lineNumber:295,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",__self:this,__source:{fileName:X,lineNumber:296,columnNumber:13}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:X,lineNumber:297,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:X,lineNumber:298,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:X,lineNumber:299,columnNumber:19}},"Order Details #",m.id.slice(-8)),e.createElement("button",{onClick:()=>n(null),className:"text-gray-500 hover:text-gray-700",__self:this,__source:{fileName:X,lineNumber:302,columnNumber:19}},e.createElement(Je,{className:"w-6 h-6",__self:this,__source:{fileName:X,lineNumber:306,columnNumber:21}})))),e.createElement("div",{className:"p-6 space-y-6",__self:this,__source:{fileName:X,lineNumber:311,columnNumber:15}},e.createElement("div",{__self:this,__source:{fileName:X,lineNumber:313,columnNumber:17}},e.createElement("h4",{className:"font-medium text-gray-900 mb-2",__self:this,__source:{fileName:X,lineNumber:314,columnNumber:19}},"Order Status"),e.createElement("div",{className:"flex items-center space-x-4",__self:this,__source:{fileName:X,lineNumber:317,columnNumber:19}},e.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${N(m.status)}`,__self:this,__source:{fileName:X,lineNumber:318,columnNumber:21}},u(m.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:X,lineNumber:322,columnNumber:23}},m.status)),e.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${c(m.paymentStatus)}`,__self:this,__source:{fileName:X,lineNumber:324,columnNumber:21}},m.paymentStatus))),e.createElement("div",{__self:this,__source:{fileName:X,lineNumber:333,columnNumber:17}},e.createElement("h4",{className:"font-medium text-gray-900 mb-2",__self:this,__source:{fileName:X,lineNumber:334,columnNumber:19}},"Items Ordered"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:X,lineNumber:337,columnNumber:19}},(Array.isArray(m?.items)?m.items:[]).map(o=>e.createElement("div",{key:o.id,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",__self:this,__source:{fileName:X,lineNumber:339,columnNumber:23}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:X,lineNumber:343,columnNumber:25}},e.createElement("img",{src:o.product.images[0]||"/placeholder.jpg",alt:o.product.name,className:"w-12 h-12 rounded-lg object-cover",__self:this,__source:{fileName:X,lineNumber:344,columnNumber:27}}),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:X,lineNumber:349,columnNumber:27}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:X,lineNumber:350,columnNumber:29}},o.product.name),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:X,lineNumber:353,columnNumber:29}},o.quantity," ",o.product.unit,"  KES"," ",o.pricePerUnit))),e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:X,lineNumber:359,columnNumber:25}},"KES ",(o.totalPrice||0).toLocaleString()))))),e.createElement("div",{__self:this,__source:{fileName:X,lineNumber:368,columnNumber:17}},e.createElement("h4",{className:"font-medium text-gray-900 mb-2",__self:this,__source:{fileName:X,lineNumber:369,columnNumber:19}},"Delivery Information"),e.createElement("div",{className:"space-y-2 text-sm text-gray-600",__self:this,__source:{fileName:X,lineNumber:372,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:X,lineNumber:373,columnNumber:21}},e.createElement(ut,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:X,lineNumber:374,columnNumber:23}}),m.deliveryAddress),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:X,lineNumber:377,columnNumber:21}},e.createElement(Ct,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:X,lineNumber:378,columnNumber:23}}),m.deliveryPhone),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:X,lineNumber:381,columnNumber:21}},e.createElement(vt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:X,lineNumber:382,columnNumber:23}}),"Expected:"," ",new Date(m.estimatedDelivery).toLocaleDateString()))),e.createElement("div",{className:"border-t pt-4",__self:this,__source:{fileName:X,lineNumber:392,columnNumber:17}},e.createElement("div",{className:"flex justify-between items-center",__self:this,__source:{fileName:X,lineNumber:393,columnNumber:19}},e.createElement("span",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:X,lineNumber:394,columnNumber:21}},"Total Amount"),e.createElement("span",{className:"text-lg font-bold text-gray-900",__self:this,__source:{fileName:X,lineNumber:397,columnNumber:21}},"KES ",(m.totalAmount||0).toLocaleString())),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:X,lineNumber:401,columnNumber:19}},"Payment via ",m.paymentMethod)))))))}var j="/app/code/frontend/src/pages/cart/CartPage.tsx";const Io=({onAddToCart:t})=>{const[r,l]=R.useState([]),[s,a]=R.useState(!0),{getSuggestedProducts:m}=Yt();R.useEffect(()=>{(async()=>{try{a(!0);const N=await m();l(N.slice(0,4))}catch(N){console.error("Failed to fetch suggestions:",N)}finally{a(!1)}})()},[m]);const n=i=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(i);return s?e.createElement("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 max-w-2xl mx-auto",__self:void 0,__source:{fileName:j,lineNumber:74,columnNumber:7}},e.createElement("h3",{className:"text-sm font-medium text-green-800 mb-3",__self:void 0,__source:{fileName:j,lineNumber:75,columnNumber:9}}," Loading Fresh Products..."),e.createElement("div",{className:"grid grid-cols-2 gap-2",__self:void 0,__source:{fileName:j,lineNumber:76,columnNumber:9}},[...Array(4)].map((i,N)=>e.createElement("div",{key:N,className:"animate-pulse",__self:void 0,__source:{fileName:j,lineNumber:78,columnNumber:13}},e.createElement("div",{className:"h-4 bg-green-200 rounded w-full mb-1",__self:void 0,__source:{fileName:j,lineNumber:79,columnNumber:15}}),e.createElement("div",{className:"h-3 bg-green-100 rounded w-2/3",__self:void 0,__source:{fileName:j,lineNumber:80,columnNumber:15}}))))):r.length===0?e.createElement("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 max-w-md mx-auto",__self:void 0,__source:{fileName:j,lineNumber:90,columnNumber:7}},e.createElement("h3",{className:"text-sm font-medium text-green-800 mb-2",__self:void 0,__source:{fileName:j,lineNumber:91,columnNumber:9}}," Fresh Products Available:"),e.createElement("p",{className:"text-sm text-green-700",__self:void 0,__source:{fileName:j,lineNumber:92,columnNumber:9}},"Browse our marketplace for fresh, local produce from verified farmers.")):e.createElement("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 max-w-2xl mx-auto",__self:void 0,__source:{fileName:j,lineNumber:100,columnNumber:5}},e.createElement("h3",{className:"text-sm font-medium text-green-800 mb-3",__self:void 0,__source:{fileName:j,lineNumber:101,columnNumber:7}}," Fresh Products Available:"),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-3",__self:void 0,__source:{fileName:j,lineNumber:102,columnNumber:7}},r.map(i=>e.createElement("div",{key:i.id,className:"flex items-center justify-between bg-white rounded-md p-2 border border-green-100",__self:void 0,__source:{fileName:j,lineNumber:104,columnNumber:11}},e.createElement("div",{className:"flex-1",__self:void 0,__source:{fileName:j,lineNumber:105,columnNumber:13}},e.createElement("p",{className:"text-sm font-medium text-green-900",__self:void 0,__source:{fileName:j,lineNumber:106,columnNumber:15}},i.name),e.createElement("p",{className:"text-xs text-green-600",__self:void 0,__source:{fileName:j,lineNumber:107,columnNumber:15}},n(i.price_per_unit),"/",i.unit,"  ",i.category)),e.createElement("button",{onClick:()=>t(i),className:"ml-2 bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700 transition-colors",__self:void 0,__source:{fileName:j,lineNumber:111,columnNumber:13}},"Add")))),e.createElement("p",{className:"text-xs text-green-600 text-center",__self:void 0,__source:{fileName:j,lineNumber:120,columnNumber:7}},'Click "Add" to quickly add products to your cart, or browse all products below.'))};function Oo(){const{cart:t,updateQuantity:r,removeFromCart:l,clearCart:s,isLoading:a,refreshCart:m,reconstructCart:n}=Yt(),{addToCart:i}=Dl(),{user:N,isAuthenticated:u}=Te(),c=_t(),[o,f]=R.useState(null),[h,A]=R.useState(""),[g,b]=R.useState(null),[S,v]=R.useState(!1),[L,G]=R.useState(null);R.useEffect(()=>{if(console.log(" CART UUID CLEANUP - Checking cart contents:",t),t?.items){console.log(" CART PRODUCT IDS:",t.items.map(pe=>({id:pe.productId,type:typeof pe.productId,name:pe.name,price:pe.pricePerUnit})));const ie=t.items.filter(pe=>typeof pe.productId=="string"&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(pe.productId));ie.length>0&&(console.log(" REMOVING UUID ITEMS:",ie.map(pe=>pe.productId)),ie.forEach(pe=>{l(pe.id)}),F.error(`Removed ${ie.length} outdated items. Please add fresh products from marketplace.`,{duration:4e3}))}try{const ie=localStorage.getItem("cart-storage");if(ie){const pe=JSON.parse(ie);pe?.state?.cart?.items&&pe.state.cart.items.some($=>typeof $.productId=="string"&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test($.productId))&&(console.log(" CLEARING UUID-contaminated localStorage"),localStorage.removeItem("cart-storage"),s())}}catch(ie){console.warn("Storage cleanup error:",ie)}m()},[]);const T=(ie,pe,qe,$)=>{G({type:ie,message:pe,onConfirm:qe,itemId:$}),v(!0)},U=()=>{L&&L.onConfirm(),v(!1),G(null)},ae=()=>{v(!1),G(null)},k=async ie=>{try{console.log(" Quick adding product to cart:",ie),await i(ie,1),F.success(`Added ${ie.name} to cart`)}catch(pe){console.error("Failed to add product to cart:",pe),F.error("Failed to add product to cart")}},E=async(ie,pe)=>{if(!(pe<0)){f(ie);try{pe===0?l(ie):r(ie,pe)}catch{}finally{f(null)}}},x=async ie=>{T("removeItem","Are you sure you want to remove this item from your cart?",()=>{try{l(ie),F.success("Item removed from cart")}catch{}},ie)},w=async()=>{T("clearCart","Are you sure you want to clear your entire cart? This action cannot be undone.",async()=>{try{await s(),F.success("Cart cleared successfully")}catch{}})},Y=()=>{h.toLowerCase()==="first10"?(b({code:"FIRST10",discount:10,type:"percentage"}),F.success("Coupon applied successfully!"),A("")):h.toLowerCase()==="save100"?(b({code:"SAVE100",discount:100,type:"fixed"}),F.success("Coupon applied successfully!"),A("")):F.error("Invalid coupon code")},H=()=>{b(null),F.success("Coupon removed")},Ne=ie=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(ie),re=ie=>g?g.type==="percentage"?ie*g.discount/100:Math.min(g.discount,ie):0,de=ie=>ie>=1e3?0:150;if(a)return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:j,lineNumber:341,columnNumber:7}},e.createElement("div",{className:"animate-pulse",__self:this,__source:{fileName:j,lineNumber:342,columnNumber:9}},e.createElement("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8",__self:this,__source:{fileName:j,lineNumber:343,columnNumber:11}}),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",__self:this,__source:{fileName:j,lineNumber:344,columnNumber:11}},e.createElement("div",{className:"lg:col-span-2 space-y-4",__self:this,__source:{fileName:j,lineNumber:345,columnNumber:13}},[...Array(3)].map((ie,pe)=>e.createElement("div",{key:pe,className:"h-32 bg-gray-200 rounded-lg",__self:this,__source:{fileName:j,lineNumber:347,columnNumber:17}}))),e.createElement("div",{className:"h-64 bg-gray-200 rounded-lg",__self:this,__source:{fileName:j,lineNumber:350,columnNumber:13}}))));if(!t||t.items.length===0)return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:j,lineNumber:359,columnNumber:7}},e.createElement("div",{className:"text-center py-16",__self:this,__source:{fileName:j,lineNumber:360,columnNumber:9}},e.createElement(Tt,{className:"w-24 h-24 text-gray-300 mx-auto mb-6",__self:this,__source:{fileName:j,lineNumber:361,columnNumber:11}}),e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:j,lineNumber:362,columnNumber:11}},"Your cart is empty"),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:j,lineNumber:365,columnNumber:11}},t?.totalAmount===0?"Invalid items were automatically removed. Let's add some fresh products!":"Looks like you haven't added any items to your cart yet."),e.createElement(Io,{onAddToCart:k,__self:this,__source:{fileName:j,lineNumber:371,columnNumber:11}}),e.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",__self:this,__source:{fileName:j,lineNumber:372,columnNumber:11}},e.createElement("button",{onClick:n,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-medium inline-flex items-center",__self:this,__source:{fileName:j,lineNumber:373,columnNumber:13}}," Refresh Cart"),e.createElement(Se,{to:"/marketplace",className:"bg-primary-600 text-white px-8 py-3 rounded-lg hover:bg-primary-700 transition-colors font-medium inline-flex items-center",__self:this,__source:{fileName:j,lineNumber:379,columnNumber:13}},e.createElement(Tt,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:j,lineNumber:383,columnNumber:15}}),"Browse All Products"))));const Ce=t.totalAmount,ve=re(Ce),Pe=Ce-ve,Ae=de(Pe),We=Pe+Ae;return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:j,lineNumber:399,columnNumber:5}},e.createElement("div",{className:"flex items-center justify-between mb-8",__self:this,__source:{fileName:j,lineNumber:401,columnNumber:7}},e.createElement("div",{__self:this,__source:{fileName:j,lineNumber:402,columnNumber:9}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:j,lineNumber:403,columnNumber:11}},"Shopping Cart"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:j,lineNumber:404,columnNumber:11}},t.totalItems," ",t.totalItems===1?"item":"items"," in your cart")),t.items.length>0&&e.createElement("div",{className:"flex space-x-3",__self:this,__source:{fileName:j,lineNumber:411,columnNumber:11}},t.items.some(ie=>!ie.pricePerUnit||ie.pricePerUnit<=0)&&e.createElement(e.Fragment,null,e.createElement("button",{onClick:()=>{const ie=t.items.filter(pe=>!pe.pricePerUnit||pe.pricePerUnit<=0);ie.forEach(pe=>l(pe.id)),F.success(`Removed ${ie.length} items with invalid prices. Please add fresh products from marketplace.`)},className:"text-orange-600 hover:text-orange-700 text-sm font-medium bg-orange-50 px-3 py-1 rounded border border-orange-200",__self:this,__source:{fileName:j,lineNumber:415,columnNumber:17}}," Fix Ksh 0 Items"),e.createElement("button",{onClick:()=>{s(),F.success("Cart cleared! Visit marketplace to add products with correct prices."),setTimeout(()=>c("/marketplace"),1500)},className:"text-white bg-green-600 hover:bg-green-700 text-sm font-medium px-3 py-1 rounded",__self:this,__source:{fileName:j,lineNumber:425,columnNumber:17}}," Clear & Shop Fresh")),e.createElement("button",{onClick:w,className:"text-red-600 hover:text-red-700 text-sm font-medium",__self:this,__source:{fileName:j,lineNumber:437,columnNumber:13}},"Clear Cart"))),t.items.some(ie=>!ie.pricePerUnit||ie.pricePerUnit<=0)&&e.createElement("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 rounded-lg p-6 mb-6",__self:this,__source:{fileName:j,lineNumber:449,columnNumber:9}},e.createElement("div",{className:"flex items-start",__self:this,__source:{fileName:j,lineNumber:450,columnNumber:11}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:j,lineNumber:451,columnNumber:13}},e.createElement(nt,{className:"w-6 h-6 text-red-600 mt-1",__self:this,__source:{fileName:j,lineNumber:452,columnNumber:15}})),e.createElement("div",{className:"ml-3 flex-1",__self:this,__source:{fileName:j,lineNumber:454,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-red-800 mb-2",__self:this,__source:{fileName:j,lineNumber:455,columnNumber:15}}," Cart Contains Invalid Items"),e.createElement("p",{className:"text-sm text-red-700 mb-3",__self:this,__source:{fileName:j,lineNumber:456,columnNumber:15}},"Your cart has items showing ",e.createElement("strong",{__self:this,__source:{fileName:j,lineNumber:457,columnNumber:45}},"Ksh 0")," due to recent system updates. These items cannot be purchased."),e.createElement("div",{className:"bg-white rounded p-3 mb-3",__self:this,__source:{fileName:j,lineNumber:459,columnNumber:15}},e.createElement("h4",{className:"text-sm font-medium text-gray-800 mb-1",__self:this,__source:{fileName:j,lineNumber:460,columnNumber:17}}," Quick Fix Options:"),e.createElement("ul",{className:"text-xs text-gray-600 space-y-1",__self:this,__source:{fileName:j,lineNumber:461,columnNumber:17}},e.createElement("li",{__self:this,__source:{fileName:j,lineNumber:462,columnNumber:19}},' Click " Fix Ksh 0 Items" to remove invalid items automatically'),e.createElement("li",{__self:this,__source:{fileName:j,lineNumber:463,columnNumber:19}},' Click " Clear & Shop Fresh" to start over with working products'),e.createElement("li",{__self:this,__source:{fileName:j,lineNumber:464,columnNumber:19}}," Visit marketplace to see current prices (Ksh 85, Ksh 120, etc.)"))),e.createElement("p",{className:"text-xs text-green-700 font-medium",__self:this,__source:{fileName:j,lineNumber:467,columnNumber:15}}," Marketplace has fresh products with correct pricing ready for you!")))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",__self:this,__source:{fileName:j,lineNumber:475,columnNumber:7}},e.createElement("div",{className:"lg:col-span-2",__self:this,__source:{fileName:j,lineNumber:477,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border",__self:this,__source:{fileName:j,lineNumber:478,columnNumber:11}},e.createElement("div",{className:"p-6",__self:this,__source:{fileName:j,lineNumber:479,columnNumber:13}},e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:j,lineNumber:480,columnNumber:15}},t.items.map(ie=>e.createElement("div",{key:ie.id,className:"flex items-start space-x-4 pb-6 border-b border-gray-200 last:border-b-0 last:pb-0",__self:this,__source:{fileName:j,lineNumber:482,columnNumber:19}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:j,lineNumber:487,columnNumber:21}},e.createElement("div",{className:"w-20 h-20 bg-gray-200 rounded-lg overflow-hidden",__self:this,__source:{fileName:j,lineNumber:488,columnNumber:23}},ie.images&&ie.images.length>0?e.createElement("img",{src:ie.images[0],alt:ie.name,className:"w-full h-full object-cover",onError:pe=>{pe.currentTarget.src="/api/placeholder/80/80?text="+encodeURIComponent(ie.name)},__self:this,__source:{fileName:j,lineNumber:490,columnNumber:27}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",__self:this,__source:{fileName:j,lineNumber:501,columnNumber:27}},""))),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:j,lineNumber:509,columnNumber:21}},e.createElement("div",{className:"flex items-start justify-between",__self:this,__source:{fileName:j,lineNumber:510,columnNumber:23}},e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:j,lineNumber:511,columnNumber:25}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-1",__self:this,__source:{fileName:j,lineNumber:512,columnNumber:27}},e.createElement(Se,{to:`/marketplace/product/${ie.productId}`,className:"hover:text-primary-600 transition-colors",__self:this,__source:{fileName:j,lineNumber:513,columnNumber:29}},ie.name)),e.createElement("div",{className:"flex items-center text-sm text-gray-600 mb-2",__self:this,__source:{fileName:j,lineNumber:521,columnNumber:27}},e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:522,columnNumber:29}},"Fresh Produce")),e.createElement("div",{className:"flex items-center space-x-4 mb-3",__self:this,__source:{fileName:j,lineNumber:525,columnNumber:27}},e.createElement("span",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:j,lineNumber:526,columnNumber:29}},Ne(ie.pricePerUnit)," / ",ie.unit))),e.createElement("div",{className:"flex flex-col items-end space-y-2 ml-4",__self:this,__source:{fileName:j,lineNumber:533,columnNumber:25}},e.createElement("button",{onClick:()=>x(ie.id),className:"text-gray-400 hover:text-red-500 transition-colors",title:"Remove item",__self:this,__source:{fileName:j,lineNumber:534,columnNumber:27}},e.createElement(Sr,{className:"w-5 h-5",__self:this,__source:{fileName:j,lineNumber:539,columnNumber:29}})),e.createElement("button",{className:"text-gray-400 hover:text-red-500 transition-colors",__self:this,__source:{fileName:j,lineNumber:542,columnNumber:27}},e.createElement(vl,{className:"w-5 h-5",__self:this,__source:{fileName:j,lineNumber:543,columnNumber:29}})))),e.createElement("div",{className:"flex items-center justify-between mt-4",__self:this,__source:{fileName:j,lineNumber:549,columnNumber:23}},e.createElement("div",{className:"flex items-center border border-gray-300 rounded-lg",__self:this,__source:{fileName:j,lineNumber:550,columnNumber:25}},e.createElement("button",{onClick:()=>E(ie.id,ie.quantity-1),disabled:o===ie.id||ie.quantity<=1,className:"p-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:j,lineNumber:551,columnNumber:27}},e.createElement(Za,{className:"w-4 h-4",__self:this,__source:{fileName:j,lineNumber:560,columnNumber:29}})),e.createElement("input",{type:"number",min:"1",max:999,value:ie.quantity,onChange:pe=>{const qe=parseInt(pe.target.value)||1;qe!==ie.quantity&&E(ie.id,qe)},className:"w-16 px-2 py-2 text-center border-0 focus:ring-0",disabled:o===ie.id,__self:this,__source:{fileName:j,lineNumber:563,columnNumber:27}}),e.createElement("button",{onClick:()=>E(ie.id,ie.quantity+1),disabled:o===ie.id,className:"p-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:j,lineNumber:578,columnNumber:27}},e.createElement($t,{className:"w-4 h-4",__self:this,__source:{fileName:j,lineNumber:585,columnNumber:29}}))),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:j,lineNumber:589,columnNumber:25}},e.createElement("div",{className:"text-lg font-bold text-gray-900",__self:this,__source:{fileName:j,lineNumber:590,columnNumber:27}},Ne((ie.pricePerUnit||0)*(ie.quantity||0))),ie.quantity>1&&e.createElement("div",{className:"text-sm text-gray-600",__self:this,__source:{fileName:j,lineNumber:596,columnNumber:29}},ie.quantity," "," ",Ne(ie.pricePerUnit||0)))),o===ie.id&&e.createElement("div",{className:"mt-2 text-sm text-primary-600",__self:this,__source:{fileName:j,lineNumber:605,columnNumber:25}},"Updating..."))))))),e.createElement("div",{className:"mt-6",__self:this,__source:{fileName:j,lineNumber:617,columnNumber:11}},e.createElement(Se,{to:"/marketplace",className:"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center",__self:this,__source:{fileName:j,lineNumber:618,columnNumber:13}}," Continue Shopping"))),e.createElement("div",{__self:this,__source:{fileName:j,lineNumber:628,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6 sticky top-6",__self:this,__source:{fileName:j,lineNumber:629,columnNumber:11}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:j,lineNumber:630,columnNumber:13}},"Order Summary"),e.createElement("div",{className:"space-y-3 mb-6",__self:this,__source:{fileName:j,lineNumber:634,columnNumber:13}},e.createElement("div",{className:"flex justify-between text-gray-600",__self:this,__source:{fileName:j,lineNumber:635,columnNumber:15}},e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:636,columnNumber:17}},"Subtotal (",t.totalItems," items)"),e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:637,columnNumber:17}},Ne(Ce))),g&&e.createElement("div",{className:"flex justify-between text-green-600",__self:this,__source:{fileName:j,lineNumber:641,columnNumber:17}},e.createElement("span",{className:"flex items-center",__self:this,__source:{fileName:j,lineNumber:642,columnNumber:19}},e.createElement(zt,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:j,lineNumber:643,columnNumber:21}}),g.code,e.createElement("button",{onClick:H,className:"ml-2 text-red-500 hover:text-red-700",__self:this,__source:{fileName:j,lineNumber:645,columnNumber:21}},"")),e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:652,columnNumber:19}},"-",Ne(ve))),e.createElement("div",{className:"flex justify-between text-gray-600",__self:this,__source:{fileName:j,lineNumber:656,columnNumber:15}},e.createElement("span",{className:"flex items-center",__self:this,__source:{fileName:j,lineNumber:657,columnNumber:17}},"Delivery Fee",Ae===0&&e.createElement("span",{className:"ml-2 text-green-600 text-sm",__self:this,__source:{fileName:j,lineNumber:660,columnNumber:21}},"(Free)")),e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:663,columnNumber:17}},Ne(Ae))),e.createElement("div",{className:"border-t border-gray-200 pt-3",__self:this,__source:{fileName:j,lineNumber:666,columnNumber:15}},e.createElement("div",{className:"flex justify-between text-lg font-semibold text-gray-900",__self:this,__source:{fileName:j,lineNumber:667,columnNumber:17}},e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:668,columnNumber:19}},"Total"),e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:669,columnNumber:19}},Ne(We))))),e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:j,lineNumber:675,columnNumber:13}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:j,lineNumber:676,columnNumber:15}},"Coupon Code"),e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:j,lineNumber:679,columnNumber:15}},e.createElement("input",{type:"text",placeholder:"Enter coupon code",value:h,onChange:ie=>A(ie.target.value),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:j,lineNumber:680,columnNumber:17}}),e.createElement("button",{onClick:Y,disabled:!h.trim(),className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",__self:this,__source:{fileName:j,lineNumber:687,columnNumber:17}},"Apply")),e.createElement("p",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:j,lineNumber:695,columnNumber:15}},"Try: FIRST10 (10% off) or SAVE100 (KES 100 off)")),e.createElement("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",__self:this,__source:{fileName:j,lineNumber:701,columnNumber:13}},e.createElement("div",{className:"flex items-center text-sm text-gray-600 mb-2",__self:this,__source:{fileName:j,lineNumber:702,columnNumber:15}},e.createElement(Ke,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:j,lineNumber:703,columnNumber:17}}),e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:704,columnNumber:17}},"Estimated delivery: 1-2 business days")),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:j,lineNumber:706,columnNumber:15}},Ae===0?" You qualify for free delivery!":`Spend ${Ne(1e3-Pe)} more for free delivery`)),e.createElement(Se,{to:"/checkout",className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg hover:bg-primary-700 transition-colors font-medium inline-flex items-center justify-center",__self:this,__source:{fileName:j,lineNumber:714,columnNumber:13}},"Proceed to Checkout",e.createElement(St,{className:"w-5 h-5 ml-2",__self:this,__source:{fileName:j,lineNumber:719,columnNumber:15}})),e.createElement("div",{className:"mt-4 text-center",__self:this,__source:{fileName:j,lineNumber:723,columnNumber:13}},e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:j,lineNumber:724,columnNumber:15}}," Secure checkout powered by M-Pesa"))))),S&&L&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",__self:this,__source:{fileName:j,lineNumber:734,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 shadow-xl",__self:this,__source:{fileName:j,lineNumber:735,columnNumber:11}},e.createElement("div",{className:"p-6",__self:this,__source:{fileName:j,lineNumber:736,columnNumber:13}},e.createElement("div",{className:"flex items-center mb-4",__self:this,__source:{fileName:j,lineNumber:737,columnNumber:15}},e.createElement("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3",__self:this,__source:{fileName:j,lineNumber:738,columnNumber:17}},e.createElement(nt,{className:"w-5 h-5 text-red-600",__self:this,__source:{fileName:j,lineNumber:739,columnNumber:19}})),e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:j,lineNumber:741,columnNumber:17}},L.type==="clearCart"?"Clear Cart":"Remove Item")),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:j,lineNumber:746,columnNumber:15}},L.message),e.createElement("div",{className:"flex space-x-3",__self:this,__source:{fileName:j,lineNumber:750,columnNumber:15}},e.createElement("button",{onClick:ae,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors font-medium",__self:this,__source:{fileName:j,lineNumber:751,columnNumber:17}},"Cancel"),e.createElement("button",{onClick:U,className:`flex-1 py-2 px-4 rounded-lg transition-colors font-medium text-white ${L.type==="clearCart","bg-red-600 hover:bg-red-700"}`,__self:this,__source:{fileName:j,lineNumber:757,columnNumber:17}},L.type==="clearCart"?"Clear Cart":"Remove Item"))))))}const Mr=t=>{const r=t.replace(/[\s\-\(\)]/g,"");return r.startsWith("+254")?r.substring(1):r.startsWith("254")?r:r.startsWith("0")?"254"+r.substring(1):r.length===9&&(r.startsWith("7")||r.startsWith("1"))?"254"+r:r},xl=t=>{const r=Mr(t);return/^254[71]\d{8}$/.test(r)},Lo=async(t,r=30,l=2e3)=>{for(let s=0;s<r;s++)try{const m=await(await fetch(`/api/payments/status/${t}`)).json();if(m.status==="COMPLETED")return{success:!0,status:"COMPLETED",data:m};if(m.status==="FAILED"||m.status==="CANCELLED")return{success:!1,status:m.status,data:m};await new Promise(n=>setTimeout(n,l))}catch(a){console.error("Error polling payment status:",a)}return{success:!1,status:"TIMEOUT"}};var D="/app/code/frontend/src/pages/checkout/CheckoutPage.tsx";const Mo=["Nairobi","Mombasa","Kiambu","Nakuru","Machakos","Kajiado","Murang'a","Nyeri","Meru","Embu","Tharaka-Nithi","Kirinyaga","Nyandarua","Laikipia","Samburu","Trans-Nzoia","Uasin-Gishu","Elgeyo-Marakwet","Nandi","Baringo","Kericho","Bomet","Kakamega","Vihiga","Bungoma","Busia","Siaya","Kisumu","Homa Bay","Migori","Kisii","Nyamira","Narok","Turkana","West Pokot","Isiolo","Marsabit","Mandera","Wajir","Garissa","Tana River","Lamu","Taita-Taveta","Kwale","Kilifi"];function Uo(){const t=_t(),r=Yt(),{cart:l,clearCart:s,refreshCart:a,removeFromCart:m,validateCartItems:n}=r,{user:i,isAuthenticated:N,loginWithData:u}=Te(),[c,o]=R.useState(null),[f,h]=R.useState(!0),[A,g]=R.useState(!1),[b,S]=R.useState(1),[v,L]=R.useState(null),{register:G,handleSubmit:T,watch:U,setValue:ae,formState:{errors:k}}=Aa({defaultValues:{firstName:i?.firstName||"",lastName:i?.lastName||"",phone:i?.phone||"",email:i?.email||"",paymentMethod:"MPESA",mpesaPhone:i?.phone||"",createAccount:!N,password:""}}),E=U("paymentMethod");U("county");const x=U("createAccount");R.useEffect(()=>{w()},[]);const w=async()=>{try{if(h(!0),console.log(" CHECKOUT - Current cart state:",l),console.log(" CHECKOUT - Cart items detail:",l.items),await n(),l.items.length===0){console.log(" CHECKOUT - Cart is empty, redirecting to marketplace"),F.error("Your cart is empty. Please add items from the marketplace."),t("/marketplace");return}const re=l.items.filter(ve=>!ve.pricePerUnit||ve.pricePerUnit<=0);re.length>0&&(console.warn(" CHECKOUT - Items with invalid prices found:",re.length),F.error(`${re.length} items have pricing issues. Please review your cart.`));const de=l.totalAmount>2e3?0:300,Ce={items:l.items,totalItems:l.totalItems,totalAmount:l.totalAmount,isReadyForCheckout:l.items.length>0,deliveryFee:de,subtotal:l.totalAmount,total:l.totalAmount+de,grandTotal:l.totalAmount+de,unavailableItems:[]};if(console.log(" CHECKOUT - Final cart data:",Ce),o(Ce),l.totalItems===0){F.error("Your cart is empty"),t("/marketplace");return}}catch(re){console.error("Failed to load cart summary:",re),F.error("Failed to load cart summary"),t("/cart")}finally{h(!1)}},Y=async re=>{if(c){g(!0);try{const de={items:c.items.map(ve=>({productId:ve.productId,quantity:ve.quantity,price:ve.pricePerUnit})),customerInfo:{firstName:re.firstName,lastName:re.lastName,phone:re.phone,email:re.email,address:`${re.street}, ${re.ward}, ${re.subCounty}, ${re.county}`,county:re.county,buildingName:re.buildingName,deliveryInstructions:re.deliveryInstructions},paymentMethod:re.paymentMethod,mpesaPhone:re.paymentMethod==="MPESA"?re.mpesaPhone:void 0,deliveryFee:c.deliveryFee,totalAmount:c.grandTotal},Ce=await ue.post("/api/orders",de);if(L(Ce.data),re.paymentMethod==="MPESA"&&re.mpesaPhone)try{const ve=Mr(re.mpesaPhone);if(!xl(ve)){F.error("Please enter a valid Kenyan phone number");return}F("Initiating M-Pesa payment...",{icon:""});const Pe=await ue.post("/api/payments/stk-push",{phone:ve,amount:c.grandTotal,orderId:Ce.data.orderId,accountReference:`Order-${Ce.data.orderId}`,transactionDesc:`Payment for order ${Ce.data.orderId}`});if(Pe.data.success){F.success("M-Pesa payment request sent! Please check your phone.");try{F("Waiting for payment confirmation...",{icon:""});const Ae=await Lo(Pe.data.transactionId);Ae.success?F.success("Payment completed successfully!"):F.error(`Payment ${Ae.status.toLowerCase()}. Please try again.`)}catch(Ae){console.error("Payment polling error:",Ae),F("Payment initiated. Status will be updated shortly.",{icon:""})}}else F.error("Failed to initiate M-Pesa payment")}catch(ve){console.error("M-Pesa STK push error:",ve),F.error("Failed to process M-Pesa payment")}if(!N&&re.createAccount&&re.password)try{const ve={firstName:re.firstName,lastName:re.lastName,phone:re.phone,email:re.email,password:re.password,county:re.county,role:"CUSTOMER"},Pe=await ue.post("/api/auth/register",ve);if(Pe.data.success){const{user:Ae,token:We}=Pe.data;u(Ae,We),F.success("Account created and logged in successfully!")}}catch(ve){console.error("Failed to create account:",ve),F.error("Order placed successfully, but failed to create account. You can register later.")}await s(),S(4),F.success("Order placed successfully!")}catch(de){console.error("Failed to create order:",de);const Ce=de.response?.data?.error||"Failed to place order";F.error(Ce)}finally{g(!1)}}},H=re=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(re);return f?e.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:D,lineNumber:352,columnNumber:7}},e.createElement("div",{className:"animate-pulse",__self:this,__source:{fileName:D,lineNumber:353,columnNumber:9}},e.createElement("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8",__self:this,__source:{fileName:D,lineNumber:354,columnNumber:11}}),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",__self:this,__source:{fileName:D,lineNumber:355,columnNumber:11}},e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:D,lineNumber:356,columnNumber:13}},e.createElement("div",{className:"h-32 bg-gray-200 rounded-lg",__self:this,__source:{fileName:D,lineNumber:357,columnNumber:15}}),e.createElement("div",{className:"h-48 bg-gray-200 rounded-lg",__self:this,__source:{fileName:D,lineNumber:358,columnNumber:15}})),e.createElement("div",{className:"h-64 bg-gray-200 rounded-lg",__self:this,__source:{fileName:D,lineNumber:360,columnNumber:13}})))):!c||c.totalItems===0?e.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:D,lineNumber:369,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:D,lineNumber:370,columnNumber:9}},e.createElement(Tt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4",__self:this,__source:{fileName:D,lineNumber:371,columnNumber:11}}),e.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2",__self:this,__source:{fileName:D,lineNumber:372,columnNumber:11}},"No items to checkout"),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:D,lineNumber:375,columnNumber:11}},"Your cart is empty or items are unavailable"),e.createElement("button",{onClick:()=>t("/marketplace"),className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:D,lineNumber:378,columnNumber:11}},"Continue Shopping"))):c.totalAmount===0&&c.items.length>0?e.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:D,lineNumber:394,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:D,lineNumber:395,columnNumber:9}},e.createElement(nt,{className:"w-16 h-16 text-red-500 mx-auto mb-4",__self:this,__source:{fileName:D,lineNumber:396,columnNumber:11}}),e.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2",__self:this,__source:{fileName:D,lineNumber:397,columnNumber:11}},"Cart Contains Invalid Items"),e.createElement("p",{className:"text-gray-600 mb-4",__self:this,__source:{fileName:D,lineNumber:400,columnNumber:11}},"Your cart contains items with Ksh 0 pricing data. This happens when items were added before system updates."),e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",__self:this,__source:{fileName:D,lineNumber:403,columnNumber:11}},e.createElement("h3",{className:"text-sm font-medium text-yellow-800 mb-2",__self:this,__source:{fileName:D,lineNumber:404,columnNumber:13}},"What you need to do:"),e.createElement("ol",{className:"text-sm text-yellow-700 list-decimal list-inside space-y-1",__self:this,__source:{fileName:D,lineNumber:405,columnNumber:13}},e.createElement("li",{__self:this,__source:{fileName:D,lineNumber:406,columnNumber:15}},"Clear your current cart (items with Ksh 0 prices)"),e.createElement("li",{__self:this,__source:{fileName:D,lineNumber:407,columnNumber:15}},"Visit the marketplace to see current products with correct prices"),e.createElement("li",{__self:this,__source:{fileName:D,lineNumber:408,columnNumber:15}},"Add fresh products to your cart"))),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:D,lineNumber:411,columnNumber:11}},e.createElement("button",{onClick:()=>{s(),F.success("Cart cleared! You can now add products with correct prices."),t("/marketplace")},className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors mr-4",__self:this,__source:{fileName:D,lineNumber:412,columnNumber:13}},"Clear Cart & Go to Marketplace"),e.createElement("button",{onClick:()=>t("/marketplace"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",__self:this,__source:{fileName:D,lineNumber:422,columnNumber:13}},"View Marketplace (Keep Cart)")),e.createElement("p",{className:"text-sm text-gray-500 mt-4",__self:this,__source:{fileName:D,lineNumber:429,columnNumber:11}},"The marketplace has products with correct prices (Ksh 85, Ksh 120, etc.)"))):e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:D,lineNumber:438,columnNumber:5}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:D,lineNumber:440,columnNumber:7}},e.createElement("button",{onClick:()=>t("/cart"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",__self:this,__source:{fileName:D,lineNumber:441,columnNumber:9}},e.createElement(sr,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:D,lineNumber:445,columnNumber:11}}),"Back to Cart"),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:D,lineNumber:449,columnNumber:9}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:D,lineNumber:450,columnNumber:11}},"Checkout"),l.items.some(re=>!re.pricePerUnit||re.pricePerUnit<=0)&&e.createElement("button",{onClick:()=>{console.log(" FORCE FIX - Nuclear reset and redirecting"),s(),F.success("Cart completely reset! Redirecting to marketplace..."),setTimeout(()=>{window.location.href="/marketplace"},1e3)},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center animate-pulse",__self:this,__source:{fileName:D,lineNumber:454,columnNumber:13}},e.createElement(nt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:D,lineNumber:465,columnNumber:15}})," Force Fix Cart")),e.createElement("div",{className:"mt-6",__self:this,__source:{fileName:D,lineNumber:472,columnNumber:9}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:D,lineNumber:473,columnNumber:11}},[{step:1,title:"Information"},{step:2,title:"Review"},{step:3,title:"Payment"},{step:4,title:"Confirmation"}].map((re,de)=>e.createElement(e.Fragment,{key:re.step,__self:this,__source:{fileName:D,lineNumber:480,columnNumber:15}},e.createElement("div",{className:`flex items-center ${b>=re.step?"text-primary-600":"text-gray-400"}`,__self:this,__source:{fileName:D,lineNumber:481,columnNumber:17}},e.createElement("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${b>=re.step?"border-primary-600 bg-primary-600 text-white":"border-gray-300"}`,__self:this,__source:{fileName:D,lineNumber:486,columnNumber:19}},b>re.step?e.createElement(ar,{className:"w-4 h-4",__self:this,__source:{fileName:D,lineNumber:494,columnNumber:23}}):re.step),e.createElement("span",{className:"ml-2 text-sm font-medium",__self:this,__source:{fileName:D,lineNumber:499,columnNumber:19}},re.title)),de<3&&e.createElement("div",{className:`flex-1 h-0.5 mx-4 ${b>re.step?"bg-primary-600":"bg-gray-200"}`,__self:this,__source:{fileName:D,lineNumber:502,columnNumber:19}})))))),b===4?e.createElement("div",{className:"max-w-2xl mx-auto",__self:this,__source:{fileName:D,lineNumber:516,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-8 text-center",__self:this,__source:{fileName:D,lineNumber:517,columnNumber:11}},e.createElement("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",__self:this,__source:{fileName:D,lineNumber:518,columnNumber:13}},e.createElement(ar,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:D,lineNumber:519,columnNumber:15}})),e.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:D,lineNumber:522,columnNumber:13}},"Order Placed Successfully!"),v&&e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:D,lineNumber:527,columnNumber:15}},e.createElement("p",{className:"text-gray-600 mb-2",__self:this,__source:{fileName:D,lineNumber:528,columnNumber:17}},"Order Number:"),e.createElement("p",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:D,lineNumber:529,columnNumber:17}},v.order?.orderNumber||v.order?.id),e.createElement("p",{className:"text-gray-600 mb-2",__self:this,__source:{fileName:D,lineNumber:533,columnNumber:17}},"Total Amount:"),e.createElement("p",{className:"text-2xl font-bold text-primary-600 mb-6",__self:this,__source:{fileName:D,lineNumber:534,columnNumber:17}},H(c.grandTotal)),e.createElement("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",__self:this,__source:{fileName:D,lineNumber:538,columnNumber:17}},e.createElement("div",{className:"flex items-center text-blue-700 mb-2",__self:this,__source:{fileName:D,lineNumber:539,columnNumber:19}},e.createElement(Ke,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:D,lineNumber:540,columnNumber:21}}),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:D,lineNumber:541,columnNumber:21}},"Estimated Delivery")),e.createElement("p",{className:"text-blue-600",__self:this,__source:{fileName:D,lineNumber:543,columnNumber:19}},"1-2 business days"))),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:D,lineNumber:548,columnNumber:13}},e.createElement("button",{onClick:()=>t("/customer/dashboard"),className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg hover:bg-primary-700 transition-colors font-medium",__self:this,__source:{fileName:D,lineNumber:549,columnNumber:15}},"View Order Status"),e.createElement("button",{onClick:()=>t("/marketplace"),className:"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-200 transition-colors font-medium",__self:this,__source:{fileName:D,lineNumber:556,columnNumber:15}},"Continue Shopping")))):e.createElement("form",{onSubmit:T(Y),__self:this,__source:{fileName:D,lineNumber:566,columnNumber:9}},e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",__self:this,__source:{fileName:D,lineNumber:567,columnNumber:11}},e.createElement("div",{className:"lg:col-span-2 space-y-8",__self:this,__source:{fileName:D,lineNumber:569,columnNumber:13}},b>=1&&e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6",__self:this,__source:{fileName:D,lineNumber:572,columnNumber:17}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:D,lineNumber:573,columnNumber:19}},e.createElement(ot,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:D,lineNumber:574,columnNumber:21}}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:D,lineNumber:575,columnNumber:21}},"Customer Information")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",__self:this,__source:{fileName:D,lineNumber:580,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:581,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:D,lineNumber:582,columnNumber:23}},"First Name *"),e.createElement("input",{...G("firstName",{required:"First name is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:D,lineNumber:585,columnNumber:23}}),k.firstName&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:D,lineNumber:593,columnNumber:25}},k.firstName.message)),e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:599,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:D,lineNumber:600,columnNumber:23}},"Last Name *"),e.createElement("input",{...G("lastName",{required:"Last name is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:D,lineNumber:603,columnNumber:23}}),k.lastName&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:D,lineNumber:611,columnNumber:25}},k.lastName.message)),e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:617,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:D,lineNumber:618,columnNumber:23}},"Phone Number *"),e.createElement("input",{...G("phone",{required:"Phone number is required",pattern:{value:/^(\+254|0)[7-9]\d{8}$/,message:"Please enter a valid Kenyan phone number"}}),placeholder:"+254712345678",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:D,lineNumber:621,columnNumber:23}}),k.phone&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:D,lineNumber:634,columnNumber:25}},k.phone.message)),e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:640,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:D,lineNumber:641,columnNumber:23}},"Email Address"),e.createElement("input",{...G("email",{pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"}}),type:"email",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:D,lineNumber:644,columnNumber:23}}),k.email&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:D,lineNumber:656,columnNumber:25}},k.email.message)))),b>=1&&!N&&e.createElement("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-6",__self:this,__source:{fileName:D,lineNumber:667,columnNumber:17}},e.createElement("div",{className:"flex items-center mb-4",__self:this,__source:{fileName:D,lineNumber:668,columnNumber:19}},e.createElement(Xa,{className:"w-5 h-5 text-blue-600 mr-2",__self:this,__source:{fileName:D,lineNumber:669,columnNumber:21}}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:D,lineNumber:670,columnNumber:21}},"Create Account (Optional)")),e.createElement("div",{className:"mb-4",__self:this,__source:{fileName:D,lineNumber:675,columnNumber:19}},e.createElement("label",{className:"flex items-center",__self:this,__source:{fileName:D,lineNumber:676,columnNumber:21}},e.createElement("input",{...G("createAccount"),type:"checkbox",className:"mr-2",__self:this,__source:{fileName:D,lineNumber:677,columnNumber:23}}),e.createElement("span",{className:"text-sm text-gray-700",__self:this,__source:{fileName:D,lineNumber:682,columnNumber:23}},"Create an account to track your orders and save delivery addresses"))),x&&e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:690,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:D,lineNumber:691,columnNumber:23}},"Password *"),e.createElement("input",{...G("password",{required:x?"Password is required":!1,minLength:{value:6,message:"Password must be at least 6 characters"}}),type:"password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter password for your new account",disabled:b>1,__self:this,__source:{fileName:D,lineNumber:694,columnNumber:23}}),k.password&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:D,lineNumber:710,columnNumber:25}},k.password.message))),b>=1&&e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6",__self:this,__source:{fileName:D,lineNumber:721,columnNumber:17}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:D,lineNumber:722,columnNumber:19}},e.createElement(ut,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:D,lineNumber:723,columnNumber:21}}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:D,lineNumber:724,columnNumber:21}},"Delivery Address")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",__self:this,__source:{fileName:D,lineNumber:729,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:730,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:D,lineNumber:731,columnNumber:23}},"County *"),e.createElement("select",{...G("county",{required:"County is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:D,lineNumber:734,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:D,lineNumber:741,columnNumber:25}},"Select County"),Mo.map(re=>e.createElement("option",{key:re,value:re,__self:this,__source:{fileName:D,lineNumber:743,columnNumber:27}},re))),k.county&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:D,lineNumber:749,columnNumber:25}},k.county.message)),e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:755,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:D,lineNumber:756,columnNumber:23}},"Sub-County *"),e.createElement("input",{...G("subCounty",{required:"Sub-county is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:D,lineNumber:759,columnNumber:23}}),k.subCounty&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:D,lineNumber:767,columnNumber:25}},k.subCounty.message)),e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:773,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:D,lineNumber:774,columnNumber:23}},"Ward *"),e.createElement("input",{...G("ward",{required:"Ward is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:D,lineNumber:777,columnNumber:23}}),k.ward&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:D,lineNumber:783,columnNumber:25}},k.ward.message)),e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:789,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:D,lineNumber:790,columnNumber:23}},"Street/Road *"),e.createElement("input",{...G("street",{required:"Street is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:D,lineNumber:793,columnNumber:23}}),k.street&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:D,lineNumber:801,columnNumber:25}},k.street.message)),e.createElement("div",{className:"md:col-span-2",__self:this,__source:{fileName:D,lineNumber:807,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:D,lineNumber:808,columnNumber:23}},"Building/House Name"),e.createElement("input",{...G("buildingName"),placeholder:"Optional: Building name, house number, apartment, etc.",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:D,lineNumber:811,columnNumber:23}})),e.createElement("div",{className:"md:col-span-2",__self:this,__source:{fileName:D,lineNumber:819,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:D,lineNumber:820,columnNumber:23}},"Delivery Instructions"),e.createElement("textarea",{...G("deliveryInstructions"),rows:3,placeholder:"Optional: Special delivery instructions, landmarks, etc.",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:D,lineNumber:823,columnNumber:23}})))),b>=2&&e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6",__self:this,__source:{fileName:D,lineNumber:837,columnNumber:17}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:D,lineNumber:838,columnNumber:19}},e.createElement(mt,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:D,lineNumber:839,columnNumber:21}}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:D,lineNumber:840,columnNumber:21}},"Payment Method")),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:D,lineNumber:845,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:D,lineNumber:846,columnNumber:21}},e.createElement("input",{...G("paymentMethod"),type:"radio",value:"MPESA",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300",disabled:b>2,__self:this,__source:{fileName:D,lineNumber:847,columnNumber:23}}),e.createElement("label",{className:"ml-3 block text-sm font-medium text-gray-700",__self:this,__source:{fileName:D,lineNumber:854,columnNumber:23}},"M-Pesa STK Push")),E==="MPESA"&&e.createElement("div",{className:"ml-7",__self:this,__source:{fileName:D,lineNumber:860,columnNumber:23}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:D,lineNumber:861,columnNumber:25}},"M-Pesa Phone Number *"),e.createElement("input",{...G("mpesaPhone",{required:E==="MPESA"?"M-Pesa phone number is required":!1,pattern:{value:/^(\+254|0)[7-9]\d{8}$/,message:"Please enter a valid Kenyan phone number"}}),placeholder:"+254712345678",className:"w-full max-w-md border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>2,__self:this,__source:{fileName:D,lineNumber:864,columnNumber:25}}),k.mpesaPhone&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:D,lineNumber:881,columnNumber:27}},k.mpesaPhone.message)),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:D,lineNumber:888,columnNumber:21}},e.createElement("input",{...G("paymentMethod"),type:"radio",value:"COD",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300",disabled:b>2,__self:this,__source:{fileName:D,lineNumber:889,columnNumber:23}}),e.createElement("label",{className:"ml-3 block text-sm font-medium text-gray-700",__self:this,__source:{fileName:D,lineNumber:896,columnNumber:23}},"Cash on Delivery")))),e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:D,lineNumber:905,columnNumber:15}},b>1&&b<4&&e.createElement("button",{type:"button",onClick:()=>S(b-1),className:"bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium",__self:this,__source:{fileName:D,lineNumber:907,columnNumber:19}},"Previous"),b<3&&e.createElement("button",{type:"button",onClick:()=>S(b+1),className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors font-medium ml-auto",__self:this,__source:{fileName:D,lineNumber:917,columnNumber:19}},"Next"),b===3&&e.createElement("button",{type:"submit",disabled:A,className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium ml-auto",__self:this,__source:{fileName:D,lineNumber:927,columnNumber:19}},A?"Placing Order...":"Place Order"))),e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:939,columnNumber:13}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6 sticky top-6",__self:this,__source:{fileName:D,lineNumber:940,columnNumber:15}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:D,lineNumber:941,columnNumber:17}},"Order Summary"),e.createElement("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto",__self:this,__source:{fileName:D,lineNumber:946,columnNumber:17}},c.items.map(re=>e.createElement("div",{key:re.id,className:"flex items-center space-x-3",__self:this,__source:{fileName:D,lineNumber:948,columnNumber:21}},e.createElement("div",{className:"w-12 h-12 bg-gray-200 rounded overflow-hidden flex-shrink-0",__self:this,__source:{fileName:D,lineNumber:949,columnNumber:23}},re.images&&re.images.length>0?e.createElement("img",{src:re.images[0],alt:re.name,className:"w-full h-full object-cover",onError:de=>{de.currentTarget.src="/api/placeholder/48/48?text="+encodeURIComponent(re.name)},__self:this,__source:{fileName:D,lineNumber:951,columnNumber:27}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",__self:this,__source:{fileName:D,lineNumber:962,columnNumber:27}},"")),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:D,lineNumber:968,columnNumber:23}},e.createElement("p",{className:"text-sm font-medium text-gray-900 truncate",__self:this,__source:{fileName:D,lineNumber:969,columnNumber:25}},re.name),e.createElement("p",{className:"text-xs text-gray-600",__self:this,__source:{fileName:D,lineNumber:972,columnNumber:25}},re.quantity,"  ",H(re.pricePerUnit||0))),e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:D,lineNumber:977,columnNumber:23}},H((re.pricePerUnit||0)*(re.quantity||0)))))),e.createElement("div",{className:"space-y-2 mb-6",__self:this,__source:{fileName:D,lineNumber:987,columnNumber:17}},e.createElement("div",{className:"flex justify-between text-gray-600",__self:this,__source:{fileName:D,lineNumber:988,columnNumber:19}},e.createElement("span",{__self:this,__source:{fileName:D,lineNumber:989,columnNumber:21}},"Subtotal (",c.totalItems," items)"),e.createElement("span",{__self:this,__source:{fileName:D,lineNumber:990,columnNumber:21}},H(c.totalAmount))),e.createElement("div",{className:"flex justify-between text-gray-600",__self:this,__source:{fileName:D,lineNumber:993,columnNumber:19}},e.createElement("span",{className:"flex items-center",__self:this,__source:{fileName:D,lineNumber:994,columnNumber:21}},"Delivery Fee",c.deliveryFee===0&&e.createElement("span",{className:"ml-2 text-green-600 text-sm",__self:this,__source:{fileName:D,lineNumber:997,columnNumber:25}},"(Free)")),e.createElement("span",{__self:this,__source:{fileName:D,lineNumber:1002,columnNumber:21}},H(c.deliveryFee))),e.createElement("div",{className:"border-t border-gray-200 pt-2",__self:this,__source:{fileName:D,lineNumber:1005,columnNumber:19}},e.createElement("div",{className:"flex justify-between text-lg font-semibold text-gray-900",__self:this,__source:{fileName:D,lineNumber:1006,columnNumber:21}},e.createElement("span",{__self:this,__source:{fileName:D,lineNumber:1007,columnNumber:23}},"Total"),e.createElement("span",{__self:this,__source:{fileName:D,lineNumber:1008,columnNumber:23}},H(c.grandTotal))))),e.createElement("div",{className:"bg-gray-50 rounded-lg p-4",__self:this,__source:{fileName:D,lineNumber:1014,columnNumber:17}},e.createElement("div",{className:"flex items-center text-sm text-gray-600 mb-2",__self:this,__source:{fileName:D,lineNumber:1015,columnNumber:19}},e.createElement(Ue,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:D,lineNumber:1016,columnNumber:21}}),e.createElement("span",{__self:this,__source:{fileName:D,lineNumber:1017,columnNumber:21}},"Estimated delivery: 1-2 business days")),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:D,lineNumber:1019,columnNumber:19}},"Orders placed before 3 PM are processed the same day")))))))}var p="/app/code/frontend/src/pages/admin/AdminDashboard.tsx";function jo(){const{user:t,token:r}=Te(),l=_t(),s=b=>{l("/admin/consignments")},a=async b=>{try{await new Promise(S=>setTimeout(S,500)),F.success(`User ${b} approved successfully`),N(S=>({...S,recentUsers:S.recentUsers.map(v=>v.id===b?{...v,status:"ACTIVE"}:v),pendingApprovals:Math.max(0,S.pendingApprovals-1)}))}catch(S){console.error("Error approving user:",S),F.error("Failed to approve user")}},m=async()=>{try{console.log(" Fetching users from real database");const b=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!b.ok)throw new Error(`HTTP ${b.status}: ${b.statusText}`);const S=await b.json();console.log(" Raw API response:",S);let v=[];S&&typeof S=="object"&&(Array.isArray(S.users)?v=S.users:Array.isArray(S)?v=S:S.users&&typeof S.users=="object"&&(v=[S.users])),console.log(" Processed users data:",v);const L=Array.isArray(v)?v:[];N(G=>({...G,totalUsers:L.length,pendingApprovals:L.filter(T=>T&&(T.status==="PENDING"||T.verified===!1)).length,recentUsers:L.slice(0,5).map(T=>({id:T?.id||"unknown",name:`${T?.first_name||T?.firstName||"Unknown"} ${T?.last_name||T?.lastName||"User"}`,email:T?.email||"No email",role:T?.role||"USER",status:T?.verified?"ACTIVE":"PENDING",joinedAt:T?.created_at||T?.createdAt?new Date(T.created_at||T.createdAt).toLocaleDateString():"Unknown"}))}))}catch(b){console.error("Error fetching users:",b),F.error("Failed to fetch users data")}},n=async()=>{try{console.log(" Fetching recent activity from database");const b=await It.get("/admin/activity");if(console.log(" Raw activity response:",b),b&&b.data&&b.data.success&&Array.isArray(b.data.activities)){const S=b.data.activities.map(v=>({id:v?.id||Math.random(),type:v?.type||"system",message:v?.description||v?.message||"Unknown activity",time:v?.timestamp?new Date(v.timestamp).toLocaleString():"Unknown time",status:v?.status||"completed"}));N(v=>({...v,recentActivities:S})),console.log(" Recent activity loaded:",S)}else throw console.log(" Activity response not in expected format, using fallback data"),new Error("Invalid response format")}catch(b){console.error(" Error fetching recent activity:",b),N(S=>({...S,recentActivities:[{id:1,type:"user",message:"New farmer registration: John Kimani",time:"5 minutes ago",status:"pending"},{id:2,type:"consignment",message:"Consignment submitted by Jane Wanjiku",time:"15 minutes ago",status:"pending"}]}))}},[i,N]=R.useState({totalUsers:0,pendingApprovals:0,activeConsignments:0,monthlyRevenue:0,recentActivities:[],pendingConsignments:[],recentUsers:[]}),[u,c]=R.useState(!0),o=async()=>{try{console.log(" Fetching analytics stats from database");const b=await It.get("/admin/analytics/stats");if(console.log(" Raw analytics response:",b),b&&b.data&&b.data.success){const S=b.data.stats||{};console.log(" Analytics stats received:",S),N(v=>({...v,totalUsers:parseInt(S.totalUsers)||v.totalUsers||0,pendingApprovals:parseInt(S.pendingApprovals)||v.pendingApprovals||0,activeConsignments:parseInt(S.totalConsignments)||v.activeConsignments||0,monthlyRevenue:parseFloat(S.totalRevenue)||v.monthlyRevenue||0}))}else console.log(" Analytics response not in expected format, keeping existing stats")}catch(b){console.error(" Error fetching analytics stats:",b),console.log(" Using fallback stats due to analytics fetch failure")}};R.useEffect(()=>{(async()=>{c(!0),await Promise.all([m(),o(),n()]),N(S=>({...S,pendingConsignments:[{id:1,title:"Organic Tomatoes - 100kg",farmer:"Jane Wanjiku",value:13e3,submittedAt:"2 hours ago"},{id:2,title:"Premium Maize - 200kg",farmer:"Peter Kamau",value:12e3,submittedAt:"5 hours ago"},{id:3,title:"Fresh Spinach - 50 bunches",farmer:"Grace Muthoni",value:2500,submittedAt:"1 day ago"}]})),c(!1)})()},[]);const f=[{title:"Manage Users",description:"View and manage platform users",icon:et,color:"bg-blue-500",link:"/admin/users",count:i.totalUsers},{title:"Review Consignments",description:"Approve pending consignments",icon:xe,color:"bg-green-500",link:"/admin/consignments",count:i.pendingApprovals},{title:"Marketplace Management",description:"Manage products and orders",icon:tt,color:"bg-orange-500",link:"/admin/marketplace",count:null},{title:"Registration Fees",description:"Manage farmer registration fees",icon:mt,color:"bg-red-500",link:"/admin/registration-fees",count:null},{title:"Farmer Categories",description:"Manage farming categories",icon:zt,color:"bg-indigo-500",link:"/admin/farmer-categories",count:null},{title:"View Analytics",description:"Platform insights and metrics",icon:El,color:"bg-purple-500",link:"/admin/analytics",count:null},{title:"System Settings",description:"Configure platform settings",icon:Ht,color:"bg-gray-500",link:"/admin/settings",count:null}],h=b=>{switch(b){case"user":return e.createElement(et,{className:"w-4 h-4",__self:this,__source:{fileName:p,lineNumber:324,columnNumber:16}});case"consignment":return e.createElement(xe,{className:"w-4 h-4",__self:this,__source:{fileName:p,lineNumber:326,columnNumber:16}});case"order":return e.createElement(tt,{className:"w-4 h-4",__self:this,__source:{fileName:p,lineNumber:328,columnNumber:16}});case"driver":return e.createElement(Ue,{className:"w-4 h-4",__self:this,__source:{fileName:p,lineNumber:330,columnNumber:16}});default:return e.createElement(Cr,{className:"w-4 h-4",__self:this,__source:{fileName:p,lineNumber:332,columnNumber:16}})}},A=b=>{switch(b){case"pending":return"text-yellow-600 bg-yellow-100";case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},g=b=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(b);return u?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:p,lineNumber:359,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:p,lineNumber:360,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:p,lineNumber:361,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:p,lineNumber:362,columnNumber:11}},"Loading dashboard..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:p,lineNumber:369,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:p,lineNumber:370,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:p,lineNumber:372,columnNumber:9}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:373,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:p,lineNumber:374,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:p,lineNumber:375,columnNumber:15}},"Welcome back, ",t?.firstName,"!"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:p,lineNumber:378,columnNumber:15}},"Here's what's happening on your platform today.")),e.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600",__self:this,__source:{fileName:p,lineNumber:382,columnNumber:13}},e.createElement(Cr,{className:"w-4 h-4",__self:this,__source:{fileName:p,lineNumber:383,columnNumber:15}}),e.createElement("span",{__self:this,__source:{fileName:p,lineNumber:384,columnNumber:15}},"Admin Dashboard")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:p,lineNumber:390,columnNumber:9}},e.createElement("button",{onClick:()=>l("/admin/users"),className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow text-left group relative overflow-hidden",__self:this,__source:{fileName:p,lineNumber:391,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:395,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:p,lineNumber:396,columnNumber:15}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg group-hover:bg-blue-200 transition-colors",__self:this,__source:{fileName:p,lineNumber:397,columnNumber:17}},e.createElement(et,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:p,lineNumber:398,columnNumber:19}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:p,lineNumber:400,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:p,lineNumber:401,columnNumber:19}},i.totalUsers),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:p,lineNumber:404,columnNumber:19}},"Total Users"))),e.createElement(St,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-600 transition-colors",__self:this,__source:{fileName:p,lineNumber:407,columnNumber:15}})),e.createElement("div",{className:"mt-3 pt-3 border-t border-gray-100",__self:this,__source:{fileName:p,lineNumber:409,columnNumber:13}},e.createElement("div",{className:"flex justify-between text-xs text-gray-500 mb-1",__self:this,__source:{fileName:p,lineNumber:410,columnNumber:15}},e.createElement("span",{__self:this,__source:{fileName:p,lineNumber:411,columnNumber:17}},"Farmers: ",Math.floor(i.totalUsers*.6)),e.createElement("span",{__self:this,__source:{fileName:p,lineNumber:412,columnNumber:17}},"Customers: ",Math.floor(i.totalUsers*.35))),e.createElement("div",{className:"w-full bg-gray-200 rounded-full h-1.5",__self:this,__source:{fileName:p,lineNumber:414,columnNumber:15}},e.createElement("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:"60%"},__self:this,__source:{fileName:p,lineNumber:415,columnNumber:17}})),e.createElement("p",{className:"text-xs text-gray-500 mt-2",__self:this,__source:{fileName:p,lineNumber:420,columnNumber:15}},"Click to view user management"))),e.createElement("button",{onClick:()=>l("/admin/users?filter=pending"),className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow text-left group relative",__self:this,__source:{fileName:p,lineNumber:424,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:428,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:p,lineNumber:429,columnNumber:15}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg group-hover:bg-yellow-200 transition-colors relative",__self:this,__source:{fileName:p,lineNumber:430,columnNumber:17}},e.createElement(nt,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:p,lineNumber:431,columnNumber:19}}),i.pendingApprovals>0&&e.createElement("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse",__self:this,__source:{fileName:p,lineNumber:433,columnNumber:21}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:p,lineNumber:436,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:p,lineNumber:437,columnNumber:19}},i.pendingApprovals),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:p,lineNumber:440,columnNumber:19}},"Pending Approvals"))),e.createElement(St,{className:"w-4 h-4 text-gray-400 group-hover:text-yellow-600 transition-colors",__self:this,__source:{fileName:p,lineNumber:443,columnNumber:15}})),e.createElement("div",{className:"mt-3 pt-3 border-t border-gray-100",__self:this,__source:{fileName:p,lineNumber:445,columnNumber:13}},e.createElement("div",{className:"flex justify-between text-xs mb-2",__self:this,__source:{fileName:p,lineNumber:446,columnNumber:15}},e.createElement("span",{className:"text-yellow-600",__self:this,__source:{fileName:p,lineNumber:447,columnNumber:17}}," Farmers: ",Math.floor(i.pendingApprovals*.7)),e.createElement("span",{className:"text-yellow-600",__self:this,__source:{fileName:p,lineNumber:448,columnNumber:17}}," Drivers: ",Math.floor(i.pendingApprovals*.3))),e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:p,lineNumber:450,columnNumber:15}},"Click to review pending users"))),e.createElement("button",{onClick:()=>l("/admin/consignments"),className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow text-left group",__self:this,__source:{fileName:p,lineNumber:454,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:458,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:p,lineNumber:459,columnNumber:15}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg group-hover:bg-green-200 transition-colors",__self:this,__source:{fileName:p,lineNumber:460,columnNumber:17}},e.createElement(xe,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:p,lineNumber:461,columnNumber:19}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:p,lineNumber:463,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:p,lineNumber:464,columnNumber:19}},i.activeConsignments),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:p,lineNumber:467,columnNumber:19}},"Active Consignments"))),e.createElement(St,{className:"w-4 h-4 text-gray-400 group-hover:text-green-600 transition-colors",__self:this,__source:{fileName:p,lineNumber:470,columnNumber:15}})),e.createElement("div",{className:"mt-3 pt-3 border-t border-gray-100",__self:this,__source:{fileName:p,lineNumber:472,columnNumber:13}},e.createElement("div",{className:"grid grid-cols-3 gap-1 text-xs mb-2",__self:this,__source:{fileName:p,lineNumber:473,columnNumber:15}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:p,lineNumber:474,columnNumber:17}},e.createElement("div",{className:"text-yellow-600 font-medium",__self:this,__source:{fileName:p,lineNumber:475,columnNumber:19}},Math.floor(i.activeConsignments*.3)),e.createElement("div",{className:"text-gray-500",__self:this,__source:{fileName:p,lineNumber:476,columnNumber:19}},"Pending")),e.createElement("div",{className:"text-center",__self:this,__source:{fileName:p,lineNumber:478,columnNumber:17}},e.createElement("div",{className:"text-green-600 font-medium",__self:this,__source:{fileName:p,lineNumber:479,columnNumber:19}},Math.floor(i.activeConsignments*.5)),e.createElement("div",{className:"text-gray-500",__self:this,__source:{fileName:p,lineNumber:480,columnNumber:19}},"Active")),e.createElement("div",{className:"text-center",__self:this,__source:{fileName:p,lineNumber:482,columnNumber:17}},e.createElement("div",{className:"text-blue-600 font-medium",__self:this,__source:{fileName:p,lineNumber:483,columnNumber:19}},Math.floor(i.activeConsignments*.2)),e.createElement("div",{className:"text-gray-500",__self:this,__source:{fileName:p,lineNumber:484,columnNumber:19}},"Transit"))),e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:p,lineNumber:487,columnNumber:15}},"Click to manage consignments"))),e.createElement("button",{onClick:()=>l("/admin/analytics"),className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow text-left group",__self:this,__source:{fileName:p,lineNumber:491,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:495,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:p,lineNumber:496,columnNumber:15}},e.createElement("div",{className:"p-3 bg-purple-100 rounded-lg group-hover:bg-purple-200 transition-colors",__self:this,__source:{fileName:p,lineNumber:497,columnNumber:17}},e.createElement(tt,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:p,lineNumber:498,columnNumber:19}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:p,lineNumber:500,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:p,lineNumber:501,columnNumber:19}},g(i.monthlyRevenue)),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:p,lineNumber:504,columnNumber:19}},"Monthly Revenue"))),e.createElement(St,{className:"w-4 h-4 text-gray-400 group-hover:text-purple-600 transition-colors",__self:this,__source:{fileName:p,lineNumber:507,columnNumber:15}})),e.createElement("div",{className:"mt-3 pt-3 border-t border-gray-100",__self:this,__source:{fileName:p,lineNumber:509,columnNumber:13}},e.createElement("div",{className:"flex justify-between text-xs mb-1",__self:this,__source:{fileName:p,lineNumber:510,columnNumber:15}},e.createElement("span",{className:"text-green-600",__self:this,__source:{fileName:p,lineNumber:511,columnNumber:17}}," +12.5%"),e.createElement("span",{className:"text-gray-500",__self:this,__source:{fileName:p,lineNumber:512,columnNumber:17}},"vs last month")),e.createElement("div",{className:"flex justify-between text-xs text-gray-500 mb-2",__self:this,__source:{fileName:p,lineNumber:514,columnNumber:15}},e.createElement("span",{__self:this,__source:{fileName:p,lineNumber:515,columnNumber:17}},"Commissions: ",g(i.monthlyRevenue*.1)),e.createElement("span",{__self:this,__source:{fileName:p,lineNumber:516,columnNumber:17}},"Fees: ",g(i.monthlyRevenue*.05))),e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:p,lineNumber:518,columnNumber:15}},"Click to view revenue analytics")))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",__self:this,__source:{fileName:p,lineNumber:524,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:p,lineNumber:525,columnNumber:11}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:p,lineNumber:526,columnNumber:13}},"User Breakdown"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:p,lineNumber:527,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:528,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:p,lineNumber:529,columnNumber:17}},"Total Users"),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:p,lineNumber:530,columnNumber:17}},i.totalUsers)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:532,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:p,lineNumber:533,columnNumber:17}},"Farmers"),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:p,lineNumber:534,columnNumber:17}},Math.floor(i.totalUsers*.6))),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:536,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:p,lineNumber:537,columnNumber:17}},"Customers"),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:p,lineNumber:538,columnNumber:17}},Math.floor(i.totalUsers*.35))),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:540,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:p,lineNumber:541,columnNumber:17}},"Drivers"),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:p,lineNumber:542,columnNumber:17}},Math.floor(i.totalUsers*.05))),e.createElement("div",{className:"flex items-center justify-between border-t border-gray-200 pt-3",__self:this,__source:{fileName:p,lineNumber:544,columnNumber:15}},e.createElement("span",{className:"text-sm text-red-600",__self:this,__source:{fileName:p,lineNumber:545,columnNumber:17}},"Pending Verification"),e.createElement("span",{className:"font-medium text-red-600",__self:this,__source:{fileName:p,lineNumber:546,columnNumber:17}},i.pendingApprovals))),e.createElement("button",{onClick:()=>l("/admin/users"),className:"mt-4 w-full bg-blue-50 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-100 transition-colors text-sm font-medium",__self:this,__source:{fileName:p,lineNumber:549,columnNumber:13}},"Manage Users ")),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:p,lineNumber:557,columnNumber:11}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:p,lineNumber:558,columnNumber:13}},"Consignment Status"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:p,lineNumber:559,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:560,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:p,lineNumber:561,columnNumber:17}},"Total Consignments"),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:p,lineNumber:562,columnNumber:17}},i.activeConsignments)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:564,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:p,lineNumber:565,columnNumber:17}},"Pending Review"),e.createElement("span",{className:"font-medium text-yellow-600",__self:this,__source:{fileName:p,lineNumber:566,columnNumber:17}},Math.floor(i.activeConsignments*.3))),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:568,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:p,lineNumber:569,columnNumber:17}},"Approved & Active"),e.createElement("span",{className:"font-medium text-green-600",__self:this,__source:{fileName:p,lineNumber:570,columnNumber:17}},Math.floor(i.activeConsignments*.5))),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:572,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:p,lineNumber:573,columnNumber:17}},"In Transit"),e.createElement("span",{className:"font-medium text-blue-600",__self:this,__source:{fileName:p,lineNumber:574,columnNumber:17}},Math.floor(i.activeConsignments*.15))),e.createElement("div",{className:"flex items-center justify-between border-t border-gray-200 pt-3",__self:this,__source:{fileName:p,lineNumber:576,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:p,lineNumber:577,columnNumber:17}},"Completed This Month"),e.createElement("span",{className:"font-medium text-green-600",__self:this,__source:{fileName:p,lineNumber:578,columnNumber:17}},Math.floor(i.activeConsignments*.8)))),e.createElement("button",{onClick:()=>l("/admin/consignments"),className:"mt-4 w-full bg-green-50 text-green-600 px-4 py-2 rounded-lg hover:bg-green-100 transition-colors text-sm font-medium",__self:this,__source:{fileName:p,lineNumber:581,columnNumber:13}},"Manage Consignments "))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:p,lineNumber:591,columnNumber:9}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-6",__self:this,__source:{fileName:p,lineNumber:592,columnNumber:11}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",__self:this,__source:{fileName:p,lineNumber:595,columnNumber:11}},f.map((b,S)=>e.createElement(Se,{key:S,to:b.link,className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-all duration-200 group",__self:this,__source:{fileName:p,lineNumber:597,columnNumber:15}},e.createElement("div",{className:"flex items-start justify-between mb-3",__self:this,__source:{fileName:p,lineNumber:602,columnNumber:17}},e.createElement("div",{className:`p-2 rounded-lg ${b.color}`,__self:this,__source:{fileName:p,lineNumber:603,columnNumber:19}},e.createElement(b.icon,{className:"w-5 h-5 text-white",__self:this,__source:{fileName:p,lineNumber:604,columnNumber:21}})),b.count!==null&&e.createElement("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs font-medium",__self:this,__source:{fileName:p,lineNumber:607,columnNumber:21}},b.count)),e.createElement("h3",{className:"font-medium text-gray-900 group-hover:text-primary-600 transition-colors",__self:this,__source:{fileName:p,lineNumber:612,columnNumber:17}},b.title),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:p,lineNumber:615,columnNumber:17}},b.description),e.createElement("div",{className:"flex items-center mt-3 text-primary-600 group-hover:text-primary-700",__self:this,__source:{fileName:p,lineNumber:618,columnNumber:17}},e.createElement("span",{className:"text-sm font-medium",__self:this,__source:{fileName:p,lineNumber:619,columnNumber:19}},"Manage"),e.createElement(St,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",__self:this,__source:{fileName:p,lineNumber:620,columnNumber:19}})))))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",__self:this,__source:{fileName:p,lineNumber:628,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:p,lineNumber:630,columnNumber:11}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:p,lineNumber:631,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:632,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:p,lineNumber:633,columnNumber:17}},"Recent Activity"),e.createElement(jt,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:p,lineNumber:636,columnNumber:17}}))),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:p,lineNumber:639,columnNumber:13}},(Array.isArray(i.recentActivities)?i.recentActivities:[]).map(b=>e.createElement("button",{key:b.id,onClick:()=>{b.type==="user"?l("/admin/users"):b.type==="consignment"?l("/admin/consignments"):b.type==="order"?l("/admin/marketplace"):b.type==="driver"&&l("/admin/drivers")},className:"w-full p-6 text-left hover:bg-gray-50 transition-colors",__self:this,__source:{fileName:p,lineNumber:641,columnNumber:17}},e.createElement("div",{className:"flex items-start",__self:this,__source:{fileName:p,lineNumber:651,columnNumber:19}},e.createElement("div",{className:`p-2 rounded-lg ${A(b.status)} mr-4 flex-shrink-0`,__self:this,__source:{fileName:p,lineNumber:652,columnNumber:21}},h(b.type)),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:p,lineNumber:657,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:p,lineNumber:658,columnNumber:23}},b.message),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:p,lineNumber:661,columnNumber:23}},b.time)),e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:p,lineNumber:665,columnNumber:21}},b.status==="pending"&&e.createElement("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium",__self:this,__source:{fileName:p,lineNumber:667,columnNumber:25}},"Action Required"),e.createElement(St,{className:"w-4 h-4 text-gray-400",__self:this,__source:{fileName:p,lineNumber:671,columnNumber:23}})))))),e.createElement("div",{className:"p-6 border-t border-gray-200",__self:this,__source:{fileName:p,lineNumber:677,columnNumber:13}},e.createElement(Se,{to:"/admin/notifications",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",__self:this,__source:{fileName:p,lineNumber:678,columnNumber:15}},"View all activities "))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:p,lineNumber:688,columnNumber:11}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:p,lineNumber:689,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:690,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:p,lineNumber:691,columnNumber:17}},"Pending Consignments"),e.createElement(xe,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:p,lineNumber:694,columnNumber:17}}))),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:p,lineNumber:697,columnNumber:13}},(Array.isArray(i.pendingConsignments)?i.pendingConsignments:[]).map(b=>e.createElement("button",{key:b.id,onClick:()=>s(b.id),className:"w-full p-6 text-left hover:bg-gray-50 transition-colors",__self:this,__source:{fileName:p,lineNumber:699,columnNumber:17}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:704,columnNumber:19}},e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:p,lineNumber:705,columnNumber:21}},e.createElement("h4",{className:"text-sm font-medium text-gray-900 mb-1",__self:this,__source:{fileName:p,lineNumber:706,columnNumber:23}},b.title),e.createElement("div",{className:"flex items-center text-sm text-gray-500 mb-1",__self:this,__source:{fileName:p,lineNumber:709,columnNumber:23}},e.createElement("span",{__self:this,__source:{fileName:p,lineNumber:710,columnNumber:25}}," ",b.farmer),e.createElement("span",{className:"mx-2",__self:this,__source:{fileName:p,lineNumber:711,columnNumber:25}},""),e.createElement("span",{__self:this,__source:{fileName:p,lineNumber:712,columnNumber:25}}," ",b.submittedAt)),e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:p,lineNumber:714,columnNumber:23}},e.createElement("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium",__self:this,__source:{fileName:p,lineNumber:715,columnNumber:25}},"Pending Review"),e.createElement("span",{className:"text-xs text-gray-500",__self:this,__source:{fileName:p,lineNumber:718,columnNumber:25}},"Click to review "))),e.createElement("div",{className:"text-right ml-4",__self:this,__source:{fileName:p,lineNumber:723,columnNumber:21}},e.createElement("p",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:p,lineNumber:724,columnNumber:23}},g(b.value)),e.createElement("div",{className:"flex items-center text-xs text-gray-500 mt-1",__self:this,__source:{fileName:p,lineNumber:727,columnNumber:23}},e.createElement(St,{className:"w-3 h-3 mr-1",__self:this,__source:{fileName:p,lineNumber:728,columnNumber:25}}),e.createElement("span",{__self:this,__source:{fileName:p,lineNumber:729,columnNumber:25}},"Review Details"))))))),e.createElement("div",{className:"p-6 border-t border-gray-200",__self:this,__source:{fileName:p,lineNumber:736,columnNumber:13}},e.createElement(Se,{to:"/admin/consignments",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",__self:this,__source:{fileName:p,lineNumber:737,columnNumber:15}},"View all consignments ")))),e.createElement("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:p,lineNumber:748,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:p,lineNumber:749,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:p,lineNumber:750,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:p,lineNumber:751,columnNumber:15}},"Recent Users"),e.createElement(il,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:p,lineNumber:754,columnNumber:15}}))),e.createElement("div",{className:"overflow-x-auto",__self:this,__source:{fileName:p,lineNumber:757,columnNumber:11}},e.createElement("table",{className:"min-w-full divide-y divide-gray-200",__self:this,__source:{fileName:p,lineNumber:758,columnNumber:13}},e.createElement("thead",{className:"bg-gray-50",__self:this,__source:{fileName:p,lineNumber:759,columnNumber:15}},e.createElement("tr",{__self:this,__source:{fileName:p,lineNumber:760,columnNumber:17}},e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:p,lineNumber:761,columnNumber:19}},"User"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:p,lineNumber:764,columnNumber:19}},"Role"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:p,lineNumber:767,columnNumber:19}},"Status"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:p,lineNumber:770,columnNumber:19}},"Joined"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:p,lineNumber:773,columnNumber:19}},"Action"))),e.createElement("tbody",{className:"bg-white divide-y divide-gray-200",__self:this,__source:{fileName:p,lineNumber:778,columnNumber:15}},(Array.isArray(i.recentUsers)?i.recentUsers:[]).map(b=>e.createElement("tr",{key:b.id,__self:this,__source:{fileName:p,lineNumber:780,columnNumber:19}},e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:p,lineNumber:781,columnNumber:21}},e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:p,lineNumber:782,columnNumber:23}},b.name)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:p,lineNumber:786,columnNumber:21}},e.createElement("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",__self:this,__source:{fileName:p,lineNumber:787,columnNumber:23}},b.role)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:p,lineNumber:791,columnNumber:21}},e.createElement("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${b.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,__self:this,__source:{fileName:p,lineNumber:792,columnNumber:23}},b.status)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",__self:this,__source:{fileName:p,lineNumber:802,columnNumber:21}},b.joinedAt),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",__self:this,__source:{fileName:p,lineNumber:805,columnNumber:21}},b.status==="PENDING"?e.createElement("button",{onClick:()=>a(b.id),className:"text-green-600 hover:text-green-900",__self:this,__source:{fileName:p,lineNumber:807,columnNumber:25}},"Approve"):e.createElement("button",{onClick:()=>l("/admin/users"),className:"text-primary-600 hover:text-primary-900",__self:this,__source:{fileName:p,lineNumber:814,columnNumber:25}},"View"))))))),e.createElement("div",{className:"p-6 border-t border-gray-200",__self:this,__source:{fileName:p,lineNumber:827,columnNumber:11}},e.createElement(Se,{to:"/admin/users",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",__self:this,__source:{fileName:p,lineNumber:828,columnNumber:13}},"View all users ")))))}var W="/app/code/frontend/src/pages/admin/UserManagementPage.tsx";const $o={ADMIN:"bg-red-100 text-red-800",FARMER:"bg-green-100 text-green-800",CUSTOMER:"bg-blue-100 text-blue-800",DRIVER:"bg-purple-100 text-purple-800",AGENT:"bg-yellow-100 text-yellow-800"},qo={ACTIVE:"bg-green-100 text-green-800",PENDING:"bg-yellow-100 text-yellow-800",SUSPENDED:"bg-orange-100 text-orange-800",BLOCKED:"bg-red-100 text-red-800"};function Vo(){const{token:t}=Te(),[r,l]=R.useState([]),[s,a]=R.useState(!0),[m,n]=R.useState(""),[i,N]=R.useState("ALL"),[u,c]=R.useState("ALL"),[o,f]=R.useState(null),[h,A]=R.useState(!1),[g,b]=R.useState("activate");R.useEffect(()=>{S()},[]);const S=async()=>{try{console.log(" Fetching users from real API");const k=await ue.get("/api/admin/users",{headers:{Authorization:`Bearer ${t}`}});if(k.data.success){const E=k.data.users.map(x=>({id:x.id,phone:x.phone,email:x.email||"",firstName:x.first_name,lastName:x.last_name,role:x.role,status:x.verified?"ACTIVE":"PENDING",createdAt:x.created_at,profile:{county:x.county}}));console.log(` Loaded ${E.length} users from API`),l(E)}else throw new Error("API response not successful")}catch(k){console.error("Error fetching users:",k),F.error("Failed to fetch users")}finally{a(!1)}},v=(k,E)=>{f(k),b(E),A(!0)},L=async()=>{if(o)try{let k=o.status,E="";switch(g){case"activate":k="ACTIVE",E="User activated successfully";break;case"suspend":k="SUSPENDED",E="User suspended successfully";break;case"block":k="BLOCKED",E="User blocked successfully";break;case"delete":l(r.filter(x=>x.id!==o.id)),F.success("User deleted successfully"),A(!1);return}l(r.map(x=>x.id===o.id?{...x,status:k}:x)),F.success(E),A(!1)}catch{F.error("Failed to update user")}},G=Array.isArray(r)?r:[],T=G.filter(k=>{const E=k.firstName.toLowerCase().includes(m.toLowerCase())||k.lastName.toLowerCase().includes(m.toLowerCase())||k.email?.toLowerCase().includes(m.toLowerCase())||k.phone.includes(m),x=i==="ALL"||k.role===i,w=u==="ALL"||k.status===u;return E&&x&&w}),ae=(()=>{const k=G.length,E=G.filter(Y=>Y.status==="ACTIVE").length,x=G.filter(Y=>Y.status==="PENDING").length,w=G.filter(Y=>Y.status==="BLOCKED"||Y.status==="SUSPENDED").length;return{total:k,active:E,pending:x,blocked:w}})();return s?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:W,lineNumber:178,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:W,lineNumber:179,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:W,lineNumber:180,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:W,lineNumber:181,columnNumber:11}},"Loading users..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:W,lineNumber:188,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:W,lineNumber:189,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:W,lineNumber:191,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:W,lineNumber:192,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:W,lineNumber:193,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:W,lineNumber:194,columnNumber:15}},"User Management"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:W,lineNumber:197,columnNumber:15}},"Manage platform users and their permissions")),e.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600",__self:this,__source:{fileName:W,lineNumber:201,columnNumber:13}},e.createElement(Et,{className:"w-4 h-4",__self:this,__source:{fileName:W,lineNumber:202,columnNumber:15}}),e.createElement("span",{__self:this,__source:{fileName:W,lineNumber:203,columnNumber:15}},"Admin Panel")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:W,lineNumber:209,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:W,lineNumber:210,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:W,lineNumber:211,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:W,lineNumber:212,columnNumber:15}},e.createElement(et,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:W,lineNumber:213,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:W,lineNumber:215,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:W,lineNumber:216,columnNumber:17}},ae.total),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:W,lineNumber:219,columnNumber:17}},"Total Users")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:W,lineNumber:224,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:W,lineNumber:225,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:W,lineNumber:226,columnNumber:15}},e.createElement(il,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:W,lineNumber:227,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:W,lineNumber:229,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:W,lineNumber:230,columnNumber:17}},ae.active),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:W,lineNumber:233,columnNumber:17}},"Active Users")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:W,lineNumber:238,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:W,lineNumber:239,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:W,lineNumber:240,columnNumber:15}},e.createElement(il,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:W,lineNumber:241,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:W,lineNumber:243,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:W,lineNumber:244,columnNumber:17}},ae.pending),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:W,lineNumber:247,columnNumber:17}},"Pending Approval")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:W,lineNumber:252,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:W,lineNumber:253,columnNumber:13}},e.createElement("div",{className:"p-3 bg-red-100 rounded-lg",__self:this,__source:{fileName:W,lineNumber:254,columnNumber:15}},e.createElement(em,{className:"w-6 h-6 text-red-600",__self:this,__source:{fileName:W,lineNumber:255,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:W,lineNumber:257,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:W,lineNumber:258,columnNumber:17}},ae.blocked),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:W,lineNumber:261,columnNumber:17}},"Blocked/Suspended"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:W,lineNumber:268,columnNumber:9}},e.createElement("div",{className:"flex flex-col lg:flex-row gap-4",__self:this,__source:{fileName:W,lineNumber:269,columnNumber:11}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:W,lineNumber:270,columnNumber:13}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:W,lineNumber:271,columnNumber:15}},e.createElement(or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5",__self:this,__source:{fileName:W,lineNumber:272,columnNumber:17}}),e.createElement("input",{type:"text",placeholder:"Search users...",value:m,onChange:k=>n(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",__self:this,__source:{fileName:W,lineNumber:273,columnNumber:17}}))),e.createElement("div",{className:"flex gap-4",__self:this,__source:{fileName:W,lineNumber:283,columnNumber:13}},e.createElement("select",{value:i,onChange:k=>N(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",__self:this,__source:{fileName:W,lineNumber:284,columnNumber:15}},e.createElement("option",{value:"ALL",__self:this,__source:{fileName:W,lineNumber:289,columnNumber:17}},"All Roles"),e.createElement("option",{value:"ADMIN",__self:this,__source:{fileName:W,lineNumber:290,columnNumber:17}},"Admin"),e.createElement("option",{value:"FARMER",__self:this,__source:{fileName:W,lineNumber:291,columnNumber:17}},"Farmer"),e.createElement("option",{value:"CUSTOMER",__self:this,__source:{fileName:W,lineNumber:292,columnNumber:17}},"Customer"),e.createElement("option",{value:"DRIVER",__self:this,__source:{fileName:W,lineNumber:293,columnNumber:17}},"Driver"),e.createElement("option",{value:"AGENT",__self:this,__source:{fileName:W,lineNumber:294,columnNumber:17}},"Agent")),e.createElement("select",{value:u,onChange:k=>c(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",__self:this,__source:{fileName:W,lineNumber:297,columnNumber:15}},e.createElement("option",{value:"ALL",__self:this,__source:{fileName:W,lineNumber:302,columnNumber:17}},"All Status"),e.createElement("option",{value:"ACTIVE",__self:this,__source:{fileName:W,lineNumber:303,columnNumber:17}},"Active"),e.createElement("option",{value:"PENDING",__self:this,__source:{fileName:W,lineNumber:304,columnNumber:17}},"Pending"),e.createElement("option",{value:"SUSPENDED",__self:this,__source:{fileName:W,lineNumber:305,columnNumber:17}},"Suspended"),e.createElement("option",{value:"BLOCKED",__self:this,__source:{fileName:W,lineNumber:306,columnNumber:17}},"Blocked"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",__self:this,__source:{fileName:W,lineNumber:313,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:W,lineNumber:314,columnNumber:11}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:W,lineNumber:315,columnNumber:13}},"Users (",T.length,")")),e.createElement("div",{className:"overflow-x-auto",__self:this,__source:{fileName:W,lineNumber:320,columnNumber:11}},e.createElement("table",{className:"min-w-full divide-y divide-gray-200",__self:this,__source:{fileName:W,lineNumber:321,columnNumber:13}},e.createElement("thead",{className:"bg-gray-50",__self:this,__source:{fileName:W,lineNumber:322,columnNumber:15}},e.createElement("tr",{__self:this,__source:{fileName:W,lineNumber:323,columnNumber:17}},e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:W,lineNumber:324,columnNumber:19}},"User"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:W,lineNumber:327,columnNumber:19}},"Contact"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:W,lineNumber:330,columnNumber:19}},"Role"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:W,lineNumber:333,columnNumber:19}},"Status"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:W,lineNumber:336,columnNumber:19}},"Joined"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:W,lineNumber:339,columnNumber:19}},"Actions"))),e.createElement("tbody",{className:"bg-white divide-y divide-gray-200",__self:this,__source:{fileName:W,lineNumber:344,columnNumber:15}},(Array.isArray(T)?T:[]).map(k=>e.createElement("tr",{key:k.id,className:"hover:bg-gray-50",__self:this,__source:{fileName:W,lineNumber:346,columnNumber:19}},e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:W,lineNumber:347,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:W,lineNumber:348,columnNumber:23}},e.createElement("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",__self:this,__source:{fileName:W,lineNumber:349,columnNumber:25}},e.createElement("span",{className:"text-primary-600 font-medium",__self:this,__source:{fileName:W,lineNumber:350,columnNumber:27}},k.firstName[0],k.lastName[0])),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:W,lineNumber:355,columnNumber:25}},e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:W,lineNumber:356,columnNumber:27}},k.firstName," ",k.lastName),k.profile?.farmName&&e.createElement("div",{className:"text-sm text-gray-500",__self:this,__source:{fileName:W,lineNumber:360,columnNumber:29}},k.profile.farmName)))),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:W,lineNumber:367,columnNumber:21}},e.createElement("div",{className:"text-sm text-gray-900",__self:this,__source:{fileName:W,lineNumber:368,columnNumber:23}},e.createElement("div",{className:"flex items-center gap-1 mb-1",__self:this,__source:{fileName:W,lineNumber:369,columnNumber:25}},e.createElement(Ct,{className:"w-3 h-3",__self:this,__source:{fileName:W,lineNumber:370,columnNumber:27}}),k.phone),k.email&&e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:W,lineNumber:374,columnNumber:27}},e.createElement(Sl,{className:"w-3 h-3",__self:this,__source:{fileName:W,lineNumber:375,columnNumber:29}}),k.email))),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:W,lineNumber:381,columnNumber:21}},e.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${$o[k.role]||"bg-gray-100 text-gray-800"}`,__self:this,__source:{fileName:W,lineNumber:382,columnNumber:23}},k.role)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:W,lineNumber:391,columnNumber:21}},e.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${qo[k.status]||"bg-gray-100 text-gray-800"}`,__self:this,__source:{fileName:W,lineNumber:392,columnNumber:23}},k.status)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",__self:this,__source:{fileName:W,lineNumber:402,columnNumber:21}},new Date(k.createdAt).toLocaleDateString()),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",__self:this,__source:{fileName:W,lineNumber:405,columnNumber:21}},e.createElement("div",{className:"flex items-center gap-2",__self:this,__source:{fileName:W,lineNumber:406,columnNumber:23}},k.status==="PENDING"&&e.createElement("button",{onClick:()=>v(k,"activate"),className:"text-green-600 hover:text-green-900",__self:this,__source:{fileName:W,lineNumber:408,columnNumber:27}},"Activate"),k.status==="ACTIVE"&&e.createElement("button",{onClick:()=>v(k,"suspend"),className:"text-yellow-600 hover:text-yellow-900",__self:this,__source:{fileName:W,lineNumber:416,columnNumber:27}},"Suspend"),k.status!=="BLOCKED"&&e.createElement("button",{onClick:()=>v(k,"block"),className:"text-red-600 hover:text-red-900",__self:this,__source:{fileName:W,lineNumber:424,columnNumber:27}},"Block"))))))))),h&&o&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:W,lineNumber:442,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full",__self:this,__source:{fileName:W,lineNumber:443,columnNumber:13}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:W,lineNumber:444,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:W,lineNumber:445,columnNumber:17}},"Confirm Action")),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:W,lineNumber:450,columnNumber:15}},e.createElement("p",{className:"text-gray-600 mb-4",__self:this,__source:{fileName:W,lineNumber:451,columnNumber:17}},"Are you sure you want to ",g,' user "',o.firstName," ",o.lastName,'"?'),g==="delete"&&e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",__self:this,__source:{fileName:W,lineNumber:457,columnNumber:19}},e.createElement("p",{className:"text-red-700 text-sm",__self:this,__source:{fileName:W,lineNumber:458,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:W,lineNumber:459,columnNumber:23}},"Warning:")," This action cannot be undone. All user data will be permanently deleted.")),e.createElement("div",{className:"flex gap-4",__self:this,__source:{fileName:W,lineNumber:465,columnNumber:17}},e.createElement("button",{type:"button",onClick:()=>A(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",__self:this,__source:{fileName:W,lineNumber:466,columnNumber:19}},"Cancel"),e.createElement("button",{onClick:L,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${g==="delete"?"bg-red-600 text-white hover:bg-red-700":"bg-primary-600 text-white hover:bg-primary-700"}`,__self:this,__source:{fileName:W,lineNumber:473,columnNumber:19}},"Confirm ",g)))))))}var Q="/app/code/frontend/src/pages/admin/ConsignmentManagementPage.tsx";const Ko={PENDING:{color:"bg-yellow-100 text-yellow-800",icon:Ke,label:"Pending Review"},APPROVED:{color:"bg-green-100 text-green-800",icon:$e,label:"Approved"},REJECTED:{color:"bg-red-100 text-red-800",icon:tm,label:"Rejected"},PRICE_SUGGESTED:{color:"bg-blue-100 text-blue-800",icon:tt,label:"Price Suggested"},DRIVER_ASSIGNED:{color:"bg-purple-100 text-purple-800",icon:Ue,label:"Driver Assigned"},IN_TRANSIT:{color:"bg-indigo-100 text-indigo-800",icon:Ue,label:"In Transit"},DELIVERED:{color:"bg-teal-100 text-teal-800",icon:xe,label:"Delivered"},COMPLETED:{color:"bg-gray-100 text-gray-800",icon:$e,label:"Completed"}};function Bo(){const{token:t}=Te(),[r,l]=R.useState([]),[s,a]=R.useState([]),[m,n]=R.useState(!0),[i,N]=R.useState("ALL"),[u,c]=R.useState(null),[o,f]=R.useState(!1),[h,A]=R.useState("approve"),[g,b]=R.useState(""),[S,v]=R.useState("");R.useEffect(()=>{L(),G()},[]);const L=async()=>{try{console.log(" Fetching consignments from live database");const x=await ue.get("/api/consignments",{headers:{Authorization:`Bearer ${t}`}});console.log(" Consignments response:",x.data);const w=Array.isArray(x.data)?x.data:x.data.consignments||[];console.log(" Setting consignments array:",w),l(Array.isArray(w)?w:[])}catch(x){console.error(" Error fetching consignments:",x),F.error("Failed to fetch consignments from database"),l([])}finally{n(!1)}},G=async()=>{try{console.log(" Fetching drivers from live database");const x=await ue.get("/api/drivers",{headers:{Authorization:`Bearer ${t}`}});console.log(" Drivers response:",x.data);const w=Array.isArray(x.data)?x.data:x.data.drivers||[];console.log(" Setting drivers array:",w),a(Array.isArray(w)?w:[])}catch(x){console.error(" Error fetching drivers:",x),F.error("Failed to fetch drivers from database"),a([])}},T=async(x,w)=>{c(x),A(w),f(!0),w==="suggest_price"&&b(x.proposedPricePerUnit?.toString()||"0")},U=async()=>{if(u)try{let x={};switch(h){case"approve":x={status:"APPROVED"};break;case"reject":x={status:"REJECTED"};break;case"suggest_price":if(!g||Number(g)<=0){F.error("Please enter a valid price");return}x={status:"PRICE_SUGGESTED",suggestedPrice:Number(g)};break;case"assign_driver":if(!S){F.error("Please select a driver");return}x={status:"DRIVER_ASSIGNED",driverId:S};break}await ue.patch(`/api/admin/consignments/${u.id}`,x,{headers:{Authorization:`Bearer ${t}`}}),F.success("Consignment updated successfully!"),f(!1),L(),b(""),v("")}catch(x){console.error("Error updating consignment:",x),F.error("Failed to update consignment")}},ae=Array.isArray(r)?r:[],k=i==="ALL"?ae:ae.filter(x=>x.status===i),E=x=>{switch(x.status){case"PENDING":return e.createElement("div",{className:"flex gap-2",__self:this,__source:{fileName:Q,lineNumber:248,columnNumber:11}},e.createElement("button",{onClick:()=>T(x,"approve"),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",__self:this,__source:{fileName:Q,lineNumber:249,columnNumber:13}},"Approve"),e.createElement("button",{onClick:()=>T(x,"suggest_price"),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",__self:this,__source:{fileName:Q,lineNumber:255,columnNumber:13}},"Suggest Price"),e.createElement("button",{onClick:()=>T(x,"reject"),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",__self:this,__source:{fileName:Q,lineNumber:261,columnNumber:13}},"Reject"));case"APPROVED":return e.createElement("button",{onClick:()=>T(x,"assign_driver"),className:"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700",__self:this,__source:{fileName:Q,lineNumber:272,columnNumber:11}},"Assign Driver");default:return null}};return m?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:Q,lineNumber:287,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:Q,lineNumber:288,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:Q,lineNumber:289,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:Q,lineNumber:290,columnNumber:11}},"Loading consignments..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:Q,lineNumber:297,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:Q,lineNumber:298,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:Q,lineNumber:300,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:Q,lineNumber:301,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:Q,lineNumber:302,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:Q,lineNumber:303,columnNumber:15}},"Consignment Management"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:Q,lineNumber:306,columnNumber:15}},"Review and manage farmer consignments")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:Q,lineNumber:314,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:Q,lineNumber:315,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Q,lineNumber:316,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:Q,lineNumber:317,columnNumber:15}},e.createElement(Ke,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:Q,lineNumber:318,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:Q,lineNumber:320,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:Q,lineNumber:321,columnNumber:17}},ae.filter(x=>x.status==="PENDING").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:Q,lineNumber:327,columnNumber:17}},"Pending Review")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:Q,lineNumber:332,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Q,lineNumber:333,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:Q,lineNumber:334,columnNumber:15}},e.createElement($e,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:Q,lineNumber:335,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:Q,lineNumber:337,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:Q,lineNumber:338,columnNumber:17}},ae.filter(x=>x.status==="APPROVED").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:Q,lineNumber:344,columnNumber:17}},"Approved")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:Q,lineNumber:349,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Q,lineNumber:350,columnNumber:13}},e.createElement("div",{className:"p-3 bg-purple-100 rounded-lg",__self:this,__source:{fileName:Q,lineNumber:351,columnNumber:15}},e.createElement(Ue,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:Q,lineNumber:352,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:Q,lineNumber:354,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:Q,lineNumber:355,columnNumber:17}},ae.filter(x=>x.status==="DRIVER_ASSIGNED"||x.status==="IN_TRANSIT").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:Q,lineNumber:364,columnNumber:17}},"In Transit")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:Q,lineNumber:369,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Q,lineNumber:370,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:Q,lineNumber:371,columnNumber:15}},e.createElement(xe,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:Q,lineNumber:372,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:Q,lineNumber:374,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:Q,lineNumber:375,columnNumber:17}},ae.filter(x=>x.status==="DELIVERED"||x.status==="COMPLETED").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:Q,lineNumber:383,columnNumber:17}},"Completed"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:Q,lineNumber:390,columnNumber:9}},e.createElement("div",{className:"flex flex-wrap gap-2",__self:this,__source:{fileName:Q,lineNumber:391,columnNumber:11}},["ALL","PENDING","APPROVED","DRIVER_ASSIGNED","IN_TRANSIT","DELIVERED"].map(x=>e.createElement("button",{key:x,onClick:()=>N(x),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i===x?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,__self:this,__source:{fileName:Q,lineNumber:400,columnNumber:15}},x.replace("_"," "))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:Q,lineNumber:416,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:Q,lineNumber:417,columnNumber:11}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:Q,lineNumber:418,columnNumber:13}},"Consignments (",k.length,")")),k.length===0?e.createElement("div",{className:"p-12 text-center",__self:this,__source:{fileName:Q,lineNumber:424,columnNumber:13}},e.createElement(xe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:Q,lineNumber:425,columnNumber:15}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:Q,lineNumber:426,columnNumber:15}},"No consignments found"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:Q,lineNumber:429,columnNumber:15}},i==="ALL"?"No consignments have been submitted yet":`No ${i.toLowerCase()} consignments`)):e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:Q,lineNumber:436,columnNumber:13}},k.map(x=>{const w=Ko[x.status],Y=w?.icon||xe,H=(x.finalPricePerUnit||x.proposedPricePerUnit||0)*(x.quantity||0);return e.createElement("div",{key:x.id,className:"p-6 hover:bg-gray-50",__self:this,__source:{fileName:Q,lineNumber:447,columnNumber:19}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",__self:this,__source:{fileName:Q,lineNumber:448,columnNumber:21}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:Q,lineNumber:449,columnNumber:23}},e.createElement("div",{className:"flex items-start gap-4",__self:this,__source:{fileName:Q,lineNumber:450,columnNumber:25}},e.createElement("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",__self:this,__source:{fileName:Q,lineNumber:451,columnNumber:27}},e.createElement(xe,{className:"w-8 h-8 text-gray-600",__self:this,__source:{fileName:Q,lineNumber:452,columnNumber:29}})),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:Q,lineNumber:455,columnNumber:27}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-1",__self:this,__source:{fileName:Q,lineNumber:456,columnNumber:29}},x.title),e.createElement("p",{className:"text-gray-600 text-sm mb-3",__self:this,__source:{fileName:Q,lineNumber:459,columnNumber:29}},x.description),x.farmer&&e.createElement("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-2",__self:this,__source:{fileName:Q,lineNumber:465,columnNumber:31}},e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:Q,lineNumber:466,columnNumber:33}},e.createElement(ot,{className:"w-4 h-4",__self:this,__source:{fileName:Q,lineNumber:467,columnNumber:35}}),e.createElement("span",{__self:this,__source:{fileName:Q,lineNumber:468,columnNumber:35}},x.farmer.name)),e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:Q,lineNumber:470,columnNumber:33}},e.createElement(Ct,{className:"w-4 h-4",__self:this,__source:{fileName:Q,lineNumber:471,columnNumber:35}}),e.createElement("span",{__self:this,__source:{fileName:Q,lineNumber:472,columnNumber:35}},x.farmer.phone)),x.farmer.profile?.county&&e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:Q,lineNumber:475,columnNumber:35}},e.createElement(ut,{className:"w-4 h-4",__self:this,__source:{fileName:Q,lineNumber:476,columnNumber:37}}),e.createElement("span",{__self:this,__source:{fileName:Q,lineNumber:477,columnNumber:37}},x.farmer.profile.county))),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 mb-3",__self:this,__source:{fileName:Q,lineNumber:486,columnNumber:29}},e.createElement("span",{__self:this,__source:{fileName:Q,lineNumber:487,columnNumber:31}},x.quantity," ",x.unit),e.createElement("span",{__self:this,__source:{fileName:Q,lineNumber:490,columnNumber:31}},""),e.createElement("span",{__self:this,__source:{fileName:Q,lineNumber:491,columnNumber:31}},"KSh ",x.proposedPricePerUnit," per"," ",x.unit),e.createElement("span",{__self:this,__source:{fileName:Q,lineNumber:495,columnNumber:31}},""),e.createElement("span",{__self:this,__source:{fileName:Q,lineNumber:496,columnNumber:31}},x.category),e.createElement("span",{__self:this,__source:{fileName:Q,lineNumber:497,columnNumber:31}},""),e.createElement("span",{__self:this,__source:{fileName:Q,lineNumber:498,columnNumber:31}},"Total: KSh ",(H||0).toLocaleString())),x.status==="PRICE_SUGGESTED"&&x.adminSuggestedPrice&&e.createElement("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",__self:this,__source:{fileName:Q,lineNumber:506,columnNumber:33}},e.createElement("p",{className:"text-sm text-blue-700",__self:this,__source:{fileName:Q,lineNumber:507,columnNumber:35}},e.createElement("strong",{__self:this,__source:{fileName:Q,lineNumber:508,columnNumber:37}},"Price suggested:")," KSh"," ",x.adminSuggestedPrice," per"," ",x.unit,e.createElement("span",{className:"ml-2 text-blue-600",__self:this,__source:{fileName:Q,lineNumber:511,columnNumber:37}},"(Total: KSh"," ",((x.adminSuggestedPrice||0)*(x.quantity||0)).toLocaleString(),")")))))),e.createElement("div",{className:"flex flex-col lg:items-end gap-3",__self:this,__source:{fileName:Q,lineNumber:526,columnNumber:23}},e.createElement("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${w?.color||"bg-gray-100 text-gray-800"}`,__self:this,__source:{fileName:Q,lineNumber:527,columnNumber:25}},e.createElement(Y,{className:"w-4 h-4",__self:this,__source:{fileName:Q,lineNumber:530,columnNumber:27}}),w?.label||x.status),e.createElement("div",{className:"flex items-center gap-2 text-xs text-gray-400",__self:this,__source:{fileName:Q,lineNumber:534,columnNumber:25}},e.createElement(vt,{className:"w-3 h-3",__self:this,__source:{fileName:Q,lineNumber:535,columnNumber:27}}),new Date(x.createdAt).toLocaleDateString()),E(x))))}))),o&&u&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:Q,lineNumber:551,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full",__self:this,__source:{fileName:Q,lineNumber:552,columnNumber:13}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:Q,lineNumber:553,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:Q,lineNumber:554,columnNumber:17}},h==="approve"&&"Approve Consignment",h==="reject"&&"Reject Consignment",h==="suggest_price"&&"Suggest New Price",h==="assign_driver"&&"Assign Driver"),e.createElement("p",{className:"text-gray-600 text-sm mt-1",__self:this,__source:{fileName:Q,lineNumber:560,columnNumber:17}},u.title)),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:Q,lineNumber:565,columnNumber:15}},h==="suggest_price"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:Q,lineNumber:567,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:Q,lineNumber:568,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:Q,lineNumber:569,columnNumber:23}},"Current proposed price: KSh"," ",u.proposedPricePerUnit," per"," ",u.unit),e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:Q,lineNumber:574,columnNumber:23}},"Your suggested price (KSh per ",u.unit,")"),e.createElement("input",{type:"number",value:g,onChange:x=>b(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter suggested price",min:"1",required:!0,__self:this,__source:{fileName:Q,lineNumber:578,columnNumber:23}}))),h==="assign_driver"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:Q,lineNumber:592,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:Q,lineNumber:593,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:Q,lineNumber:594,columnNumber:23}},"Select Driver"),e.createElement("select",{value:S,onChange:x=>v(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,__self:this,__source:{fileName:Q,lineNumber:597,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:Q,lineNumber:603,columnNumber:25}},"Choose a driver"),Array.isArray(s)?s.filter(x=>x.isAvailable).map(x=>e.createElement("option",{key:x.id,value:x.userId,__self:this,__source:{fileName:Q,lineNumber:608,columnNumber:33}},x.name," - ",x.vehicleType," (",x.vehicleRegNo,") - Rating:"," ",x.rating,"")):[]))),(h==="approve"||h==="reject")&&e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:Q,lineNumber:621,columnNumber:19}},"Are you sure you want to ",h," this consignment?"),e.createElement("div",{className:"flex gap-4 mt-6",__self:this,__source:{fileName:Q,lineNumber:626,columnNumber:17}},e.createElement("button",{type:"button",onClick:()=>f(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",__self:this,__source:{fileName:Q,lineNumber:627,columnNumber:19}},"Cancel"),e.createElement("button",{onClick:U,className:"flex-1 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:Q,lineNumber:634,columnNumber:19}},"Confirm")))))))}var K="/app/code/frontend/src/pages/admin/AnalyticsPage.tsx";function Go(){const{token:t}=Te(),r=_t(),[l,s]=R.useState(!0),[a,m]=R.useState("30"),[n,i]=R.useState({totalUsers:0,totalConsignments:0,totalOrders:0,totalRevenue:0,activeDrivers:0,pendingApprovals:0,userGrowth:0,revenueGrowth:0}),[N,u]=R.useState([]);R.useEffect(()=>{c()},[]);const c=async()=>{try{s(!0),console.log(" Fetching analytics data from database");const[b,S]=await Promise.all([ue.get("/api/admin/analytics/stats",{headers:{Authorization:`Bearer ${t}`}}),ue.get("/api/admin/analytics/monthly",{headers:{Authorization:`Bearer ${t}`}})]);b.data.success&&(i(b.data.stats),console.log(" Analytics stats loaded:",b.data.stats)),S.data.success&&(u(S.data.monthlyData),console.log(" Monthly data loaded:",S.data.monthlyData))}catch(b){console.error(" Error fetching analytics:",b),F.error("Failed to fetch analytics data"),i({totalUsers:1247,totalConsignments:856,totalOrders:2341,totalRevenue:4567890,activeDrivers:23,pendingApprovals:12,userGrowth:12.5,revenueGrowth:8.2}),u([{name:"Jan",value:32e4},{name:"Feb",value:28e4},{name:"Mar",value:45e4},{name:"Apr",value:38e4},{name:"May",value:52e4},{name:"Jun",value:49e4},{name:"Jul",value:64e4},{name:"Aug",value:58e4},{name:"Sep",value:72e4},{name:"Oct",value:68e4},{name:"Nov",value:75e4},{name:"Dec",value:82e4}])}finally{s(!1)}},[o]=R.useState([{name:"Vegetables",value:45},{name:"Fruits",value:25},{name:"Grains",value:15},{name:"Leafy Greens",value:10},{name:"Others",value:5}]),[f]=R.useState([{id:1,type:"order",message:"New order placed by Mary Wangari",amount:"KSh 2,450",time:"5 minutes ago"},{id:2,type:"consignment",message:"Consignment approved for Jane Wanjiku",amount:"KSh 15,000",time:"12 minutes ago"},{id:3,type:"user",message:"New farmer registered: Peter Kamau",amount:"",time:"25 minutes ago"},{id:4,type:"delivery",message:"Delivery completed by Michael Kiprotich",amount:"KSh 3,200",time:"1 hour ago"},{id:5,type:"payment",message:"Payment processed for Grace Muthoni",amount:"KSh 8,750",time:"2 hours ago"}]);R.useEffect(()=>{setTimeout(()=>s(!1),1e3)},[a]);const h=b=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(b||0),A=b=>{switch(b){case"order":return e.createElement(xe,{className:"w-4 h-4 text-blue-600",__self:this,__source:{fileName:K,lineNumber:185,columnNumber:16}});case"consignment":return e.createElement(Rt,{className:"w-4 h-4 text-green-600",__self:this,__source:{fileName:K,lineNumber:187,columnNumber:16}});case"user":return e.createElement(et,{className:"w-4 h-4 text-purple-600",__self:this,__source:{fileName:K,lineNumber:189,columnNumber:16}});case"delivery":return e.createElement(Ue,{className:"w-4 h-4 text-orange-600",__self:this,__source:{fileName:K,lineNumber:191,columnNumber:16}});case"payment":return e.createElement(tt,{className:"w-4 h-4 text-emerald-600",__self:this,__source:{fileName:K,lineNumber:193,columnNumber:16}});default:return e.createElement(Cr,{className:"w-4 h-4 text-gray-600",__self:this,__source:{fileName:K,lineNumber:195,columnNumber:16}})}},g=()=>{try{const S=[["Analytics Report - "+new Date().toLocaleDateString()],[""],["Key Metrics"],["Total Users",(n.totalUsers||0).toString()],["Total Orders",(n.totalOrders||0).toString()],["Total Revenue",`KES ${(n.totalRevenue||0).toLocaleString()}`],["Active Drivers",(n.activeDrivers||0).toString()],["Pending Approvals",(n.pendingApprovals||0).toString()],[""],["Monthly Revenue Data"],["Month","Revenue (KES)"],...N.map(T=>[T.name,T.value.toLocaleString()]),[""],["Category Distribution"],["Category","Percentage"],...o.map(T=>[T.name,`${T.value}%`])].map(T=>T.map(U=>`"${U}"`).join(",")).join(`
`),v=new Blob([S],{type:"text/csv;charset=utf-8;"}),L=document.createElement("a"),G=URL.createObjectURL(v);L.setAttribute("href",G),L.setAttribute("download",`analytics_report_${new Date().toISOString().split("T")[0]}.csv`),L.style.visibility="hidden",document.body.appendChild(L),L.click(),document.body.removeChild(L),F.success("Analytics report downloaded successfully!")}catch(b){console.error("Error generating report:",b),F.error("Failed to generate report")}};return l?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:K,lineNumber:246,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:K,lineNumber:247,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:K,lineNumber:248,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:K,lineNumber:249,columnNumber:11}},"Loading analytics..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:K,lineNumber:256,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:K,lineNumber:257,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:K,lineNumber:259,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:K,lineNumber:260,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:K,lineNumber:261,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:K,lineNumber:262,columnNumber:15}},"Analytics Dashboard"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:K,lineNumber:265,columnNumber:15}},"Platform insights and performance metrics")),e.createElement("div",{className:"flex items-center gap-4",__self:this,__source:{fileName:K,lineNumber:269,columnNumber:13}},e.createElement("button",{onClick:c,disabled:l,className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2",__self:this,__source:{fileName:K,lineNumber:270,columnNumber:15}},e.createElement(qt,{className:`w-4 h-4 ${l?"animate-spin":""}`,__self:this,__source:{fileName:K,lineNumber:275,columnNumber:17}}),e.createElement("span",{__self:this,__source:{fileName:K,lineNumber:278,columnNumber:17}},"Refresh")),e.createElement("select",{value:a,onChange:b=>m(b.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",__self:this,__source:{fileName:K,lineNumber:280,columnNumber:15}},e.createElement("option",{value:"7",__self:this,__source:{fileName:K,lineNumber:285,columnNumber:17}},"Last 7 days"),e.createElement("option",{value:"30",__self:this,__source:{fileName:K,lineNumber:286,columnNumber:17}},"Last 30 days"),e.createElement("option",{value:"90",__self:this,__source:{fileName:K,lineNumber:287,columnNumber:17}},"Last 3 months"),e.createElement("option",{value:"365",__self:this,__source:{fileName:K,lineNumber:288,columnNumber:17}},"Last year")),e.createElement("button",{className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2",__self:this,__source:{fileName:K,lineNumber:290,columnNumber:15}},e.createElement(vr,{className:"w-4 h-4",__self:this,__source:{fileName:K,lineNumber:291,columnNumber:17}}),"Export")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:K,lineNumber:299,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:K,lineNumber:300,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:K,lineNumber:301,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:K,lineNumber:302,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:K,lineNumber:303,columnNumber:17}},"Total Revenue"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:K,lineNumber:306,columnNumber:17}},h(n.totalRevenue))),e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:K,lineNumber:310,columnNumber:15}},e.createElement(tt,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:K,lineNumber:311,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex items-center",__self:this,__source:{fileName:K,lineNumber:314,columnNumber:13}},e.createElement(Rt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:K,lineNumber:315,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium text-green-600",__self:this,__source:{fileName:K,lineNumber:316,columnNumber:15}},"+",n.revenueGrowth,"%"),e.createElement("span",{className:"text-sm text-gray-500 ml-2",__self:this,__source:{fileName:K,lineNumber:319,columnNumber:15}},"vs last month"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:K,lineNumber:323,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:K,lineNumber:324,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:K,lineNumber:325,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:K,lineNumber:326,columnNumber:17}},"Total Users"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:K,lineNumber:327,columnNumber:17}},(n.totalUsers||0).toLocaleString())),e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:K,lineNumber:331,columnNumber:15}},e.createElement(et,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:K,lineNumber:332,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex items-center",__self:this,__source:{fileName:K,lineNumber:335,columnNumber:13}},e.createElement(Rt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:K,lineNumber:336,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium text-green-600",__self:this,__source:{fileName:K,lineNumber:337,columnNumber:15}},"+",n.userGrowth,"%"),e.createElement("span",{className:"text-sm text-gray-500 ml-2",__self:this,__source:{fileName:K,lineNumber:340,columnNumber:15}},"vs last month"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:K,lineNumber:344,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:K,lineNumber:345,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:K,lineNumber:346,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:K,lineNumber:347,columnNumber:17}},"Total Orders"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:K,lineNumber:350,columnNumber:17}},(n.totalOrders||0).toLocaleString())),e.createElement("div",{className:"p-3 bg-purple-100 rounded-lg",__self:this,__source:{fileName:K,lineNumber:354,columnNumber:15}},e.createElement(xe,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:K,lineNumber:355,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex items-center",__self:this,__source:{fileName:K,lineNumber:358,columnNumber:13}},e.createElement(Rt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:K,lineNumber:359,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium text-green-600",__self:this,__source:{fileName:K,lineNumber:360,columnNumber:15}},"+15.3%"),e.createElement("span",{className:"text-sm text-gray-500 ml-2",__self:this,__source:{fileName:K,lineNumber:361,columnNumber:15}},"vs last month"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:K,lineNumber:365,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:K,lineNumber:366,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:K,lineNumber:367,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:K,lineNumber:368,columnNumber:17}},"Active Drivers"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:K,lineNumber:371,columnNumber:17}},n.activeDrivers)),e.createElement("div",{className:"p-3 bg-orange-100 rounded-lg",__self:this,__source:{fileName:K,lineNumber:375,columnNumber:15}},e.createElement(Ue,{className:"w-6 h-6 text-orange-600",__self:this,__source:{fileName:K,lineNumber:376,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex items-center",__self:this,__source:{fileName:K,lineNumber:379,columnNumber:13}},e.createElement(Rt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:K,lineNumber:380,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium text-green-600",__self:this,__source:{fileName:K,lineNumber:381,columnNumber:15}},"+2"),e.createElement("span",{className:"text-sm text-gray-500 ml-2",__self:this,__source:{fileName:K,lineNumber:382,columnNumber:15}},"vs last month")))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",__self:this,__source:{fileName:K,lineNumber:388,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:K,lineNumber:390,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between mb-6",__self:this,__source:{fileName:K,lineNumber:391,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:K,lineNumber:392,columnNumber:15}},"Monthly Revenue"),e.createElement(El,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:K,lineNumber:395,columnNumber:15}})),e.createElement("div",{className:"h-64 flex items-end justify-between gap-2",__self:this,__source:{fileName:K,lineNumber:397,columnNumber:13}},N.map((b,S)=>e.createElement("div",{key:S,className:"flex flex-col items-center flex-1",__self:this,__source:{fileName:K,lineNumber:399,columnNumber:17}},e.createElement("div",{className:"bg-primary-600 rounded-t w-full transition-all duration-300 hover:bg-primary-700",style:{height:`${b.value/Math.max(...N.map(v=>v.value))*100}%`,minHeight:"4px"},__self:this,__source:{fileName:K,lineNumber:400,columnNumber:19}}),e.createElement("span",{className:"text-xs text-gray-500 mt-2",__self:this,__source:{fileName:K,lineNumber:407,columnNumber:19}},b.name))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:K,lineNumber:416,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between mb-6",__self:this,__source:{fileName:K,lineNumber:417,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:K,lineNumber:418,columnNumber:15}},"Product Categories"),e.createElement(rm,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:K,lineNumber:421,columnNumber:15}})),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:K,lineNumber:423,columnNumber:13}},o.map((b,S)=>e.createElement("div",{key:S,className:"flex items-center justify-between",__self:this,__source:{fileName:K,lineNumber:425,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:K,lineNumber:426,columnNumber:19}},e.createElement("div",{className:"w-4 h-4 rounded mr-3",style:{backgroundColor:`hsl(${S*72}, 70%, 50%)`},__self:this,__source:{fileName:K,lineNumber:427,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-gray-700",__self:this,__source:{fileName:K,lineNumber:433,columnNumber:21}},b.name)),e.createElement("span",{className:"text-sm text-gray-500",__self:this,__source:{fileName:K,lineNumber:437,columnNumber:19}},b.value,"%")))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:K,lineNumber:445,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:K,lineNumber:446,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:K,lineNumber:447,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:K,lineNumber:448,columnNumber:15}},"Recent Activity"),e.createElement(Cr,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:K,lineNumber:451,columnNumber:15}}))),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:K,lineNumber:454,columnNumber:11}},f.map(b=>e.createElement("div",{key:b.id,className:"p-6 hover:bg-gray-50",__self:this,__source:{fileName:K,lineNumber:456,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:K,lineNumber:457,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:K,lineNumber:458,columnNumber:19}},e.createElement("div",{className:"p-2 bg-gray-100 rounded-lg mr-4",__self:this,__source:{fileName:K,lineNumber:459,columnNumber:21}},A(b.type)),e.createElement("div",{__self:this,__source:{fileName:K,lineNumber:462,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:K,lineNumber:463,columnNumber:23}},b.message),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:K,lineNumber:466,columnNumber:23}},b.time))),b.amount&&e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:K,lineNumber:470,columnNumber:21}},b.amount)))))),e.createElement("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:K,lineNumber:481,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:K,lineNumber:482,columnNumber:11}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",__self:this,__source:{fileName:K,lineNumber:485,columnNumber:11}},e.createElement("button",{onClick:()=>r("/admin/users"),className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-blue-300 transition-colors text-left group",__self:this,__source:{fileName:K,lineNumber:486,columnNumber:13}},e.createElement(et,{className:"w-6 h-6 text-blue-600 mb-2 group-hover:scale-110 transition-transform",__self:this,__source:{fileName:K,lineNumber:490,columnNumber:15}}),e.createElement("h4",{className:"font-medium text-gray-900 group-hover:text-blue-600",__self:this,__source:{fileName:K,lineNumber:491,columnNumber:15}},"Manage Users"),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:K,lineNumber:492,columnNumber:15}},"View and manage platform users")),e.createElement("button",{onClick:()=>r("/admin/consignments"),className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-green-300 transition-colors text-left group",__self:this,__source:{fileName:K,lineNumber:497,columnNumber:13}},e.createElement(xe,{className:"w-6 h-6 text-green-600 mb-2 group-hover:scale-110 transition-transform",__self:this,__source:{fileName:K,lineNumber:501,columnNumber:15}}),e.createElement("h4",{className:"font-medium text-gray-900 group-hover:text-green-600",__self:this,__source:{fileName:K,lineNumber:502,columnNumber:15}},"Review Consignments"),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:K,lineNumber:503,columnNumber:15}},"Approve pending consignments")),e.createElement("button",{onClick:()=>g(),className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-purple-300 transition-colors text-left group",__self:this,__source:{fileName:K,lineNumber:508,columnNumber:13}},e.createElement(vr,{className:"w-6 h-6 text-purple-600 mb-2 group-hover:scale-110 transition-transform",__self:this,__source:{fileName:K,lineNumber:512,columnNumber:15}}),e.createElement("h4",{className:"font-medium text-gray-900 group-hover:text-purple-600",__self:this,__source:{fileName:K,lineNumber:513,columnNumber:15}},"Generate Reports"),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:K,lineNumber:514,columnNumber:15}},"Download detailed analytics"))))))}var O="/app/code/frontend/src/pages/admin/AdminSettingsPage.tsx";function zo(){const{token:t}=Te(),[r,l]=R.useState(!0),[s,a]=R.useState(!1),[m,n]=R.useState("platform"),[i,N]=R.useState(!1),[u,c]=R.useState({platform:{name:"Zuasoko Agricultural Platform",description:"Connecting farmers directly with customers and managing agricultural supply chains",supportEmail:"support@zuasoko.com",supportPhone:"+254700000000"},fees:{farmerRegistrationFee:300,registrationFeeEnabled:!0,gracePeriodDays:7},payments:{mpesaEnabled:!0,mpesaShortcode:"174379",mpesaPasskey:"",bankTransferEnabled:!0,commissionRate:5},notifications:{emailEnabled:!0,smsEnabled:!0,pushEnabled:!0,adminNotifications:!0},security:{passwordMinLength:8,sessionTimeout:24,twoFactorRequired:!1,maxLoginAttempts:5},features:{consignmentApprovalRequired:!0,autoDriverAssignment:!1,inventoryTracking:!0,priceModeration:!0}});R.useEffect(()=>{o()},[]);const o=async()=>{try{const g=await ue.get("/api/admin/settings",{headers:{Authorization:`Bearer ${t}`}});g.data.settings&&c(g.data.settings)}catch{console.log("Using default settings - API endpoint not available")}finally{l(!1)}},f=async()=>{a(!0);try{await ue.put("/api/admin/settings",u,{headers:{Authorization:`Bearer ${t}`}}),F.success("Settings saved successfully")}catch(g){console.error("Error saving settings:",g),F.success("Settings saved locally (demo mode)")}finally{a(!1)}},h=(g,b,S)=>{c(v=>({...v,[g]:{...v[g],[b]:S}}))},A=[{id:"platform",label:"Platform",icon:Bl},{id:"payments",label:"Payments",icon:mt},{id:"fees",label:"Registration Fees",icon:tt},{id:"notifications",label:"Notifications",icon:jt},{id:"security",label:"Security",icon:Et},{id:"features",label:"Features",icon:Ht}];return r?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:O,lineNumber:171,columnNumber:7}},e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:O,lineNumber:172,columnNumber:9}},e.createElement(qt,{className:"w-5 h-5 animate-spin text-green-600",__self:this,__source:{fileName:O,lineNumber:173,columnNumber:11}}),e.createElement("span",{__self:this,__source:{fileName:O,lineNumber:174,columnNumber:11}},"Loading settings..."))):e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:O,lineNumber:181,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:O,lineNumber:182,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:O,lineNumber:184,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:O,lineNumber:185,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:186,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:O,lineNumber:187,columnNumber:15}},"System Settings"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:O,lineNumber:190,columnNumber:15}},"Configure platform settings and system behavior")),e.createElement("button",{onClick:f,disabled:s,className:"bg-green-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2",__self:this,__source:{fileName:O,lineNumber:194,columnNumber:13}},s?e.createElement(qt,{className:"w-4 h-4 animate-spin",__self:this,__source:{fileName:O,lineNumber:200,columnNumber:17}}):e.createElement(wl,{className:"w-4 h-4",__self:this,__source:{fileName:O,lineNumber:202,columnNumber:17}}),e.createElement("span",{__self:this,__source:{fileName:O,lineNumber:204,columnNumber:15}},s?"Saving...":"Save Changes")))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",__self:this,__source:{fileName:O,lineNumber:209,columnNumber:9}},e.createElement("div",{className:"lg:col-span-1",__self:this,__source:{fileName:O,lineNumber:211,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:O,lineNumber:212,columnNumber:13}},e.createElement("div",{className:"p-4 border-b border-gray-200",__self:this,__source:{fileName:O,lineNumber:213,columnNumber:15}},e.createElement("h3",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:O,lineNumber:214,columnNumber:17}},"Settings Categories")),e.createElement("nav",{className:"p-2",__self:this,__source:{fileName:O,lineNumber:218,columnNumber:15}},A.map(g=>e.createElement("button",{key:g.id,onClick:()=>n(g.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ${m===g.id?"bg-green-50 text-green-700 border border-green-200":"text-gray-600 hover:bg-gray-50"}`,__self:this,__source:{fileName:O,lineNumber:220,columnNumber:19}},e.createElement(g.icon,{className:"w-5 h-5",__self:this,__source:{fileName:O,lineNumber:229,columnNumber:21}}),e.createElement("span",{__self:this,__source:{fileName:O,lineNumber:230,columnNumber:21}},g.label)))))),e.createElement("div",{className:"lg:col-span-3",__self:this,__source:{fileName:O,lineNumber:238,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:O,lineNumber:239,columnNumber:13}},m==="platform"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:O,lineNumber:242,columnNumber:17}},e.createElement("div",{className:"flex items-center space-x-3 mb-6",__self:this,__source:{fileName:O,lineNumber:243,columnNumber:19}},e.createElement(Bl,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:O,lineNumber:244,columnNumber:21}}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:O,lineNumber:245,columnNumber:21}},"Platform Configuration")),e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:O,lineNumber:250,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:251,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:O,lineNumber:252,columnNumber:23}},"Platform Name"),e.createElement("input",{type:"text",value:u.platform.name,onChange:g=>h("platform","name",g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:O,lineNumber:255,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:265,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:O,lineNumber:266,columnNumber:23}},"Platform Description"),e.createElement("textarea",{value:u.platform.description,onChange:g=>h("platform","description",g.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:O,lineNumber:269,columnNumber:23}})),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:O,lineNumber:283,columnNumber:21}},e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:284,columnNumber:23}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:O,lineNumber:285,columnNumber:25}},"Support Email"),e.createElement("input",{type:"email",value:u.platform.supportEmail,onChange:g=>h("platform","supportEmail",g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:O,lineNumber:288,columnNumber:25}})),e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:302,columnNumber:23}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:O,lineNumber:303,columnNumber:25}},"Support Phone"),e.createElement("input",{type:"tel",value:u.platform.supportPhone,onChange:g=>h("platform","supportPhone",g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:O,lineNumber:306,columnNumber:25}}))))),m==="payments"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:O,lineNumber:326,columnNumber:17}},e.createElement("div",{className:"flex items-center space-x-3 mb-6",__self:this,__source:{fileName:O,lineNumber:327,columnNumber:19}},e.createElement(mt,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:O,lineNumber:328,columnNumber:21}}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:O,lineNumber:329,columnNumber:21}},"Payment Configuration")),e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:O,lineNumber:334,columnNumber:19}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:O,lineNumber:335,columnNumber:21}},e.createElement("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",__self:this,__source:{fileName:O,lineNumber:336,columnNumber:23}},e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:337,columnNumber:25}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:O,lineNumber:338,columnNumber:27}},"M-Pesa Integration"),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:O,lineNumber:341,columnNumber:27}},"Enable M-Pesa payments")),e.createElement("label",{className:"relative inline-flex items-center cursor-pointer",__self:this,__source:{fileName:O,lineNumber:345,columnNumber:25}},e.createElement("input",{type:"checkbox",checked:u.payments.mpesaEnabled,onChange:g=>h("payments","mpesaEnabled",g.target.checked),className:"sr-only peer",__self:this,__source:{fileName:O,lineNumber:346,columnNumber:27}}),e.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600",__self:this,__source:{fileName:O,lineNumber:358,columnNumber:27}}))),e.createElement("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",__self:this,__source:{fileName:O,lineNumber:362,columnNumber:23}},e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:363,columnNumber:25}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:O,lineNumber:364,columnNumber:27}},"Bank Transfer"),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:O,lineNumber:367,columnNumber:27}},"Enable bank transfers")),e.createElement("label",{className:"relative inline-flex items-center cursor-pointer",__self:this,__source:{fileName:O,lineNumber:371,columnNumber:25}},e.createElement("input",{type:"checkbox",checked:u.payments.bankTransferEnabled,onChange:g=>h("payments","bankTransferEnabled",g.target.checked),className:"sr-only peer",__self:this,__source:{fileName:O,lineNumber:372,columnNumber:27}}),e.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600",__self:this,__source:{fileName:O,lineNumber:384,columnNumber:27}})))),u.payments.mpesaEnabled&&e.createElement("div",{className:"space-y-4 p-4 bg-green-50 rounded-lg border border-green-200",__self:this,__source:{fileName:O,lineNumber:390,columnNumber:23}},e.createElement("h4",{className:"font-medium text-green-900",__self:this,__source:{fileName:O,lineNumber:391,columnNumber:25}},"M-Pesa Configuration"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",__self:this,__source:{fileName:O,lineNumber:395,columnNumber:25}},e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:396,columnNumber:27}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:O,lineNumber:397,columnNumber:29}},"Business Shortcode"),e.createElement("input",{type:"text",value:u.payments.mpesaShortcode,onChange:g=>h("payments","mpesaShortcode",g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:O,lineNumber:400,columnNumber:29}})),e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:414,columnNumber:27}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:O,lineNumber:415,columnNumber:29}},"Passkey"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:O,lineNumber:418,columnNumber:29}},e.createElement("input",{type:i?"text":"password",value:u.payments.mpesaPasskey,onChange:g=>h("payments","mpesaPasskey",g.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter M-Pesa passkey",__self:this,__source:{fileName:O,lineNumber:419,columnNumber:31}}),e.createElement("button",{type:"button",onClick:()=>N(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",__self:this,__source:{fileName:O,lineNumber:432,columnNumber:31}},i?e.createElement(wr,{className:"w-4 h-4 text-gray-400",__self:this,__source:{fileName:O,lineNumber:438,columnNumber:35}}):e.createElement(ct,{className:"w-4 h-4 text-gray-400",__self:this,__source:{fileName:O,lineNumber:440,columnNumber:35}})))))),e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:449,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:O,lineNumber:450,columnNumber:23}},"Commission Rate (%)"),e.createElement("input",{type:"number",min:"0",max:"20",step:"0.1",value:u.payments.commissionRate,onChange:g=>h("payments","commissionRate",parseFloat(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:O,lineNumber:453,columnNumber:23}}),e.createElement("p",{className:"text-sm text-gray-600 mt-1",__self:this,__source:{fileName:O,lineNumber:468,columnNumber:23}},"Platform commission charged on transactions")))),m==="notifications"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:O,lineNumber:478,columnNumber:17}},e.createElement("div",{className:"flex items-center space-x-3 mb-6",__self:this,__source:{fileName:O,lineNumber:479,columnNumber:19}},e.createElement(jt,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:O,lineNumber:480,columnNumber:21}}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:O,lineNumber:481,columnNumber:21}},"Notification Settings")),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:O,lineNumber:486,columnNumber:19}},[{key:"emailEnabled",label:"Email Notifications",desc:"Send notifications via email"},{key:"smsEnabled",label:"SMS Notifications",desc:"Send notifications via SMS"},{key:"pushEnabled",label:"Push Notifications",desc:"Send push notifications to mobile apps"},{key:"adminNotifications",label:"Admin Notifications",desc:"Receive admin-specific notifications"}].map(g=>e.createElement("div",{key:g.key,className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",__self:this,__source:{fileName:O,lineNumber:509,columnNumber:23}},e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:513,columnNumber:25}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:O,lineNumber:514,columnNumber:27}},g.label),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:O,lineNumber:517,columnNumber:27}},g.desc)),e.createElement("label",{className:"relative inline-flex items-center cursor-pointer",__self:this,__source:{fileName:O,lineNumber:519,columnNumber:25}},e.createElement("input",{type:"checkbox",checked:u.notifications[g.key],onChange:b=>h("notifications",g.key,b.target.checked),className:"sr-only peer",__self:this,__source:{fileName:O,lineNumber:520,columnNumber:27}}),e.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600",__self:this,__source:{fileName:O,lineNumber:536,columnNumber:27}})))))),m==="fees"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:O,lineNumber:546,columnNumber:17}},e.createElement("div",{className:"flex items-center space-x-3 mb-6",__self:this,__source:{fileName:O,lineNumber:547,columnNumber:19}},e.createElement(tt,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:O,lineNumber:548,columnNumber:21}}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:O,lineNumber:549,columnNumber:21}},"Registration Fee Configuration")),e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:O,lineNumber:554,columnNumber:19}},e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",__self:this,__source:{fileName:O,lineNumber:555,columnNumber:21}},e.createElement("div",{className:"flex items-start space-x-3",__self:this,__source:{fileName:O,lineNumber:556,columnNumber:23}},e.createElement(ol,{className:"w-5 h-5 text-yellow-600 mt-1",__self:this,__source:{fileName:O,lineNumber:557,columnNumber:25}}),e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:558,columnNumber:25}},e.createElement("h4",{className:"font-medium text-yellow-800",__self:this,__source:{fileName:O,lineNumber:559,columnNumber:27}},"Important"),e.createElement("p",{className:"text-sm text-yellow-700 mt-1",__self:this,__source:{fileName:O,lineNumber:562,columnNumber:27}},"Farmers must pay the registration fee before they can register consignments. This helps maintain platform quality and covers operational costs.")))),e.createElement("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",__self:this,__source:{fileName:O,lineNumber:571,columnNumber:21}},e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:572,columnNumber:23}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:O,lineNumber:573,columnNumber:25}},"Enable Registration Fee"),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:O,lineNumber:576,columnNumber:25}},"Require farmers to pay registration fee before consignment submission")),e.createElement("label",{className:"relative inline-flex items-center cursor-pointer",__self:this,__source:{fileName:O,lineNumber:581,columnNumber:23}},e.createElement("input",{type:"checkbox",checked:u.fees.registrationFeeEnabled,onChange:g=>h("fees","registrationFeeEnabled",g.target.checked),className:"sr-only peer",__self:this,__source:{fileName:O,lineNumber:582,columnNumber:25}}),e.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600",__self:this,__source:{fileName:O,lineNumber:594,columnNumber:25}}))),u.fees.registrationFeeEnabled&&e.createElement("div",{className:"space-y-4 p-4 bg-green-50 rounded-lg border border-green-200",__self:this,__source:{fileName:O,lineNumber:599,columnNumber:23}},e.createElement("h4",{className:"font-medium text-green-900",__self:this,__source:{fileName:O,lineNumber:600,columnNumber:25}},"Registration Fee Settings"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",__self:this,__source:{fileName:O,lineNumber:604,columnNumber:25}},e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:605,columnNumber:27}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:O,lineNumber:606,columnNumber:29}},"Registration Fee Amount (KES)"),e.createElement("input",{type:"number",min:"0",step:"1",value:u.fees.farmerRegistrationFee,onChange:g=>h("fees","farmerRegistrationFee",parseInt(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:O,lineNumber:609,columnNumber:29}}),e.createElement("p",{className:"text-sm text-gray-600 mt-1",__self:this,__source:{fileName:O,lineNumber:623,columnNumber:29}},"Amount farmers must pay to register on the platform")),e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:629,columnNumber:27}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:O,lineNumber:630,columnNumber:29}},"Grace Period (Days)"),e.createElement("input",{type:"number",min:"0",max:"30",value:u.fees.gracePeriodDays,onChange:g=>h("fees","gracePeriodDays",parseInt(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:O,lineNumber:633,columnNumber:29}}),e.createElement("p",{className:"text-sm text-gray-600 mt-1",__self:this,__source:{fileName:O,lineNumber:647,columnNumber:29}},"Days to allow farmers to submit consignments before payment"))),e.createElement("div",{className:"bg-white p-4 rounded border border-green-300",__self:this,__source:{fileName:O,lineNumber:654,columnNumber:25}},e.createElement("h5",{className:"font-medium text-gray-900 mb-2",__self:this,__source:{fileName:O,lineNumber:655,columnNumber:27}},"Payment Process"),e.createElement("ol",{className:"text-sm text-gray-700 space-y-1 list-decimal list-inside",__self:this,__source:{fileName:O,lineNumber:658,columnNumber:27}},e.createElement("li",{__self:this,__source:{fileName:O,lineNumber:659,columnNumber:29}},"Farmer registers on the platform"),e.createElement("li",{__self:this,__source:{fileName:O,lineNumber:660,columnNumber:29}},"Admin sends STK push for registration fee payment"),e.createElement("li",{__self:this,__source:{fileName:O,lineNumber:663,columnNumber:29}},"Upon successful payment, farmer can submit consignments"),e.createElement("li",{__self:this,__source:{fileName:O,lineNumber:667,columnNumber:29}},"Unpaid farmers have"," ",u.fees.gracePeriodDays," days grace period")))))),m==="security"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:O,lineNumber:681,columnNumber:17}},e.createElement("div",{className:"flex items-center space-x-3 mb-6",__self:this,__source:{fileName:O,lineNumber:682,columnNumber:19}},e.createElement(Et,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:O,lineNumber:683,columnNumber:21}}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:O,lineNumber:684,columnNumber:21}},"Security Configuration")),e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:O,lineNumber:689,columnNumber:19}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:O,lineNumber:690,columnNumber:21}},e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:691,columnNumber:23}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:O,lineNumber:692,columnNumber:25}},"Minimum Password Length"),e.createElement("input",{type:"number",min:"6",max:"20",value:u.security.passwordMinLength,onChange:g=>h("security","passwordMinLength",parseInt(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:O,lineNumber:695,columnNumber:25}})),e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:711,columnNumber:23}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:O,lineNumber:712,columnNumber:25}},"Session Timeout (hours)"),e.createElement("input",{type:"number",min:"1",max:"168",value:u.security.sessionTimeout,onChange:g=>h("security","sessionTimeout",parseInt(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:O,lineNumber:715,columnNumber:25}}))),e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:732,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:O,lineNumber:733,columnNumber:23}},"Maximum Login Attempts"),e.createElement("input",{type:"number",min:"3",max:"10",value:u.security.maxLoginAttempts,onChange:g=>h("security","maxLoginAttempts",parseInt(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:O,lineNumber:736,columnNumber:23}})),e.createElement("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",__self:this,__source:{fileName:O,lineNumber:752,columnNumber:21}},e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:753,columnNumber:23}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:O,lineNumber:754,columnNumber:25}},"Two-Factor Authentication"),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:O,lineNumber:757,columnNumber:25}},"Require 2FA for admin accounts")),e.createElement("label",{className:"relative inline-flex items-center cursor-pointer",__self:this,__source:{fileName:O,lineNumber:761,columnNumber:23}},e.createElement("input",{type:"checkbox",checked:u.security.twoFactorRequired,onChange:g=>h("security","twoFactorRequired",g.target.checked),className:"sr-only peer",__self:this,__source:{fileName:O,lineNumber:762,columnNumber:25}}),e.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600",__self:this,__source:{fileName:O,lineNumber:774,columnNumber:25}}))))),m==="features"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:O,lineNumber:783,columnNumber:17}},e.createElement("div",{className:"flex items-center space-x-3 mb-6",__self:this,__source:{fileName:O,lineNumber:784,columnNumber:19}},e.createElement(Ht,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:O,lineNumber:785,columnNumber:21}}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:O,lineNumber:786,columnNumber:21}},"Platform Features")),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:O,lineNumber:791,columnNumber:19}},[{key:"consignmentApprovalRequired",label:"Require Consignment Approval",desc:"Admin approval required for all consignments"},{key:"autoDriverAssignment",label:"Auto Driver Assignment",desc:"Automatically assign drivers to deliveries"},{key:"inventoryTracking",label:"Inventory Tracking",desc:"Track product inventory levels"},{key:"priceModeration",label:"Price Moderation",desc:"Review and moderate product prices"}].map(g=>e.createElement("div",{key:g.key,className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",__self:this,__source:{fileName:O,lineNumber:814,columnNumber:23}},e.createElement("div",{__self:this,__source:{fileName:O,lineNumber:818,columnNumber:25}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:O,lineNumber:819,columnNumber:27}},g.label),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:O,lineNumber:822,columnNumber:27}},g.desc)),e.createElement("label",{className:"relative inline-flex items-center cursor-pointer",__self:this,__source:{fileName:O,lineNumber:824,columnNumber:25}},e.createElement("input",{type:"checkbox",checked:u.features[g.key],onChange:b=>h("features",g.key,b.target.checked),className:"sr-only peer",__self:this,__source:{fileName:O,lineNumber:825,columnNumber:27}}),e.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600",__self:this,__source:{fileName:O,lineNumber:841,columnNumber:27}})))))))))))}var d="/app/code/frontend/src/pages/admin/MarketplaceManagementPage.tsx";function Ho(){const{token:t}=Te(),[r,l]=R.useState("products"),[s,a]=R.useState(!0),[m,n]=R.useState([]),[i,N]=R.useState([]),[u,c]=R.useState([]),[o,f]=R.useState([]),[h,A]=R.useState(""),[g,b]=R.useState("all"),[S,v]=R.useState("all"),[L,G]=R.useState(!1),[T,U]=R.useState(null),[ae,k]=R.useState(null),[E,x]=R.useState({name:"",category:"",price_per_unit:"",unit:"kg",description:"",stock_quantity:"",is_featured:!1,farmer_name:"Admin",farmer_county:"Central",images:[]}),[w,Y]=R.useState({totalProducts:0,activeProducts:0,totalOrders:0,pendingOrders:0,totalRevenue:0,unpaidOrders:0});R.useEffect(()=>{H()},[r]),R.useEffect(()=>{de()},[h,g,S,m,i]);const H=async()=>{a(!0);try{r==="products"?await Ne():r==="orders"&&await re()}finally{a(!1)}},Ne=async()=>{try{console.log(" Fetching marketplace products (refresh)");const $=await ue.get("/api/admin/products",{headers:{Authorization:`Bearer ${t}`}});if($.data.success){const he=$.data.products;console.log(" Setting new product data:",he),n(he),Y(ke=>({...ke,totalProducts:he.length,activeProducts:he.filter(Me=>Me.is_active).length})),console.log(" Products state updated successfully")}}catch($){console.error(" Error fetching products:",$),F.error("Failed to fetch products")}},re=async()=>{try{console.log(" Fetching orders");const $=await ue.get("/api/admin/orders",{headers:{Authorization:`Bearer ${t}`}});if($.data.success){const he=$.data.orders;N(he);const ke=he.filter(Me=>Me.payment_status==="PAID").reduce((Me,je)=>Me+je.total_amount,0);Y(Me=>({...Me,totalOrders:he.length,pendingOrders:he.filter(je=>je.status==="PENDING").length,totalRevenue:ke,unpaidOrders:he.filter(je=>je.payment_status==="UNPAID").length})),console.log(" Orders loaded:",he)}}catch($){console.error(" Error fetching orders:",$),F.error("Failed to fetch orders")}},de=()=>{if(r==="products"){let $=m.filter(he=>{const ke=he.name.toLowerCase().includes(h.toLowerCase())||he.description.toLowerCase().includes(h.toLowerCase()),Me=g==="all"||g==="active"&&he.is_active||g==="inactive"&&!he.is_active,je=S==="all"||he.category===S;return ke&&Me&&je});c($)}else if(r==="orders"){let $=i.filter(he=>{const ke=he.first_name?.toLowerCase().includes(h.toLowerCase())||he.last_name?.toLowerCase().includes(h.toLowerCase())||he.customer_phone.includes(h)||he.customer_email?.toLowerCase().includes(h.toLowerCase()),Me=g==="all"||he.status===g;return ke&&Me});f($)}},Ce=async $=>{if($.preventDefault(),!E.name||!E.category||!E.price_per_unit){F.error("Please fill in all required fields");return}try{const he={...E,price_per_unit:parseFloat(E.price_per_unit),stock_quantity:parseInt(E.stock_quantity)||0};console.log(" Saving product data:",he),console.log(" Editing existing product:",T?.id);let ke;T?(ke=await ue.put(`/api/admin/products/${T.id}`,he,{headers:{Authorization:`Bearer ${t}`}}),F.success("Product updated successfully")):(ke=await ue.post("/api/admin/products",he,{headers:{Authorization:`Bearer ${t}`}}),F.success("Product created successfully")),ke.data.success?(console.log(" Product update response:",ke.data),G(!1),U(null),Ae(),await Ne()):(console.error(" Product update failed:",ke.data),F.error(ke.data.message||"Failed to save product"))}catch(he){console.error(" Error saving product:",he),he.response?.data?.message?F.error(he.response.data.message):F.error("Failed to save product")}},ve=async $=>{if(confirm("Are you sure you want to delete this product?"))try{await ue.delete(`/api/admin/products/${$}`,{headers:{Authorization:`Bearer ${t}`}}),F.success("Product deleted successfully"),Ne()}catch(he){console.error(" Error deleting product:",he),F.error("Failed to delete product")}},Pe=$=>{console.log(" Editing product:",$),U($),x({name:$.name,category:$.category,price_per_unit:$.price_per_unit.toString(),unit:$.unit,description:$.description||"",stock_quantity:$.stock_quantity.toString(),is_featured:$.is_featured||!1,farmer_name:$.farmer_name||"Admin",farmer_county:$.farmer_county||"Central",images:$.images||[]}),G(!0)},Ae=()=>{x({name:"",category:"",price_per_unit:"",unit:"kg",description:"",stock_quantity:"",is_featured:!1,farmer_name:"Admin",farmer_county:"Central",images:[]})},We=async $=>{try{(await ue.post(`/api/admin/orders/${$.id}/stk-push`,{phone_number:$.customer_phone,amount:$.total_amount},{headers:{Authorization:`Bearer ${t}`}})).data.success&&(F.success("STK push initiated successfully"),re())}catch(he){console.error(" Error initiating STK push:",he),F.error("Failed to initiate STK push")}},ie=async $=>{try{const he=await ue.get(`/api/admin/orders/${$.id}/invoice`,{headers:{Authorization:`Bearer ${t}`}});if(he.data.success){const ke=he.data.invoice,Me=window.open("","_blank");Me&&(Me.document.write(`
            <html>
              <head>
                <title>Invoice ${ke.invoice_number}</title>
                <style>
                  body { font-family: Arial, sans-serif; margin: 20px; }
                  .header { text-align: center; margin-bottom: 30px; }
                  .invoice-details { margin-bottom: 20px; }
                  .customer-info { margin-bottom: 20px; }
                  table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
                  th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
                  th { background-color: #f2f2f2; }
                  .total { font-weight: bold; font-size: 18px; }
                  .footer { margin-top: 30px; text-align: center; color: #666; }
                </style>
              </head>
              <body>
                <div class="header">
                  <h1>Zuasoko Agricultural Platform</h1>
                  <h2>Invoice ${ke.invoice_number}</h2>
                </div>
                
                <div class="invoice-details">
                  <p><strong>Order ID:</strong> ${ke.order_id}</p>
                  <p><strong>Date:</strong> ${new Date(ke.created_at).toLocaleDateString()}</p>
                  <p><strong>Due Date:</strong> ${new Date(ke.due_date).toLocaleDateString()}</p>
                  <p><strong>Status:</strong> ${ke.payment_status}</p>
                </div>
                
                <div class="customer-info">
                  <h3>Customer Information</h3>
                  <p><strong>Name:</strong> ${ke.customer.name}</p>
                  <p><strong>Phone:</strong> ${ke.customer.phone}</p>
                  <p><strong>Email:</strong> ${ke.customer.email}</p>
                  <p><strong>County:</strong> ${ke.customer.county}</p>
                </div>
                
                <table>
                  <thead>
                    <tr>
                      <th>Product</th>
                      <th>Quantity</th>
                      <th>Unit Price</th>
                      <th>Total</th>
                    </tr>
                  </thead>
                  <tbody>
                    ${ke.items.map(je=>`
                      <tr>
                        <td>${je.product_name}</td>
                        <td>${je.quantity}</td>
                        <td>KSh ${je.unit_price?.toLocaleString()}</td>
                        <td>KSh ${(je.total||je.quantity*je.unit_price)?.toLocaleString()}</td>
                      </tr>
                    `).join("")}
                  </tbody>
                  <tfoot>
                    <tr class="total">
                      <td colspan="3"><strong>Total Amount</strong></td>
                      <td><strong>KSh ${(ke.total_amount||0).toLocaleString()}</strong></td>
                    </tr>
                  </tfoot>
                </table>
                
                <div class="footer">
                  <p>Thank you for your business!</p>
                  <p>For any inquiries, contact us at support@zuasoko.com</p>
                </div>
              </body>
            </html>
          `),Me.document.close(),Me.print()),F.success("Invoice generated successfully")}}catch(he){console.error(" Error generating invoice:",he),F.error("Failed to generate invoice")}},pe=["Vegetables","Fruits","Grains","Leafy Greens","Root Vegetables","Herbs"],qe=["kg","pieces","bunches","bags","boxes"];return s?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:d,lineNumber:477,columnNumber:7}},e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:d,lineNumber:478,columnNumber:9}},e.createElement(qt,{className:"w-5 h-5 animate-spin text-green-600",__self:this,__source:{fileName:d,lineNumber:479,columnNumber:11}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:480,columnNumber:11}},"Loading marketplace data..."))):e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:d,lineNumber:487,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:d,lineNumber:488,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:d,lineNumber:490,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:d,lineNumber:491,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:492,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:d,lineNumber:493,columnNumber:15}},"Marketplace Management"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:d,lineNumber:496,columnNumber:15}},"Manage products, orders, and marketplace operations")),e.createElement("div",{className:"flex items-center space-x-4",__self:this,__source:{fileName:d,lineNumber:500,columnNumber:13}},e.createElement("button",{onClick:H,className:"bg-gray-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700 flex items-center space-x-2",__self:this,__source:{fileName:d,lineNumber:501,columnNumber:15}},e.createElement(qt,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:505,columnNumber:17}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:506,columnNumber:17}},"Refresh")),r==="products"&&e.createElement("button",{onClick:()=>{Ae(),U(null),G(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 flex items-center space-x-2",__self:this,__source:{fileName:d,lineNumber:509,columnNumber:17}},e.createElement($t,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:517,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:518,columnNumber:19}},"Add Product"))))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:d,lineNumber:526,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:d,lineNumber:527,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:d,lineNumber:528,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:d,lineNumber:529,columnNumber:15}},e.createElement(xe,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:d,lineNumber:530,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:d,lineNumber:532,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:533,columnNumber:17}},w.totalProducts),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:d,lineNumber:536,columnNumber:17}},"Total Products")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:d,lineNumber:541,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:d,lineNumber:542,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:d,lineNumber:543,columnNumber:15}},e.createElement($e,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:d,lineNumber:544,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:d,lineNumber:546,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:547,columnNumber:17}},w.activeProducts),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:d,lineNumber:550,columnNumber:17}},"Active Products")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:d,lineNumber:555,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:d,lineNumber:556,columnNumber:13}},e.createElement("div",{className:"p-3 bg-purple-100 rounded-lg",__self:this,__source:{fileName:d,lineNumber:557,columnNumber:15}},e.createElement(xt,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:d,lineNumber:558,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:d,lineNumber:560,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:561,columnNumber:17}},w.totalOrders),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:d,lineNumber:564,columnNumber:17}},"Total Orders")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:d,lineNumber:569,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:d,lineNumber:570,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:d,lineNumber:571,columnNumber:15}},e.createElement(tt,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:d,lineNumber:572,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:d,lineNumber:574,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:575,columnNumber:17}},"KSh ",(w.totalRevenue||0).toLocaleString()),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:d,lineNumber:578,columnNumber:17}},"Total Revenue"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8",__self:this,__source:{fileName:d,lineNumber:585,columnNumber:9}},e.createElement("div",{className:"border-b border-gray-200",__self:this,__source:{fileName:d,lineNumber:586,columnNumber:11}},e.createElement("nav",{className:"flex",__self:this,__source:{fileName:d,lineNumber:587,columnNumber:13}},[{id:"products",label:"Products",icon:xe},{id:"orders",label:"Orders",icon:xt}].map($=>e.createElement("button",{key:$.id,onClick:()=>l($.id),className:`flex items-center space-x-2 px-6 py-4 border-b-2 font-medium text-sm ${r===$.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,__self:this,__source:{fileName:d,lineNumber:592,columnNumber:17}},e.createElement($.icon,{className:"w-5 h-5",__self:this,__source:{fileName:d,lineNumber:601,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:602,columnNumber:19}},$.label))))),e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:d,lineNumber:609,columnNumber:11}},e.createElement("div",{className:"flex flex-col sm:flex-row gap-4",__self:this,__source:{fileName:d,lineNumber:610,columnNumber:13}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:d,lineNumber:611,columnNumber:15}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:d,lineNumber:612,columnNumber:17}},e.createElement(or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4",__self:this,__source:{fileName:d,lineNumber:613,columnNumber:19}}),e.createElement("input",{type:"text",placeholder:r==="products"?"Search products...":"Search orders...",value:h,onChange:$=>A($.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:d,lineNumber:614,columnNumber:19}}))),e.createElement("div",{className:"flex gap-4",__self:this,__source:{fileName:d,lineNumber:628,columnNumber:15}},e.createElement("select",{value:g,onChange:$=>b($.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:d,lineNumber:629,columnNumber:17}},e.createElement("option",{value:"all",__self:this,__source:{fileName:d,lineNumber:634,columnNumber:19}},"All Status"),r==="products"?e.createElement(e.Fragment,null,e.createElement("option",{value:"active",__self:this,__source:{fileName:d,lineNumber:637,columnNumber:23}},"Active"),e.createElement("option",{value:"inactive",__self:this,__source:{fileName:d,lineNumber:638,columnNumber:23}},"Inactive")):e.createElement(e.Fragment,null,e.createElement("option",{value:"PENDING",__self:this,__source:{fileName:d,lineNumber:642,columnNumber:23}},"Pending"),e.createElement("option",{value:"COMPLETED",__self:this,__source:{fileName:d,lineNumber:643,columnNumber:23}},"Completed"),e.createElement("option",{value:"CANCELLED",__self:this,__source:{fileName:d,lineNumber:644,columnNumber:23}},"Cancelled"))),r==="products"&&e.createElement("select",{value:S,onChange:$=>v($.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:d,lineNumber:650,columnNumber:19}},e.createElement("option",{value:"all",__self:this,__source:{fileName:d,lineNumber:655,columnNumber:21}},"All Categories"),pe.map($=>e.createElement("option",{key:$,value:$,__self:this,__source:{fileName:d,lineNumber:657,columnNumber:23}},$)))))),r==="products"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:d,lineNumber:669,columnNumber:13}},u.length===0?e.createElement("div",{className:"text-center py-12",__self:this,__source:{fileName:d,lineNumber:671,columnNumber:17}},e.createElement(xe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:d,lineNumber:672,columnNumber:19}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:d,lineNumber:673,columnNumber:19}},"No products found"),e.createElement("p",{className:"text-gray-600 mb-4",__self:this,__source:{fileName:d,lineNumber:676,columnNumber:19}},h||g!=="all"||S!=="all"?"Try adjusting your search or filters":"Get started by adding your first product"),e.createElement("button",{onClick:()=>{Ae(),U(null),G(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700",__self:this,__source:{fileName:d,lineNumber:683,columnNumber:19}},"Add Product")):e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",__self:this,__source:{fileName:d,lineNumber:695,columnNumber:17}},u.map($=>e.createElement("div",{key:$.id,className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",__self:this,__source:{fileName:d,lineNumber:697,columnNumber:21}},e.createElement("div",{className:"h-48 bg-gray-100 flex items-center justify-center",__self:this,__source:{fileName:d,lineNumber:701,columnNumber:23}},$.images&&$.images.length>0?e.createElement("img",{src:$.images[0],alt:$.name,className:"w-full h-full object-cover",__self:this,__source:{fileName:d,lineNumber:703,columnNumber:27}}):e.createElement("div",{className:"text-center",__self:this,__source:{fileName:d,lineNumber:709,columnNumber:27}},e.createElement(Gl,{className:"w-12 h-12 text-gray-400 mx-auto mb-2",__self:this,__source:{fileName:d,lineNumber:710,columnNumber:29}}),e.createElement("p",{className:"text-gray-500 text-sm",__self:this,__source:{fileName:d,lineNumber:711,columnNumber:29}},"No image"))),e.createElement("div",{className:"p-4",__self:this,__source:{fileName:d,lineNumber:716,columnNumber:23}},e.createElement("div",{className:"flex items-start justify-between mb-2",__self:this,__source:{fileName:d,lineNumber:717,columnNumber:25}},e.createElement("h3",{className:"font-semibold text-gray-900 line-clamp-2",__self:this,__source:{fileName:d,lineNumber:718,columnNumber:27}},$.name),$.is_featured&&e.createElement(ir,{className:"w-4 h-4 text-yellow-500 fill-current flex-shrink-0 ml-2",__self:this,__source:{fileName:d,lineNumber:722,columnNumber:29}})),e.createElement("p",{className:"text-sm text-gray-600 mb-2",__self:this,__source:{fileName:d,lineNumber:726,columnNumber:25}},$.category),e.createElement("p",{className:"text-sm text-gray-700 mb-3 line-clamp-2",__self:this,__source:{fileName:d,lineNumber:729,columnNumber:25}},$.description),e.createElement("div",{className:"flex items-center justify-between mb-3",__self:this,__source:{fileName:d,lineNumber:733,columnNumber:25}},e.createElement("span",{className:"text-lg font-semibold text-green-600",__self:this,__source:{fileName:d,lineNumber:734,columnNumber:27}},"KSh ",($.price_per_unit||0).toLocaleString(),"/",$.unit),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:d,lineNumber:738,columnNumber:27}},"Stock: ",$.stock_quantity)),e.createElement("div",{className:"flex items-center justify-between mb-4",__self:this,__source:{fileName:d,lineNumber:743,columnNumber:25}},e.createElement("span",{className:`px-2 py-1 rounded-full text-xs ${$.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,__self:this,__source:{fileName:d,lineNumber:744,columnNumber:27}},$.is_active?"Active":"Inactive"),e.createElement("span",{className:"text-xs text-gray-500",__self:this,__source:{fileName:d,lineNumber:753,columnNumber:27}},$.farmer_name)),e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:d,lineNumber:758,columnNumber:25}},e.createElement("button",{onClick:()=>Pe($),className:"flex-1 bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700 flex items-center justify-center space-x-1",__self:this,__source:{fileName:d,lineNumber:759,columnNumber:27}},e.createElement(lm,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:763,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:764,columnNumber:29}},"Edit")),e.createElement("button",{onClick:()=>ve($.id),className:"flex-1 bg-red-600 text-white px-3 py-2 rounded text-sm hover:bg-red-700 flex items-center justify-center space-x-1",__self:this,__source:{fileName:d,lineNumber:766,columnNumber:27}},e.createElement(Sr,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:770,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:771,columnNumber:29}},"Delete")))))))),r==="orders"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:d,lineNumber:784,columnNumber:13}},o.length===0?e.createElement("div",{className:"text-center py-12",__self:this,__source:{fileName:d,lineNumber:786,columnNumber:17}},e.createElement(xt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:d,lineNumber:787,columnNumber:19}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:d,lineNumber:788,columnNumber:19}},"No orders found"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:d,lineNumber:791,columnNumber:19}},h||g!=="all"?"Try adjusting your search or filters":"Orders will appear here once customers start placing them")):e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:d,lineNumber:798,columnNumber:17}},o.map($=>e.createElement("div",{key:$.id,className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",__self:this,__source:{fileName:d,lineNumber:800,columnNumber:21}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",__self:this,__source:{fileName:d,lineNumber:804,columnNumber:23}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:d,lineNumber:805,columnNumber:25}},e.createElement("div",{className:"flex items-center space-x-4 mb-2",__self:this,__source:{fileName:d,lineNumber:806,columnNumber:27}},e.createElement("h3",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:807,columnNumber:29}},"Order #",$.id),e.createElement("span",{className:`px-2 py-1 rounded-full text-xs ${$.status==="COMPLETED"?"bg-green-100 text-green-800":$.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,__self:this,__source:{fileName:d,lineNumber:810,columnNumber:29}},$.status),e.createElement("span",{className:`px-2 py-1 rounded-full text-xs ${$.payment_status==="PAID"?"bg-green-100 text-green-800":$.payment_status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,__self:this,__source:{fileName:d,lineNumber:821,columnNumber:29}},$.payment_status)),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",__self:this,__source:{fileName:d,lineNumber:834,columnNumber:27}},e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:835,columnNumber:29}},e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:836,columnNumber:31}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:837,columnNumber:33}},"Customer:")," ",$.first_name," ",$.last_name),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:840,columnNumber:31}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:841,columnNumber:33}},"Phone:")," ",$.customer_phone)),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:844,columnNumber:29}},e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:845,columnNumber:31}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:846,columnNumber:33}},"Email:")," ",$.customer_email),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:848,columnNumber:31}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:849,columnNumber:33}},"Amount:")," KSh"," ",($.total_amount||0).toLocaleString())),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:853,columnNumber:29}},e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:854,columnNumber:31}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:855,columnNumber:33}},"Date:")," ",new Date($.created_at).toLocaleDateString()),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:860,columnNumber:31}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:861,columnNumber:33}},"Items:")," ",$.items?.length||0," products")))),e.createElement("div",{className:"flex flex-col sm:flex-row gap-2",__self:this,__source:{fileName:d,lineNumber:868,columnNumber:25}},e.createElement("button",{onClick:()=>k($),className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 flex items-center space-x-1",__self:this,__source:{fileName:d,lineNumber:869,columnNumber:27}},e.createElement(ct,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:873,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:874,columnNumber:29}},"Details")),e.createElement("button",{onClick:()=>ie($),className:"bg-gray-600 text-white px-4 py-2 rounded text-sm hover:bg-gray-700 flex items-center space-x-1",__self:this,__source:{fileName:d,lineNumber:877,columnNumber:27}},e.createElement(zl,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:881,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:882,columnNumber:29}},"Invoice")),$.payment_status==="UNPAID"&&e.createElement("button",{onClick:()=>We($),className:"bg-green-600 text-white px-4 py-2 rounded text-sm hover:bg-green-700 flex items-center space-x-1",__self:this,__source:{fileName:d,lineNumber:886,columnNumber:29}},e.createElement(kr,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:890,columnNumber:31}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:891,columnNumber:31}},"STK Push")))))))))),L&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",__self:this,__source:{fileName:d,lineNumber:907,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",__self:this,__source:{fileName:d,lineNumber:908,columnNumber:11}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:d,lineNumber:909,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:d,lineNumber:910,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:911,columnNumber:17}},T?"Edit Product":"Add New Product"),e.createElement("button",{onClick:()=>{G(!1),U(null),Ae()},className:"text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:d,lineNumber:914,columnNumber:17}},e.createElement(Je,{className:"w-6 h-6",__self:this,__source:{fileName:d,lineNumber:922,columnNumber:19}})))),e.createElement("form",{onSubmit:Ce,className:"p-6 space-y-6",__self:this,__source:{fileName:d,lineNumber:927,columnNumber:13}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:d,lineNumber:928,columnNumber:15}},e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:929,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:930,columnNumber:19}},"Product Name *"),e.createElement("input",{type:"text",required:!0,value:E.name,onChange:$=>x({...E,name:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter product name",__self:this,__source:{fileName:d,lineNumber:933,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:945,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:946,columnNumber:19}},"Category *"),e.createElement("select",{required:!0,value:E.category,onChange:$=>x({...E,category:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:d,lineNumber:949,columnNumber:19}},e.createElement("option",{value:"",__self:this,__source:{fileName:d,lineNumber:957,columnNumber:21}},"Select category"),pe.map($=>e.createElement("option",{key:$,value:$,__self:this,__source:{fileName:d,lineNumber:959,columnNumber:23}},$)))),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:966,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:967,columnNumber:19}},"Price per Unit *"),e.createElement("input",{type:"number",required:!0,min:"0",step:"0.01",value:E.price_per_unit,onChange:$=>x({...E,price_per_unit:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0.00",__self:this,__source:{fileName:d,lineNumber:970,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:987,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:988,columnNumber:19}},"Unit"),e.createElement("select",{value:E.unit,onChange:$=>x({...E,unit:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:d,lineNumber:991,columnNumber:19}},qe.map($=>e.createElement("option",{key:$,value:$,__self:this,__source:{fileName:d,lineNumber:999,columnNumber:23}},$)))),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1006,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:1007,columnNumber:19}},"Stock Quantity"),e.createElement("input",{type:"number",min:"0",value:E.stock_quantity,onChange:$=>x({...E,stock_quantity:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0",__self:this,__source:{fileName:d,lineNumber:1010,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1025,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:1026,columnNumber:19}},"Farmer County"),e.createElement("input",{type:"text",value:E.farmer_county,onChange:$=>x({...E,farmer_county:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"County",__self:this,__source:{fileName:d,lineNumber:1029,columnNumber:19}}))),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1044,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:1045,columnNumber:17}},"Description"),e.createElement("textarea",{rows:4,value:E.description,onChange:$=>x({...E,description:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter product description",__self:this,__source:{fileName:d,lineNumber:1048,columnNumber:17}})),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1060,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:1061,columnNumber:17}},"Product Images"),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:d,lineNumber:1064,columnNumber:17}},E.images.length>0&&e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",__self:this,__source:{fileName:d,lineNumber:1067,columnNumber:21}},E.images.map(($,he)=>e.createElement("div",{key:he,className:"relative group",__self:this,__source:{fileName:d,lineNumber:1069,columnNumber:25}},e.createElement("img",{src:$,alt:`Product ${he+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-200",__self:this,__source:{fileName:d,lineNumber:1070,columnNumber:27}}),e.createElement("button",{type:"button",onClick:()=>{const ke=E.images.filter((Me,je)=>je!==he);x({...E,images:ke})},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity",__self:this,__source:{fileName:d,lineNumber:1075,columnNumber:27}},"")))),e.createElement("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",__self:this,__source:{fileName:d,lineNumber:1091,columnNumber:19}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:d,lineNumber:1092,columnNumber:21}},e.createElement(Ar,{className:"mx-auto h-12 w-12 text-gray-400",__self:this,__source:{fileName:d,lineNumber:1093,columnNumber:23}}),e.createElement("div",{className:"mt-4 space-y-3",__self:this,__source:{fileName:d,lineNumber:1094,columnNumber:23}},e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1096,columnNumber:25}},e.createElement("input",{type:"file",id:"imageFileInput",accept:"image/*",multiple:!0,className:"hidden",onChange:$=>{Array.from($.target.files||[]).forEach(ke=>{const Me=new FileReader;Me.onload=je=>{const Zt=je.target?.result;x(br=>({...br,images:[...br.images,Zt]}))},Me.readAsDataURL(ke)}),$.target.value=""},__self:this,__source:{fileName:d,lineNumber:1097,columnNumber:27}}),e.createElement("button",{type:"button",onClick:()=>document.getElementById("imageFileInput")?.click(),className:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",__self:this,__source:{fileName:d,lineNumber:1120,columnNumber:27}},e.createElement(Ar,{className:"w-4 h-4 inline mr-2",__self:this,__source:{fileName:d,lineNumber:1125,columnNumber:29}}),"Upload Images")),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:d,lineNumber:1131,columnNumber:25}},e.createElement("div",{className:"flex-1 h-px bg-gray-300",__self:this,__source:{fileName:d,lineNumber:1132,columnNumber:27}}),e.createElement("span",{className:"px-3 text-sm text-gray-500",__self:this,__source:{fileName:d,lineNumber:1133,columnNumber:27}},"or"),e.createElement("div",{className:"flex-1 h-px bg-gray-300",__self:this,__source:{fileName:d,lineNumber:1134,columnNumber:27}})),e.createElement("button",{type:"button",onClick:()=>{const $=prompt("Enter image URL:");$&&$.trim()&&x({...E,images:[...E.images,$.trim()]})},className:"bg-white px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-500",__self:this,__source:{fileName:d,lineNumber:1137,columnNumber:25}},e.createElement($t,{className:"w-4 h-4 inline mr-2",__self:this,__source:{fileName:d,lineNumber:1150,columnNumber:27}}),"Add Image URL")),e.createElement("p",{className:"text-xs text-gray-500 mt-3",__self:this,__source:{fileName:d,lineNumber:1154,columnNumber:23}},"Upload image files or enter image URLs. Supported formats: JPG, PNG, WebP"))),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",__self:this,__source:{fileName:d,lineNumber:1161,columnNumber:19}},e.createElement("div",{className:"flex",__self:this,__source:{fileName:d,lineNumber:1162,columnNumber:21}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:d,lineNumber:1163,columnNumber:23}},e.createElement(Gl,{className:"h-5 w-5 text-blue-400",__self:this,__source:{fileName:d,lineNumber:1164,columnNumber:25}})),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:d,lineNumber:1166,columnNumber:23}},e.createElement("h3",{className:"text-sm font-medium text-blue-800",__self:this,__source:{fileName:d,lineNumber:1167,columnNumber:25}},"Image Guidelines"),e.createElement("div",{className:"mt-2 text-sm text-blue-700",__self:this,__source:{fileName:d,lineNumber:1170,columnNumber:25}},e.createElement("ul",{className:"list-disc pl-5 space-y-1",__self:this,__source:{fileName:d,lineNumber:1171,columnNumber:27}},e.createElement("li",{__self:this,__source:{fileName:d,lineNumber:1172,columnNumber:29}},"Use high-quality images (minimum 800x800 pixels)"),e.createElement("li",{__self:this,__source:{fileName:d,lineNumber:1173,columnNumber:29}},"Ensure images clearly show the product"),e.createElement("li",{__self:this,__source:{fileName:d,lineNumber:1174,columnNumber:29}},"First image will be used as the main product image"),e.createElement("li",{__self:this,__source:{fileName:d,lineNumber:1175,columnNumber:29}},"You can add multiple images to showcase different angles")))))))),e.createElement("div",{className:"flex items-center space-x-4",__self:this,__source:{fileName:d,lineNumber:1184,columnNumber:15}},e.createElement("label",{className:"flex items-center",__self:this,__source:{fileName:d,lineNumber:1185,columnNumber:17}},e.createElement("input",{type:"checkbox",checked:E.is_featured,onChange:$=>x({...E,is_featured:$.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500",__self:this,__source:{fileName:d,lineNumber:1186,columnNumber:19}}),e.createElement("span",{className:"ml-2 text-sm text-gray-700",__self:this,__source:{fileName:d,lineNumber:1197,columnNumber:19}},"Featured Product"))),e.createElement("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",__self:this,__source:{fileName:d,lineNumber:1203,columnNumber:15}},e.createElement("button",{type:"button",onClick:()=>{G(!1),U(null),Ae()},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",__self:this,__source:{fileName:d,lineNumber:1204,columnNumber:17}},"Cancel"),e.createElement("button",{type:"submit",className:"bg-green-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-green-700 flex items-center space-x-2",__self:this,__source:{fileName:d,lineNumber:1215,columnNumber:17}},e.createElement(wl,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:1219,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:1220,columnNumber:19}},T?"Update":"Create"," Product")))))),ae&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",__self:this,__source:{fileName:d,lineNumber:1230,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",__self:this,__source:{fileName:d,lineNumber:1231,columnNumber:11}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:d,lineNumber:1232,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:d,lineNumber:1233,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:1234,columnNumber:17}},"Order #",ae.id," Details"),e.createElement("button",{onClick:()=>k(null),className:"text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:d,lineNumber:1237,columnNumber:17}},e.createElement(Je,{className:"w-6 h-6",__self:this,__source:{fileName:d,lineNumber:1241,columnNumber:19}})))),e.createElement("div",{className:"p-6 space-y-6",__self:this,__source:{fileName:d,lineNumber:1246,columnNumber:13}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:d,lineNumber:1247,columnNumber:15}},e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1248,columnNumber:17}},e.createElement("h3",{className:"font-semibold text-gray-900 mb-3",__self:this,__source:{fileName:d,lineNumber:1249,columnNumber:19}},"Customer Information"),e.createElement("div",{className:"space-y-2 text-sm",__self:this,__source:{fileName:d,lineNumber:1252,columnNumber:19}},e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1253,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1254,columnNumber:23}},"Name:")," ",ae.first_name," ",ae.last_name),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1257,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1258,columnNumber:23}},"Phone:")," ",ae.customer_phone),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1260,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1261,columnNumber:23}},"Email:")," ",ae.customer_email))),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1266,columnNumber:17}},e.createElement("h3",{className:"font-semibold text-gray-900 mb-3",__self:this,__source:{fileName:d,lineNumber:1267,columnNumber:19}},"Order Information"),e.createElement("div",{className:"space-y-2 text-sm",__self:this,__source:{fileName:d,lineNumber:1270,columnNumber:19}},e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1271,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1272,columnNumber:23}},"Status:"),e.createElement("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${ae.status==="COMPLETED"?"bg-green-100 text-green-800":ae.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,__self:this,__source:{fileName:d,lineNumber:1273,columnNumber:23}},ae.status)),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1285,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1286,columnNumber:23}},"Payment:"),e.createElement("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${ae.payment_status==="PAID"?"bg-green-100 text-green-800":ae.payment_status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,__self:this,__source:{fileName:d,lineNumber:1287,columnNumber:23}},ae.payment_status)),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1299,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1300,columnNumber:23}},"Date:")," ",new Date(ae.created_at).toLocaleDateString()),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1305,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1306,columnNumber:23}},"Total:")," KSh"," ",(ae.total_amount||0).toLocaleString())))),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1313,columnNumber:15}},e.createElement("h3",{className:"font-semibold text-gray-900 mb-3",__self:this,__source:{fileName:d,lineNumber:1314,columnNumber:17}},"Order Items"),ae.items&&ae.items.length>0?e.createElement("div",{className:"space-y-2",__self:this,__source:{fileName:d,lineNumber:1318,columnNumber:19}},ae.items.map(($,he)=>e.createElement("div",{key:he,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",__self:this,__source:{fileName:d,lineNumber:1320,columnNumber:23}},e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1324,columnNumber:25}},e.createElement("p",{className:"font-medium",__self:this,__source:{fileName:d,lineNumber:1325,columnNumber:27}},$.product_name),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:d,lineNumber:1326,columnNumber:27}},"Quantity: ",$.quantity)),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:d,lineNumber:1330,columnNumber:25}},e.createElement("p",{className:"font-medium",__self:this,__source:{fileName:d,lineNumber:1331,columnNumber:27}},"KSh"," ",($.unit_price*$.quantity).toLocaleString()),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:d,lineNumber:1335,columnNumber:27}},"@ KSh ",$.unit_price,"/unit"))))):e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:d,lineNumber:1343,columnNumber:19}},"No items available")),e.createElement("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",__self:this,__source:{fileName:d,lineNumber:1347,columnNumber:15}},e.createElement("button",{onClick:()=>ie(ae),className:"bg-gray-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700 flex items-center space-x-2",__self:this,__source:{fileName:d,lineNumber:1348,columnNumber:17}},e.createElement(zl,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:1352,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:1353,columnNumber:19}},"Generate Invoice")),ae.payment_status==="UNPAID"&&e.createElement("button",{onClick:()=>{We(ae),k(null)},className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 flex items-center space-x-2",__self:this,__source:{fileName:d,lineNumber:1357,columnNumber:19}},e.createElement(kr,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:1364,columnNumber:21}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:1365,columnNumber:21}},"Send STK Push")))))))}var te="/app/code/frontend/src/pages/admin/RegistrationFeesPage.tsx";function Wo(){const{token:t}=Te(),[r,l]=R.useState(!0),[s,a]=R.useState([]),[m,n]=R.useState([]),[i,N]=R.useState(""),[u,c]=R.useState("all"),[o,f]=R.useState({farmerRegistrationFee:300,registrationFeeEnabled:!0,gracePeriodDays:7}),[h,A]=R.useState({totalUnpaid:0,withinGracePeriod:0,overdue:0,totalOutstanding:0});R.useEffect(()=>{g()},[]),R.useEffect(()=>{b()},[i,u,s]);const g=async()=>{l(!0);try{console.log(" Fetching unpaid farmers data");const L=await ue.get("/api/admin/settings",{headers:{Authorization:`Bearer ${t}`}});L.data.success&&L.data.settings.fees&&f(L.data.settings.fees);const G=await ue.get("/api/admin/registration-fees/unpaid",{headers:{Authorization:`Bearer ${t}`}});if(G.data.success){const T=G.data.farmers;a(T);const U=T.length,ae=T.filter(x=>x.gracePeriodRemaining>0).length,k=T.filter(x=>x.gracePeriodRemaining<=0).length,E=T.length*o.farmerRegistrationFee;A({totalUnpaid:U,withinGracePeriod:ae,overdue:k,totalOutstanding:E}),console.log(" Unpaid farmers loaded:",T)}}catch(L){console.error(" Error fetching unpaid farmers:",L);const G=[{id:"farmer-001",firstName:"John",lastName:"Kimani",email:"john@example.com",phone:"+254712345678",county:"Nakuru",registrationFeePaid:!1,registeredAt:new Date(Date.now()-5*24*60*60*1e3).toISOString(),daysSinceRegistration:5,gracePeriodRemaining:2,consignmentCount:0},{id:"farmer-002",firstName:"Mary",lastName:"Wanjiku",email:"mary@example.com",phone:"+254723456789",county:"Meru",registrationFeePaid:!1,registeredAt:new Date(Date.now()-10*24*60*60*1e3).toISOString(),daysSinceRegistration:10,gracePeriodRemaining:-3,consignmentCount:2},{id:"farmer-003",firstName:"Peter",lastName:"Mwangi",email:"peter@example.com",phone:"+254734567890",county:"Kiambu",registrationFeePaid:!1,registeredAt:new Date(Date.now()-3*24*60*60*1e3).toISOString(),daysSinceRegistration:3,gracePeriodRemaining:4,consignmentCount:1}];a(G),A({totalUnpaid:3,withinGracePeriod:2,overdue:1,totalOutstanding:900}),F.error("Failed to fetch data, showing demo")}finally{l(!1)}},b=()=>{let L=s.filter(G=>{const T=G.firstName.toLowerCase().includes(i.toLowerCase())||G.lastName.toLowerCase().includes(i.toLowerCase())||G.phone.includes(i)||G.email.toLowerCase().includes(i.toLowerCase()),U=u==="all"||u==="grace"&&G.gracePeriodRemaining>0||u==="overdue"&&G.gracePeriodRemaining<=0;return T&&U});n(L)},S=async L=>{try{console.log(` Initiating STK push for farmer ${L.id}`);const G=await ue.post("/api/admin/registration-fees/stk-push",{farmer_id:L.id,phone_number:L.phone,amount:o.farmerRegistrationFee},{headers:{Authorization:`Bearer ${t}`}});G.data.success?(F.success(`STK push sent to ${L.firstName} ${L.lastName}`),a(T=>T.map(U=>U.id===L.id?{...U,lastPaymentAttempt:new Date().toISOString()}:U))):F.error(G.data.message||"Failed to send STK push")}catch(G){console.error(" STK push error:",G),F.error(G.response?.data?.message||"Failed to send STK push")}},v=async()=>{if(confirm(`Send STK push to all ${m.length} farmers?`))try{const L=m.map(G=>S(G));await Promise.all(L),F.success(`STK push sent to ${m.length} farmers`)}catch{F.error("Some STK pushes failed")}};return r?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:te,lineNumber:253,columnNumber:7}},e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:te,lineNumber:254,columnNumber:9}},e.createElement(qt,{className:"w-5 h-5 animate-spin text-green-600",__self:this,__source:{fileName:te,lineNumber:255,columnNumber:11}}),e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:256,columnNumber:11}},"Loading registration fees data..."))):e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:te,lineNumber:263,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:te,lineNumber:264,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:te,lineNumber:266,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:te,lineNumber:267,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:te,lineNumber:268,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:te,lineNumber:269,columnNumber:15}},"Registration Fees Management"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:te,lineNumber:272,columnNumber:15}},"Manage farmer registration fees and payment collection")),e.createElement("div",{className:"flex items-center space-x-4",__self:this,__source:{fileName:te,lineNumber:276,columnNumber:13}},e.createElement("button",{onClick:g,className:"bg-gray-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700 flex items-center space-x-2",__self:this,__source:{fileName:te,lineNumber:277,columnNumber:15}},e.createElement(qt,{className:"w-4 h-4",__self:this,__source:{fileName:te,lineNumber:281,columnNumber:17}}),e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:282,columnNumber:17}},"Refresh")),m.length>0&&e.createElement("button",{onClick:v,className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 flex items-center space-x-2",__self:this,__source:{fileName:te,lineNumber:285,columnNumber:17}},e.createElement(kr,{className:"w-4 h-4",__self:this,__source:{fileName:te,lineNumber:289,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:290,columnNumber:19}},"Bulk STK Push"))))),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8",__self:this,__source:{fileName:te,lineNumber:298,columnNumber:9}},e.createElement("div",{className:"flex items-start space-x-3",__self:this,__source:{fileName:te,lineNumber:299,columnNumber:11}},e.createElement(mt,{className:"w-5 h-5 text-blue-600 mt-1",__self:this,__source:{fileName:te,lineNumber:300,columnNumber:13}}),e.createElement("div",{__self:this,__source:{fileName:te,lineNumber:301,columnNumber:13}},e.createElement("h4",{className:"font-medium text-blue-800",__self:this,__source:{fileName:te,lineNumber:302,columnNumber:15}},"Current Fee Settings"),e.createElement("p",{className:"text-sm text-blue-700 mt-1",__self:this,__source:{fileName:te,lineNumber:305,columnNumber:15}},"Registration Fee:"," ",e.createElement("strong",{__self:this,__source:{fileName:te,lineNumber:307,columnNumber:17}},"KSh ",o.farmerRegistrationFee.toLocaleString())," "," Grace Period:"," ",e.createElement("strong",{__self:this,__source:{fileName:te,lineNumber:311,columnNumber:17}},o.gracePeriodDays," days"),"  Status:"," ",e.createElement("strong",{__self:this,__source:{fileName:te,lineNumber:312,columnNumber:17}},o.registrationFeeEnabled?"Enabled":"Disabled"))))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:te,lineNumber:321,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:te,lineNumber:322,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:te,lineNumber:323,columnNumber:13}},e.createElement("div",{className:"p-3 bg-red-100 rounded-lg",__self:this,__source:{fileName:te,lineNumber:324,columnNumber:15}},e.createElement(et,{className:"w-6 h-6 text-red-600",__self:this,__source:{fileName:te,lineNumber:325,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:te,lineNumber:327,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:te,lineNumber:328,columnNumber:17}},h.totalUnpaid),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:te,lineNumber:331,columnNumber:17}},"Unpaid Farmers")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:te,lineNumber:336,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:te,lineNumber:337,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:te,lineNumber:338,columnNumber:15}},e.createElement(Ke,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:te,lineNumber:339,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:te,lineNumber:341,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:te,lineNumber:342,columnNumber:17}},h.withinGracePeriod),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:te,lineNumber:345,columnNumber:17}},"Within Grace Period")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:te,lineNumber:350,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:te,lineNumber:351,columnNumber:13}},e.createElement("div",{className:"p-3 bg-red-100 rounded-lg",__self:this,__source:{fileName:te,lineNumber:352,columnNumber:15}},e.createElement(nt,{className:"w-6 h-6 text-red-600",__self:this,__source:{fileName:te,lineNumber:353,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:te,lineNumber:355,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:te,lineNumber:356,columnNumber:17}},h.overdue),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:te,lineNumber:359,columnNumber:17}},"Overdue")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:te,lineNumber:364,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:te,lineNumber:365,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:te,lineNumber:366,columnNumber:15}},e.createElement(tt,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:te,lineNumber:367,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:te,lineNumber:369,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:te,lineNumber:370,columnNumber:17}},"KSh ",h.totalOutstanding.toLocaleString()),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:te,lineNumber:373,columnNumber:17}},"Total Outstanding"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8",__self:this,__source:{fileName:te,lineNumber:380,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:te,lineNumber:381,columnNumber:11}},e.createElement("div",{className:"flex flex-col sm:flex-row gap-4",__self:this,__source:{fileName:te,lineNumber:382,columnNumber:13}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:te,lineNumber:383,columnNumber:15}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:te,lineNumber:384,columnNumber:17}},e.createElement(or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4",__self:this,__source:{fileName:te,lineNumber:385,columnNumber:19}}),e.createElement("input",{type:"text",placeholder:"Search farmers by name, phone, or email...",value:i,onChange:L=>N(L.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:te,lineNumber:386,columnNumber:19}}))),e.createElement("div",{__self:this,__source:{fileName:te,lineNumber:396,columnNumber:15}},e.createElement("select",{value:u,onChange:L=>c(L.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:te,lineNumber:397,columnNumber:17}},e.createElement("option",{value:"all",__self:this,__source:{fileName:te,lineNumber:402,columnNumber:19}},"All Farmers"),e.createElement("option",{value:"grace",__self:this,__source:{fileName:te,lineNumber:403,columnNumber:19}},"Within Grace Period"),e.createElement("option",{value:"overdue",__self:this,__source:{fileName:te,lineNumber:404,columnNumber:19}},"Overdue"))))),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:te,lineNumber:411,columnNumber:11}},m.length===0?e.createElement("div",{className:"text-center py-12",__self:this,__source:{fileName:te,lineNumber:413,columnNumber:15}},e.createElement(et,{className:"w-12 h-12 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:te,lineNumber:414,columnNumber:17}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:te,lineNumber:415,columnNumber:17}},"No unpaid farmers found"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:te,lineNumber:418,columnNumber:17}},i||u!=="all"?"Try adjusting your search or filters":"All farmers have paid their registration fees")):e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:te,lineNumber:425,columnNumber:15}},m.map(L=>e.createElement("div",{key:L.id,className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",__self:this,__source:{fileName:te,lineNumber:427,columnNumber:19}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",__self:this,__source:{fileName:te,lineNumber:431,columnNumber:21}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:te,lineNumber:432,columnNumber:23}},e.createElement("div",{className:"flex items-center space-x-4 mb-2",__self:this,__source:{fileName:te,lineNumber:433,columnNumber:25}},e.createElement("h3",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:te,lineNumber:434,columnNumber:27}},L.firstName," ",L.lastName),e.createElement("span",{className:`px-2 py-1 rounded-full text-xs ${L.gracePeriodRemaining>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,__self:this,__source:{fileName:te,lineNumber:437,columnNumber:27}},L.gracePeriodRemaining>0?`${L.gracePeriodRemaining} days remaining`:`${Math.abs(L.gracePeriodRemaining)} days overdue`),L.consignmentCount>0&&e.createElement("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",__self:this,__source:{fileName:te,lineNumber:449,columnNumber:29}},L.consignmentCount," consignments")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",__self:this,__source:{fileName:te,lineNumber:455,columnNumber:25}},e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:te,lineNumber:456,columnNumber:27}},e.createElement(Ct,{className:"w-4 h-4",__self:this,__source:{fileName:te,lineNumber:457,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:458,columnNumber:29}},L.phone)),e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:te,lineNumber:460,columnNumber:27}},e.createElement(Sl,{className:"w-4 h-4",__self:this,__source:{fileName:te,lineNumber:461,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:462,columnNumber:29}},L.email)),e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:te,lineNumber:464,columnNumber:27}},e.createElement(vt,{className:"w-4 h-4",__self:this,__source:{fileName:te,lineNumber:465,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:466,columnNumber:29}},"Registered ",L.daysSinceRegistration," days ago"))),L.lastPaymentAttempt&&e.createElement("div",{className:"mt-2 text-sm text-gray-500",__self:this,__source:{fileName:te,lineNumber:473,columnNumber:27}},"Last STK push:"," ",new Date(L.lastPaymentAttempt).toLocaleDateString())),e.createElement("div",{className:"flex flex-col sm:flex-row gap-2",__self:this,__source:{fileName:te,lineNumber:482,columnNumber:23}},e.createElement("div",{className:"text-right mb-2 sm:mb-0 sm:mr-4",__self:this,__source:{fileName:te,lineNumber:483,columnNumber:25}},e.createElement("p",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:te,lineNumber:484,columnNumber:27}},"KSh"," ",o.farmerRegistrationFee.toLocaleString()),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:te,lineNumber:488,columnNumber:27}},"Registration Fee")),e.createElement("button",{onClick:()=>S(L),className:"bg-green-600 text-white px-4 py-2 rounded text-sm hover:bg-green-700 flex items-center space-x-1",__self:this,__source:{fileName:te,lineNumber:493,columnNumber:25}},e.createElement(kr,{className:"w-4 h-4",__self:this,__source:{fileName:te,lineNumber:497,columnNumber:27}}),e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:498,columnNumber:27}},"Send STK Push")))))))))))}var V="/app/code/frontend/src/pages/admin/FarmerCategoriesPage.tsx";function Qo(){const{token:t}=Te(),[r,l]=R.useState([]),[s,a]=R.useState(!0),[m,n]=R.useState(""),[i,N]=R.useState(null),[u,c]=R.useState({type:"add",isOpen:!1}),[o,f]=R.useState({name:"",description:"",is_active:!0}),[h,A]=R.useState(!1);R.useEffect(()=>{g()},[]);const g=async()=>{try{a(!0);const T=await fetch("/api/admin/farmer-categories",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!T.ok)throw new Error(`HTTP ${T.status}: ${T.statusText}`);const U=await T.json();l(U.categories||[])}catch(T){console.error("Error fetching farmer categories:",T),F.error("Failed to fetch farmer categories")}finally{a(!1)}},b=async T=>{if(T.preventDefault(),!o.name.trim()){F.error("Category name is required");return}A(!0);try{let U;if(u.type==="add"?U=await fetch("/api/admin/farmer-categories",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(o)}):u.type==="edit"&&u.category&&(U=await fetch(`/api/admin/farmer-categories/${u.category.id}`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(o)})),!U?.ok){const k=await U?.json();throw new Error(k.message||"Operation failed")}const ae=await U.json();F.success(ae.message||`Category ${u.type==="add"?"created":"updated"} successfully`),L(),g()}catch(U){console.error("Error submitting category:",U),F.error(U.message||`Failed to ${u.type} category`)}finally{A(!1)}},S=async()=>{if(u.category){A(!0);try{const T=await fetch(`/api/admin/farmer-categories/${u.category.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!T.ok){const ae=await T.json();throw new Error(ae.message||"Delete failed")}const U=await T.json();F.success(U.message||"Category deleted successfully"),L(),g()}catch(T){console.error("Error deleting category:",T),F.error(T.message||"Failed to delete category")}finally{A(!1)}}},v=(T,U)=>{c({type:T,category:U,isOpen:!0}),T==="edit"&&U?f({name:U.name,description:U.description,is_active:U.is_active}):T==="add"&&f({name:"",description:"",is_active:!0})},L=()=>{c({type:"add",isOpen:!1}),f({name:"",description:"",is_active:!0})},G=r.filter(T=>{const U=T.name.toLowerCase().includes(m.toLowerCase())||T.description.toLowerCase().includes(m.toLowerCase()),ae=i===null||T.is_active===i;return U&&ae});return s?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:V,lineNumber:181,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:V,lineNumber:182,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:V,lineNumber:183,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:V,lineNumber:184,columnNumber:11}},"Loading farmer categories..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:V,lineNumber:191,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:V,lineNumber:192,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:V,lineNumber:194,columnNumber:9}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:V,lineNumber:195,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:196,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:V,lineNumber:197,columnNumber:15}},"Farmer Categories"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:V,lineNumber:198,columnNumber:15}},"Manage farming categories that farmers can select during registration")),e.createElement("button",{onClick:()=>v("add"),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors font-medium inline-flex items-center",__self:this,__source:{fileName:V,lineNumber:202,columnNumber:13}},e.createElement($t,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:V,lineNumber:206,columnNumber:15}}),"Add Category"))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:V,lineNumber:213,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:V,lineNumber:214,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:V,lineNumber:215,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:V,lineNumber:216,columnNumber:15}},e.createElement(zt,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:V,lineNumber:217,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:V,lineNumber:219,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:V,lineNumber:220,columnNumber:17}},r.length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:V,lineNumber:221,columnNumber:17}},"Total Categories")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:V,lineNumber:226,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:V,lineNumber:227,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:V,lineNumber:228,columnNumber:15}},e.createElement(ar,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:V,lineNumber:229,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:V,lineNumber:231,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:V,lineNumber:232,columnNumber:17}},r.filter(T=>T.is_active).length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:V,lineNumber:235,columnNumber:17}},"Active Categories")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:V,lineNumber:240,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:V,lineNumber:241,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:V,lineNumber:242,columnNumber:15}},e.createElement(Je,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:V,lineNumber:243,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:V,lineNumber:245,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:V,lineNumber:246,columnNumber:17}},r.filter(T=>!T.is_active).length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:V,lineNumber:249,columnNumber:17}},"Inactive Categories")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:V,lineNumber:254,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:V,lineNumber:255,columnNumber:13}},e.createElement("div",{className:"p-3 bg-purple-100 rounded-lg",__self:this,__source:{fileName:V,lineNumber:256,columnNumber:15}},e.createElement(et,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:V,lineNumber:257,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:V,lineNumber:259,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:V,lineNumber:260,columnNumber:17}},r.reduce((T,U)=>T+(U.farmer_count||0),0)),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:V,lineNumber:263,columnNumber:17}},"Total Farmers"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:V,lineNumber:270,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row gap-4",__self:this,__source:{fileName:V,lineNumber:271,columnNumber:11}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:V,lineNumber:272,columnNumber:13}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:V,lineNumber:273,columnNumber:15}},e.createElement(or,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2",__self:this,__source:{fileName:V,lineNumber:274,columnNumber:17}}),e.createElement("input",{type:"text",placeholder:"Search categories...",value:m,onChange:T=>n(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:V,lineNumber:275,columnNumber:17}}))),e.createElement("div",{className:"flex gap-2",__self:this,__source:{fileName:V,lineNumber:285,columnNumber:13}},e.createElement("button",{onClick:()=>N(null),className:`px-4 py-2 rounded-lg border transition-colors ${i===null?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,__self:this,__source:{fileName:V,lineNumber:286,columnNumber:15}},"All"),e.createElement("button",{onClick:()=>N(!0),className:`px-4 py-2 rounded-lg border transition-colors ${i===!0?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,__self:this,__source:{fileName:V,lineNumber:296,columnNumber:15}},"Active"),e.createElement("button",{onClick:()=>N(!1),className:`px-4 py-2 rounded-lg border transition-colors ${i===!1?"bg-yellow-600 text-white border-yellow-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,__self:this,__source:{fileName:V,lineNumber:306,columnNumber:15}},"Inactive")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:V,lineNumber:321,columnNumber:9}},e.createElement("div",{className:"overflow-x-auto",__self:this,__source:{fileName:V,lineNumber:322,columnNumber:11}},e.createElement("table",{className:"min-w-full divide-y divide-gray-200",__self:this,__source:{fileName:V,lineNumber:323,columnNumber:13}},e.createElement("thead",{className:"bg-gray-50",__self:this,__source:{fileName:V,lineNumber:324,columnNumber:15}},e.createElement("tr",{__self:this,__source:{fileName:V,lineNumber:325,columnNumber:17}},e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:V,lineNumber:326,columnNumber:19}},"Category"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:V,lineNumber:329,columnNumber:19}},"Description"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:V,lineNumber:332,columnNumber:19}},"Farmers"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:V,lineNumber:335,columnNumber:19}},"Status"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:V,lineNumber:338,columnNumber:19}},"Created"),e.createElement("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:V,lineNumber:341,columnNumber:19}},"Actions"))),e.createElement("tbody",{className:"bg-white divide-y divide-gray-200",__self:this,__source:{fileName:V,lineNumber:346,columnNumber:15}},G.map(T=>e.createElement("tr",{key:T.id,className:"hover:bg-gray-50",__self:this,__source:{fileName:V,lineNumber:348,columnNumber:19}},e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:V,lineNumber:349,columnNumber:21}},e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:V,lineNumber:350,columnNumber:23}},T.name)),e.createElement("td",{className:"px-6 py-4",__self:this,__source:{fileName:V,lineNumber:354,columnNumber:21}},e.createElement("div",{className:"text-sm text-gray-600 max-w-xs truncate",__self:this,__source:{fileName:V,lineNumber:355,columnNumber:23}},T.description||"No description")),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:V,lineNumber:359,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:V,lineNumber:360,columnNumber:23}},e.createElement(et,{className:"w-4 h-4 text-gray-400 mr-1",__self:this,__source:{fileName:V,lineNumber:361,columnNumber:25}}),e.createElement("span",{className:"text-sm text-gray-900",__self:this,__source:{fileName:V,lineNumber:362,columnNumber:25}},T.farmer_count||0))),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:V,lineNumber:367,columnNumber:21}},e.createElement("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${T.is_active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,__self:this,__source:{fileName:V,lineNumber:368,columnNumber:23}},T.is_active?"Active":"Inactive")),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",__self:this,__source:{fileName:V,lineNumber:376,columnNumber:21}},new Date(T.created_at).toLocaleDateString()),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",__self:this,__source:{fileName:V,lineNumber:379,columnNumber:21}},e.createElement("div",{className:"flex items-center justify-end space-x-2",__self:this,__source:{fileName:V,lineNumber:380,columnNumber:23}},e.createElement("button",{onClick:()=>v("view",T),className:"text-blue-600 hover:text-blue-900",title:"View details",__self:this,__source:{fileName:V,lineNumber:381,columnNumber:25}},e.createElement(ct,{className:"w-4 h-4",__self:this,__source:{fileName:V,lineNumber:386,columnNumber:27}})),e.createElement("button",{onClick:()=>v("edit",T),className:"text-primary-600 hover:text-primary-900",title:"Edit category",__self:this,__source:{fileName:V,lineNumber:388,columnNumber:25}},e.createElement(Is,{className:"w-4 h-4",__self:this,__source:{fileName:V,lineNumber:393,columnNumber:27}})),e.createElement("button",{onClick:()=>v("delete",T),className:"text-red-600 hover:text-red-900",title:"Delete category",disabled:T.farmer_count>0,__self:this,__source:{fileName:V,lineNumber:395,columnNumber:25}},e.createElement(Sr,{className:"w-4 h-4",__self:this,__source:{fileName:V,lineNumber:401,columnNumber:27}}))))))))),G.length===0&&e.createElement("div",{className:"text-center py-12",__self:this,__source:{fileName:V,lineNumber:412,columnNumber:13}},e.createElement(zt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4",__self:this,__source:{fileName:V,lineNumber:413,columnNumber:15}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:V,lineNumber:414,columnNumber:15}},"No categories found"),e.createElement("p",{className:"text-gray-600 mb-4",__self:this,__source:{fileName:V,lineNumber:415,columnNumber:15}},m||i!==null?"Try adjusting your search or filter criteria.":"Get started by creating your first farming category."),!m&&i===null&&e.createElement("button",{onClick:()=>v("add"),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors font-medium",__self:this,__source:{fileName:V,lineNumber:421,columnNumber:17}},"Create Category"))),u.isOpen&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",__self:this,__source:{fileName:V,lineNumber:434,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 shadow-xl",__self:this,__source:{fileName:V,lineNumber:435,columnNumber:13}},e.createElement("div",{className:"p-6",__self:this,__source:{fileName:V,lineNumber:436,columnNumber:15}},e.createElement("div",{className:"flex items-center mb-4",__self:this,__source:{fileName:V,lineNumber:437,columnNumber:17}},e.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center mr-3 ${u.type==="delete"?"bg-red-100":"bg-primary-100"}`,__self:this,__source:{fileName:V,lineNumber:438,columnNumber:19}},u.type==="delete"?e.createElement(Sr,{className:"w-5 h-5 text-red-600",__self:this,__source:{fileName:V,lineNumber:442,columnNumber:23}}):u.type==="view"?e.createElement(ct,{className:"w-5 h-5 text-primary-600",__self:this,__source:{fileName:V,lineNumber:444,columnNumber:23}}):e.createElement(zt,{className:"w-5 h-5 text-primary-600",__self:this,__source:{fileName:V,lineNumber:446,columnNumber:23}})),e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:V,lineNumber:449,columnNumber:19}},u.type==="add"&&"Add New Category",u.type==="edit"&&"Edit Category",u.type==="delete"&&"Delete Category",u.type==="view"&&"Category Details")),u.type==="view"&&u.category?e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:V,lineNumber:458,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:459,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:V,lineNumber:460,columnNumber:23}},"Name"),e.createElement("p",{className:"text-sm text-gray-900",__self:this,__source:{fileName:V,lineNumber:461,columnNumber:23}},u.category.name)),e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:463,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:V,lineNumber:464,columnNumber:23}},"Description"),e.createElement("p",{className:"text-sm text-gray-900",__self:this,__source:{fileName:V,lineNumber:465,columnNumber:23}},u.category.description||"No description")),e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:467,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:V,lineNumber:468,columnNumber:23}},"Status"),e.createElement("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${u.category.is_active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,__self:this,__source:{fileName:V,lineNumber:469,columnNumber:23}},u.category.is_active?"Active":"Inactive")),e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:477,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:V,lineNumber:478,columnNumber:23}},"Farmers Using"),e.createElement("p",{className:"text-sm text-gray-900",__self:this,__source:{fileName:V,lineNumber:479,columnNumber:23}},u.category.farmer_count||0," farmers")),e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:481,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:V,lineNumber:482,columnNumber:23}},"Created"),e.createElement("p",{className:"text-sm text-gray-900",__self:this,__source:{fileName:V,lineNumber:483,columnNumber:23}},new Date(u.category.created_at).toLocaleDateString()))):u.type==="delete"&&u.category?e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:489,columnNumber:19}},e.createElement("p",{className:"text-gray-600 mb-4",__self:this,__source:{fileName:V,lineNumber:490,columnNumber:21}},'Are you sure you want to delete the category "',u.category.name,'"?',u.category.farmer_count>0&&e.createElement("span",{className:"block mt-2 text-red-600 text-sm",__self:this,__source:{fileName:V,lineNumber:493,columnNumber:25}}," This category is currently used by ",u.category.farmer_count," farmer(s) and cannot be deleted."))):e.createElement("form",{onSubmit:b,className:"space-y-4",__self:this,__source:{fileName:V,lineNumber:500,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:501,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:V,lineNumber:502,columnNumber:23}},"Category Name *"),e.createElement("input",{type:"text",value:o.name,onChange:T=>f({...o,name:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Vegetables",required:!0,__self:this,__source:{fileName:V,lineNumber:505,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:515,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:V,lineNumber:516,columnNumber:23}},"Description"),e.createElement("textarea",{value:o.description,onChange:T=>f({...o,description:T.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",rows:3,placeholder:"Brief description of this category...",__self:this,__source:{fileName:V,lineNumber:519,columnNumber:23}})),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:V,lineNumber:528,columnNumber:21}},e.createElement("input",{type:"checkbox",id:"is_active",checked:o.is_active,onChange:T=>f({...o,is_active:T.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500",__self:this,__source:{fileName:V,lineNumber:529,columnNumber:23}}),e.createElement("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",__self:this,__source:{fileName:V,lineNumber:536,columnNumber:23}},"Active (visible to farmers during registration)"))),e.createElement("div",{className:"flex space-x-3 mt-6",__self:this,__source:{fileName:V,lineNumber:543,columnNumber:17}},e.createElement("button",{onClick:L,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors font-medium",__self:this,__source:{fileName:V,lineNumber:544,columnNumber:19}},u.type==="view"?"Close":"Cancel"),u.type==="delete"?e.createElement("button",{onClick:S,disabled:h||(u.category?.farmer_count||0)>0,className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",__self:this,__source:{fileName:V,lineNumber:552,columnNumber:21}},h?"Deleting...":"Delete"):u.type!=="view"?e.createElement("button",{type:"submit",onClick:b,disabled:h,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",__self:this,__source:{fileName:V,lineNumber:560,columnNumber:21}},h?u.type==="add"?"Creating...":"Updating...":u.type==="add"?"Create":"Update"):null))))))}var C="/app/code/frontend/src/pages/driver/DriverDashboard.tsx";function Jo(){const{user:t,token:r}=Te(),l=_t(),[s,a]=R.useState([]),[m,n]=R.useState(!0),[i,N]=R.useState(!1),[u,c]=R.useState(!1),[o,f]=R.useState({type:"delivery_issue",description:"",deliveryId:"",severity:"medium"}),[h,A]=R.useState({today:0,week:0,month:0,total:0,recentPayments:[]});R.useEffect(()=>{g()},[]);const g=async()=>{try{const w=await ue.get("/api/driver/assignments",{headers:{Authorization:`Bearer ${r}`}});a(w.data.assignments||w.data)}catch(w){console.error("Error fetching assignments:",w),w.response?.status===404?(console.log(" Using fallback demo assignments (endpoint not found)"),a([{id:"assign_1",consignmentId:"cons_1",title:"Organic Tomatoes Delivery",farmerName:"Jane Wanjiku",farmerPhone:"+254712345678",pickupLocation:"Nakuru, Rift Valley",deliveryLocation:"Nairobi Central Market",quantity:"100 kg",status:"DRIVER_ASSIGNED",estimatedValue:13e3,distance:"180 km",estimatedTime:"3 hours"},{id:"assign_2",consignmentId:"cons_2",title:"Fresh Spinach Delivery",farmerName:"Peter Kamau",farmerPhone:"+254723456789",pickupLocation:"Kiambu, Central Kenya",deliveryLocation:"Westlands Market",quantity:"50 bunches",status:"IN_TRANSIT",estimatedValue:2500,distance:"45 km",estimatedTime:"1.5 hours"}]),F("Using demo data - backend deployment needed",{icon:""})):F.error("Failed to fetch assignments")}finally{n(!1)}},b=async w=>{try{await ue.put(`/api/driver/assignments/${w}/status`,{status:"IN_TRANSIT",notes:"Pickup started"},{headers:{Authorization:`Bearer ${r}`}}),F.success(`Started pickup for delivery ${w}`),g()}catch(Y){console.error("Error updating delivery status:",Y),Y.response?.status===404?(F("Demo mode: Status update simulated",{icon:""}),g()):F.error("Failed to start pickup")}},S=async w=>{try{await ue.put(`/api/driver/assignments/${w}/status`,{status:"DELIVERED",notes:"Delivery completed"},{headers:{Authorization:`Bearer ${r}`}}),F.success(`Marked delivery ${w} as completed`),g()}catch(Y){console.error("Error updating delivery status:",Y),Y.response?.status===404?(F("Demo mode: Delivery marked as completed",{icon:""}),g()):F.error("Failed to mark as delivered")}},v=async()=>{try{if(!navigator.geolocation){F.error("Geolocation is not supported by this browser");return}F("Getting your location...",{icon:""}),navigator.geolocation.getCurrentPosition(async w=>{const{latitude:Y,longitude:H}=w.coords;try{await ue.put("/api/driver/location",{latitude:Y,longitude:H,timestamp:new Date().toISOString()},{headers:{Authorization:`Bearer ${r}`}}),F.success(`Location updated: ${Y.toFixed(6)}, ${H.toFixed(6)}`)}catch(Ne){console.error("Error updating location on server:",Ne),F.success(`Location obtained: ${Y.toFixed(6)}, ${H.toFixed(6)}`),F("Could not sync with server - using local GPS",{icon:""})}},w=>{console.error("Geolocation error:",w),F.error("Failed to get location. Please enable GPS and try again.")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}catch(w){console.error("Location update error:",w),F.error("Failed to update location")}},L=async()=>{try{const w=await ue.get("/api/driver/available-deliveries",{headers:{Authorization:`Bearer ${r}`}});w.data.success&&w.data.deliveries.length>0?(l("/driver/assignments"),F.success(`Found ${w.data.deliveries.length} available deliveries!`)):F("No deliveries available at the moment",{icon:""})}catch(w){console.error("Failed to fetch available deliveries:",w),F.error("Failed to check available deliveries")}},G=()=>{N(!0)},T=async()=>{try{const w=await ue.get("/api/driver/earnings",{headers:{Authorization:`Bearer ${r}`}});w.data.success?(A(w.data.earnings),c(!0)):F.error("Failed to load earnings data")}catch(w){console.error("Failed to fetch earnings:",w),F.error("Failed to load earnings data")}},U=async()=>{if(!o.description.trim()){F.error("Please provide a description");return}try{const w=await ue.post("/api/driver/report-issue",o,{headers:{Authorization:`Bearer ${r}`}});w.data.success?(F.success("Issue reported successfully!"),N(!1),f({type:"delivery_issue",description:"",deliveryId:"",severity:"medium"})):F.error(w.data.message||"Failed to report issue")}catch(w){console.error("Failed to submit issue:",w),F.error("Failed to report issue")}},ae=[{title:"Deliveries Today",value:"8",icon:e.createElement(Ue,{className:"w-6 h-6",__self:this,__source:{fileName:C,lineNumber:279,columnNumber:13}}),color:"bg-blue-500"},{title:"Total Earnings",value:"KES 12,500",icon:e.createElement(tt,{className:"w-6 h-6",__self:this,__source:{fileName:C,lineNumber:285,columnNumber:13}}),color:"bg-green-500"},{title:"Average Rating",value:"4.8",icon:e.createElement($e,{className:"w-6 h-6",__self:this,__source:{fileName:C,lineNumber:291,columnNumber:13}}),color:"bg-yellow-500"},{title:"Pending Pickups",value:"3",icon:e.createElement(nt,{className:"w-6 h-6",__self:this,__source:{fileName:C,lineNumber:297,columnNumber:13}}),color:"bg-red-500"}],k=(Array.isArray(s)?s:[]).map(w=>({id:w.id,customer:`${w.farmer?.user?.firstName||"Unknown"} ${w.farmer?.user?.lastName||"Farmer"}`,location:w.location||"Unknown location",status:w.status==="DRIVER_ASSIGNED"?"pending":w.status==="IN_TRANSIT"?"in_transit":w.status==="DELIVERED"?"delivered":"unknown",time:new Date(w.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),value:`KES ${((w.finalPricePerUnit||w.bidPricePerUnit)*w.quantity).toLocaleString()}`})),E=w=>{switch(w){case"pending":return"bg-yellow-100 text-yellow-800";case"in_transit":return"bg-blue-100 text-blue-800";case"delivered":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},x=w=>{switch(w){case"pending":return"Pending Pickup";case"in_transit":return"In Transit";case"delivered":return"Delivered";default:return w}};return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:C,lineNumber:349,columnNumber:5}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:C,lineNumber:350,columnNumber:7}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:C,lineNumber:351,columnNumber:9}},"Welcome back, ",t?.firstName,"!"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:C,lineNumber:354,columnNumber:9}},"Here's your delivery schedule for today.")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:C,lineNumber:360,columnNumber:7}},ae.map((w,Y)=>e.createElement("div",{key:Y,className:"bg-white rounded-lg shadow p-6",__self:this,__source:{fileName:C,lineNumber:362,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:C,lineNumber:363,columnNumber:13}},e.createElement("div",{className:`${w.color} text-white p-3 rounded-lg`,__self:this,__source:{fileName:C,lineNumber:364,columnNumber:15}},w.icon),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:C,lineNumber:367,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:C,lineNumber:368,columnNumber:17}},w.title),e.createElement("p",{className:"text-2xl font-semibold text-gray-900",__self:this,__source:{fileName:C,lineNumber:371,columnNumber:17}},w.value)))))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",__self:this,__source:{fileName:C,lineNumber:381,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow p-6",__self:this,__source:{fileName:C,lineNumber:382,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:C,lineNumber:383,columnNumber:11}},"Driver Status"),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:C,lineNumber:386,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:C,lineNumber:387,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:C,lineNumber:388,columnNumber:15}},"Status"),e.createElement("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",__self:this,__source:{fileName:C,lineNumber:389,columnNumber:15}},"Available")),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:C,lineNumber:393,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:C,lineNumber:394,columnNumber:15}},"Vehicle"),e.createElement("span",{className:"text-gray-900 font-medium",__self:this,__source:{fileName:C,lineNumber:395,columnNumber:15}},"Pickup Truck - KCA123X")),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:C,lineNumber:399,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:C,lineNumber:400,columnNumber:15}},"Current Location"),e.createElement("span",{className:"text-gray-900 font-medium",__self:this,__source:{fileName:C,lineNumber:401,columnNumber:15}},"Nairobi CBD")),e.createElement("button",{onClick:v,className:"w-full bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:C,lineNumber:403,columnNumber:13}},"Update Location"))),e.createElement("div",{className:"bg-white rounded-lg shadow p-6",__self:this,__source:{fileName:C,lineNumber:412,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:C,lineNumber:413,columnNumber:11}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 gap-3",__self:this,__source:{fileName:C,lineNumber:416,columnNumber:11}},e.createElement("button",{onClick:L,className:"flex items-center p-4 rounded-lg border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-colors group",__self:this,__source:{fileName:C,lineNumber:417,columnNumber:13}},e.createElement("div",{className:"p-2 bg-blue-600 rounded-lg text-white group-hover:bg-blue-700",__self:this,__source:{fileName:C,lineNumber:421,columnNumber:15}},e.createElement(Ue,{className:"w-5 h-5",__self:this,__source:{fileName:C,lineNumber:422,columnNumber:17}})),e.createElement("div",{className:"ml-3 text-left",__self:this,__source:{fileName:C,lineNumber:424,columnNumber:15}},e.createElement("div",{className:"font-medium text-blue-900",__self:this,__source:{fileName:C,lineNumber:425,columnNumber:17}},"Find New Deliveries"),e.createElement("div",{className:"text-sm text-blue-700",__self:this,__source:{fileName:C,lineNumber:428,columnNumber:17}},"Browse available assignments"))),e.createElement("button",{onClick:G,className:"flex items-center p-4 rounded-lg border border-red-200 bg-red-50 hover:bg-red-100 transition-colors group",__self:this,__source:{fileName:C,lineNumber:434,columnNumber:13}},e.createElement("div",{className:"p-2 bg-red-600 rounded-lg text-white group-hover:bg-red-700",__self:this,__source:{fileName:C,lineNumber:438,columnNumber:15}},e.createElement(ol,{className:"w-5 h-5",__self:this,__source:{fileName:C,lineNumber:439,columnNumber:17}})),e.createElement("div",{className:"ml-3 text-left",__self:this,__source:{fileName:C,lineNumber:441,columnNumber:15}},e.createElement("div",{className:"font-medium text-red-900",__self:this,__source:{fileName:C,lineNumber:442,columnNumber:17}},"Report Issue"),e.createElement("div",{className:"text-sm text-red-700",__self:this,__source:{fileName:C,lineNumber:443,columnNumber:17}},"Report delivery problems"))),e.createElement("button",{onClick:T,className:"flex items-center p-4 rounded-lg border border-green-200 bg-green-50 hover:bg-green-100 transition-colors group",__self:this,__source:{fileName:C,lineNumber:449,columnNumber:13}},e.createElement("div",{className:"p-2 bg-green-600 rounded-lg text-white group-hover:bg-green-700",__self:this,__source:{fileName:C,lineNumber:453,columnNumber:15}},e.createElement(tt,{className:"w-5 h-5",__self:this,__source:{fileName:C,lineNumber:454,columnNumber:17}})),e.createElement("div",{className:"ml-3 text-left",__self:this,__source:{fileName:C,lineNumber:456,columnNumber:15}},e.createElement("div",{className:"font-medium text-green-900",__self:this,__source:{fileName:C,lineNumber:457,columnNumber:17}},"View Earnings"),e.createElement("div",{className:"text-sm text-green-700",__self:this,__source:{fileName:C,lineNumber:458,columnNumber:17}},"Check payment history"))),e.createElement("button",{onClick:()=>l("/driver/warehouse"),className:"flex items-center p-4 rounded-lg border border-purple-200 bg-purple-50 hover:bg-purple-100 transition-colors group",__self:this,__source:{fileName:C,lineNumber:462,columnNumber:13}},e.createElement("div",{className:"p-2 bg-purple-600 rounded-lg text-white group-hover:bg-purple-700",__self:this,__source:{fileName:C,lineNumber:466,columnNumber:15}},e.createElement(ut,{className:"w-5 h-5",__self:this,__source:{fileName:C,lineNumber:467,columnNumber:17}})),e.createElement("div",{className:"ml-3 text-left",__self:this,__source:{fileName:C,lineNumber:469,columnNumber:15}},e.createElement("div",{className:"font-medium text-purple-900",__self:this,__source:{fileName:C,lineNumber:470,columnNumber:17}},"Warehouse Tasks"),e.createElement("div",{className:"text-sm text-purple-700",__self:this,__source:{fileName:C,lineNumber:471,columnNumber:17}},"Manage inventory & pickups"))),e.createElement("button",{onClick:()=>{F.success("Emergency contact: +254 700 000 000")},className:"flex items-center p-4 rounded-lg border border-orange-200 bg-orange-50 hover:bg-orange-100 transition-colors group",__self:this,__source:{fileName:C,lineNumber:477,columnNumber:13}},e.createElement("div",{className:"p-2 bg-orange-600 rounded-lg text-white group-hover:bg-orange-700",__self:this,__source:{fileName:C,lineNumber:483,columnNumber:15}},e.createElement(Ct,{className:"w-5 h-5",__self:this,__source:{fileName:C,lineNumber:484,columnNumber:17}})),e.createElement("div",{className:"ml-3 text-left",__self:this,__source:{fileName:C,lineNumber:486,columnNumber:15}},e.createElement("div",{className:"font-medium text-orange-900",__self:this,__source:{fileName:C,lineNumber:487,columnNumber:17}},"Emergency Contact"),e.createElement("div",{className:"text-sm text-orange-700",__self:this,__source:{fileName:C,lineNumber:488,columnNumber:17}},"Get help when needed"))))),e.createElement("div",{className:"bg-white rounded-lg shadow p-6",__self:this,__source:{fileName:C,lineNumber:496,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:C,lineNumber:497,columnNumber:11}},"Today's Summary"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:C,lineNumber:500,columnNumber:11}},e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:C,lineNumber:501,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:C,lineNumber:502,columnNumber:15}},"Completed"),e.createElement("span",{className:"font-semibold text-green-600",__self:this,__source:{fileName:C,lineNumber:503,columnNumber:15}},"5 deliveries")),e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:C,lineNumber:505,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:C,lineNumber:506,columnNumber:15}},"In Progress"),e.createElement("span",{className:"font-semibold text-blue-600",__self:this,__source:{fileName:C,lineNumber:507,columnNumber:15}},"1 delivery")),e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:C,lineNumber:509,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:C,lineNumber:510,columnNumber:15}},"Pending"),e.createElement("span",{className:"font-semibold text-orange-600",__self:this,__source:{fileName:C,lineNumber:511,columnNumber:15}},"2 deliveries")),e.createElement("div",{className:"border-t pt-3 mt-3",__self:this,__source:{fileName:C,lineNumber:515,columnNumber:13}},e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:C,lineNumber:516,columnNumber:15}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:C,lineNumber:517,columnNumber:17}},"Total Earnings"),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:C,lineNumber:518,columnNumber:17}},"KES 2,400")))))),e.createElement("div",{className:"bg-white rounded-lg shadow",__self:this,__source:{fileName:C,lineNumber:526,columnNumber:7}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:C,lineNumber:527,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:C,lineNumber:528,columnNumber:11}},"Today's Deliveries")),e.createElement("div",{className:"overflow-x-auto",__self:this,__source:{fileName:C,lineNumber:532,columnNumber:9}},e.createElement("table",{className:"w-full",__self:this,__source:{fileName:C,lineNumber:533,columnNumber:11}},e.createElement("thead",{className:"bg-gray-50",__self:this,__source:{fileName:C,lineNumber:534,columnNumber:13}},e.createElement("tr",{__self:this,__source:{fileName:C,lineNumber:535,columnNumber:15}},e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:C,lineNumber:536,columnNumber:17}},"Order ID"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:C,lineNumber:539,columnNumber:17}},"Customer"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:C,lineNumber:542,columnNumber:17}},"Location"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:C,lineNumber:545,columnNumber:17}},"Time"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:C,lineNumber:548,columnNumber:17}},"Value"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:C,lineNumber:551,columnNumber:17}},"Status"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:C,lineNumber:554,columnNumber:17}},"Actions"))),e.createElement("tbody",{className:"bg-white divide-y divide-gray-200",__self:this,__source:{fileName:C,lineNumber:559,columnNumber:13}},m?e.createElement("tr",{__self:this,__source:{fileName:C,lineNumber:561,columnNumber:17}},e.createElement("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",__self:this,__source:{fileName:C,lineNumber:562,columnNumber:19}},"Loading deliveries...")):k.length===0?e.createElement("tr",{__self:this,__source:{fileName:C,lineNumber:570,columnNumber:17}},e.createElement("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",__self:this,__source:{fileName:C,lineNumber:571,columnNumber:19}},"No deliveries assigned")):(Array.isArray(k)?k:[]).map(w=>e.createElement("tr",{key:w.id,__self:this,__source:{fileName:C,lineNumber:580,columnNumber:19}},e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",__self:this,__source:{fileName:C,lineNumber:581,columnNumber:21}},w.id),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:C,lineNumber:584,columnNumber:21}},w.customer),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:C,lineNumber:587,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:C,lineNumber:588,columnNumber:23}},e.createElement(ut,{className:"w-4 h-4 text-gray-400 mr-1",__self:this,__source:{fileName:C,lineNumber:589,columnNumber:25}}),w.location)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:C,lineNumber:593,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:C,lineNumber:594,columnNumber:23}},e.createElement(Ke,{className:"w-4 h-4 text-gray-400 mr-1",__self:this,__source:{fileName:C,lineNumber:595,columnNumber:25}}),w.time)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:C,lineNumber:599,columnNumber:21}},w.value),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:C,lineNumber:602,columnNumber:21}},e.createElement("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${E(w.status)}`,__self:this,__source:{fileName:C,lineNumber:603,columnNumber:23}},x(w.status))),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:C,lineNumber:609,columnNumber:21}},w.status==="pending"&&e.createElement("button",{onClick:()=>b(w.id),className:"text-primary-600 hover:text-primary-700 font-medium",__self:this,__source:{fileName:C,lineNumber:611,columnNumber:25}},"Start Pickup"),w.status==="in_transit"&&e.createElement("button",{onClick:()=>S(w.id),className:"text-green-600 hover:text-green-700 font-medium",__self:this,__source:{fileName:C,lineNumber:619,columnNumber:25}},"Mark Delivered"),w.status==="delivered"&&e.createElement("span",{className:"text-gray-400",__self:this,__source:{fileName:C,lineNumber:627,columnNumber:25}},"Completed")))))))),i&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",__self:this,__source:{fileName:C,lineNumber:640,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[80vh] overflow-y-auto",__self:this,__source:{fileName:C,lineNumber:641,columnNumber:11}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:C,lineNumber:642,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:C,lineNumber:643,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:C,lineNumber:644,columnNumber:17}},"Report Issue"),e.createElement("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:C,lineNumber:647,columnNumber:17}},e.createElement(Je,{className:"w-5 h-5",__self:this,__source:{fileName:C,lineNumber:651,columnNumber:19}})))),e.createElement("div",{className:"p-6 space-y-4",__self:this,__source:{fileName:C,lineNumber:656,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:C,lineNumber:657,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:C,lineNumber:658,columnNumber:17}},"Issue Type"),e.createElement("select",{value:o.type,onChange:w=>f(Y=>({...Y,type:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",__self:this,__source:{fileName:C,lineNumber:661,columnNumber:17}},e.createElement("option",{value:"delivery_issue",__self:this,__source:{fileName:C,lineNumber:668,columnNumber:19}},"Delivery Issue"),e.createElement("option",{value:"vehicle_problem",__self:this,__source:{fileName:C,lineNumber:669,columnNumber:19}},"Vehicle Problem"),e.createElement("option",{value:"customer_issue",__self:this,__source:{fileName:C,lineNumber:670,columnNumber:19}},"Customer Issue"),e.createElement("option",{value:"app_bug",__self:this,__source:{fileName:C,lineNumber:671,columnNumber:19}},"App Bug"),e.createElement("option",{value:"other",__self:this,__source:{fileName:C,lineNumber:672,columnNumber:19}},"Other"))),e.createElement("div",{__self:this,__source:{fileName:C,lineNumber:676,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:C,lineNumber:677,columnNumber:17}},"Severity"),e.createElement("select",{value:o.severity,onChange:w=>f(Y=>({...Y,severity:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",__self:this,__source:{fileName:C,lineNumber:680,columnNumber:17}},e.createElement("option",{value:"low",__self:this,__source:{fileName:C,lineNumber:687,columnNumber:19}},"Low - Minor inconvenience"),e.createElement("option",{value:"medium",__self:this,__source:{fileName:C,lineNumber:688,columnNumber:19}},"Medium - Affects work efficiency"),e.createElement("option",{value:"high",__self:this,__source:{fileName:C,lineNumber:689,columnNumber:19}},"High - Blocks completion"),e.createElement("option",{value:"critical",__self:this,__source:{fileName:C,lineNumber:690,columnNumber:19}},"Critical - Emergency"))),e.createElement("div",{__self:this,__source:{fileName:C,lineNumber:694,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:C,lineNumber:695,columnNumber:17}},"Related Delivery ID (Optional)"),e.createElement("input",{type:"text",value:o.deliveryId,onChange:w=>f(Y=>({...Y,deliveryId:w.target.value})),placeholder:"Enter delivery ID if applicable",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",__self:this,__source:{fileName:C,lineNumber:698,columnNumber:17}})),e.createElement("div",{__self:this,__source:{fileName:C,lineNumber:709,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:C,lineNumber:710,columnNumber:17}},"Description"),e.createElement("textarea",{value:o.description,onChange:w=>f(Y=>({...Y,description:w.target.value})),placeholder:"Please describe the issue in detail...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,__self:this,__source:{fileName:C,lineNumber:713,columnNumber:17}}))),e.createElement("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",__self:this,__source:{fileName:C,lineNumber:726,columnNumber:13}},e.createElement("button",{onClick:()=>N(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",__self:this,__source:{fileName:C,lineNumber:727,columnNumber:15}},"Cancel"),e.createElement("button",{onClick:U,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",__self:this,__source:{fileName:C,lineNumber:733,columnNumber:15}},e.createElement(ol,{className:"w-4 h-4 mr-2 inline",__self:this,__source:{fileName:C,lineNumber:737,columnNumber:17}}),"Submit Report")))),u&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",__self:this,__source:{fileName:C,lineNumber:747,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",__self:this,__source:{fileName:C,lineNumber:748,columnNumber:11}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:C,lineNumber:749,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:C,lineNumber:750,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:C,lineNumber:751,columnNumber:17}},"Earnings Overview"),e.createElement("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:C,lineNumber:754,columnNumber:17}},e.createElement(Je,{className:"w-5 h-5",__self:this,__source:{fileName:C,lineNumber:758,columnNumber:19}})))),e.createElement("div",{className:"p-6 space-y-6",__self:this,__source:{fileName:C,lineNumber:763,columnNumber:13}},e.createElement("div",{className:"grid grid-cols-2 gap-4",__self:this,__source:{fileName:C,lineNumber:765,columnNumber:15}},e.createElement("div",{className:"bg-blue-50 p-4 rounded-lg",__self:this,__source:{fileName:C,lineNumber:766,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:C,lineNumber:767,columnNumber:19}},e.createElement(vt,{className:"w-5 h-5 text-blue-600 mr-2",__self:this,__source:{fileName:C,lineNumber:768,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-blue-900",__self:this,__source:{fileName:C,lineNumber:769,columnNumber:21}},"Today")),e.createElement("p",{className:"text-2xl font-bold text-blue-900 mt-1",__self:this,__source:{fileName:C,lineNumber:771,columnNumber:19}},"KES ",(h?.today||0).toLocaleString())),e.createElement("div",{className:"bg-green-50 p-4 rounded-lg",__self:this,__source:{fileName:C,lineNumber:775,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:C,lineNumber:776,columnNumber:19}},e.createElement(vt,{className:"w-5 h-5 text-green-600 mr-2",__self:this,__source:{fileName:C,lineNumber:777,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-green-900",__self:this,__source:{fileName:C,lineNumber:778,columnNumber:21}},"This Week")),e.createElement("p",{className:"text-2xl font-bold text-green-900 mt-1",__self:this,__source:{fileName:C,lineNumber:780,columnNumber:19}},"KES ",(h?.week||0).toLocaleString())),e.createElement("div",{className:"bg-purple-50 p-4 rounded-lg",__self:this,__source:{fileName:C,lineNumber:784,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:C,lineNumber:785,columnNumber:19}},e.createElement(vt,{className:"w-5 h-5 text-purple-600 mr-2",__self:this,__source:{fileName:C,lineNumber:786,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-purple-900",__self:this,__source:{fileName:C,lineNumber:787,columnNumber:21}},"This Month")),e.createElement("p",{className:"text-2xl font-bold text-purple-900 mt-1",__self:this,__source:{fileName:C,lineNumber:789,columnNumber:19}},"KES ",(h?.month||0).toLocaleString())),e.createElement("div",{className:"bg-gray-50 p-4 rounded-lg",__self:this,__source:{fileName:C,lineNumber:793,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:C,lineNumber:794,columnNumber:19}},e.createElement(tt,{className:"w-5 h-5 text-gray-600 mr-2",__self:this,__source:{fileName:C,lineNumber:795,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:C,lineNumber:796,columnNumber:21}},"Total")),e.createElement("p",{className:"text-2xl font-bold text-gray-900 mt-1",__self:this,__source:{fileName:C,lineNumber:798,columnNumber:19}},"KES ",(h?.total||0).toLocaleString()))),e.createElement("div",{__self:this,__source:{fileName:C,lineNumber:805,columnNumber:15}},e.createElement("h4",{className:"text-md font-semibold text-gray-900 mb-3",__self:this,__source:{fileName:C,lineNumber:806,columnNumber:17}},"Recent Payments"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:C,lineNumber:809,columnNumber:17}},(Array.isArray(h?.recentPayments)?h.recentPayments:[]).map((w,Y)=>e.createElement("div",{key:Y,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",__self:this,__source:{fileName:C,lineNumber:811,columnNumber:21}},e.createElement("div",{__self:this,__source:{fileName:C,lineNumber:812,columnNumber:23}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:C,lineNumber:813,columnNumber:25}},w.date?new Date(w.date).toLocaleDateString():"Unknown Date"),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:C,lineNumber:816,columnNumber:25}},w.deliveries||0," deliveries completed")),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:C,lineNumber:820,columnNumber:23}},e.createElement("p",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:C,lineNumber:821,columnNumber:25}},"KES ",(w.amount||0).toLocaleString()),e.createElement("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${w.status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,__self:this,__source:{fileName:C,lineNumber:824,columnNumber:25}},w.status==="paid"?"Paid":"Pending")))),(!h?.recentPayments||h.recentPayments.length===0)&&e.createElement("div",{className:"text-center py-4 text-gray-500",__self:this,__source:{fileName:C,lineNumber:837,columnNumber:21}},e.createElement("p",{__self:this,__source:{fileName:C,lineNumber:838,columnNumber:23}},"No recent payments found"),e.createElement("p",{className:"text-sm",__self:this,__source:{fileName:C,lineNumber:839,columnNumber:23}},"Complete deliveries to start earning!")))),e.createElement("div",{className:"bg-blue-50 p-4 rounded-lg",__self:this,__source:{fileName:C,lineNumber:846,columnNumber:15}},e.createElement("div",{className:"flex items-start",__self:this,__source:{fileName:C,lineNumber:847,columnNumber:17}},e.createElement(mt,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3",__self:this,__source:{fileName:C,lineNumber:848,columnNumber:19}}),e.createElement("div",{__self:this,__source:{fileName:C,lineNumber:849,columnNumber:19}},e.createElement("h5",{className:"font-medium text-blue-900",__self:this,__source:{fileName:C,lineNumber:850,columnNumber:21}},"Payment Schedule"),e.createElement("p",{className:"text-sm text-blue-700 mt-1",__self:this,__source:{fileName:C,lineNumber:851,columnNumber:21}},"Payments are processed weekly every Friday via M-Pesa. You'll receive payment for all completed deliveries from the previous week."))))),e.createElement("div",{className:"px-6 py-4 border-t border-gray-200",__self:this,__source:{fileName:C,lineNumber:860,columnNumber:13}},e.createElement("button",{onClick:()=>c(!1),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",__self:this,__source:{fileName:C,lineNumber:861,columnNumber:15}},"Close")))))}var ee="/app/code/frontend/src/pages/driver/AssignmentsPage.tsx";const Yo={DRIVER_ASSIGNED:{color:"bg-yellow-100 text-yellow-800",icon:Ke,label:"Ready for Pickup",action:"Start Transport"},IN_TRANSIT:{color:"bg-blue-100 text-blue-800",icon:ul,label:"In Transit",action:"Mark as Delivered"},DELIVERED:{color:"bg-green-100 text-green-800",icon:$e,label:"Delivered",action:null}};function Zo(){const{token:t}=Te(),[r,l]=R.useState([]),[s,a]=R.useState(!0),[m,n]=R.useState(null);R.useEffect(()=>{i()},[]);const i=async()=>{try{const c=await ue.get("/api/driver/assignments",{headers:{Authorization:`Bearer ${t}`}});l(c.data.assignments)}catch(c){console.error("Error fetching assignments:",c),F.error("Failed to fetch assignments")}finally{a(!1)}},N=async(c,o)=>{n(c);try{await ue.patch(`/api/driver/assignments/${c}/status`,{status:o},{headers:{Authorization:`Bearer ${t}`}}),F.success("Assignment status updated successfully!"),i()}catch(f){console.error("Error updating assignment status:",f),F.error("Failed to update assignment status")}finally{n(null)}},u=c=>{c.status==="DRIVER_ASSIGNED"?N(c.id,"IN_TRANSIT"):c.status==="IN_TRANSIT"&&N(c.id,"DELIVERED")};return s?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:ee,lineNumber:122,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:ee,lineNumber:123,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:ee,lineNumber:124,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:ee,lineNumber:125,columnNumber:11}},"Loading assignments..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:ee,lineNumber:132,columnNumber:5}},e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:ee,lineNumber:133,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:ee,lineNumber:135,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:ee,lineNumber:136,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:ee,lineNumber:137,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:ee,lineNumber:138,columnNumber:15}},"My Assignments"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:ee,lineNumber:141,columnNumber:15}},"Manage your transport assignments and deliveries")),e.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600",__self:this,__source:{fileName:ee,lineNumber:145,columnNumber:13}},e.createElement(Ue,{className:"w-4 h-4",__self:this,__source:{fileName:ee,lineNumber:146,columnNumber:15}}),e.createElement("span",{__self:this,__source:{fileName:ee,lineNumber:147,columnNumber:15}},"Driver Dashboard")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",__self:this,__source:{fileName:ee,lineNumber:153,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:ee,lineNumber:154,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:ee,lineNumber:155,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:ee,lineNumber:156,columnNumber:15}},e.createElement(Ke,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:ee,lineNumber:157,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:ee,lineNumber:159,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:ee,lineNumber:160,columnNumber:17}},r.filter(c=>c.status==="DRIVER_ASSIGNED").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:ee,lineNumber:166,columnNumber:17}},"Ready for Pickup")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:ee,lineNumber:171,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:ee,lineNumber:172,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:ee,lineNumber:173,columnNumber:15}},e.createElement(ul,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:ee,lineNumber:174,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:ee,lineNumber:176,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:ee,lineNumber:177,columnNumber:17}},r.filter(c=>c.status==="IN_TRANSIT").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:ee,lineNumber:180,columnNumber:17}},"In Transit")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:ee,lineNumber:185,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:ee,lineNumber:186,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:ee,lineNumber:187,columnNumber:15}},e.createElement($e,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:ee,lineNumber:188,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:ee,lineNumber:190,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:ee,lineNumber:191,columnNumber:17}},r.filter(c=>c.status==="DELIVERED").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:ee,lineNumber:194,columnNumber:17}},"Completed"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:ee,lineNumber:201,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:ee,lineNumber:202,columnNumber:11}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:ee,lineNumber:203,columnNumber:13}},"Active Assignments")),r.length===0?e.createElement("div",{className:"p-12 text-center",__self:this,__source:{fileName:ee,lineNumber:209,columnNumber:13}},e.createElement(Ue,{className:"w-16 h-16 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:ee,lineNumber:210,columnNumber:15}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:ee,lineNumber:211,columnNumber:15}},"No assignments yet"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:ee,lineNumber:214,columnNumber:15}},"You'll see your transport assignments here when they are assigned to you")):e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:ee,lineNumber:220,columnNumber:13}},r.map(c=>{const o=Yo[c.status],f=o?.icon||xe,h=c.finalPricePerUnit*c.quantity;return e.createElement("div",{key:c.id,className:"p-6 hover:bg-gray-50",__self:this,__source:{fileName:ee,lineNumber:229,columnNumber:19}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",__self:this,__source:{fileName:ee,lineNumber:230,columnNumber:21}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:ee,lineNumber:231,columnNumber:23}},e.createElement("div",{className:"flex items-start gap-4",__self:this,__source:{fileName:ee,lineNumber:232,columnNumber:25}},e.createElement("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",__self:this,__source:{fileName:ee,lineNumber:233,columnNumber:27}},e.createElement(xe,{className:"w-8 h-8 text-gray-600",__self:this,__source:{fileName:ee,lineNumber:234,columnNumber:29}})),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:ee,lineNumber:237,columnNumber:27}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-1",__self:this,__source:{fileName:ee,lineNumber:238,columnNumber:29}},c.title),e.createElement("p",{className:"text-gray-600 text-sm mb-3",__self:this,__source:{fileName:ee,lineNumber:241,columnNumber:29}},c.description),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 mb-3",__self:this,__source:{fileName:ee,lineNumber:246,columnNumber:29}},e.createElement("span",{__self:this,__source:{fileName:ee,lineNumber:247,columnNumber:31}},c.quantity," ",c.unit),e.createElement("span",{__self:this,__source:{fileName:ee,lineNumber:250,columnNumber:31}},""),e.createElement("span",{__self:this,__source:{fileName:ee,lineNumber:251,columnNumber:31}},c.category),e.createElement("span",{__self:this,__source:{fileName:ee,lineNumber:252,columnNumber:31}},""),e.createElement("span",{__self:this,__source:{fileName:ee,lineNumber:253,columnNumber:31}},"Value: KSh ",h.toLocaleString())),c.farmer&&e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",__self:this,__source:{fileName:ee,lineNumber:260,columnNumber:31}},e.createElement("h4",{className:"text-sm font-medium text-blue-900 mb-2",__self:this,__source:{fileName:ee,lineNumber:261,columnNumber:33}},"Farmer Contact"),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-sm text-blue-700",__self:this,__source:{fileName:ee,lineNumber:264,columnNumber:33}},e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:ee,lineNumber:265,columnNumber:35}},e.createElement(ot,{className:"w-4 h-4",__self:this,__source:{fileName:ee,lineNumber:266,columnNumber:37}}),e.createElement("span",{__self:this,__source:{fileName:ee,lineNumber:267,columnNumber:37}},c.farmer.name)),e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:ee,lineNumber:269,columnNumber:35}},e.createElement(Ct,{className:"w-4 h-4",__self:this,__source:{fileName:ee,lineNumber:270,columnNumber:37}}),e.createElement("a",{href:`tel:${c.farmer.phone}`,className:"hover:underline",__self:this,__source:{fileName:ee,lineNumber:271,columnNumber:37}},c.farmer.phone)),c.farmer.profile?.county&&e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:ee,lineNumber:279,columnNumber:37}},e.createElement(ut,{className:"w-4 h-4",__self:this,__source:{fileName:ee,lineNumber:280,columnNumber:39}}),e.createElement("span",{__self:this,__source:{fileName:ee,lineNumber:281,columnNumber:39}},c.farmer.profile.county)))),e.createElement("div",{className:"flex items-center gap-4 text-sm text-gray-500",__self:this,__source:{fileName:ee,lineNumber:291,columnNumber:29}},e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:ee,lineNumber:292,columnNumber:31}},e.createElement(vt,{className:"w-4 h-4",__self:this,__source:{fileName:ee,lineNumber:293,columnNumber:33}}),e.createElement("span",{__self:this,__source:{fileName:ee,lineNumber:294,columnNumber:33}},"Expected:"," ",new Date(c.expectedDeliveryDate).toLocaleDateString())))))),e.createElement("div",{className:"flex flex-col lg:items-end gap-3",__self:this,__source:{fileName:ee,lineNumber:306,columnNumber:23}},e.createElement("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${o?.color||"bg-gray-100 text-gray-800"}`,__self:this,__source:{fileName:ee,lineNumber:307,columnNumber:25}},e.createElement(f,{className:"w-4 h-4",__self:this,__source:{fileName:ee,lineNumber:310,columnNumber:27}}),o?.label||c.status),e.createElement("div",{className:"flex items-center gap-2 text-xs text-gray-400",__self:this,__source:{fileName:ee,lineNumber:314,columnNumber:25}},e.createElement(vt,{className:"w-3 h-3",__self:this,__source:{fileName:ee,lineNumber:315,columnNumber:27}}),"Assigned:"," ",new Date(c.createdAt).toLocaleDateString()),o?.action&&e.createElement("button",{onClick:()=>u(c),disabled:m===c.id,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c.status==="DRIVER_ASSIGNED"?"bg-blue-600 text-white hover:bg-blue-700":"bg-green-600 text-white hover:bg-green-700"} disabled:bg-gray-400 disabled:cursor-not-allowed`,__self:this,__source:{fileName:ee,lineNumber:322,columnNumber:27}},m===c.id?e.createElement(e.Fragment,null,e.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white",__self:this,__source:{fileName:ee,lineNumber:333,columnNumber:33}}),"Updating..."):e.createElement(e.Fragment,null,c.status==="DRIVER_ASSIGNED"?e.createElement(sm,{className:"w-4 h-4",__self:this,__source:{fileName:ee,lineNumber:339,columnNumber:35}}):e.createElement(am,{className:"w-4 h-4",__self:this,__source:{fileName:ee,lineNumber:341,columnNumber:35}}),o.action)),c.status==="DELIVERED"&&e.createElement("div",{className:"text-xs text-green-600 font-medium",__self:this,__source:{fileName:ee,lineNumber:350,columnNumber:27}}," Ready for warehouse processing"))),c.status==="DRIVER_ASSIGNED"&&e.createElement("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",__self:this,__source:{fileName:ee,lineNumber:359,columnNumber:23}},e.createElement("div",{className:"flex items-start gap-2",__self:this,__source:{fileName:ee,lineNumber:360,columnNumber:25}},e.createElement(nt,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0",__self:this,__source:{fileName:ee,lineNumber:361,columnNumber:27}}),e.createElement("div",{className:"text-sm text-yellow-700",__self:this,__source:{fileName:ee,lineNumber:362,columnNumber:27}},e.createElement("p",{className:"font-medium mb-1",__self:this,__source:{fileName:ee,lineNumber:363,columnNumber:29}},"Transport Instructions:"),e.createElement("ul",{className:"text-xs space-y-1",__self:this,__source:{fileName:ee,lineNumber:366,columnNumber:29}},e.createElement("li",{__self:this,__source:{fileName:ee,lineNumber:367,columnNumber:31}}," Contact farmer to arrange pickup time"),e.createElement("li",{__self:this,__source:{fileName:ee,lineNumber:368,columnNumber:31}}," Verify produce quality and quantity"),e.createElement("li",{__self:this,__source:{fileName:ee,lineNumber:369,columnNumber:31}}," Handle with care during transport"),e.createElement("li",{__self:this,__source:{fileName:ee,lineNumber:370,columnNumber:31}}," Deliver to Main Warehouse, Nairobi Industrial Area"))))),c.status==="IN_TRANSIT"&&e.createElement("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",__self:this,__source:{fileName:ee,lineNumber:381,columnNumber:23}},e.createElement("div",{className:"flex items-start gap-2",__self:this,__source:{fileName:ee,lineNumber:382,columnNumber:25}},e.createElement(ul,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0",__self:this,__source:{fileName:ee,lineNumber:383,columnNumber:27}}),e.createElement("div",{className:"text-sm text-blue-700",__self:this,__source:{fileName:ee,lineNumber:384,columnNumber:27}},e.createElement("p",{className:"font-medium mb-1",__self:this,__source:{fileName:ee,lineNumber:385,columnNumber:29}},"En Route to Warehouse"),e.createElement("p",{className:"text-xs",__self:this,__source:{fileName:ee,lineNumber:388,columnNumber:29}},"Mark as delivered once you arrive at the warehouse and unload the produce.")))))})))))}var J="/app/code/frontend/src/pages/driver/WarehousePage.tsx";function Xo(){const{token:t}=Te(),[r,l]=R.useState([]),[s,a]=R.useState(!0),[m,n]=R.useState(!1),[i,N]=R.useState(null),[u,c]=R.useState({marketPrice:"",description:"",images:[],isFeatured:!1,tags:[]}),[o,f]=R.useState(""),[h,A]=R.useState(!1);R.useEffect(()=>{g()},[]);const g=async()=>{try{const U=await ue.get("/api/warehouse/inventory",{headers:{Authorization:`Bearer ${t}`}});l(Array.isArray(U.data?.inventory)?U.data.inventory:[])}catch(U){console.error("Error fetching inventory:",U),F.error("Failed to fetch warehouse inventory")}finally{a(!1)}},b=U=>{N(U),c({marketPrice:U.finalPricePerUnit.toString(),description:U.description,images:U.images,isFeatured:!1,tags:[]}),n(!0)},S=()=>{o.trim()&&Array.isArray(u.tags)&&!u.tags.includes(o.trim())&&(c({...u,tags:[...Array.isArray(u.tags)?u.tags:[],o.trim()]}),f(""))},v=U=>{c({...u,tags:Array.isArray(u.tags)?u.tags.filter(ae=>ae!==U):[]})},L=()=>{const U=prompt("Enter image URL:");U&&U.trim()&&c({...u,images:[...Array.isArray(u.images)?u.images:[],U.trim()]})},G=U=>{c({...u,images:Array.isArray(u.images)?u.images.filter((ae,k)=>k!==U):[]})},T=async()=>{if(i){if(!u.marketPrice||Number(u.marketPrice)<=0){F.error("Please enter a valid market price");return}A(!0);try{await ue.post("/api/warehouse/add-to-marketplace",{consignmentId:i.id,marketPrice:Number(u.marketPrice),description:u.description,images:u.images,isFeatured:u.isFeatured,tags:u.tags},{headers:{Authorization:`Bearer ${t}`}}),F.success("Product added to marketplace successfully!"),n(!1),g(),c({marketPrice:"",description:"",images:[],isFeatured:!1,tags:[]})}catch(U){console.error("Error adding to marketplace:",U),F.error("Failed to add product to marketplace")}finally{A(!1)}}};return s?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:J,lineNumber:171,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:J,lineNumber:172,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:J,lineNumber:173,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:J,lineNumber:174,columnNumber:11}},"Loading warehouse inventory..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:J,lineNumber:181,columnNumber:5}},e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:J,lineNumber:182,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:J,lineNumber:184,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:J,lineNumber:185,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:J,lineNumber:186,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:J,lineNumber:187,columnNumber:15}},"Warehouse Management"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:J,lineNumber:190,columnNumber:15}},"Manage delivered produce and add items to marketplace")),e.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600",__self:this,__source:{fileName:J,lineNumber:194,columnNumber:13}},e.createElement(xe,{className:"w-4 h-4",__self:this,__source:{fileName:J,lineNumber:195,columnNumber:15}}),e.createElement("span",{__self:this,__source:{fileName:J,lineNumber:196,columnNumber:15}},"Inventory Manager")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",__self:this,__source:{fileName:J,lineNumber:202,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:J,lineNumber:203,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:204,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:J,lineNumber:205,columnNumber:15}},e.createElement(xe,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:J,lineNumber:206,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:J,lineNumber:208,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:J,lineNumber:209,columnNumber:17}},Array.isArray(r)?r.length:0),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:J,lineNumber:212,columnNumber:17}},"Items in Warehouse")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:J,lineNumber:217,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:218,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:J,lineNumber:219,columnNumber:15}},e.createElement($e,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:J,lineNumber:220,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:J,lineNumber:222,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:J,lineNumber:223,columnNumber:17}},Array.isArray(r)?r.filter(U=>U.marketplaceProductId).length:0),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:J,lineNumber:226,columnNumber:17}},"Added to Marketplace")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:J,lineNumber:231,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:232,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:J,lineNumber:233,columnNumber:15}},e.createElement(Ar,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:J,lineNumber:234,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:J,lineNumber:236,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:J,lineNumber:237,columnNumber:17}},Array.isArray(r)?r.filter(U=>!U.marketplaceProductId).length:0),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:J,lineNumber:243,columnNumber:17}},"Pending Upload"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:J,lineNumber:250,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:J,lineNumber:251,columnNumber:11}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:J,lineNumber:252,columnNumber:13}},"Warehouse Inventory")),!Array.isArray(r)||r.length===0?e.createElement("div",{className:"p-12 text-center",__self:this,__source:{fileName:J,lineNumber:258,columnNumber:13}},e.createElement(xe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:J,lineNumber:259,columnNumber:15}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:J,lineNumber:260,columnNumber:15}},"No inventory items"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:J,lineNumber:263,columnNumber:15}},"Delivered produce will appear here for marketplace processing")):e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:J,lineNumber:268,columnNumber:13}},Array.isArray(r)&&r.map(U=>e.createElement("div",{key:U.id,className:"p-6 hover:bg-gray-50",__self:this,__source:{fileName:J,lineNumber:270,columnNumber:17}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",__self:this,__source:{fileName:J,lineNumber:271,columnNumber:19}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:J,lineNumber:272,columnNumber:21}},e.createElement("div",{className:"flex items-start gap-4",__self:this,__source:{fileName:J,lineNumber:273,columnNumber:23}},e.createElement("div",{className:"w-20 h-20 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",__self:this,__source:{fileName:J,lineNumber:274,columnNumber:25}},Array.isArray(U.images)&&U.images.length>0?e.createElement("img",{src:U.images[0],alt:U.title,className:"w-full h-full object-cover rounded-lg",__self:this,__source:{fileName:J,lineNumber:276,columnNumber:29}}):e.createElement(xe,{className:"w-8 h-8 text-gray-600",__self:this,__source:{fileName:J,lineNumber:282,columnNumber:29}})),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:J,lineNumber:286,columnNumber:25}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-1",__self:this,__source:{fileName:J,lineNumber:287,columnNumber:27}},U.title),e.createElement("p",{className:"text-gray-600 text-sm mb-3",__self:this,__source:{fileName:J,lineNumber:290,columnNumber:27}},U.description),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 mb-2",__self:this,__source:{fileName:J,lineNumber:294,columnNumber:27}},e.createElement("span",{__self:this,__source:{fileName:J,lineNumber:295,columnNumber:29}},U.quantity," ",U.unit),e.createElement("span",{__self:this,__source:{fileName:J,lineNumber:298,columnNumber:29}},""),e.createElement("span",{__self:this,__source:{fileName:J,lineNumber:299,columnNumber:29}},"KSh ",U.finalPricePerUnit," per ",U.unit),e.createElement("span",{__self:this,__source:{fileName:J,lineNumber:302,columnNumber:29}},""),e.createElement("span",{__self:this,__source:{fileName:J,lineNumber:303,columnNumber:29}},U.category)),e.createElement("div",{className:"text-sm",__self:this,__source:{fileName:J,lineNumber:306,columnNumber:27}},e.createElement("span",{className:"text-gray-500",__self:this,__source:{fileName:J,lineNumber:307,columnNumber:29}},"Total Value: "),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:J,lineNumber:308,columnNumber:29}},"KSh"," ",(U.finalPricePerUnit*U.quantity).toLocaleString()))))),e.createElement("div",{className:"flex flex-col lg:items-end gap-3",__self:this,__source:{fileName:J,lineNumber:319,columnNumber:21}},U.marketplaceProductId?e.createElement("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",__self:this,__source:{fileName:J,lineNumber:321,columnNumber:25}},e.createElement($e,{className:"w-4 h-4",__self:this,__source:{fileName:J,lineNumber:322,columnNumber:27}}),"On Marketplace"):e.createElement("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",__self:this,__source:{fileName:J,lineNumber:326,columnNumber:25}},e.createElement(Ar,{className:"w-4 h-4",__self:this,__source:{fileName:J,lineNumber:327,columnNumber:27}}),"Ready to Upload"),U.marketplaceProductId?e.createElement("button",{className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors flex items-center gap-2",disabled:!0,__self:this,__source:{fileName:J,lineNumber:341,columnNumber:25}},e.createElement(ct,{className:"w-4 h-4",__self:this,__source:{fileName:J,lineNumber:345,columnNumber:27}}),"View on Marketplace"):e.createElement("button",{onClick:()=>b(U),className:"bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-700 transition-colors flex items-center gap-2",__self:this,__source:{fileName:J,lineNumber:333,columnNumber:25}},e.createElement($t,{className:"w-4 h-4",__self:this,__source:{fileName:J,lineNumber:337,columnNumber:27}}),"Add to Marketplace"))))))),m&&i&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:J,lineNumber:359,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",__self:this,__source:{fileName:J,lineNumber:360,columnNumber:13}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:J,lineNumber:361,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:J,lineNumber:362,columnNumber:17}},"Add to Marketplace"),e.createElement("p",{className:"text-gray-600 text-sm mt-1",__self:this,__source:{fileName:J,lineNumber:365,columnNumber:17}},i.title)),e.createElement("div",{className:"p-6 space-y-6",__self:this,__source:{fileName:J,lineNumber:370,columnNumber:15}},e.createElement("div",{__self:this,__source:{fileName:J,lineNumber:372,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:J,lineNumber:373,columnNumber:19}},"Market Price (KSh per ",i.unit,") *"),e.createElement("input",{type:"number",value:u.marketPrice,onChange:U=>c({...u,marketPrice:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter market price",min:"1",required:!0,__self:this,__source:{fileName:J,lineNumber:376,columnNumber:19}}),e.createElement("p",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:J,lineNumber:390,columnNumber:19}},"Farmer price: KSh ",i.finalPricePerUnit," per"," ",i.unit)),e.createElement("div",{__self:this,__source:{fileName:J,lineNumber:397,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:J,lineNumber:398,columnNumber:19}},"Market Description"),e.createElement("textarea",{value:u.description,onChange:U=>c({...u,description:U.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enhance the product description for customers",__self:this,__source:{fileName:J,lineNumber:401,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:J,lineNumber:416,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:J,lineNumber:417,columnNumber:19}},"Product Images"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:J,lineNumber:420,columnNumber:19}},Array.isArray(u.images)&&u.images.length>0&&e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",__self:this,__source:{fileName:J,lineNumber:422,columnNumber:23}},Array.isArray(u.images)&&u.images.map((U,ae)=>e.createElement("div",{key:ae,className:"relative",__self:this,__source:{fileName:J,lineNumber:424,columnNumber:27}},e.createElement("img",{src:U,alt:`Product ${ae+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-200",__self:this,__source:{fileName:J,lineNumber:425,columnNumber:29}}),e.createElement("button",{onClick:()=>G(ae),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",__self:this,__source:{fileName:J,lineNumber:430,columnNumber:29}},"")))),e.createElement("button",{onClick:L,className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",__self:this,__source:{fileName:J,lineNumber:440,columnNumber:21}},e.createElement(Ts,{className:"w-6 h-6 text-gray-400 mx-auto mb-2",__self:this,__source:{fileName:J,lineNumber:444,columnNumber:23}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:J,lineNumber:445,columnNumber:23}},"Add Image URL")))),e.createElement("div",{__self:this,__source:{fileName:J,lineNumber:453,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:J,lineNumber:454,columnNumber:19}},"Product Tags"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:J,lineNumber:457,columnNumber:19}},Array.isArray(u.tags)&&u.tags.length>0&&e.createElement("div",{className:"flex flex-wrap gap-2",__self:this,__source:{fileName:J,lineNumber:459,columnNumber:23}},Array.isArray(u.tags)&&u.tags.map((U,ae)=>e.createElement("span",{key:ae,className:"inline-flex items-center gap-1 bg-primary-100 text-primary-800 px-2 py-1 rounded text-sm",__self:this,__source:{fileName:J,lineNumber:461,columnNumber:27}},U,e.createElement("button",{onClick:()=>v(U),className:"text-primary-600 hover:text-primary-800",__self:this,__source:{fileName:J,lineNumber:466,columnNumber:29}},"")))),e.createElement("div",{className:"flex gap-2",__self:this,__source:{fileName:J,lineNumber:476,columnNumber:21}},e.createElement("input",{type:"text",value:o,onChange:U=>f(U.target.value),onKeyPress:U=>U.key==="Enter"&&S(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Add a tag (e.g., organic, fresh)",__self:this,__source:{fileName:J,lineNumber:477,columnNumber:23}}),e.createElement("button",{onClick:S,className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors",__self:this,__source:{fileName:J,lineNumber:485,columnNumber:23}},e.createElement(zt,{className:"w-4 h-4",__self:this,__source:{fileName:J,lineNumber:489,columnNumber:25}}))))),e.createElement("div",{__self:this,__source:{fileName:J,lineNumber:496,columnNumber:17}},e.createElement("label",{className:"flex items-center gap-2",__self:this,__source:{fileName:J,lineNumber:497,columnNumber:19}},e.createElement("input",{type:"checkbox",checked:u.isFeatured,onChange:U=>c({...u,isFeatured:U.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500",__self:this,__source:{fileName:J,lineNumber:498,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-gray-700",__self:this,__source:{fileName:J,lineNumber:509,columnNumber:21}},"Mark as Featured Product")),e.createElement("p",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:J,lineNumber:513,columnNumber:19}},"Featured products appear prominently on the marketplace")),e.createElement("div",{className:"flex gap-4 pt-4",__self:this,__source:{fileName:J,lineNumber:519,columnNumber:17}},e.createElement("button",{type:"button",onClick:()=>n(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:h,__self:this,__source:{fileName:J,lineNumber:520,columnNumber:19}},"Cancel"),e.createElement("button",{onClick:T,className:"flex-1 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:h,__self:this,__source:{fileName:J,lineNumber:528,columnNumber:19}},h?"Adding...":"Add to Marketplace")))))))}var Oe="/app/code/frontend/src/pages/ComingSoonPage.tsx";function eu({title:t="Coming Soon",description:r="This feature is currently under development and will be available soon.",features:l=[]}){const s=_t();return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center py-12 px-4",__self:this,__source:{fileName:Oe,lineNumber:19,columnNumber:5}},e.createElement("div",{className:"max-w-md w-full",__self:this,__source:{fileName:Oe,lineNumber:20,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",__self:this,__source:{fileName:Oe,lineNumber:21,columnNumber:9}},e.createElement("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6",__self:this,__source:{fileName:Oe,lineNumber:23,columnNumber:11}},e.createElement(mm,{className:"w-10 h-10 text-primary-600",__self:this,__source:{fileName:Oe,lineNumber:24,columnNumber:13}})),e.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:Oe,lineNumber:28,columnNumber:11}},t),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:Oe,lineNumber:31,columnNumber:11}},r),l.length>0&&e.createElement("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",__self:this,__source:{fileName:Oe,lineNumber:35,columnNumber:13}},e.createElement("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",__self:this,__source:{fileName:Oe,lineNumber:36,columnNumber:15}},e.createElement(ir,{className:"w-4 h-4 text-yellow-500 mr-2",__self:this,__source:{fileName:Oe,lineNumber:37,columnNumber:17}}),"Coming Features:"),e.createElement("ul",{className:"space-y-2",__self:this,__source:{fileName:Oe,lineNumber:40,columnNumber:15}},l.map((a,m)=>e.createElement("li",{key:m,className:"text-sm text-gray-600 flex items-center",__self:this,__source:{fileName:Oe,lineNumber:42,columnNumber:19}},e.createElement("div",{className:"w-1.5 h-1.5 bg-primary-600 rounded-full mr-2",__self:this,__source:{fileName:Oe,lineNumber:46,columnNumber:21}}),a)))),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",__self:this,__source:{fileName:Oe,lineNumber:55,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-center text-blue-700",__self:this,__source:{fileName:Oe,lineNumber:56,columnNumber:13}},e.createElement(Ke,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:Oe,lineNumber:57,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium",__self:this,__source:{fileName:Oe,lineNumber:58,columnNumber:15}},"Expected Launch: Coming Soon"))),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:Oe,lineNumber:65,columnNumber:11}},e.createElement("button",{onClick:()=>s(-1),className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 transition-colors flex items-center justify-center",__self:this,__source:{fileName:Oe,lineNumber:66,columnNumber:13}},e.createElement(sr,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:Oe,lineNumber:70,columnNumber:15}}),"Go Back"),e.createElement(Se,{to:"/",className:"block w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors",__self:this,__source:{fileName:Oe,lineNumber:74,columnNumber:13}},"Return to Homepage")),e.createElement("div",{className:"mt-6 pt-6 border-t border-gray-200",__self:this,__source:{fileName:Oe,lineNumber:83,columnNumber:11}},e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:Oe,lineNumber:84,columnNumber:13}},"We're working hard to bring you the best experience.",e.createElement("br",{__self:this,__source:{fileName:Oe,lineNumber:86,columnNumber:15}}),"Thank you for your patience!")))))}var Ee="/app/code/frontend/src/pages/TestMpesaPage.tsx";function tu(){const[t,r]=R.useState("0712345678"),[l,s]=R.useState(100),[a,m]=R.useState(!1),n=()=>localStorage.getItem("token"),i=async()=>{m(!0);try{const o=n();if(!o){F.error("Please login first");return}const f=await ue.post("/api/payments/registration-fee",{phoneNumber:t},{headers:{Authorization:`Bearer ${o}`}});F.success("Registration fee payment initiated!"),console.log("Registration fee response:",f.data)}catch(o){F.error(o.response?.data?.error||"Payment failed"),console.error("Registration fee error:",o)}finally{m(!1)}},N=async()=>{m(!0);try{const o=n();if(!o){F.error("Please login first");return}const f=await ue.post("/api/wallet/withdraw",{amount:l,phoneNumber:t},{headers:{Authorization:`Bearer ${o}`}});F.success("Wallet withdrawal initiated!"),console.log("Withdrawal response:",f.data)}catch(o){F.error(o.response?.data?.error||"Withdrawal failed"),console.error("Withdrawal error:",o)}finally{m(!1)}},u=async()=>{m(!0);try{const o=Mr(t);if(!xl(o)){F.error("Please enter a valid Kenyan phone number");return}const f=await ue.post("/api/payments/stk-push",{phone:o,amount:l,orderId:"test-order-"+Date.now(),accountReference:"Test Payment",transactionDesc:"Test STK Push"});f.data.success?(F.success("M-Pesa payment request sent!"),console.log("STK Push response:",f.data)):F.error("Failed to initiate payment")}catch(o){F.error(o.response?.data?.error||"STK Push failed"),console.error("STK Push error:",o)}finally{m(!1)}},c=()=>{const o=Mr(t),f=xl(t);F(`Phone: ${t}  ${o} (Valid: ${f})`,{icon:""}),console.log("Phone validation:",{original:t,formatted:o,isValid:f})};return e.createElement("div",{className:"max-w-4xl mx-auto p-6",__self:this,__source:{fileName:Ee,lineNumber:112,columnNumber:5}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-8",__self:this,__source:{fileName:Ee,lineNumber:113,columnNumber:7}},"M-Pesa Integration Test"),e.createElement("div",{className:"bg-white rounded-lg shadow p-6 mb-6",__self:this,__source:{fileName:Ee,lineNumber:117,columnNumber:7}},e.createElement("h2",{className:"text-xl font-semibold mb-4",__self:this,__source:{fileName:Ee,lineNumber:118,columnNumber:9}},"Test Configuration"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",__self:this,__source:{fileName:Ee,lineNumber:120,columnNumber:9}},e.createElement("div",{__self:this,__source:{fileName:Ee,lineNumber:121,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:Ee,lineNumber:122,columnNumber:13}},"Phone Number"),e.createElement("input",{type:"tel",value:t,onChange:o=>r(o.target.value),placeholder:"0712345678",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",__self:this,__source:{fileName:Ee,lineNumber:125,columnNumber:13}})),e.createElement("div",{__self:this,__source:{fileName:Ee,lineNumber:134,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:Ee,lineNumber:135,columnNumber:13}},"Amount (KES)"),e.createElement("input",{type:"number",value:l,onChange:o=>s(Number(o.target.value)),min:"1",max:"150000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",__self:this,__source:{fileName:Ee,lineNumber:138,columnNumber:13}}))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",__self:this,__source:{fileName:Ee,lineNumber:149,columnNumber:9}},e.createElement("button",{onClick:c,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",__self:this,__source:{fileName:Ee,lineNumber:150,columnNumber:11}},"Validate Phone"),e.createElement("button",{onClick:i,disabled:a,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",__self:this,__source:{fileName:Ee,lineNumber:157,columnNumber:11}},"Test Registration Fee"),e.createElement("button",{onClick:N,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",__self:this,__source:{fileName:Ee,lineNumber:165,columnNumber:11}},"Test Withdrawal"),e.createElement("button",{onClick:u,disabled:a,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",__self:this,__source:{fileName:Ee,lineNumber:173,columnNumber:11}},"Test STK Push"))),e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",__self:this,__source:{fileName:Ee,lineNumber:183,columnNumber:7}},e.createElement("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",__self:this,__source:{fileName:Ee,lineNumber:184,columnNumber:9}},"Demo Configuration"),e.createElement("div",{className:"text-sm text-yellow-700 space-y-1",__self:this,__source:{fileName:Ee,lineNumber:187,columnNumber:9}},e.createElement("p",{__self:this,__source:{fileName:Ee,lineNumber:188,columnNumber:11}},e.createElement("strong",{__self:this,__source:{fileName:Ee,lineNumber:189,columnNumber:13}},"Environment:")," Sandbox"),e.createElement("p",{__self:this,__source:{fileName:Ee,lineNumber:191,columnNumber:11}},e.createElement("strong",{__self:this,__source:{fileName:Ee,lineNumber:192,columnNumber:13}},"Business Short Code:")," 174379"),e.createElement("p",{__self:this,__source:{fileName:Ee,lineNumber:194,columnNumber:11}},e.createElement("strong",{__self:this,__source:{fileName:Ee,lineNumber:195,columnNumber:13}},"Test Phone:")," 0712345678 (or any valid Kenyan number)"),e.createElement("p",{__self:this,__source:{fileName:Ee,lineNumber:197,columnNumber:11}},e.createElement("strong",{__self:this,__source:{fileName:Ee,lineNumber:198,columnNumber:13}},"Demo Credentials:")," Configured for development"))),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",__self:this,__source:{fileName:Ee,lineNumber:203,columnNumber:7}},e.createElement("h3",{className:"text-lg font-semibold text-blue-800 mb-2",__self:this,__source:{fileName:Ee,lineNumber:204,columnNumber:9}},"How to Test"),e.createElement("div",{className:"text-sm text-blue-700 space-y-2",__self:this,__source:{fileName:Ee,lineNumber:207,columnNumber:9}},e.createElement("p",{__self:this,__source:{fileName:Ee,lineNumber:208,columnNumber:11}},"1. ",e.createElement("strong",{__self:this,__source:{fileName:Ee,lineNumber:209,columnNumber:16}},"Login:")," Use demo credentials to login as farmer/customer"),e.createElement("p",{__self:this,__source:{fileName:Ee,lineNumber:212,columnNumber:11}},"2. ",e.createElement("strong",{__self:this,__source:{fileName:Ee,lineNumber:213,columnNumber:16}},"Registration Fee:")," Test farmer activation payment (KES 300)"),e.createElement("p",{__self:this,__source:{fileName:Ee,lineNumber:216,columnNumber:11}},"3. ",e.createElement("strong",{__self:this,__source:{fileName:Ee,lineNumber:217,columnNumber:16}},"Wallet Withdrawal:")," Test farmer wallet withdrawal"),e.createElement("p",{__self:this,__source:{fileName:Ee,lineNumber:219,columnNumber:11}},"4. ",e.createElement("strong",{__self:this,__source:{fileName:Ee,lineNumber:220,columnNumber:16}},"STK Push:")," Test direct M-Pesa payment request"),e.createElement("p",{__self:this,__source:{fileName:Ee,lineNumber:222,columnNumber:11}},"5. ",e.createElement("strong",{__self:this,__source:{fileName:Ee,lineNumber:223,columnNumber:16}},"Checkout:")," Go to marketplace, add items, and checkout with M-Pesa"))))}var se="/app/code/frontend/src/App.tsx";const Ye=({children:t,allowedRoles:r})=>{const{user:l,isAuthenticated:s}=Te();return s?r&&l&&!r.includes(l.role)?e.createElement(pt,{to:"/",replace:!0,__self:void 0,__source:{fileName:se,lineNumber:66,columnNumber:12}}):e.createElement(e.Fragment,null,t):e.createElement(pt,{to:"/login",replace:!0,__self:void 0,__source:{fileName:se,lineNumber:62,columnNumber:12}})},ru=()=>{const{user:t}=Te();if(!t)return e.createElement(pt,{to:"/login",replace:!0,__self:void 0,__source:{fileName:se,lineNumber:77,columnNumber:12}});switch(t.role){case"FARMER":return e.createElement(pt,{to:"/farmer/dashboard",replace:!0,__self:void 0,__source:{fileName:se,lineNumber:82,columnNumber:14}});case"CUSTOMER":return e.createElement(pt,{to:"/customer/profile",replace:!0,__self:void 0,__source:{fileName:se,lineNumber:84,columnNumber:14}});case"ADMIN":return e.createElement(pt,{to:"/admin/dashboard",replace:!0,__self:void 0,__source:{fileName:se,lineNumber:86,columnNumber:14}});case"DRIVER":return e.createElement(pt,{to:"/driver/dashboard",replace:!0,__self:void 0,__source:{fileName:se,lineNumber:88,columnNumber:14}});default:return e.createElement(pt,{to:"/",replace:!0,__self:void 0,__source:{fileName:se,lineNumber:90,columnNumber:14}})}};function lu(){const{isAuthenticated:t,user:r}=Te();return R.useEffect(()=>{Ki();try{const l=localStorage.getItem("cart-storage");if(l){const s=JSON.parse(l);if(s.state?.cart?.items){const a=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,m=s.state.cart.items.filter(n=>!a.test(String(n.productId)));m.length!==s.state.cart.items.length&&(console.log(" Cleaning up old UUID cart items"),s.state.cart.items=m,localStorage.setItem("cart-storage",JSON.stringify(s)))}}}catch(l){console.warn("Error cleaning up old cart data:",l)}},[]),e.createElement(Vi,{__self:this,__source:{fileName:se,lineNumber:124,columnNumber:5}},e.createElement($a,{__self:this,__source:{fileName:se,lineNumber:125,columnNumber:7}},e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:se,lineNumber:126,columnNumber:9}},e.createElement(Gi,{__self:this,__source:{fileName:se,lineNumber:127,columnNumber:11}}),e.createElement("main",{className:"pb-16 lg:pb-0",__self:this,__source:{fileName:se,lineNumber:129,columnNumber:11}},e.createElement(qa,{__self:this,__source:{fileName:se,lineNumber:130,columnNumber:13}},e.createElement(Fe,{path:"/",element:e.createElement(Ji,{__self:this,__source:{fileName:se,lineNumber:132,columnNumber:40}}),__self:this,__source:{fileName:se,lineNumber:132,columnNumber:15}}),e.createElement(Fe,{path:"/marketplace",element:e.createElement(Yi,{__self:this,__source:{fileName:se,lineNumber:133,columnNumber:51}}),__self:this,__source:{fileName:se,lineNumber:133,columnNumber:15}}),e.createElement(Fe,{path:"/marketplace/product/:id",element:e.createElement(Zi,{__self:this,__source:{fileName:se,lineNumber:136,columnNumber:26}}),__self:this,__source:{fileName:se,lineNumber:134,columnNumber:15}}),e.createElement(Fe,{path:"/login",element:e.createElement(Xi,{__self:this,__source:{fileName:se,lineNumber:138,columnNumber:45}}),__self:this,__source:{fileName:se,lineNumber:138,columnNumber:15}}),e.createElement(Fe,{path:"/register",element:e.createElement(So,{__self:this,__source:{fileName:se,lineNumber:139,columnNumber:48}}),__self:this,__source:{fileName:se,lineNumber:139,columnNumber:15}}),e.createElement(Fe,{path:"/dashboard",element:e.createElement(ru,{__self:this,__source:{fileName:se,lineNumber:142,columnNumber:49}}),__self:this,__source:{fileName:se,lineNumber:142,columnNumber:15}}),e.createElement(Fe,{path:"/farmer/dashboard",element:e.createElement(Ye,{allowedRoles:["FARMER"],__self:this,__source:{fileName:se,lineNumber:148,columnNumber:19}},e.createElement(Co,{__self:this,__source:{fileName:se,lineNumber:149,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:145,columnNumber:15}}),e.createElement(Fe,{path:"/customer/dashboard",element:e.createElement(Ye,{allowedRoles:["CUSTOMER"],__self:this,__source:{fileName:se,lineNumber:158,columnNumber:19}},e.createElement(Ro,{__self:this,__source:{fileName:se,lineNumber:159,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:155,columnNumber:15}}),e.createElement(Fe,{path:"/customer/profile",element:e.createElement(Ye,{allowedRoles:["CUSTOMER"],__self:this,__source:{fileName:se,lineNumber:166,columnNumber:19}},e.createElement(Fo,{__self:this,__source:{fileName:se,lineNumber:167,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:163,columnNumber:15}}),e.createElement(Fe,{path:"/customer/orders",element:e.createElement(Ye,{allowedRoles:["CUSTOMER"],__self:this,__source:{fileName:se,lineNumber:174,columnNumber:19}},e.createElement(To,{__self:this,__source:{fileName:se,lineNumber:175,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:171,columnNumber:15}}),e.createElement(Fe,{path:"/cart",element:e.createElement(Oo,{__self:this,__source:{fileName:se,lineNumber:179,columnNumber:44}}),__self:this,__source:{fileName:se,lineNumber:179,columnNumber:15}}),e.createElement(Fe,{path:"/checkout",element:e.createElement(Uo,{__self:this,__source:{fileName:se,lineNumber:180,columnNumber:48}}),__self:this,__source:{fileName:se,lineNumber:180,columnNumber:15}}),e.createElement(Fe,{path:"/admin/dashboard",element:e.createElement(Ye,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:se,lineNumber:186,columnNumber:19}},e.createElement(jo,{__self:this,__source:{fileName:se,lineNumber:187,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:183,columnNumber:15}}),e.createElement(Fe,{path:"/admin/users",element:e.createElement(Ye,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:se,lineNumber:194,columnNumber:19}},e.createElement(Vo,{__self:this,__source:{fileName:se,lineNumber:195,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:191,columnNumber:15}}),e.createElement(Fe,{path:"/admin/consignments",element:e.createElement(Ye,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:se,lineNumber:202,columnNumber:19}},e.createElement(Bo,{__self:this,__source:{fileName:se,lineNumber:203,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:199,columnNumber:15}}),e.createElement(Fe,{path:"/admin/analytics",element:e.createElement(Ye,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:se,lineNumber:210,columnNumber:19}},e.createElement(Go,{__self:this,__source:{fileName:se,lineNumber:211,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:207,columnNumber:15}}),e.createElement(Fe,{path:"/admin/settings",element:e.createElement(Ye,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:se,lineNumber:218,columnNumber:19}},e.createElement(zo,{__self:this,__source:{fileName:se,lineNumber:219,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:215,columnNumber:15}}),e.createElement(Fe,{path:"/admin/marketplace",element:e.createElement(Ye,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:se,lineNumber:226,columnNumber:19}},e.createElement(Ho,{__self:this,__source:{fileName:se,lineNumber:227,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:223,columnNumber:15}}),e.createElement(Fe,{path:"/admin/registration-fees",element:e.createElement(Ye,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:se,lineNumber:234,columnNumber:19}},e.createElement(Wo,{__self:this,__source:{fileName:se,lineNumber:235,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:231,columnNumber:15}}),e.createElement(Fe,{path:"/admin/farmer-categories",element:e.createElement(Ye,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:se,lineNumber:242,columnNumber:19}},e.createElement(Qo,{__self:this,__source:{fileName:se,lineNumber:243,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:239,columnNumber:15}}),e.createElement(Fe,{path:"/driver/dashboard",element:e.createElement(Ye,{allowedRoles:["DRIVER"],__self:this,__source:{fileName:se,lineNumber:252,columnNumber:19}},e.createElement(Jo,{__self:this,__source:{fileName:se,lineNumber:253,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:249,columnNumber:15}}),e.createElement(Fe,{path:"/driver/assignments",element:e.createElement(Ye,{allowedRoles:["DRIVER"],__self:this,__source:{fileName:se,lineNumber:260,columnNumber:19}},e.createElement(Zo,{__self:this,__source:{fileName:se,lineNumber:261,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:257,columnNumber:15}}),e.createElement(Fe,{path:"/driver/warehouse",element:e.createElement(Ye,{allowedRoles:["DRIVER"],__self:this,__source:{fileName:se,lineNumber:268,columnNumber:19}},e.createElement(Xo,{__self:this,__source:{fileName:se,lineNumber:269,columnNumber:21}})),__self:this,__source:{fileName:se,lineNumber:265,columnNumber:15}}),e.createElement(Fe,{path:"/farmer/consignments",element:e.createElement(pt,{to:"/farmer/dashboard",replace:!0,__self:this,__source:{fileName:se,lineNumber:277,columnNumber:26}}),__self:this,__source:{fileName:se,lineNumber:275,columnNumber:15}}),e.createElement(Fe,{path:"/farmer/wallet",element:e.createElement(pt,{to:"/farmer/dashboard",replace:!0,__self:this,__source:{fileName:se,lineNumber:281,columnNumber:26}}),__self:this,__source:{fileName:se,lineNumber:279,columnNumber:15}}),e.createElement(Fe,{path:"/test-mpesa",element:e.createElement(tu,{__self:this,__source:{fileName:se,lineNumber:285,columnNumber:50}}),__self:this,__source:{fileName:se,lineNumber:285,columnNumber:15}}),e.createElement(Fe,{path:"*",element:e.createElement(eu,{__self:this,__source:{fileName:se,lineNumber:288,columnNumber:40}}),__self:this,__source:{fileName:se,lineNumber:288,columnNumber:15}}))),t&&r&&e.createElement(zi,{__self:this,__source:{fileName:se,lineNumber:293,columnNumber:39}}),e.createElement(Hi,{__self:this,__source:{fileName:se,lineNumber:296,columnNumber:11}}),e.createElement(nm,{position:"top-right",__self:this,__source:{fileName:se,lineNumber:298,columnNumber:11}}))))}window.addEventListener("error",t=>{t.error&&t.error.message&&t.error.message.includes("filter is not a function")&&(console.error(" ARRAY OPERATION ERROR DETECTED:",t.error.message),console.error("This error has been caught and handled gracefully."),t.preventDefault())});window.addEventListener("unhandledrejection",t=>{t.reason&&typeof t.reason=="string"&&t.reason.includes("filter")&&(console.error(" PROMISE REJECTION WITH ARRAY ERROR:",t.reason),t.preventDefault())});const su=new km({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5*60*1e3,cacheTime:5*60*1e3},mutations:{retry:1}}}),Pa=document.getElementById("root");if(!Pa)throw new Error("Root element not found");const au=cl.createRoot(Pa);au.render(e.createElement(Fm,{client:su},e.createElement(lu)));
