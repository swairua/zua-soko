import{a as Oa,b as Ia,c as e,r as P,g as La}from"./vendor-9bZoipD1.js";import{u as _t,L as xe,a as Cs,b as Ma,B as ja,R as Ua,c as Ce,N as dt}from"./router-BAAhKjlc.js";import{S as gt,L as $l,X as Je,M as As,H as ks,a as Ps,C as $a,U as nt,b as Gt,B as xl,T as Te,D as Qr,W as al,c as qa,d as ml,e as yr,f as mr,g as Fe,h as ql,i as Ie,j as pt,k as it,l as Ds,m as Ut,K as Va,n as Ka,o as Ba,P as Ga,A as za,p as Pt,q as tt,Q as Ha,r as st,s as nr,F as Wa,E as xt,t as El,V as L,u as rr,v as Qa,w as Et,x as Or,y as xr,z as Er,G as Ot,I as Rt,J as ge,N as Jr,O as wt,R as $t,Y as Ye,Z as Tt,_ as Ja,$ as vl,a0 as yt,a1 as wl,a2 as Ya,a3 as lr,a4 as Za,a5 as vr,a6 as nl,a7 as Xa,a8 as Rs,a9 as qt,aa as em,ab as Vl,ac as il,ad as Yr,ae as tm,af as Kl,ag as wr,ah as rm,ai as ul,aj as lm,ak as sm,al as Bl,am,an as mm}from"./ui-B1YE98jS.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const m of a)if(m.type==="childList")for(const n of m.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function l(a){const m={};return a.integrity&&(m.integrity=a.integrity),a.referrerPolicy&&(m.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?m.credentials="include":a.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function s(a){if(a.ep)return;a.ep=!0;const m=l(a);fetch(a.href,m)}})();var ol={},Gl=Oa;ol.createRoot=Gl.createRoot,ol.hydrateRoot=Gl.hydrateRoot;function cl(t,r){return cl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,s){return l.__proto__=s,l},cl(t,r)}function Ir(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,cl(t,r)}var Lr=function(){function t(){this.listeners=[]}var r=t.prototype;return r.subscribe=function(s){var a=this,m=s||function(){};return this.listeners.push(m),this.onSubscribe(),function(){a.listeners=a.listeners.filter(function(n){return n!==m}),a.onUnsubscribe()}},r.hasListeners=function(){return this.listeners.length>0},r.onSubscribe=function(){},r.onUnsubscribe=function(){},t}();function Se(){return Se=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var s in l)({}).hasOwnProperty.call(l,s)&&(t[s]=l[s])}return t},Se.apply(null,arguments)}var Fs=typeof window>"u";function We(){}function nm(t,r){return typeof t=="function"?t(r):t}function im(t){return typeof t=="number"&&t>=0&&t!==1/0}function Sr(t){return Array.isArray(t)?t:[t]}function um(t,r){return Math.max(t+(r||0)-Date.now(),0)}function Zr(t,r,l){return Mr(t)?typeof r=="function"?Se({},l,{queryKey:t,queryFn:r}):Se({},r,{queryKey:t}):t}function Dt(t,r,l){return Mr(t)?[Se({},r,{queryKey:t}),l]:[t||{},r]}function om(t,r){if(t===!0&&r===!0||t==null&&r==null)return"all";if(t===!1&&r===!1)return"none";var l=t??!r;return l?"active":"inactive"}function zl(t,r){var l=t.active,s=t.exact,a=t.fetching,m=t.inactive,n=t.predicate,i=t.queryKey,b=t.stale;if(Mr(i)){if(s){if(r.queryHash!==Sl(i,r.options))return!1}else if(!Cr(r.queryKey,i))return!1}var u=om(l,m);if(u==="none")return!1;if(u!=="all"){var _=r.isActive();if(u==="active"&&!_||u==="inactive"&&_)return!1}return!(typeof b=="boolean"&&r.isStale()!==b||typeof a=="boolean"&&r.isFetching()!==a||n&&!n(r))}function Hl(t,r){var l=t.exact,s=t.fetching,a=t.predicate,m=t.mutationKey;if(Mr(m)){if(!r.options.mutationKey)return!1;if(l){if(It(r.options.mutationKey)!==It(m))return!1}else if(!Cr(r.options.mutationKey,m))return!1}return!(typeof s=="boolean"&&r.state.status==="loading"!==s||a&&!a(r))}function Sl(t,r){var l=r?.queryKeyHashFn||It;return l(t)}function It(t){var r=Sr(t);return cm(r)}function cm(t){return JSON.stringify(t,function(r,l){return _l(l)?Object.keys(l).sort().reduce(function(s,a){return s[a]=l[a],s},{}):l})}function Cr(t,r){return Ts(Sr(t),Sr(r))}function Ts(t,r){return t===r?!0:typeof t!=typeof r?!1:t&&r&&typeof t=="object"&&typeof r=="object"?!Object.keys(r).some(function(l){return!Ts(t[l],r[l])}):!1}function Os(t,r){if(t===r)return t;var l=Array.isArray(t)&&Array.isArray(r);if(l||_l(t)&&_l(r)){for(var s=l?t.length:Object.keys(t).length,a=l?r:Object.keys(r),m=a.length,n=l?[]:{},i=0,b=0;b<m;b++){var u=l?b:a[b];n[u]=Os(t[u],r[u]),n[u]===t[u]&&i++}return s===m&&i===s?t:n}return r}function _l(t){if(!Wl(t))return!1;var r=t.constructor;if(typeof r>"u")return!0;var l=r.prototype;return!(!Wl(l)||!l.hasOwnProperty("isPrototypeOf"))}function Wl(t){return Object.prototype.toString.call(t)==="[object Object]"}function Mr(t){return typeof t=="string"||Array.isArray(t)}function _m(t){return new Promise(function(r){setTimeout(r,t)})}function Ql(t){Promise.resolve().then(t).catch(function(r){return setTimeout(function(){throw r})})}function Is(){if(typeof AbortController=="function")return new AbortController}var Nm=function(t){Ir(r,t);function r(){var s;return s=t.call(this)||this,s.setup=function(a){var m;if(!Fs&&((m=window)!=null&&m.addEventListener)){var n=function(){return a()};return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),function(){window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}},s}var l=r.prototype;return l.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},l.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},l.setEventListener=function(a){var m,n=this;this.setup=a,(m=this.cleanup)==null||m.call(this),this.cleanup=a(function(i){typeof i=="boolean"?n.setFocused(i):n.onFocus()})},l.setFocused=function(a){this.focused=a,a&&this.onFocus()},l.onFocus=function(){this.listeners.forEach(function(a){a()})},l.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},r}(Lr),fr=new Nm,fm=function(t){Ir(r,t);function r(){var s;return s=t.call(this)||this,s.setup=function(a){var m;if(!Fs&&((m=window)!=null&&m.addEventListener)){var n=function(){return a()};return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),function(){window.removeEventListener("online",n),window.removeEventListener("offline",n)}}},s}var l=r.prototype;return l.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},l.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},l.setEventListener=function(a){var m,n=this;this.setup=a,(m=this.cleanup)==null||m.call(this),this.cleanup=a(function(i){typeof i=="boolean"?n.setOnline(i):n.onOnline()})},l.setOnline=function(a){this.online=a,a&&this.onOnline()},l.onOnline=function(){this.listeners.forEach(function(a){a()})},l.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},r}(Lr),br=new fm;function bm(t){return Math.min(1e3*Math.pow(2,t),3e4)}function Ar(t){return typeof t?.cancel=="function"}var Ls=function(r){this.revert=r?.revert,this.silent=r?.silent};function Xr(t){return t instanceof Ls}var Ms=function(r){var l=this,s=!1,a,m,n,i;this.abort=r.abort,this.cancel=function(f){return a?.(f)},this.cancelRetry=function(){s=!0},this.continueRetry=function(){s=!1},this.continue=function(){return m?.()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(f,h){n=f,i=h});var b=function(h){l.isResolved||(l.isResolved=!0,r.onSuccess==null||r.onSuccess(h),m?.(),n(h))},u=function(h){l.isResolved||(l.isResolved=!0,r.onError==null||r.onError(h),m?.(),i(h))},_=function(){return new Promise(function(h){m=h,l.isPaused=!0,r.onPause==null||r.onPause()}).then(function(){m=void 0,l.isPaused=!1,r.onContinue==null||r.onContinue()})},o=function f(){if(!l.isResolved){var h;try{h=r.fn()}catch(w){h=Promise.reject(w)}a=function(g){if(!l.isResolved&&(u(new Ls(g)),l.abort==null||l.abort(),Ar(h)))try{h.cancel()}catch{}},l.isTransportCancelable=Ar(h),Promise.resolve(h).then(b).catch(function(w){var g,p;if(!l.isResolved){var S=(g=r.retry)!=null?g:3,E=(p=r.retryDelay)!=null?p:bm,M=typeof E=="function"?E(l.failureCount,w):E,I=S===!0||typeof S=="number"&&l.failureCount<S||typeof S=="function"&&S(l.failureCount,w);if(s||!I){u(w);return}l.failureCount++,r.onFail==null||r.onFail(l.failureCount,w),_m(M).then(function(){if(!fr.isFocused()||!br.isOnline())return _()}).then(function(){s?u(w):f()})}})}};o()},dm=function(){function t(){this.queue=[],this.transactions=0,this.notifyFn=function(l){l()},this.batchNotifyFn=function(l){l()}}var r=t.prototype;return r.batch=function(s){var a;this.transactions++;try{a=s()}finally{this.transactions--,this.transactions||this.flush()}return a},r.schedule=function(s){var a=this;this.transactions?this.queue.push(s):Ql(function(){a.notifyFn(s)})},r.batchCalls=function(s){var a=this;return function(){for(var m=arguments.length,n=new Array(m),i=0;i<m;i++)n[i]=arguments[i];a.schedule(function(){s.apply(void 0,n)})}},r.flush=function(){var s=this,a=this.queue;this.queue=[],a.length&&Ql(function(){s.batchNotifyFn(function(){a.forEach(function(m){s.notifyFn(m)})})})},r.setNotifyFunction=function(s){this.notifyFn=s},r.setBatchNotifyFunction=function(s){this.batchNotifyFn=s},t}(),Ge=new dm,js=console;function Us(){return js}function hm(t){js=t}var gm=function(){function t(l){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=l.defaultOptions,this.setOptions(l.options),this.observers=[],this.cache=l.cache,this.queryKey=l.queryKey,this.queryHash=l.queryHash,this.initialState=l.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=l.meta,this.scheduleGc()}var r=t.prototype;return r.setOptions=function(s){var a;this.options=Se({},this.defaultOptions,s),this.meta=s?.meta,this.cacheTime=Math.max(this.cacheTime||0,(a=this.options.cacheTime)!=null?a:5*60*1e3)},r.setDefaultOptions=function(s){this.defaultOptions=s},r.scheduleGc=function(){var s=this;this.clearGcTimeout(),im(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){s.optionalRemove()},this.cacheTime))},r.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},r.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},r.setData=function(s,a){var m,n,i=this.state.data,b=nm(s,i);return(m=(n=this.options).isDataEqual)!=null&&m.call(n,i,b)?b=i:this.options.structuralSharing!==!1&&(b=Os(i,b)),this.dispatch({data:b,type:"success",dataUpdatedAt:a?.updatedAt}),b},r.setState=function(s,a){this.dispatch({type:"setState",state:s,setStateOptions:a})},r.cancel=function(s){var a,m=this.promise;return(a=this.retryer)==null||a.cancel(s),m?m.then(We).catch(We):Promise.resolve()},r.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},r.reset=function(){this.destroy(),this.setState(this.initialState)},r.isActive=function(){return this.observers.some(function(s){return s.options.enabled!==!1})},r.isFetching=function(){return this.state.isFetching},r.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(s){return s.getCurrentResult().isStale})},r.isStaleByTime=function(s){return s===void 0&&(s=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!um(this.state.dataUpdatedAt,s)},r.onFocus=function(){var s,a=this.observers.find(function(m){return m.shouldFetchOnWindowFocus()});a&&a.refetch(),(s=this.retryer)==null||s.continue()},r.onOnline=function(){var s,a=this.observers.find(function(m){return m.shouldFetchOnReconnect()});a&&a.refetch(),(s=this.retryer)==null||s.continue()},r.addObserver=function(s){this.observers.indexOf(s)===-1&&(this.observers.push(s),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:s}))},r.removeObserver=function(s){this.observers.indexOf(s)!==-1&&(this.observers=this.observers.filter(function(a){return a!==s}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:s}))},r.getObserversCount=function(){return this.observers.length},r.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},r.fetch=function(s,a){var m=this,n,i,b;if(this.state.isFetching){if(this.state.dataUpdatedAt&&a?.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var u;return(u=this.retryer)==null||u.continueRetry(),this.promise}}if(s&&this.setOptions(s),!this.options.queryFn){var _=this.observers.find(function(E){return E.options.queryFn});_&&this.setOptions(_.options)}var o=Sr(this.queryKey),f=Is(),h={queryKey:o,pageParam:void 0,meta:this.meta};Object.defineProperty(h,"signal",{enumerable:!0,get:function(){if(f)return m.abortSignalConsumed=!0,f.signal}});var w=function(){return m.options.queryFn?(m.abortSignalConsumed=!1,m.options.queryFn(h)):Promise.reject("Missing queryFn")},g={fetchOptions:a,options:this.options,queryKey:o,state:this.state,fetchFn:w,meta:this.meta};if((n=this.options.behavior)!=null&&n.onFetch){var p;(p=this.options.behavior)==null||p.onFetch(g)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((i=g.fetchOptions)==null?void 0:i.meta)){var S;this.dispatch({type:"fetch",meta:(S=g.fetchOptions)==null?void 0:S.meta})}return this.retryer=new Ms({fn:g.fetchFn,abort:f==null||(b=f.abort)==null?void 0:b.bind(f),onSuccess:function(M){m.setData(M),m.cache.config.onSuccess==null||m.cache.config.onSuccess(M,m),m.cacheTime===0&&m.optionalRemove()},onError:function(M){Xr(M)&&M.silent||m.dispatch({type:"error",error:M}),Xr(M)||(m.cache.config.onError==null||m.cache.config.onError(M,m),Us().error(M)),m.cacheTime===0&&m.optionalRemove()},onFail:function(){m.dispatch({type:"failed"})},onPause:function(){m.dispatch({type:"pause"})},onContinue:function(){m.dispatch({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay}),this.promise=this.retryer.promise,this.promise},r.dispatch=function(s){var a=this;this.state=this.reducer(this.state,s),Ge.batch(function(){a.observers.forEach(function(m){m.onQueryUpdate(s)}),a.cache.notify({query:a,type:"queryUpdated",action:s})})},r.getDefaultState=function(s){var a=typeof s.initialData=="function"?s.initialData():s.initialData,m=typeof s.initialData<"u",n=m?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0,i=typeof a<"u";return{data:a,dataUpdateCount:0,dataUpdatedAt:i?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:i?"success":"idle"}},r.reducer=function(s,a){var m,n;switch(a.type){case"failed":return Se({},s,{fetchFailureCount:s.fetchFailureCount+1});case"pause":return Se({},s,{isPaused:!0});case"continue":return Se({},s,{isPaused:!1});case"fetch":return Se({},s,{fetchFailureCount:0,fetchMeta:(m=a.meta)!=null?m:null,isFetching:!0,isPaused:!1},!s.dataUpdatedAt&&{error:null,status:"loading"});case"success":return Se({},s,{data:a.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:(n=a.dataUpdatedAt)!=null?n:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var i=a.error;return Xr(i)&&i.revert&&this.revertState?Se({},this.revertState):Se({},s,{error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return Se({},s,{isInvalidated:!0});case"setState":return Se({},s,a.state);default:return s}},t}(),pm=function(t){Ir(r,t);function r(s){var a;return a=t.call(this)||this,a.config=s||{},a.queries=[],a.queriesMap={},a}var l=r.prototype;return l.build=function(a,m,n){var i,b=m.queryKey,u=(i=m.queryHash)!=null?i:Sl(b,m),_=this.get(u);return _||(_=new gm({cache:this,queryKey:b,queryHash:u,options:a.defaultQueryOptions(m),state:n,defaultOptions:a.getQueryDefaults(b),meta:m.meta}),this.add(_)),_},l.add=function(a){this.queriesMap[a.queryHash]||(this.queriesMap[a.queryHash]=a,this.queries.push(a),this.notify({type:"queryAdded",query:a}))},l.remove=function(a){var m=this.queriesMap[a.queryHash];m&&(a.destroy(),this.queries=this.queries.filter(function(n){return n!==a}),m===a&&delete this.queriesMap[a.queryHash],this.notify({type:"queryRemoved",query:a}))},l.clear=function(){var a=this;Ge.batch(function(){a.queries.forEach(function(m){a.remove(m)})})},l.get=function(a){return this.queriesMap[a]},l.getAll=function(){return this.queries},l.find=function(a,m){var n=Dt(a,m),i=n[0];return typeof i.exact>"u"&&(i.exact=!0),this.queries.find(function(b){return zl(i,b)})},l.findAll=function(a,m){var n=Dt(a,m),i=n[0];return Object.keys(i).length>0?this.queries.filter(function(b){return zl(i,b)}):this.queries},l.notify=function(a){var m=this;Ge.batch(function(){m.listeners.forEach(function(n){n(a)})})},l.onFocus=function(){var a=this;Ge.batch(function(){a.queries.forEach(function(m){m.onFocus()})})},l.onOnline=function(){var a=this;Ge.batch(function(){a.queries.forEach(function(m){m.onOnline()})})},r}(Lr),ym=function(){function t(l){this.options=Se({},l.defaultOptions,l.options),this.mutationId=l.mutationId,this.mutationCache=l.mutationCache,this.observers=[],this.state=l.state||xm(),this.meta=l.meta}var r=t.prototype;return r.setState=function(s){this.dispatch({type:"setState",state:s})},r.addObserver=function(s){this.observers.indexOf(s)===-1&&this.observers.push(s)},r.removeObserver=function(s){this.observers=this.observers.filter(function(a){return a!==s})},r.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(We).catch(We)):Promise.resolve()},r.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},r.execute=function(){var s=this,a,m=this.state.status==="loading",n=Promise.resolve();return m||(this.dispatch({type:"loading",variables:this.options.variables}),n=n.then(function(){s.mutationCache.config.onMutate==null||s.mutationCache.config.onMutate(s.state.variables,s)}).then(function(){return s.options.onMutate==null?void 0:s.options.onMutate(s.state.variables)}).then(function(i){i!==s.state.context&&s.dispatch({type:"loading",context:i,variables:s.state.variables})})),n.then(function(){return s.executeMutation()}).then(function(i){a=i,s.mutationCache.config.onSuccess==null||s.mutationCache.config.onSuccess(a,s.state.variables,s.state.context,s)}).then(function(){return s.options.onSuccess==null?void 0:s.options.onSuccess(a,s.state.variables,s.state.context)}).then(function(){return s.options.onSettled==null?void 0:s.options.onSettled(a,null,s.state.variables,s.state.context)}).then(function(){return s.dispatch({type:"success",data:a}),a}).catch(function(i){return s.mutationCache.config.onError==null||s.mutationCache.config.onError(i,s.state.variables,s.state.context,s),Us().error(i),Promise.resolve().then(function(){return s.options.onError==null?void 0:s.options.onError(i,s.state.variables,s.state.context)}).then(function(){return s.options.onSettled==null?void 0:s.options.onSettled(void 0,i,s.state.variables,s.state.context)}).then(function(){throw s.dispatch({type:"error",error:i}),i})})},r.executeMutation=function(){var s=this,a;return this.retryer=new Ms({fn:function(){return s.options.mutationFn?s.options.mutationFn(s.state.variables):Promise.reject("No mutationFn found")},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:(a=this.options.retry)!=null?a:0,retryDelay:this.options.retryDelay}),this.retryer.promise},r.dispatch=function(s){var a=this;this.state=Em(this.state,s),Ge.batch(function(){a.observers.forEach(function(m){m.onMutationUpdate(s)}),a.mutationCache.notify(a)})},t}();function xm(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Em(t,r){switch(r.type){case"failed":return Se({},t,{failureCount:t.failureCount+1});case"pause":return Se({},t,{isPaused:!0});case"continue":return Se({},t,{isPaused:!1});case"loading":return Se({},t,{context:r.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:r.variables});case"success":return Se({},t,{data:r.data,error:null,status:"success",isPaused:!1});case"error":return Se({},t,{data:void 0,error:r.error,failureCount:t.failureCount+1,isPaused:!1,status:"error"});case"setState":return Se({},t,r.state);default:return t}}var vm=function(t){Ir(r,t);function r(s){var a;return a=t.call(this)||this,a.config=s||{},a.mutations=[],a.mutationId=0,a}var l=r.prototype;return l.build=function(a,m,n){var i=new ym({mutationCache:this,mutationId:++this.mutationId,options:a.defaultMutationOptions(m),state:n,defaultOptions:m.mutationKey?a.getMutationDefaults(m.mutationKey):void 0,meta:m.meta});return this.add(i),i},l.add=function(a){this.mutations.push(a),this.notify(a)},l.remove=function(a){this.mutations=this.mutations.filter(function(m){return m!==a}),a.cancel(),this.notify(a)},l.clear=function(){var a=this;Ge.batch(function(){a.mutations.forEach(function(m){a.remove(m)})})},l.getAll=function(){return this.mutations},l.find=function(a){return typeof a.exact>"u"&&(a.exact=!0),this.mutations.find(function(m){return Hl(a,m)})},l.findAll=function(a){return this.mutations.filter(function(m){return Hl(a,m)})},l.notify=function(a){var m=this;Ge.batch(function(){m.listeners.forEach(function(n){n(a)})})},l.onFocus=function(){this.resumePausedMutations()},l.onOnline=function(){this.resumePausedMutations()},l.resumePausedMutations=function(){var a=this.mutations.filter(function(m){return m.state.isPaused});return Ge.batch(function(){return a.reduce(function(m,n){return m.then(function(){return n.continue().catch(We)})},Promise.resolve())})},r}(Lr);function wm(){return{onFetch:function(r){r.fetchFn=function(){var l,s,a,m,n,i,b=(l=r.fetchOptions)==null||(s=l.meta)==null?void 0:s.refetchPage,u=(a=r.fetchOptions)==null||(m=a.meta)==null?void 0:m.fetchMore,_=u?.pageParam,o=u?.direction==="forward",f=u?.direction==="backward",h=((n=r.state.data)==null?void 0:n.pages)||[],w=((i=r.state.data)==null?void 0:i.pageParams)||[],g=Is(),p=g?.signal,S=w,E=!1,M=r.options.queryFn||function(){return Promise.reject("Missing queryFn")},I=function(Ne,he,Ee,Re){return S=Re?[he].concat(S):[].concat(S,[he]),Re?[Ee].concat(Ne):[].concat(Ne,[Ee])},B=function(Ne,he,Ee,Re){if(E)return Promise.reject("Cancelled");if(typeof Ee>"u"&&!he&&Ne.length)return Promise.resolve(Ne);var Le={queryKey:r.queryKey,signal:p,pageParam:Ee,meta:r.meta},qe=M(Le),Ke=Promise.resolve(qe).then(function(St){return I(Ne,Ee,St,Re)});if(Ar(qe)){var at=Ke;at.cancel=qe.cancel}return Ke},q;if(!h.length)q=B([]);else if(o){var le=typeof _<"u",F=le?_:Jl(r.options,h);q=B(h,le,F)}else if(f){var C=typeof _<"u",c=C?_:Sm(r.options,h);q=B(h,C,c,!0)}else(function(){S=[];var re=typeof r.options.getNextPageParam>"u",Ne=b&&h[0]?b(h[0],0,h):!0;q=Ne?B([],re,w[0]):Promise.resolve(I([],w[0],h[0]));for(var he=function(Le){q=q.then(function(qe){var Ke=b&&h[Le]?b(h[Le],Le,h):!0;if(Ke){var at=re?w[Le]:Jl(r.options,qe);return B(qe,re,at)}return Promise.resolve(I(qe,w[Le],h[Le]))})},Ee=1;Ee<h.length;Ee++)he(Ee)})();var x=q.then(function(re){return{pages:re,pageParams:S}}),Q=x;return Q.cancel=function(){E=!0,g?.abort(),Ar(q)&&q.cancel()},x}}}}function Jl(t,r){return t.getNextPageParam==null?void 0:t.getNextPageParam(r[r.length-1],r)}function Sm(t,r){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(r[0],r)}var Cm=function(){function t(l){l===void 0&&(l={}),this.queryCache=l.queryCache||new pm,this.mutationCache=l.mutationCache||new vm,this.defaultOptions=l.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var r=t.prototype;return r.mount=function(){var s=this;this.unsubscribeFocus=fr.subscribe(function(){fr.isFocused()&&br.isOnline()&&(s.mutationCache.onFocus(),s.queryCache.onFocus())}),this.unsubscribeOnline=br.subscribe(function(){fr.isFocused()&&br.isOnline()&&(s.mutationCache.onOnline(),s.queryCache.onOnline())})},r.unmount=function(){var s,a;(s=this.unsubscribeFocus)==null||s.call(this),(a=this.unsubscribeOnline)==null||a.call(this)},r.isFetching=function(s,a){var m=Dt(s,a),n=m[0];return n.fetching=!0,this.queryCache.findAll(n).length},r.isMutating=function(s){return this.mutationCache.findAll(Se({},s,{fetching:!0})).length},r.getQueryData=function(s,a){var m;return(m=this.queryCache.find(s,a))==null?void 0:m.state.data},r.getQueriesData=function(s){return this.getQueryCache().findAll(s).map(function(a){var m=a.queryKey,n=a.state,i=n.data;return[m,i]})},r.setQueryData=function(s,a,m){var n=Zr(s),i=this.defaultQueryOptions(n);return this.queryCache.build(this,i).setData(a,m)},r.setQueriesData=function(s,a,m){var n=this;return Ge.batch(function(){return n.getQueryCache().findAll(s).map(function(i){var b=i.queryKey;return[b,n.setQueryData(b,a,m)]})})},r.getQueryState=function(s,a){var m;return(m=this.queryCache.find(s,a))==null?void 0:m.state},r.removeQueries=function(s,a){var m=Dt(s,a),n=m[0],i=this.queryCache;Ge.batch(function(){i.findAll(n).forEach(function(b){i.remove(b)})})},r.resetQueries=function(s,a,m){var n=this,i=Dt(s,a,m),b=i[0],u=i[1],_=this.queryCache,o=Se({},b,{active:!0});return Ge.batch(function(){return _.findAll(b).forEach(function(f){f.reset()}),n.refetchQueries(o,u)})},r.cancelQueries=function(s,a,m){var n=this,i=Dt(s,a,m),b=i[0],u=i[1],_=u===void 0?{}:u;typeof _.revert>"u"&&(_.revert=!0);var o=Ge.batch(function(){return n.queryCache.findAll(b).map(function(f){return f.cancel(_)})});return Promise.all(o).then(We).catch(We)},r.invalidateQueries=function(s,a,m){var n,i,b,u=this,_=Dt(s,a,m),o=_[0],f=_[1],h=Se({},o,{active:(n=(i=o.refetchActive)!=null?i:o.active)!=null?n:!0,inactive:(b=o.refetchInactive)!=null?b:!1});return Ge.batch(function(){return u.queryCache.findAll(o).forEach(function(w){w.invalidate()}),u.refetchQueries(h,f)})},r.refetchQueries=function(s,a,m){var n=this,i=Dt(s,a,m),b=i[0],u=i[1],_=Ge.batch(function(){return n.queryCache.findAll(b).map(function(f){return f.fetch(void 0,Se({},u,{meta:{refetchPage:b?.refetchPage}}))})}),o=Promise.all(_).then(We);return u?.throwOnError||(o=o.catch(We)),o},r.fetchQuery=function(s,a,m){var n=Zr(s,a,m),i=this.defaultQueryOptions(n);typeof i.retry>"u"&&(i.retry=!1);var b=this.queryCache.build(this,i);return b.isStaleByTime(i.staleTime)?b.fetch(i):Promise.resolve(b.state.data)},r.prefetchQuery=function(s,a,m){return this.fetchQuery(s,a,m).then(We).catch(We)},r.fetchInfiniteQuery=function(s,a,m){var n=Zr(s,a,m);return n.behavior=wm(),this.fetchQuery(n)},r.prefetchInfiniteQuery=function(s,a,m){return this.fetchInfiniteQuery(s,a,m).then(We).catch(We)},r.cancelMutations=function(){var s=this,a=Ge.batch(function(){return s.mutationCache.getAll().map(function(m){return m.cancel()})});return Promise.all(a).then(We).catch(We)},r.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},r.executeMutation=function(s){return this.mutationCache.build(this,s).execute()},r.getQueryCache=function(){return this.queryCache},r.getMutationCache=function(){return this.mutationCache},r.getDefaultOptions=function(){return this.defaultOptions},r.setDefaultOptions=function(s){this.defaultOptions=s},r.setQueryDefaults=function(s,a){var m=this.queryDefaults.find(function(n){return It(s)===It(n.queryKey)});m?m.defaultOptions=a:this.queryDefaults.push({queryKey:s,defaultOptions:a})},r.getQueryDefaults=function(s){var a;return s?(a=this.queryDefaults.find(function(m){return Cr(s,m.queryKey)}))==null?void 0:a.defaultOptions:void 0},r.setMutationDefaults=function(s,a){var m=this.mutationDefaults.find(function(n){return It(s)===It(n.mutationKey)});m?m.defaultOptions=a:this.mutationDefaults.push({mutationKey:s,defaultOptions:a})},r.getMutationDefaults=function(s){var a;return s?(a=this.mutationDefaults.find(function(m){return Cr(s,m.mutationKey)}))==null?void 0:a.defaultOptions:void 0},r.defaultQueryOptions=function(s){if(s?._defaulted)return s;var a=Se({},this.defaultOptions.queries,this.getQueryDefaults(s?.queryKey),s,{_defaulted:!0});return!a.queryHash&&a.queryKey&&(a.queryHash=Sl(a.queryKey,a)),a},r.defaultQueryObserverOptions=function(s){return this.defaultQueryOptions(s)},r.defaultMutationOptions=function(s){return s?._defaulted?s:Se({},this.defaultOptions.mutations,this.getMutationDefaults(s?.mutationKey),s,{_defaulted:!0})},r.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},t}(),Am=Ia.unstable_batchedUpdates;Ge.setBatchNotifyFunction(Am);var km=console;hm(km);var Yl=e.createContext(void 0),Pm=e.createContext(!1);function Dm(t){return t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Yl),window.ReactQueryClientContext):Yl}var Rm=function(r){var l=r.client,s=r.contextSharing,a=s===void 0?!1:s,m=r.children;e.useEffect(function(){return l.mount(),function(){l.unmount()}},[l]);var n=Dm(a);return e.createElement(Pm.Provider,{value:a},e.createElement(n.Provider,{value:l},m))};const Fm={},Zl=t=>{let r;const l=new Set,s=(_,o)=>{const f=typeof _=="function"?_(r):_;if(!Object.is(f,r)){const h=r;r=o??(typeof f!="object"||f===null)?f:Object.assign({},r,f),l.forEach(w=>w(r,h))}},a=()=>r,b={setState:s,getState:a,getInitialState:()=>u,subscribe:_=>(l.add(_),()=>l.delete(_)),destroy:()=>{(Fm?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),l.clear()}},u=r=t(s,a,b);return b},Tm=t=>t?Zl(t):Zl;var $s={exports:{}},qs={},Vs={exports:{}},Ks={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zt=P;function Om(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Im=typeof Object.is=="function"?Object.is:Om,Lm=zt.useState,Mm=zt.useEffect,jm=zt.useLayoutEffect,Um=zt.useDebugValue;function $m(t,r){var l=r(),s=Lm({inst:{value:l,getSnapshot:r}}),a=s[0].inst,m=s[1];return jm(function(){a.value=l,a.getSnapshot=r,el(a)&&m({inst:a})},[t,l,r]),Mm(function(){return el(a)&&m({inst:a}),t(function(){el(a)&&m({inst:a})})},[t]),Um(l),l}function el(t){var r=t.getSnapshot;t=t.value;try{var l=r();return!Im(t,l)}catch{return!0}}function qm(t,r){return r()}var Vm=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qm:$m;Ks.useSyncExternalStore=zt.useSyncExternalStore!==void 0?zt.useSyncExternalStore:Vm;Vs.exports=Ks;var Km=Vs.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jr=P,Bm=Km;function Gm(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var zm=typeof Object.is=="function"?Object.is:Gm,Hm=Bm.useSyncExternalStore,Wm=jr.useRef,Qm=jr.useEffect,Jm=jr.useMemo,Ym=jr.useDebugValue;qs.useSyncExternalStoreWithSelector=function(t,r,l,s,a){var m=Wm(null);if(m.current===null){var n={hasValue:!1,value:null};m.current=n}else n=m.current;m=Jm(function(){function b(h){if(!u){if(u=!0,_=h,h=s(h),a!==void 0&&n.hasValue){var w=n.value;if(a(w,h))return o=w}return o=h}if(w=o,zm(_,h))return w;var g=s(h);return a!==void 0&&a(w,g)?(_=h,w):(_=h,o=g)}var u=!1,_,o,f=l===void 0?null:l;return[function(){return b(r())},f===null?void 0:function(){return b(f())}]},[r,l,s,a]);var i=Hm(t,m[0],m[1]);return Qm(function(){n.hasValue=!0,n.value=i},[i]),Ym(i),i};$s.exports=qs;var Zm=$s.exports;const Xm=La(Zm),Bs={},{useDebugValue:en}=e,{useSyncExternalStoreWithSelector:tn}=Xm;let Xl=!1;const rn=t=>t;function ln(t,r=rn,l){(Bs?"production":void 0)!=="production"&&l&&!Xl&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Xl=!0);const s=tn(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,l);return en(s),s}const sn=t=>{(Bs?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const r=typeof t=="function"?Tm(t):t,l=(s,a)=>ln(r,s,a);return Object.assign(l,r),l},Gs=t=>sn,an={};function mn(t,r){let l;try{l=t()}catch{return}return{getItem:a=>{var m;const n=b=>b===null?null:JSON.parse(b,void 0),i=(m=l.getItem(a))!=null?m:null;return i instanceof Promise?i.then(n):n(i)},setItem:(a,m)=>l.setItem(a,JSON.stringify(m,void 0)),removeItem:a=>l.removeItem(a)}}const sr=t=>r=>{try{const l=t(r);return l instanceof Promise?l:{then(s){return sr(s)(l)},catch(s){return this}}}catch(l){return{then(s){return this},catch(s){return sr(s)(l)}}}},nn=(t,r)=>(l,s,a)=>{let m={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:p=>p,version:0,merge:(p,S)=>({...S,...p}),...r},n=!1;const i=new Set,b=new Set;let u;try{u=m.getStorage()}catch{}if(!u)return t((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${m.name}', the given storage is currently unavailable.`),l(...p)},s,a);const _=sr(m.serialize),o=()=>{const p=m.partialize({...s()});let S;const E=_({state:p,version:m.version}).then(M=>u.setItem(m.name,M)).catch(M=>{S=M});if(S)throw S;return E},f=a.setState;a.setState=(p,S)=>{f(p,S),o()};const h=t((...p)=>{l(...p),o()},s,a);let w;const g=()=>{var p;if(!u)return;n=!1,i.forEach(E=>E(s()));const S=((p=m.onRehydrateStorage)==null?void 0:p.call(m,s()))||void 0;return sr(u.getItem.bind(u))(m.name).then(E=>{if(E)return m.deserialize(E)}).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==m.version){if(m.migrate)return m.migrate(E.state,E.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return E.state}).then(E=>{var M;return w=m.merge(E,(M=s())!=null?M:h),l(w,!0),o()}).then(()=>{S?.(w,void 0),n=!0,b.forEach(E=>E(w))}).catch(E=>{S?.(void 0,E)})};return a.persist={setOptions:p=>{m={...m,...p},p.getStorage&&(u=p.getStorage())},clearStorage:()=>{u?.removeItem(m.name)},getOptions:()=>m,rehydrate:()=>g(),hasHydrated:()=>n,onHydrate:p=>(i.add(p),()=>{i.delete(p)}),onFinishHydration:p=>(b.add(p),()=>{b.delete(p)})},g(),w||h},un=(t,r)=>(l,s,a)=>{let m={storage:mn(()=>localStorage),partialize:g=>g,version:0,merge:(g,p)=>({...p,...g}),...r},n=!1;const i=new Set,b=new Set;let u=m.storage;if(!u)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${m.name}', the given storage is currently unavailable.`),l(...g)},s,a);const _=()=>{const g=m.partialize({...s()});return u.setItem(m.name,{state:g,version:m.version})},o=a.setState;a.setState=(g,p)=>{o(g,p),_()};const f=t((...g)=>{l(...g),_()},s,a);a.getInitialState=()=>f;let h;const w=()=>{var g,p;if(!u)return;n=!1,i.forEach(E=>{var M;return E((M=s())!=null?M:f)});const S=((p=m.onRehydrateStorage)==null?void 0:p.call(m,(g=s())!=null?g:f))||void 0;return sr(u.getItem.bind(u))(m.name).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==m.version){if(m.migrate)return[!0,m.migrate(E.state,E.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,E.state];return[!1,void 0]}).then(E=>{var M;const[I,B]=E;if(h=m.merge(B,(M=s())!=null?M:f),l(h,!0),I)return _()}).then(()=>{S?.(h,void 0),h=s(),n=!0,b.forEach(E=>E(h))}).catch(E=>{S?.(void 0,E)})};return a.persist={setOptions:g=>{m={...m,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u?.removeItem(m.name)},getOptions:()=>m,rehydrate:()=>w(),hasHydrated:()=>n,onHydrate:g=>(i.add(g),()=>{i.delete(g)}),onFinishHydration:g=>(b.add(g),()=>{b.delete(g)})},m.skipHydration||w(),h||f},on=(t,r)=>"getStorage"in r||"serialize"in r||"deserialize"in r?((an?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),nn(t,r)):un(t,r),zs=on;function Hs(t,r){return function(){return t.apply(r,arguments)}}const{toString:cn}=Object.prototype,{getPrototypeOf:Cl}=Object,{iterator:Ur,toStringTag:Ws}=Symbol,$r=(t=>r=>{const l=cn.call(r);return t[l]||(t[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),Nt=t=>(t=t.toLowerCase(),r=>$r(r)===t),qr=t=>r=>typeof r===t,{isArray:Ht}=Array,ar=qr("undefined");function ir(t){return t!==null&&!ar(t)&&t.constructor!==null&&!ar(t.constructor)&&rt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Qs=Nt("ArrayBuffer");function _n(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&Qs(t.buffer),r}const Nn=qr("string"),rt=qr("function"),Js=qr("number"),ur=t=>t!==null&&typeof t=="object",fn=t=>t===!0||t===!1,dr=t=>{if($r(t)!=="object")return!1;const r=Cl(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Ws in t)&&!(Ur in t)},bn=t=>{if(!ur(t)||ir(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},dn=Nt("Date"),hn=Nt("File"),gn=Nt("Blob"),pn=Nt("FileList"),yn=t=>ur(t)&&rt(t.pipe),xn=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||rt(t.append)&&((r=$r(t))==="formdata"||r==="object"&&rt(t.toString)&&t.toString()==="[object FormData]"))},En=Nt("URLSearchParams"),[vn,wn,Sn,Cn]=["ReadableStream","Request","Response","Headers"].map(Nt),An=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function or(t,r,{allOwnKeys:l=!1}={}){if(t===null||typeof t>"u")return;let s,a;if(typeof t!="object"&&(t=[t]),Ht(t))for(s=0,a=t.length;s<a;s++)r.call(null,t[s],s,t);else{if(ir(t))return;const m=l?Object.getOwnPropertyNames(t):Object.keys(t),n=m.length;let i;for(s=0;s<n;s++)i=m[s],r.call(null,t[i],i,t)}}function Ys(t,r){if(ir(t))return null;r=r.toLowerCase();const l=Object.keys(t);let s=l.length,a;for(;s-- >0;)if(a=l[s],r===a.toLowerCase())return a;return null}const Lt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Zs=t=>!ar(t)&&t!==Lt;function Nl(){const{caseless:t}=Zs(this)&&this||{},r={},l=(s,a)=>{const m=t&&Ys(r,a)||a;dr(r[m])&&dr(s)?r[m]=Nl(r[m],s):dr(s)?r[m]=Nl({},s):Ht(s)?r[m]=s.slice():r[m]=s};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&or(arguments[s],l);return r}const kn=(t,r,l,{allOwnKeys:s}={})=>(or(r,(a,m)=>{l&&rt(a)?t[m]=Hs(a,l):t[m]=a},{allOwnKeys:s}),t),Pn=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Dn=(t,r,l,s)=>{t.prototype=Object.create(r.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),l&&Object.assign(t.prototype,l)},Rn=(t,r,l,s)=>{let a,m,n;const i={};if(r=r||{},t==null)return r;do{for(a=Object.getOwnPropertyNames(t),m=a.length;m-- >0;)n=a[m],(!s||s(n,t,r))&&!i[n]&&(r[n]=t[n],i[n]=!0);t=l!==!1&&Cl(t)}while(t&&(!l||l(t,r))&&t!==Object.prototype);return r},Fn=(t,r,l)=>{t=String(t),(l===void 0||l>t.length)&&(l=t.length),l-=r.length;const s=t.indexOf(r,l);return s!==-1&&s===l},Tn=t=>{if(!t)return null;if(Ht(t))return t;let r=t.length;if(!Js(r))return null;const l=new Array(r);for(;r-- >0;)l[r]=t[r];return l},On=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&Cl(Uint8Array)),In=(t,r)=>{const s=(t&&t[Ur]).call(t);let a;for(;(a=s.next())&&!a.done;){const m=a.value;r.call(t,m[0],m[1])}},Ln=(t,r)=>{let l;const s=[];for(;(l=t.exec(r))!==null;)s.push(l);return s},Mn=Nt("HTMLFormElement"),jn=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,s,a){return s.toUpperCase()+a}),es=(({hasOwnProperty:t})=>(r,l)=>t.call(r,l))(Object.prototype),Un=Nt("RegExp"),Xs=(t,r)=>{const l=Object.getOwnPropertyDescriptors(t),s={};or(l,(a,m)=>{let n;(n=r(a,m,t))!==!1&&(s[m]=n||a)}),Object.defineProperties(t,s)},$n=t=>{Xs(t,(r,l)=>{if(rt(t)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const s=t[l];if(rt(s)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},qn=(t,r)=>{const l={},s=a=>{a.forEach(m=>{l[m]=!0})};return Ht(t)?s(t):s(String(t).split(r)),l},Vn=()=>{},Kn=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function Bn(t){return!!(t&&rt(t.append)&&t[Ws]==="FormData"&&t[Ur])}const Gn=t=>{const r=new Array(10),l=(s,a)=>{if(ur(s)){if(r.indexOf(s)>=0)return;if(ir(s))return s;if(!("toJSON"in s)){r[a]=s;const m=Ht(s)?[]:{};return or(s,(n,i)=>{const b=l(n,a+1);!ar(b)&&(m[i]=b)}),r[a]=void 0,m}}return s};return l(t,0)},zn=Nt("AsyncFunction"),Hn=t=>t&&(ur(t)||rt(t))&&rt(t.then)&&rt(t.catch),ea=((t,r)=>t?setImmediate:r?((l,s)=>(Lt.addEventListener("message",({source:a,data:m})=>{a===Lt&&m===l&&s.length&&s.shift()()},!1),a=>{s.push(a),Lt.postMessage(l,"*")}))(`axios@${Math.random()}`,[]):l=>setTimeout(l))(typeof setImmediate=="function",rt(Lt.postMessage)),Wn=typeof queueMicrotask<"u"?queueMicrotask.bind(Lt):typeof process<"u"&&process.nextTick||ea,Qn=t=>t!=null&&rt(t[Ur]),j={isArray:Ht,isArrayBuffer:Qs,isBuffer:ir,isFormData:xn,isArrayBufferView:_n,isString:Nn,isNumber:Js,isBoolean:fn,isObject:ur,isPlainObject:dr,isEmptyObject:bn,isReadableStream:vn,isRequest:wn,isResponse:Sn,isHeaders:Cn,isUndefined:ar,isDate:dn,isFile:hn,isBlob:gn,isRegExp:Un,isFunction:rt,isStream:yn,isURLSearchParams:En,isTypedArray:On,isFileList:pn,forEach:or,merge:Nl,extend:kn,trim:An,stripBOM:Pn,inherits:Dn,toFlatObject:Rn,kindOf:$r,kindOfTest:Nt,endsWith:Fn,toArray:Tn,forEachEntry:In,matchAll:Ln,isHTMLForm:Mn,hasOwnProperty:es,hasOwnProp:es,reduceDescriptors:Xs,freezeMethods:$n,toObjectSet:qn,toCamelCase:jn,noop:Vn,toFiniteNumber:Kn,findKey:Ys,global:Lt,isContextDefined:Zs,isSpecCompliantForm:Bn,toJSONObject:Gn,isAsyncFn:zn,isThenable:Hn,setImmediate:ea,asap:Wn,isIterable:Qn};function de(t,r,l,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),l&&(this.config=l),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}j.inherits(de,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:j.toJSONObject(this.config),code:this.code,status:this.status}}});const ta=de.prototype,ra={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ra[t]={value:t}});Object.defineProperties(de,ra);Object.defineProperty(ta,"isAxiosError",{value:!0});de.from=(t,r,l,s,a,m)=>{const n=Object.create(ta);return j.toFlatObject(t,n,function(b){return b!==Error.prototype},i=>i!=="isAxiosError"),de.call(n,t.message,r,l,s,a),n.cause=t,n.name=t.name,m&&Object.assign(n,m),n};const Jn=null;function fl(t){return j.isPlainObject(t)||j.isArray(t)}function la(t){return j.endsWith(t,"[]")?t.slice(0,-2):t}function ts(t,r,l){return t?t.concat(r).map(function(a,m){return a=la(a),!l&&m?"["+a+"]":a}).join(l?".":""):r}function Yn(t){return j.isArray(t)&&!t.some(fl)}const Zn=j.toFlatObject(j,{},null,function(r){return/^is[A-Z]/.test(r)});function Vr(t,r,l){if(!j.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,l=j.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,p){return!j.isUndefined(p[g])});const s=l.metaTokens,a=l.visitor||_,m=l.dots,n=l.indexes,b=(l.Blob||typeof Blob<"u"&&Blob)&&j.isSpecCompliantForm(r);if(!j.isFunction(a))throw new TypeError("visitor must be a function");function u(w){if(w===null)return"";if(j.isDate(w))return w.toISOString();if(j.isBoolean(w))return w.toString();if(!b&&j.isBlob(w))throw new de("Blob is not supported. Use a Buffer instead.");return j.isArrayBuffer(w)||j.isTypedArray(w)?b&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function _(w,g,p){let S=w;if(w&&!p&&typeof w=="object"){if(j.endsWith(g,"{}"))g=s?g:g.slice(0,-2),w=JSON.stringify(w);else if(j.isArray(w)&&Yn(w)||(j.isFileList(w)||j.endsWith(g,"[]"))&&(S=j.toArray(w)))return g=la(g),S.forEach(function(M,I){!(j.isUndefined(M)||M===null)&&r.append(n===!0?ts([g],I,m):n===null?g:g+"[]",u(M))}),!1}return fl(w)?!0:(r.append(ts(p,g,m),u(w)),!1)}const o=[],f=Object.assign(Zn,{defaultVisitor:_,convertValue:u,isVisitable:fl});function h(w,g){if(!j.isUndefined(w)){if(o.indexOf(w)!==-1)throw Error("Circular reference detected in "+g.join("."));o.push(w),j.forEach(w,function(S,E){(!(j.isUndefined(S)||S===null)&&a.call(r,S,j.isString(E)?E.trim():E,g,f))===!0&&h(S,g?g.concat(E):[E])}),o.pop()}}if(!j.isObject(t))throw new TypeError("data must be an object");return h(t),r}function rs(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return r[s]})}function Al(t,r){this._pairs=[],t&&Vr(t,this,r)}const sa=Al.prototype;sa.append=function(r,l){this._pairs.push([r,l])};sa.toString=function(r){const l=r?function(s){return r.call(this,s,rs)}:rs;return this._pairs.map(function(a){return l(a[0])+"="+l(a[1])},"").join("&")};function Xn(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function aa(t,r,l){if(!r)return t;const s=l&&l.encode||Xn;j.isFunction(l)&&(l={serialize:l});const a=l&&l.serialize;let m;if(a?m=a(r,l):m=j.isURLSearchParams(r)?r.toString():new Al(r,l).toString(s),m){const n=t.indexOf("#");n!==-1&&(t=t.slice(0,n)),t+=(t.indexOf("?")===-1?"?":"&")+m}return t}class ls{constructor(){this.handlers=[]}use(r,l,s){return this.handlers.push({fulfilled:r,rejected:l,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){j.forEach(this.handlers,function(s){s!==null&&r(s)})}}const ma={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ei=typeof URLSearchParams<"u"?URLSearchParams:Al,ti=typeof FormData<"u"?FormData:null,ri=typeof Blob<"u"?Blob:null,li={isBrowser:!0,classes:{URLSearchParams:ei,FormData:ti,Blob:ri},protocols:["http","https","file","blob","url","data"]},kl=typeof window<"u"&&typeof document<"u",bl=typeof navigator=="object"&&navigator||void 0,si=kl&&(!bl||["ReactNative","NativeScript","NS"].indexOf(bl.product)<0),ai=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mi=kl&&window.location.href||"http://localhost",ni=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:kl,hasStandardBrowserEnv:si,hasStandardBrowserWebWorkerEnv:ai,navigator:bl,origin:mi},Symbol.toStringTag,{value:"Module"})),ze={...ni,...li};function ii(t,r){return Vr(t,new ze.classes.URLSearchParams,{visitor:function(l,s,a,m){return ze.isNode&&j.isBuffer(l)?(this.append(s,l.toString("base64")),!1):m.defaultVisitor.apply(this,arguments)},...r})}function ui(t){return j.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function oi(t){const r={},l=Object.keys(t);let s;const a=l.length;let m;for(s=0;s<a;s++)m=l[s],r[m]=t[m];return r}function na(t){function r(l,s,a,m){let n=l[m++];if(n==="__proto__")return!0;const i=Number.isFinite(+n),b=m>=l.length;return n=!n&&j.isArray(a)?a.length:n,b?(j.hasOwnProp(a,n)?a[n]=[a[n],s]:a[n]=s,!i):((!a[n]||!j.isObject(a[n]))&&(a[n]=[]),r(l,s,a[n],m)&&j.isArray(a[n])&&(a[n]=oi(a[n])),!i)}if(j.isFormData(t)&&j.isFunction(t.entries)){const l={};return j.forEachEntry(t,(s,a)=>{r(ui(s),a,l,0)}),l}return null}function ci(t,r,l){if(j.isString(t))try{return(r||JSON.parse)(t),j.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(l||JSON.stringify)(t)}const cr={transitional:ma,adapter:["xhr","http","fetch"],transformRequest:[function(r,l){const s=l.getContentType()||"",a=s.indexOf("application/json")>-1,m=j.isObject(r);if(m&&j.isHTMLForm(r)&&(r=new FormData(r)),j.isFormData(r))return a?JSON.stringify(na(r)):r;if(j.isArrayBuffer(r)||j.isBuffer(r)||j.isStream(r)||j.isFile(r)||j.isBlob(r)||j.isReadableStream(r))return r;if(j.isArrayBufferView(r))return r.buffer;if(j.isURLSearchParams(r))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let i;if(m){if(s.indexOf("application/x-www-form-urlencoded")>-1)return ii(r,this.formSerializer).toString();if((i=j.isFileList(r))||s.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return Vr(i?{"files[]":r}:r,b&&new b,this.formSerializer)}}return m||a?(l.setContentType("application/json",!1),ci(r)):r}],transformResponse:[function(r){const l=this.transitional||cr.transitional,s=l&&l.forcedJSONParsing,a=this.responseType==="json";if(j.isResponse(r)||j.isReadableStream(r))return r;if(r&&j.isString(r)&&(s&&!this.responseType||a)){const n=!(l&&l.silentJSONParsing)&&a;try{return JSON.parse(r)}catch(i){if(n)throw i.name==="SyntaxError"?de.from(i,de.ERR_BAD_RESPONSE,this,null,this.response):i}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ze.classes.FormData,Blob:ze.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};j.forEach(["delete","get","head","post","put","patch"],t=>{cr.headers[t]={}});const _i=j.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ni=t=>{const r={};let l,s,a;return t&&t.split(`
`).forEach(function(n){a=n.indexOf(":"),l=n.substring(0,a).trim().toLowerCase(),s=n.substring(a+1).trim(),!(!l||r[l]&&_i[l])&&(l==="set-cookie"?r[l]?r[l].push(s):r[l]=[s]:r[l]=r[l]?r[l]+", "+s:s)}),r},ss=Symbol("internals");function Jt(t){return t&&String(t).trim().toLowerCase()}function hr(t){return t===!1||t==null?t:j.isArray(t)?t.map(hr):String(t)}function fi(t){const r=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=l.exec(t);)r[s[1]]=s[2];return r}const bi=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function tl(t,r,l,s,a){if(j.isFunction(s))return s.call(this,r,l);if(a&&(r=l),!!j.isString(r)){if(j.isString(s))return r.indexOf(s)!==-1;if(j.isRegExp(s))return s.test(r)}}function di(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,l,s)=>l.toUpperCase()+s)}function hi(t,r){const l=j.toCamelCase(" "+r);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+l,{value:function(a,m,n){return this[s].call(this,r,a,m,n)},configurable:!0})})}let lt=class{constructor(r){r&&this.set(r)}set(r,l,s){const a=this;function m(i,b,u){const _=Jt(b);if(!_)throw new Error("header name must be a non-empty string");const o=j.findKey(a,_);(!o||a[o]===void 0||u===!0||u===void 0&&a[o]!==!1)&&(a[o||b]=hr(i))}const n=(i,b)=>j.forEach(i,(u,_)=>m(u,_,b));if(j.isPlainObject(r)||r instanceof this.constructor)n(r,l);else if(j.isString(r)&&(r=r.trim())&&!bi(r))n(Ni(r),l);else if(j.isObject(r)&&j.isIterable(r)){let i={},b,u;for(const _ of r){if(!j.isArray(_))throw TypeError("Object iterator must return a key-value pair");i[u=_[0]]=(b=i[u])?j.isArray(b)?[...b,_[1]]:[b,_[1]]:_[1]}n(i,l)}else r!=null&&m(l,r,s);return this}get(r,l){if(r=Jt(r),r){const s=j.findKey(this,r);if(s){const a=this[s];if(!l)return a;if(l===!0)return fi(a);if(j.isFunction(l))return l.call(this,a,s);if(j.isRegExp(l))return l.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,l){if(r=Jt(r),r){const s=j.findKey(this,r);return!!(s&&this[s]!==void 0&&(!l||tl(this,this[s],s,l)))}return!1}delete(r,l){const s=this;let a=!1;function m(n){if(n=Jt(n),n){const i=j.findKey(s,n);i&&(!l||tl(s,s[i],i,l))&&(delete s[i],a=!0)}}return j.isArray(r)?r.forEach(m):m(r),a}clear(r){const l=Object.keys(this);let s=l.length,a=!1;for(;s--;){const m=l[s];(!r||tl(this,this[m],m,r,!0))&&(delete this[m],a=!0)}return a}normalize(r){const l=this,s={};return j.forEach(this,(a,m)=>{const n=j.findKey(s,m);if(n){l[n]=hr(a),delete l[m];return}const i=r?di(m):String(m).trim();i!==m&&delete l[m],l[i]=hr(a),s[i]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const l=Object.create(null);return j.forEach(this,(s,a)=>{s!=null&&s!==!1&&(l[a]=r&&j.isArray(s)?s.join(", "):s)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,l])=>r+": "+l).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...l){const s=new this(r);return l.forEach(a=>s.set(a)),s}static accessor(r){const s=(this[ss]=this[ss]={accessors:{}}).accessors,a=this.prototype;function m(n){const i=Jt(n);s[i]||(hi(a,n),s[i]=!0)}return j.isArray(r)?r.forEach(m):m(r),this}};lt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);j.reduceDescriptors(lt.prototype,({value:t},r)=>{let l=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(s){this[l]=s}}});j.freezeMethods(lt);function rl(t,r){const l=this||cr,s=r||l,a=lt.from(s.headers);let m=s.data;return j.forEach(t,function(i){m=i.call(l,m,a.normalize(),r?r.status:void 0)}),a.normalize(),m}function ia(t){return!!(t&&t.__CANCEL__)}function Wt(t,r,l){de.call(this,t??"canceled",de.ERR_CANCELED,r,l),this.name="CanceledError"}j.inherits(Wt,de,{__CANCEL__:!0});function ua(t,r,l){const s=l.config.validateStatus;!l.status||!s||s(l.status)?t(l):r(new de("Request failed with status code "+l.status,[de.ERR_BAD_REQUEST,de.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}function gi(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function pi(t,r){t=t||10;const l=new Array(t),s=new Array(t);let a=0,m=0,n;return r=r!==void 0?r:1e3,function(b){const u=Date.now(),_=s[m];n||(n=u),l[a]=b,s[a]=u;let o=m,f=0;for(;o!==a;)f+=l[o++],o=o%t;if(a=(a+1)%t,a===m&&(m=(m+1)%t),u-n<r)return;const h=_&&u-_;return h?Math.round(f*1e3/h):void 0}}function yi(t,r){let l=0,s=1e3/r,a,m;const n=(u,_=Date.now())=>{l=_,a=null,m&&(clearTimeout(m),m=null),t(...u)};return[(...u)=>{const _=Date.now(),o=_-l;o>=s?n(u,_):(a=u,m||(m=setTimeout(()=>{m=null,n(a)},s-o)))},()=>a&&n(a)]}const kr=(t,r,l=3)=>{let s=0;const a=pi(50,250);return yi(m=>{const n=m.loaded,i=m.lengthComputable?m.total:void 0,b=n-s,u=a(b),_=n<=i;s=n;const o={loaded:n,total:i,progress:i?n/i:void 0,bytes:b,rate:u||void 0,estimated:u&&i&&_?(i-n)/u:void 0,event:m,lengthComputable:i!=null,[r?"download":"upload"]:!0};t(o)},l)},as=(t,r)=>{const l=t!=null;return[s=>r[0]({lengthComputable:l,total:t,loaded:s}),r[1]]},ms=t=>(...r)=>j.asap(()=>t(...r)),xi=ze.hasStandardBrowserEnv?((t,r)=>l=>(l=new URL(l,ze.origin),t.protocol===l.protocol&&t.host===l.host&&(r||t.port===l.port)))(new URL(ze.origin),ze.navigator&&/(msie|trident)/i.test(ze.navigator.userAgent)):()=>!0,Ei=ze.hasStandardBrowserEnv?{write(t,r,l,s,a,m){const n=[t+"="+encodeURIComponent(r)];j.isNumber(l)&&n.push("expires="+new Date(l).toGMTString()),j.isString(s)&&n.push("path="+s),j.isString(a)&&n.push("domain="+a),m===!0&&n.push("secure"),document.cookie=n.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function vi(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function wi(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function oa(t,r,l){let s=!vi(r);return t&&(s||l==!1)?wi(t,r):r}const ns=t=>t instanceof lt?{...t}:t;function Vt(t,r){r=r||{};const l={};function s(u,_,o,f){return j.isPlainObject(u)&&j.isPlainObject(_)?j.merge.call({caseless:f},u,_):j.isPlainObject(_)?j.merge({},_):j.isArray(_)?_.slice():_}function a(u,_,o,f){if(j.isUndefined(_)){if(!j.isUndefined(u))return s(void 0,u,o,f)}else return s(u,_,o,f)}function m(u,_){if(!j.isUndefined(_))return s(void 0,_)}function n(u,_){if(j.isUndefined(_)){if(!j.isUndefined(u))return s(void 0,u)}else return s(void 0,_)}function i(u,_,o){if(o in r)return s(u,_);if(o in t)return s(void 0,u)}const b={url:m,method:m,data:m,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:i,headers:(u,_,o)=>a(ns(u),ns(_),o,!0)};return j.forEach(Object.keys({...t,...r}),function(_){const o=b[_]||a,f=o(t[_],r[_],_);j.isUndefined(f)&&o!==i||(l[_]=f)}),l}const ca=t=>{const r=Vt({},t);let{data:l,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:m,headers:n,auth:i}=r;r.headers=n=lt.from(n),r.url=aa(oa(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),i&&n.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let b;if(j.isFormData(l)){if(ze.hasStandardBrowserEnv||ze.hasStandardBrowserWebWorkerEnv)n.setContentType(void 0);else if((b=n.getContentType())!==!1){const[u,..._]=b?b.split(";").map(o=>o.trim()).filter(Boolean):[];n.setContentType([u||"multipart/form-data",..._].join("; "))}}if(ze.hasStandardBrowserEnv&&(s&&j.isFunction(s)&&(s=s(r)),s||s!==!1&&xi(r.url))){const u=a&&m&&Ei.read(m);u&&n.set(a,u)}return r},Si=typeof XMLHttpRequest<"u",Ci=Si&&function(t){return new Promise(function(l,s){const a=ca(t);let m=a.data;const n=lt.from(a.headers).normalize();let{responseType:i,onUploadProgress:b,onDownloadProgress:u}=a,_,o,f,h,w;function g(){h&&h(),w&&w(),a.cancelToken&&a.cancelToken.unsubscribe(_),a.signal&&a.signal.removeEventListener("abort",_)}let p=new XMLHttpRequest;p.open(a.method.toUpperCase(),a.url,!0),p.timeout=a.timeout;function S(){if(!p)return;const M=lt.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),B={data:!i||i==="text"||i==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:M,config:t,request:p};ua(function(le){l(le),g()},function(le){s(le),g()},B),p=null}"onloadend"in p?p.onloadend=S:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(S)},p.onabort=function(){p&&(s(new de("Request aborted",de.ECONNABORTED,t,p)),p=null)},p.onerror=function(){s(new de("Network Error",de.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let I=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const B=a.transitional||ma;a.timeoutErrorMessage&&(I=a.timeoutErrorMessage),s(new de(I,B.clarifyTimeoutError?de.ETIMEDOUT:de.ECONNABORTED,t,p)),p=null},m===void 0&&n.setContentType(null),"setRequestHeader"in p&&j.forEach(n.toJSON(),function(I,B){p.setRequestHeader(B,I)}),j.isUndefined(a.withCredentials)||(p.withCredentials=!!a.withCredentials),i&&i!=="json"&&(p.responseType=a.responseType),u&&([f,w]=kr(u,!0),p.addEventListener("progress",f)),b&&p.upload&&([o,h]=kr(b),p.upload.addEventListener("progress",o),p.upload.addEventListener("loadend",h)),(a.cancelToken||a.signal)&&(_=M=>{p&&(s(!M||M.type?new Wt(null,t,p):M),p.abort(),p=null)},a.cancelToken&&a.cancelToken.subscribe(_),a.signal&&(a.signal.aborted?_():a.signal.addEventListener("abort",_)));const E=gi(a.url);if(E&&ze.protocols.indexOf(E)===-1){s(new de("Unsupported protocol "+E+":",de.ERR_BAD_REQUEST,t));return}p.send(m||null)})},Ai=(t,r)=>{const{length:l}=t=t?t.filter(Boolean):[];if(r||l){let s=new AbortController,a;const m=function(u){if(!a){a=!0,i();const _=u instanceof Error?u:this.reason;s.abort(_ instanceof de?_:new Wt(_ instanceof Error?_.message:_))}};let n=r&&setTimeout(()=>{n=null,m(new de(`timeout ${r} of ms exceeded`,de.ETIMEDOUT))},r);const i=()=>{t&&(n&&clearTimeout(n),n=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(m):u.removeEventListener("abort",m)}),t=null)};t.forEach(u=>u.addEventListener("abort",m));const{signal:b}=s;return b.unsubscribe=()=>j.asap(i),b}},ki=function*(t,r){let l=t.byteLength;if(l<r){yield t;return}let s=0,a;for(;s<l;)a=s+r,yield t.slice(s,a),s=a},Pi=async function*(t,r){for await(const l of Di(t))yield*ki(l,r)},Di=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:l,value:s}=await r.read();if(l)break;yield s}}finally{await r.cancel()}},is=(t,r,l,s)=>{const a=Pi(t,r);let m=0,n,i=b=>{n||(n=!0,s&&s(b))};return new ReadableStream({async pull(b){try{const{done:u,value:_}=await a.next();if(u){i(),b.close();return}let o=_.byteLength;if(l){let f=m+=o;l(f)}b.enqueue(new Uint8Array(_))}catch(u){throw i(u),u}},cancel(b){return i(b),a.return()}},{highWaterMark:2})},Kr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",_a=Kr&&typeof ReadableStream=="function",Ri=Kr&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Na=(t,...r)=>{try{return!!t(...r)}catch{return!1}},Fi=_a&&Na(()=>{let t=!1;const r=new Request(ze.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),us=64*1024,dl=_a&&Na(()=>j.isReadableStream(new Response("").body)),Pr={stream:dl&&(t=>t.body)};Kr&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Pr[r]&&(Pr[r]=j.isFunction(t[r])?l=>l[r]():(l,s)=>{throw new de(`Response type '${r}' is not supported`,de.ERR_NOT_SUPPORT,s)})})})(new Response);const Ti=async t=>{if(t==null)return 0;if(j.isBlob(t))return t.size;if(j.isSpecCompliantForm(t))return(await new Request(ze.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(j.isArrayBufferView(t)||j.isArrayBuffer(t))return t.byteLength;if(j.isURLSearchParams(t)&&(t=t+""),j.isString(t))return(await Ri(t)).byteLength},Oi=async(t,r)=>{const l=j.toFiniteNumber(t.getContentLength());return l??Ti(r)},Ii=Kr&&(async t=>{let{url:r,method:l,data:s,signal:a,cancelToken:m,timeout:n,onDownloadProgress:i,onUploadProgress:b,responseType:u,headers:_,withCredentials:o="same-origin",fetchOptions:f}=ca(t);u=u?(u+"").toLowerCase():"text";let h=Ai([a,m&&m.toAbortSignal()],n),w;const g=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let p;try{if(b&&Fi&&l!=="get"&&l!=="head"&&(p=await Oi(_,s))!==0){let B=new Request(r,{method:"POST",body:s,duplex:"half"}),q;if(j.isFormData(s)&&(q=B.headers.get("content-type"))&&_.setContentType(q),B.body){const[le,F]=as(p,kr(ms(b)));s=is(B.body,us,le,F)}}j.isString(o)||(o=o?"include":"omit");const S="credentials"in Request.prototype;w=new Request(r,{...f,signal:h,method:l.toUpperCase(),headers:_.normalize().toJSON(),body:s,duplex:"half",credentials:S?o:void 0});let E=await fetch(w,f);const M=dl&&(u==="stream"||u==="response");if(dl&&(i||M&&g)){const B={};["status","statusText","headers"].forEach(C=>{B[C]=E[C]});const q=j.toFiniteNumber(E.headers.get("content-length")),[le,F]=i&&as(q,kr(ms(i),!0))||[];E=new Response(is(E.body,us,le,()=>{F&&F(),g&&g()}),B)}u=u||"text";let I=await Pr[j.findKey(Pr,u)||"text"](E,t);return!M&&g&&g(),await new Promise((B,q)=>{ua(B,q,{data:I,headers:lt.from(E.headers),status:E.status,statusText:E.statusText,config:t,request:w})})}catch(S){throw g&&g(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new de("Network Error",de.ERR_NETWORK,t,w),{cause:S.cause||S}):de.from(S,S&&S.code,t,w)}}),hl={http:Jn,xhr:Ci,fetch:Ii};j.forEach(hl,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const os=t=>`- ${t}`,Li=t=>j.isFunction(t)||t===null||t===!1,fa={getAdapter:t=>{t=j.isArray(t)?t:[t];const{length:r}=t;let l,s;const a={};for(let m=0;m<r;m++){l=t[m];let n;if(s=l,!Li(l)&&(s=hl[(n=String(l)).toLowerCase()],s===void 0))throw new de(`Unknown adapter '${n}'`);if(s)break;a[n||"#"+m]=s}if(!s){const m=Object.entries(a).map(([i,b])=>`adapter ${i} `+(b===!1?"is not supported by the environment":"is not available in the build"));let n=r?m.length>1?`since :
`+m.map(os).join(`
`):" "+os(m[0]):"as no adapter specified";throw new de("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return s},adapters:hl};function ll(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Wt(null,t)}function cs(t){return ll(t),t.headers=lt.from(t.headers),t.data=rl.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),fa.getAdapter(t.adapter||cr.adapter)(t).then(function(s){return ll(t),s.data=rl.call(t,t.transformResponse,s),s.headers=lt.from(s.headers),s},function(s){return ia(s)||(ll(t),s&&s.response&&(s.response.data=rl.call(t,t.transformResponse,s.response),s.response.headers=lt.from(s.response.headers))),Promise.reject(s)})}const ba="1.11.0",Br={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{Br[t]=function(s){return typeof s===t||"a"+(r<1?"n ":" ")+t}});const _s={};Br.transitional=function(r,l,s){function a(m,n){return"[Axios v"+ba+"] Transitional option '"+m+"'"+n+(s?". "+s:"")}return(m,n,i)=>{if(r===!1)throw new de(a(n," has been removed"+(l?" in "+l:"")),de.ERR_DEPRECATED);return l&&!_s[n]&&(_s[n]=!0,console.warn(a(n," has been deprecated since v"+l+" and will be removed in the near future"))),r?r(m,n,i):!0}};Br.spelling=function(r){return(l,s)=>(console.warn(`${s} is likely a misspelling of ${r}`),!0)};function Mi(t,r,l){if(typeof t!="object")throw new de("options must be an object",de.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let a=s.length;for(;a-- >0;){const m=s[a],n=r[m];if(n){const i=t[m],b=i===void 0||n(i,m,t);if(b!==!0)throw new de("option "+m+" must be "+b,de.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new de("Unknown option "+m,de.ERR_BAD_OPTION)}}const gr={assertOptions:Mi,validators:Br},ft=gr.validators;let jt=class{constructor(r){this.defaults=r||{},this.interceptors={request:new ls,response:new ls}}async request(r,l){try{return await this._request(r,l)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const m=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?m&&!String(s.stack).endsWith(m.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+m):s.stack=m}catch{}}throw s}}_request(r,l){typeof r=="string"?(l=l||{},l.url=r):l=r||{},l=Vt(this.defaults,l);const{transitional:s,paramsSerializer:a,headers:m}=l;s!==void 0&&gr.assertOptions(s,{silentJSONParsing:ft.transitional(ft.boolean),forcedJSONParsing:ft.transitional(ft.boolean),clarifyTimeoutError:ft.transitional(ft.boolean)},!1),a!=null&&(j.isFunction(a)?l.paramsSerializer={serialize:a}:gr.assertOptions(a,{encode:ft.function,serialize:ft.function},!0)),l.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?l.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:l.allowAbsoluteUrls=!0),gr.assertOptions(l,{baseUrl:ft.spelling("baseURL"),withXsrfToken:ft.spelling("withXSRFToken")},!0),l.method=(l.method||this.defaults.method||"get").toLowerCase();let n=m&&j.merge(m.common,m[l.method]);m&&j.forEach(["delete","get","head","post","put","patch","common"],w=>{delete m[w]}),l.headers=lt.concat(n,m);const i=[];let b=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(l)===!1||(b=b&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let _,o=0,f;if(!b){const w=[cs.bind(this),void 0];for(w.unshift(...i),w.push(...u),f=w.length,_=Promise.resolve(l);o<f;)_=_.then(w[o++],w[o++]);return _}f=i.length;let h=l;for(o=0;o<f;){const w=i[o++],g=i[o++];try{h=w(h)}catch(p){g.call(this,p);break}}try{_=cs.call(this,h)}catch(w){return Promise.reject(w)}for(o=0,f=u.length;o<f;)_=_.then(u[o++],u[o++]);return _}getUri(r){r=Vt(this.defaults,r);const l=oa(r.baseURL,r.url,r.allowAbsoluteUrls);return aa(l,r.params,r.paramsSerializer)}};j.forEach(["delete","get","head","options"],function(r){jt.prototype[r]=function(l,s){return this.request(Vt(s||{},{method:r,url:l,data:(s||{}).data}))}});j.forEach(["post","put","patch"],function(r){function l(s){return function(m,n,i){return this.request(Vt(i||{},{method:r,headers:s?{"Content-Type":"multipart/form-data"}:{},url:m,data:n}))}}jt.prototype[r]=l(),jt.prototype[r+"Form"]=l(!0)});let ji=class da{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(m){l=m});const s=this;this.promise.then(a=>{if(!s._listeners)return;let m=s._listeners.length;for(;m-- >0;)s._listeners[m](a);s._listeners=null}),this.promise.then=a=>{let m;const n=new Promise(i=>{s.subscribe(i),m=i}).then(a);return n.cancel=function(){s.unsubscribe(m)},n},r(function(m,n,i){s.reason||(s.reason=new Wt(m,n,i),l(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const l=this._listeners.indexOf(r);l!==-1&&this._listeners.splice(l,1)}toAbortSignal(){const r=new AbortController,l=s=>{r.abort(s)};return this.subscribe(l),r.signal.unsubscribe=()=>this.unsubscribe(l),r.signal}static source(){let r;return{token:new da(function(a){r=a}),cancel:r}}};function Ui(t){return function(l){return t.apply(null,l)}}function $i(t){return j.isObject(t)&&t.isAxiosError===!0}const gl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gl).forEach(([t,r])=>{gl[r]=t});function ha(t){const r=new jt(t),l=Hs(jt.prototype.request,r);return j.extend(l,jt.prototype,r,{allOwnKeys:!0}),j.extend(l,r,null,{allOwnKeys:!0}),l.create=function(a){return ha(Vt(t,a))},l}const me=ha(cr);me.Axios=jt;me.CanceledError=Wt;me.CancelToken=ji;me.isCancel=ia;me.VERSION=ba;me.toFormData=Vr;me.AxiosError=de;me.Cancel=me.CanceledError;me.all=function(r){return Promise.all(r)};me.spread=Ui;me.isAxiosError=$i;me.mergeConfig=Vt;me.AxiosHeaders=lt;me.formToJSON=t=>na(j.isHTMLForm(t)?new FormData(t):t);me.getAdapter=fa.getAdapter;me.HttpStatusCode=gl;me.default=me;const{Axios:oo,AxiosError:co,CanceledError:_o,isCancel:No,CancelToken:fo,VERSION:bo,all:ho,Cancel:go,isAxiosError:po,spread:yo,toFormData:xo,AxiosHeaders:Eo,HttpStatusCode:vo,formToJSON:wo,getAdapter:So,mergeConfig:Co}=me;me.interceptors.request.use(t=>(console.log(" Axios Request:",{url:t.url,method:t.method,headers:t.headers,data:t.data,baseURL:t.baseURL}),t),t=>(console.error(" Axios Request Error:",t),Promise.reject(t)));me.interceptors.response.use(t=>(console.log(" Axios Response:",{status:t.status,statusText:t.statusText,headers:t.headers,data:t.data}),t),t=>(console.error(" Axios Response Error:"),console.error("  Status:",t.response?.status),console.error("  Status Text:",t.response?.statusText),console.error("  Headers:",t.response?.headers),console.error("  Data:",t.response?.data),console.error("  Message:",t.message),console.error("  Config URL:",t.config?.url),console.error("  Full Error:",t),Promise.reject(t)));const Ae=Gs()(zs((t,r)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,login:async(l,s)=>{try{t({isLoading:!0}),console.log(" Login attempt:",{phone:l,apiUrl:"/api",fullUrl:"/api/auth/login"}),console.log(" Request payload:",JSON.stringify({phone:l,password:s})),console.log(" FORCING REAL DATABASE CALLS - All bypasses disabled");const a=await me.post("/api/auth/login",{phone:l,password:s},{headers:{"Content-Type":"application/json"},timeout:1e4});console.log(" Response status:",a.status),console.log(" Response headers:",a.headers),console.log(" Login success:",a.data);const{user:m,token:n}=a.data;localStorage.setItem("token",n),t({user:m,token:n,isAuthenticated:!0,isLoading:!1})}catch(a){console.error(" Login error:",a),console.error(" Error message:",a.message),console.error(" Error response data:",a.response?.data),console.error(" Error status:",a.response?.status),console.error(" Error status text:",a.response?.statusText),console.error(" Error URL:",a.config?.url),console.error(" Error code:",a.code),console.error(" Error name:",a.name),console.error(" Full error object:",JSON.stringify(a,null,2)),t({isLoading:!1});let m="Login failed";throw a.code==="ERR_NETWORK"||a.name==="AxiosError"&&!a.response?m="Cannot connect to server. Please check if the backend is running.":a.code==="ECONNREFUSED"?m="Connection refused. Server may be down.":a.response?.status===401?m="Invalid phone number or password":a.response?.status===400?m=a.response.data?.error||"Invalid request":a.response?.data?.error?m=a.response.data.error:a.response?.data?.message?m=a.response.data.message:a.message&&a.message!=="[object Object]"&&(m=a.message),console.error(" Final error message:",m),new Error(m)}},loginWithData:(l,s)=>{localStorage.setItem("token",s),t({user:l,token:s,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("token"),t({user:null,token:null,isAuthenticated:!1})},updateUser:l=>{t({user:l})}}),{name:"auth-storage",partialize:t=>({user:t.user,token:t.token,isAuthenticated:t.isAuthenticated})}));var Kt="/app/code/frontend/src/components/ErrorBoundary.tsx";class qi extends P.Component{state={hasError:!1};static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,l){console.error("Error caught by boundary:",r,l)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",__self:this,__source:{fileName:Kt,lineNumber:33,columnNumber:9}},e.createElement("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6 text-center",__self:this,__source:{fileName:Kt,lineNumber:34,columnNumber:11}},e.createElement("div",{className:"text-red-500 text-6xl mb-4",__self:this,__source:{fileName:Kt,lineNumber:35,columnNumber:13}},""),e.createElement("h1",{className:"text-xl font-semibold text-gray-900 mb-2",__self:this,__source:{fileName:Kt,lineNumber:36,columnNumber:13}},"Something went wrong"),e.createElement("p",{className:"text-gray-600 mb-4",__self:this,__source:{fileName:Kt,lineNumber:39,columnNumber:13}},this.state.error?.message||"An unexpected error occurred"),e.createElement("button",{onClick:()=>{this.setState({hasError:!1,error:void 0}),window.location.reload()},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",__self:this,__source:{fileName:Kt,lineNumber:42,columnNumber:13}},"Reload Page"))):this.props.children}}const Vi=()=>{window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason)}),window.addEventListener("error",t=>{console.error("Global error:",t.error)})},Ve=t=>{const r=Number(t);return isNaN(r)||!isFinite(r)?0:r},Ki=Gs()(zs((t,r)=>({items:[],totalItems:0,totalAmount:0,addToCart:(l,s)=>{const a=r(),m=Ve(s),n=Ve(l.pricePerUnit);if(m<=0)return;if(a.items.find(b=>b.productId===l.id)){const b=a.items.map(o=>o.productId===l.id?{...o,quantity:Ve(o.quantity)+m}:o),u=b.reduce((o,f)=>o+Ve(f.quantity),0),_=b.reduce((o,f)=>o+Ve(f.pricePerUnit)*Ve(f.quantity),0);t({items:b,totalItems:u,totalAmount:_})}else{const b={id:`cart-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,productId:l.id||`product-${Date.now()}`,name:l.name||"Unknown Product",pricePerUnit:n,quantity:m,images:Array.isArray(l.images)?l.images:[],unit:l.unit||"kg"},u=[...a.items,b],_=u.reduce((f,h)=>f+Ve(h.quantity),0),o=u.reduce((f,h)=>f+Ve(h.pricePerUnit)*Ve(h.quantity),0);t({items:u,totalItems:_,totalAmount:o})}},removeFromCart:l=>{const a=r().items.filter(i=>i.id!==l),m=a.reduce((i,b)=>i+Ve(b.quantity),0),n=a.reduce((i,b)=>i+Ve(b.pricePerUnit)*Ve(b.quantity),0);t({items:a,totalItems:m,totalAmount:n})},updateQuantity:(l,s)=>{const a=r(),m=Ve(s);if(m<=0){r().removeFromCart(l);return}const n=a.items.map(u=>u.id===l?{...u,quantity:m}:u),i=n.reduce((u,_)=>u+Ve(_.quantity),0),b=n.reduce((u,_)=>u+Ve(_.pricePerUnit)*Ve(_.quantity),0);t({items:n,totalItems:i,totalAmount:b})},clearCart:()=>{t({items:[],totalItems:0,totalAmount:0})},refreshCart:()=>{const l=r(),s=l.items.reduce((m,n)=>m+Ve(n.quantity),0),a=l.items.reduce((m,n)=>m+Ve(n.pricePerUnit)*Ve(n.quantity),0);t({totalItems:s,totalAmount:a})}}),{name:"cart-storage",partialize:t=>({items:t.items,totalItems:t.totalItems,totalAmount:t.totalAmount})})),Qt=()=>{const t=Ki();return{cart:{items:t.items,totalItems:t.totalItems,totalAmount:t.totalAmount},addToCart:t.addToCart,removeFromCart:t.removeFromCart,updateQuantity:t.updateQuantity,clearCart:t.clearCart,refreshCart:t.refreshCart,isLoading:!1}};var fe="/app/code/frontend/src/components/layout/Navbar.tsx";function Bi(){const{isAuthenticated:t,user:r,logout:l}=Ae(),{cart:s}=Qt(),a=_t(),[m,n]=P.useState(!1),i=()=>{l(),a("/"),n(!1)},b=()=>{switch(r?.role){case"FARMER":return"/farmer/dashboard";case"CUSTOMER":return"/customer/dashboard";case"ADMIN":return"/admin/dashboard";case"DRIVER":return"/driver/dashboard";default:return"/"}},u=()=>{n(!1)};return e.createElement("nav",{className:"bg-white shadow-sm border-b sticky top-0 z-50",__self:this,__source:{fileName:fe,lineNumber:48,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:fe,lineNumber:49,columnNumber:7}},e.createElement("div",{className:"flex justify-between h-16",__self:this,__source:{fileName:fe,lineNumber:50,columnNumber:9}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:fe,lineNumber:52,columnNumber:11}},e.createElement(xe,{to:"/",className:"flex items-center space-x-2",onClick:u,__self:this,__source:{fileName:fe,lineNumber:53,columnNumber:13}},e.createElement("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fd95a59ea13944377b7d57306ce764f34%2Fc3fa5645a777451c8d0a2cfb29e716c1?format=webp&width=800",alt:"Zuasoko Logo",className:"w-8 h-8 rounded-lg object-contain",__self:this,__source:{fileName:fe,lineNumber:58,columnNumber:15}}),e.createElement("span",{className:"text-lg sm:text-xl font-bold text-gray-900",__self:this,__source:{fileName:fe,lineNumber:63,columnNumber:15}},"Zuasoko"))),e.createElement("div",{className:"hidden md:flex items-center space-x-6",__self:this,__source:{fileName:fe,lineNumber:70,columnNumber:11}},e.createElement(xe,{to:"/marketplace",className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",__self:this,__source:{fileName:fe,lineNumber:71,columnNumber:13}},"Marketplace"),t?e.createElement(e.Fragment,null,e.createElement(xe,{to:b(),className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",__self:this,__source:{fileName:fe,lineNumber:80,columnNumber:17}},"Dashboard"),e.createElement(xe,{to:"/cart",className:"relative text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",__self:this,__source:{fileName:fe,lineNumber:88,columnNumber:17}},e.createElement(gt,{className:"w-5 h-5",__self:this,__source:{fileName:fe,lineNumber:92,columnNumber:19}}),s?.totalItems>0&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",__self:this,__source:{fileName:fe,lineNumber:94,columnNumber:21}},s.totalItems)),e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:fe,lineNumber:100,columnNumber:17}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:fe,lineNumber:101,columnNumber:19}},r?.firstName),e.createElement("button",{onClick:i,className:"text-gray-700 hover:text-red-600 p-2 rounded-md transition-colors",__self:this,__source:{fileName:fe,lineNumber:104,columnNumber:19}},e.createElement($l,{className:"w-4 h-4",__self:this,__source:{fileName:fe,lineNumber:108,columnNumber:21}})))):e.createElement("div",{className:"flex items-center space-x-3",__self:this,__source:{fileName:fe,lineNumber:113,columnNumber:15}},e.createElement(xe,{to:"/cart",className:"relative text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",__self:this,__source:{fileName:fe,lineNumber:115,columnNumber:17}},e.createElement(gt,{className:"w-5 h-5",__self:this,__source:{fileName:fe,lineNumber:119,columnNumber:19}}),s?.totalItems>0&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",__self:this,__source:{fileName:fe,lineNumber:121,columnNumber:21}},s.totalItems)),e.createElement(xe,{to:"/login",className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",__self:this,__source:{fileName:fe,lineNumber:127,columnNumber:17}},"Login"),e.createElement(xe,{to:"/register",className:"bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:fe,lineNumber:133,columnNumber:17}},"Register"))),e.createElement("div",{className:"md:hidden flex items-center space-x-3",__self:this,__source:{fileName:fe,lineNumber:144,columnNumber:11}},e.createElement(xe,{to:"/cart",className:"relative text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",onClick:u,__self:this,__source:{fileName:fe,lineNumber:146,columnNumber:13}},e.createElement(gt,{className:"w-5 h-5",__self:this,__source:{fileName:fe,lineNumber:151,columnNumber:15}}),s?.totalItems>0&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",__self:this,__source:{fileName:fe,lineNumber:153,columnNumber:17}},s.totalItems)),e.createElement("button",{onClick:()=>n(!m),className:"text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",__self:this,__source:{fileName:fe,lineNumber:160,columnNumber:13}},m?e.createElement(Je,{className:"w-5 h-5",__self:this,__source:{fileName:fe,lineNumber:165,columnNumber:17}}):e.createElement(As,{className:"w-5 h-5",__self:this,__source:{fileName:fe,lineNumber:167,columnNumber:17}}))))),m&&e.createElement("div",{className:"md:hidden bg-white border-t border-gray-200",__self:this,__source:{fileName:fe,lineNumber:176,columnNumber:9}},e.createElement("div",{className:"px-2 pt-2 pb-3 space-y-1",__self:this,__source:{fileName:fe,lineNumber:177,columnNumber:11}},e.createElement(xe,{to:"/",className:"flex items-center gap-3 px-3 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 rounded-md transition-colors",onClick:u,__self:this,__source:{fileName:fe,lineNumber:178,columnNumber:13}},e.createElement(ks,{className:"w-5 h-5",__self:this,__source:{fileName:fe,lineNumber:183,columnNumber:15}}),"Home"),e.createElement(xe,{to:"/marketplace",className:"flex items-center gap-3 px-3 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 rounded-md transition-colors",onClick:u,__self:this,__source:{fileName:fe,lineNumber:187,columnNumber:13}},e.createElement(Ps,{className:"w-5 h-5",__self:this,__source:{fileName:fe,lineNumber:192,columnNumber:15}}),"Marketplace"),t?e.createElement(e.Fragment,null,e.createElement(xe,{to:b(),className:"flex items-center gap-3 px-3 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 rounded-md transition-colors",onClick:u,__self:this,__source:{fileName:fe,lineNumber:198,columnNumber:17}},e.createElement($a,{className:"w-5 h-5",__self:this,__source:{fileName:fe,lineNumber:203,columnNumber:19}}),"Dashboard"),e.createElement("div",{className:"px-3 py-3 border-t border-gray-200 mt-2",__self:this,__source:{fileName:fe,lineNumber:208,columnNumber:17}},e.createElement("div",{className:"flex items-center gap-3 mb-3",__self:this,__source:{fileName:fe,lineNumber:209,columnNumber:19}},e.createElement("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",__self:this,__source:{fileName:fe,lineNumber:210,columnNumber:21}},e.createElement(nt,{className:"w-4 h-4 text-primary-600",__self:this,__source:{fileName:fe,lineNumber:211,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:fe,lineNumber:213,columnNumber:21}},e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:fe,lineNumber:214,columnNumber:23}},r?.firstName," ",r?.lastName),e.createElement("div",{className:"text-xs text-gray-500 capitalize",__self:this,__source:{fileName:fe,lineNumber:217,columnNumber:23}},r?.role?.toLowerCase()))),e.createElement("button",{onClick:i,className:"flex items-center gap-3 w-full px-3 py-2 text-base font-medium text-red-600 hover:bg-red-50 rounded-md transition-colors",__self:this,__source:{fileName:fe,lineNumber:223,columnNumber:19}},e.createElement($l,{className:"w-5 h-5",__self:this,__source:{fileName:fe,lineNumber:227,columnNumber:21}}),"Logout"))):e.createElement("div",{className:"px-3 py-3 border-t border-gray-200 mt-2 space-y-2",__self:this,__source:{fileName:fe,lineNumber:233,columnNumber:15}},e.createElement(xe,{to:"/login",className:"block w-full text-center px-4 py-3 text-base font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",onClick:u,__self:this,__source:{fileName:fe,lineNumber:234,columnNumber:17}},"Login"),e.createElement(xe,{to:"/register",className:"block w-full text-center px-4 py-3 text-base font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-lg transition-colors",onClick:u,__self:this,__source:{fileName:fe,lineNumber:241,columnNumber:17}},"Register")))))}var kt="/app/code/frontend/src/components/layout/MobileBottomNav.tsx";function Gi(){const{isAuthenticated:t,user:r}=Ae(),{cart:l}=Qt(),s=Cs(),a=()=>{const i=[{path:"/",icon:ks,label:"Home",show:!0},{path:"/marketplace",icon:Ps,label:"Shop",show:!0}];if(!t)return[...i,{path:"/cart",icon:gt,label:"Cart",badge:l?.totalItems||0,show:!0},{path:"/login",icon:nt,label:"Login",show:!0}];switch(r?.role){case"CUSTOMER":return[...i,{path:"/cart",icon:gt,label:"Cart",badge:l?.totalItems||0,show:!0},{path:"/customer/dashboard",icon:nt,label:"Account",show:!0}];case"FARMER":return[...i,{path:"/farmer/consignments",icon:Gt,label:"Consign",show:!0},{path:"/farmer/wallet",icon:nt,label:"Wallet",show:!0}];case"DRIVER":return[...i,{path:"/driver/assignments",icon:Te,label:"Transport",show:!0},{path:"/driver/warehouse",icon:nt,label:"Warehouse",show:!0}];case"ADMIN":return[...i,{path:"/admin/consignments",icon:Gt,label:"Consign",show:!0},{path:"/admin/analytics",icon:xl,label:"Analytics",show:!0}];default:return i}},m=(Array.isArray(a())?a():[]).filter(i=>i?.show),n=i=>!!(i==="/"&&s.pathname==="/"||i!=="/"&&s.pathname.startsWith(i));return e.createElement("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",__self:this,__source:{fileName:kt,lineNumber:147,columnNumber:5}},e.createElement("div",{className:"grid grid-cols-4 py-1",__self:this,__source:{fileName:kt,lineNumber:148,columnNumber:7}},m.map(i=>{const b=i.icon,u=n(i.path);return e.createElement(xe,{key:i.path,to:i.path,className:`flex flex-col items-center justify-center py-2 px-1 text-xs font-medium transition-colors ${u?"text-primary-600":"text-gray-500 hover:text-gray-700"}`,__self:this,__source:{fileName:kt,lineNumber:154,columnNumber:13}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:kt,lineNumber:163,columnNumber:15}},e.createElement(b,{className:`w-5 h-5 ${u?"text-primary-600":"text-gray-500"}`,__self:this,__source:{fileName:kt,lineNumber:164,columnNumber:17}}),"badge"in i&&i.badge&&i.badge>0&&e.createElement("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center min-w-[16px]",__self:this,__source:{fileName:kt,lineNumber:168,columnNumber:19}},i.badge>99?"99+":i.badge)),e.createElement("span",{className:`mt-1 ${u?"text-primary-600":"text-gray-500"}`,__self:this,__source:{fileName:kt,lineNumber:173,columnNumber:15}},i.label))})),e.createElement("div",{className:"h-safe-bottom bg-white",__self:this,__source:{fileName:kt,lineNumber:184,columnNumber:7}}))}var ut="/app/code/frontend/src/components/DatabaseStatus.tsx";function zi(){const[t,r]=P.useState({connected:!1,database:"checking...",loading:!0});if(P.useEffect(()=>{r({connected:!0,database:"connected",loading:!1})},[]),t.loading)return null;const l=t.database==="connected",s=t.database==="demo";return e.createElement("div",{className:"fixed bottom-4 right-4 z-50",__self:this,__source:{fileName:ut,lineNumber:33,columnNumber:5}},e.createElement("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium shadow-lg ${l?"bg-green-100 text-green-800 border border-green-200":s?"bg-blue-100 text-blue-800 border border-blue-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"}`,__self:this,__source:{fileName:ut,lineNumber:34,columnNumber:7}},l?e.createElement(e.Fragment,null,e.createElement(Qr,{className:"w-4 h-4",__self:this,__source:{fileName:ut,lineNumber:45,columnNumber:13}}),e.createElement("span",{__self:this,__source:{fileName:ut,lineNumber:46,columnNumber:13}},"Render.com DB"),e.createElement(al,{className:"w-4 h-4",__self:this,__source:{fileName:ut,lineNumber:47,columnNumber:13}})):s?e.createElement(e.Fragment,null,e.createElement(Qr,{className:"w-4 h-4",__self:this,__source:{fileName:ut,lineNumber:51,columnNumber:13}}),e.createElement("span",{__self:this,__source:{fileName:ut,lineNumber:52,columnNumber:13}},"Demo Mode"),e.createElement(al,{className:"w-4 h-4",__self:this,__source:{fileName:ut,lineNumber:53,columnNumber:13}})):e.createElement(e.Fragment,null,e.createElement(Qr,{className:"w-4 h-4",__self:this,__source:{fileName:ut,lineNumber:57,columnNumber:13}}),e.createElement("span",{__self:this,__source:{fileName:ut,lineNumber:58,columnNumber:13}},"Disconnected"),e.createElement(qa,{className:"w-4 h-4",__self:this,__source:{fileName:ut,lineNumber:59,columnNumber:13}}))))}const Hi=()=>{const[t,r]=P.useState(!1),[l,s]=P.useState(null),[a,m]=P.useState(!0),n="/downloads/zuasoko-app.apk",i=async()=>{try{const _=(await fetch(n,{method:"HEAD"})).ok;if(_)try{const o=await fetch("/downloads/app-info.json");if(o.ok){const f=await o.json();s(f)}}catch{console.log("App info not available, using defaults")}return r(_),_}catch(u){return console.error("Error checking APK availability:",u),r(!1),!1}},b=()=>{if(t){const u=document.createElement("a");u.href=n,u.download="zuasoko-app.apk",u.target="_blank",document.body.appendChild(u),u.click(),document.body.removeChild(u),window.gtag&&window.gtag("event","app_download",{event_category:"engagement",event_label:"android_apk",value:1});const _=new CustomEvent("show-toast",{detail:{message:"APK download started! Check your downloads folder.",type:"success"}});window.dispatchEvent(_)}};return P.useEffect(()=>{(async()=>{m(!0),await i(),m(!1)})()},[]),{isAvailable:t,appInfo:l,loading:a,downloadUrl:n,checkAvailability:i,downloadApp:b}};var ae="/app/code/frontend/src/components/ApkInfoModal.tsx";const Wi=({isOpen:t,onClose:r,appInfo:l,onDownload:s})=>{if(!t)return null;const a=m=>m.toLowerCase().includes("internet")?e.createElement(al,{className:"w-4 h-4",__self:void 0,__source:{fileName:ae,lineNumber:52,columnNumber:14}}):m.toLowerCase().includes("location")?e.createElement(it,{className:"w-4 h-4",__self:void 0,__source:{fileName:ae,lineNumber:54,columnNumber:14}}):m.toLowerCase().includes("camera")?e.createElement(Ds,{className:"w-4 h-4",__self:void 0,__source:{fileName:ae,lineNumber:56,columnNumber:14}}):m.toLowerCase().includes("storage")?e.createElement(ql,{className:"w-4 h-4",__self:void 0,__source:{fileName:ae,lineNumber:58,columnNumber:14}}):m.toLowerCase().includes("notification")?e.createElement(Ut,{className:"w-4 h-4",__self:void 0,__source:{fileName:ae,lineNumber:60,columnNumber:14}}):e.createElement(pt,{className:"w-4 h-4",__self:void 0,__source:{fileName:ae,lineNumber:61,columnNumber:12}});return e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",__self:void 0,__source:{fileName:ae,lineNumber:65,columnNumber:5}},e.createElement("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",__self:void 0,__source:{fileName:ae,lineNumber:66,columnNumber:7}},e.createElement("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl",__self:void 0,__source:{fileName:ae,lineNumber:68,columnNumber:9}},e.createElement("div",{className:"flex items-center justify-between",__self:void 0,__source:{fileName:ae,lineNumber:69,columnNumber:11}},e.createElement("div",{className:"flex items-center gap-4",__self:void 0,__source:{fileName:ae,lineNumber:70,columnNumber:13}},e.createElement("div",{className:"w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center shadow-lg",__self:void 0,__source:{fileName:ae,lineNumber:71,columnNumber:15}},e.createElement(ml,{className:"w-8 h-8 text-white",__self:void 0,__source:{fileName:ae,lineNumber:72,columnNumber:17}})),e.createElement("div",{__self:void 0,__source:{fileName:ae,lineNumber:74,columnNumber:15}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:void 0,__source:{fileName:ae,lineNumber:75,columnNumber:17}},"Zuasoko Mobile App"),e.createElement("div",{className:"flex items-center gap-4 text-sm text-gray-600",__self:void 0,__source:{fileName:ae,lineNumber:78,columnNumber:17}},e.createElement("span",{__self:void 0,__source:{fileName:ae,lineNumber:79,columnNumber:19}},"Version ",l.version),e.createElement("span",{__self:void 0,__source:{fileName:ae,lineNumber:80,columnNumber:19}},""),e.createElement("span",{__self:void 0,__source:{fileName:ae,lineNumber:81,columnNumber:19}},l.size),e.createElement("span",{__self:void 0,__source:{fileName:ae,lineNumber:82,columnNumber:19}},""),e.createElement("span",{__self:void 0,__source:{fileName:ae,lineNumber:83,columnNumber:19}},"Android ",l.minAndroidVersion,"+")))),e.createElement("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",__self:void 0,__source:{fileName:ae,lineNumber:87,columnNumber:13}},e.createElement(Je,{className:"w-6 h-6 text-gray-600",__self:void 0,__source:{fileName:ae,lineNumber:91,columnNumber:15}})))),e.createElement("div",{className:"p-6 space-y-8",__self:void 0,__source:{fileName:ae,lineNumber:97,columnNumber:9}},e.createElement("div",{className:"text-center",__self:void 0,__source:{fileName:ae,lineNumber:99,columnNumber:11}},e.createElement("button",{onClick:()=>{s(),r()},className:"bg-primary-600 hover:bg-primary-700 text-white px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center gap-3 mx-auto",__self:void 0,__source:{fileName:ae,lineNumber:100,columnNumber:13}},e.createElement(yr,{className:"w-6 h-6",__self:void 0,__source:{fileName:ae,lineNumber:107,columnNumber:15}}),"Download APK (",l.size,")"),e.createElement("p",{className:"text-sm text-gray-600 mt-3",__self:void 0,__source:{fileName:ae,lineNumber:110,columnNumber:13}},"Released on"," ",new Date(l.releaseDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))),e.createElement("div",{__self:void 0,__source:{fileName:ae,lineNumber:121,columnNumber:11}},e.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",__self:void 0,__source:{fileName:ae,lineNumber:122,columnNumber:13}},e.createElement(mr,{className:"w-5 h-5 text-yellow-500",__self:void 0,__source:{fileName:ae,lineNumber:123,columnNumber:15}}),"What's New in v",l.version),e.createElement("div",{className:"space-y-2",__self:void 0,__source:{fileName:ae,lineNumber:126,columnNumber:13}},l.releaseNotes.map((m,n)=>e.createElement("div",{key:n,className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",__self:void 0,__source:{fileName:ae,lineNumber:128,columnNumber:17}},e.createElement(Fe,{className:"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0",__self:void 0,__source:{fileName:ae,lineNumber:132,columnNumber:19}}),e.createElement("span",{className:"text-gray-700",__self:void 0,__source:{fileName:ae,lineNumber:133,columnNumber:19}},m))))),e.createElement("div",{__self:void 0,__source:{fileName:ae,lineNumber:140,columnNumber:11}},e.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-4",__self:void 0,__source:{fileName:ae,lineNumber:141,columnNumber:13}},"Key Features"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",__self:void 0,__source:{fileName:ae,lineNumber:144,columnNumber:13}},l.features.map((m,n)=>e.createElement("div",{key:n,className:"flex items-start gap-3 p-3 border border-gray-200 rounded-lg",__self:void 0,__source:{fileName:ae,lineNumber:146,columnNumber:17}},e.createElement(Fe,{className:"w-4 h-4 text-primary-600 mt-1 flex-shrink-0",__self:void 0,__source:{fileName:ae,lineNumber:150,columnNumber:19}}),e.createElement("span",{className:"text-gray-700 text-sm",__self:void 0,__source:{fileName:ae,lineNumber:151,columnNumber:19}},m))))),e.createElement("div",{__self:void 0,__source:{fileName:ae,lineNumber:158,columnNumber:11}},e.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-4",__self:void 0,__source:{fileName:ae,lineNumber:159,columnNumber:13}},"System Requirements"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",__self:void 0,__source:{fileName:ae,lineNumber:162,columnNumber:13}},e.createElement("div",{className:"p-4 bg-blue-50 rounded-lg text-center",__self:void 0,__source:{fileName:ae,lineNumber:163,columnNumber:15}},e.createElement(ml,{className:"w-8 h-8 text-blue-600 mx-auto mb-2",__self:void 0,__source:{fileName:ae,lineNumber:164,columnNumber:17}}),e.createElement("div",{className:"font-semibold text-gray-900",__self:void 0,__source:{fileName:ae,lineNumber:165,columnNumber:17}},"Android Version"),e.createElement("div",{className:"text-sm text-gray-600",__self:void 0,__source:{fileName:ae,lineNumber:168,columnNumber:17}},l.requirements.android)),e.createElement("div",{className:"p-4 bg-green-50 rounded-lg text-center",__self:void 0,__source:{fileName:ae,lineNumber:172,columnNumber:15}},e.createElement(ql,{className:"w-8 h-8 text-green-600 mx-auto mb-2",__self:void 0,__source:{fileName:ae,lineNumber:173,columnNumber:17}}),e.createElement("div",{className:"font-semibold text-gray-900",__self:void 0,__source:{fileName:ae,lineNumber:174,columnNumber:17}},"Storage"),e.createElement("div",{className:"text-sm text-gray-600",__self:void 0,__source:{fileName:ae,lineNumber:175,columnNumber:17}},l.requirements.storage)),e.createElement("div",{className:"p-4 bg-purple-50 rounded-lg text-center",__self:void 0,__source:{fileName:ae,lineNumber:179,columnNumber:15}},e.createElement(Ie,{className:"w-8 h-8 text-purple-600 mx-auto mb-2",__self:void 0,__source:{fileName:ae,lineNumber:180,columnNumber:17}}),e.createElement("div",{className:"font-semibold text-gray-900",__self:void 0,__source:{fileName:ae,lineNumber:181,columnNumber:17}},"RAM"),e.createElement("div",{className:"text-sm text-gray-600",__self:void 0,__source:{fileName:ae,lineNumber:182,columnNumber:17}},l.requirements.ram)))),e.createElement("div",{__self:void 0,__source:{fileName:ae,lineNumber:190,columnNumber:11}},e.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-4",__self:void 0,__source:{fileName:ae,lineNumber:191,columnNumber:13}},"App Permissions"),e.createElement("div",{className:"space-y-3",__self:void 0,__source:{fileName:ae,lineNumber:194,columnNumber:13}},l.permissions.map((m,n)=>e.createElement("div",{key:n,className:"flex items-start gap-3 p-3 border border-gray-200 rounded-lg",__self:void 0,__source:{fileName:ae,lineNumber:196,columnNumber:17}},e.createElement("div",{className:"p-2 bg-gray-100 rounded-lg flex-shrink-0",__self:void 0,__source:{fileName:ae,lineNumber:200,columnNumber:19}},a(m)),e.createElement("div",{__self:void 0,__source:{fileName:ae,lineNumber:203,columnNumber:19}},e.createElement("div",{className:"font-medium text-gray-900",__self:void 0,__source:{fileName:ae,lineNumber:204,columnNumber:21}},m.split(" - ")[0]),m.includes(" - ")&&e.createElement("div",{className:"text-sm text-gray-600 mt-1",__self:void 0,__source:{fileName:ae,lineNumber:208,columnNumber:23}},m.split(" - ")[1])))))),e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",__self:void 0,__source:{fileName:ae,lineNumber:219,columnNumber:11}},e.createElement("div",{className:"flex items-start gap-3",__self:void 0,__source:{fileName:ae,lineNumber:220,columnNumber:13}},e.createElement(pt,{className:"w-5 h-5 text-yellow-600 mt-0.5",__self:void 0,__source:{fileName:ae,lineNumber:221,columnNumber:15}}),e.createElement("div",{__self:void 0,__source:{fileName:ae,lineNumber:222,columnNumber:15}},e.createElement("h4",{className:"font-semibold text-yellow-800 mb-2",__self:void 0,__source:{fileName:ae,lineNumber:223,columnNumber:17}},"Security Notice"),e.createElement("p",{className:"text-sm text-yellow-700",__self:void 0,__source:{fileName:ae,lineNumber:226,columnNumber:17}},'This APK is signed and verified by Zuasoko. Before installing, make sure to enable "Install from unknown sources" in your Android settings. Only download from this official source to ensure security and authenticity.')))),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",__self:void 0,__source:{fileName:ae,lineNumber:237,columnNumber:11}},e.createElement("h4",{className:"font-semibold text-blue-800 mb-3",__self:void 0,__source:{fileName:ae,lineNumber:238,columnNumber:13}},"Installation Instructions"),e.createElement("ol",{className:"text-sm text-blue-700 space-y-2",__self:void 0,__source:{fileName:ae,lineNumber:241,columnNumber:13}},e.createElement("li",{className:"flex items-start gap-2",__self:void 0,__source:{fileName:ae,lineNumber:242,columnNumber:15}},e.createElement("span",{className:"bg-blue-200 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",__self:void 0,__source:{fileName:ae,lineNumber:243,columnNumber:17}},"1"),"Download the APK file by clicking the download button above"),e.createElement("li",{className:"flex items-start gap-2",__self:void 0,__source:{fileName:ae,lineNumber:248,columnNumber:15}},e.createElement("span",{className:"bg-blue-200 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",__self:void 0,__source:{fileName:ae,lineNumber:249,columnNumber:17}},"2"),'Go to Settings  Security  Enable "Unknown Sources" or "Install unknown apps"'),e.createElement("li",{className:"flex items-start gap-2",__self:void 0,__source:{fileName:ae,lineNumber:255,columnNumber:15}},e.createElement("span",{className:"bg-blue-200 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",__self:void 0,__source:{fileName:ae,lineNumber:256,columnNumber:17}},"3"),'Open the downloaded APK file and tap "Install"'),e.createElement("li",{className:"flex items-start gap-2",__self:void 0,__source:{fileName:ae,lineNumber:261,columnNumber:15}},e.createElement("span",{className:"bg-blue-200 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",__self:void 0,__source:{fileName:ae,lineNumber:262,columnNumber:17}},"4"),"Open the Zuasoko app and log in with your account"))))))};var D="/app/code/frontend/src/pages/HomePage.tsx";function Qi(){const{isAuthenticated:t,user:r}=Ae(),[l,s]=P.useState(!1),[a,m]=P.useState(!1),{isAvailable:n,appInfo:i,loading:b,downloadApp:u}=Hi(),_=[{icon:e.createElement(Pt,{className:"w-8 h-8 text-primary-600",__self:this,__source:{fileName:D,lineNumber:39,columnNumber:13}}),title:"Fresh Produce",description:"Direct from farmers to your table, ensuring maximum freshness and quality."},{icon:e.createElement(tt,{className:"w-8 h-8 text-primary-600",__self:this,__source:{fileName:D,lineNumber:45,columnNumber:13}}),title:"Support Farmers",description:"Help local farmers get fair prices for their hard work and dedication."},{icon:e.createElement(Te,{className:"w-8 h-8 text-primary-600",__self:this,__source:{fileName:D,lineNumber:51,columnNumber:13}}),title:"Fast Delivery",description:"Quick and reliable delivery service to get your orders to you fresh."},{icon:e.createElement(mr,{className:"w-8 h-8 text-primary-600",__self:this,__source:{fileName:D,lineNumber:57,columnNumber:13}}),title:"Quality Assured",description:"All produce is quality-checked before delivery to ensure satisfaction."}],o=[{icon:e.createElement(Ut,{className:"w-6 h-6 text-primary-600",__self:this,__source:{fileName:D,lineNumber:66,columnNumber:13}}),title:"Push Notifications",description:"Stay updated on orders, deliveries, and fresh produce availability"},{icon:e.createElement(it,{className:"w-6 h-6 text-primary-600",__self:this,__source:{fileName:D,lineNumber:72,columnNumber:13}}),title:"Live Tracking",description:"Track your deliveries in real-time from farm to your doorstep"},{icon:e.createElement(Ie,{className:"w-6 h-6 text-primary-600",__self:this,__source:{fileName:D,lineNumber:78,columnNumber:13}}),title:"Quick Orders",description:"Reorder your favorites with just one tap"},{icon:e.createElement(st,{className:"w-6 h-6 text-primary-600",__self:this,__source:{fileName:D,lineNumber:83,columnNumber:13}}),title:"Mobile Payments",description:"Secure M-Pesa integration for seamless transactions"}],f=[{role:"Admin",phone:"+254712345678",description:"Manage users, approve farmers, view analytics",icon:e.createElement(pt,{className:"w-5 h-5",__self:this,__source:{fileName:D,lineNumber:94,columnNumber:13}}),color:"bg-red-100 text-red-800 border-red-200"},{role:"Farmer",phone:"+254734567890",description:"Create consignments, manage produce listings",icon:e.createElement(Pt,{className:"w-5 h-5",__self:this,__source:{fileName:D,lineNumber:101,columnNumber:13}}),color:"bg-green-100 text-green-800 border-green-200"},{role:"Customer",phone:"+254756789012",description:"Browse marketplace, place orders, track deliveries",icon:e.createElement(tt,{className:"w-5 h-5",__self:this,__source:{fileName:D,lineNumber:108,columnNumber:13}}),color:"bg-blue-100 text-blue-800 border-blue-200"},{role:"Driver",phone:"+254778901234",description:"Manage deliveries, update delivery status",icon:e.createElement(Te,{className:"w-5 h-5",__self:this,__source:{fileName:D,lineNumber:115,columnNumber:13}}),color:"bg-purple-100 text-purple-800 border-purple-200"}],h=()=>{switch(r?.role){case"FARMER":return"/farmer/dashboard";case"CUSTOMER":return"/customer/dashboard";case"ADMIN":return"/admin/dashboard";case"DRIVER":return"/driver/dashboard";default:return"/marketplace"}};return e.createElement("div",{className:"min-h-screen bg-white",__self:this,__source:{fileName:D,lineNumber:136,columnNumber:5}},e.createElement("section",{className:"bg-gradient-to-br from-primary-50 to-primary-100 py-20",__self:this,__source:{fileName:D,lineNumber:138,columnNumber:7}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:D,lineNumber:139,columnNumber:9}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:D,lineNumber:140,columnNumber:11}},e.createElement("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",__self:this,__source:{fileName:D,lineNumber:141,columnNumber:13}},"Welcome to ",e.createElement("span",{className:"text-primary-600",__self:this,__source:{fileName:D,lineNumber:142,columnNumber:26}},"Zuasoko")),e.createElement("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 max-w-3xl mx-auto",__self:this,__source:{fileName:D,lineNumber:144,columnNumber:13}},"Connecting farmers and customers across Kenya. Fresh produce, fair prices, and sustainable agriculture for everyone."),e.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",__self:this,__source:{fileName:D,lineNumber:149,columnNumber:13}},t?e.createElement(xe,{to:h(),className:"bg-primary-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:D,lineNumber:151,columnNumber:17}},"Go to Dashboard"):e.createElement(e.Fragment,null,e.createElement(xe,{to:"/marketplace",className:"bg-primary-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:D,lineNumber:159,columnNumber:19}},"Browse Marketplace"),e.createElement(xe,{to:"/register",className:"bg-white text-primary-600 px-8 py-3 rounded-lg text-lg font-semibold border-2 border-primary-600 hover:bg-primary-50 transition-colors",__self:this,__source:{fileName:D,lineNumber:165,columnNumber:19}},"Join Now"))),!t&&e.createElement("div",{className:"max-w-2xl mx-auto",__self:this,__source:{fileName:D,lineNumber:177,columnNumber:15}},e.createElement("button",{onClick:()=>s(!l),className:"flex items-center justify-center gap-2 mx-auto text-sm text-gray-600 hover:text-gray-800 transition-colors",__self:this,__source:{fileName:D,lineNumber:178,columnNumber:17}},e.createElement(Va,{className:"w-4 h-4",__self:this,__source:{fileName:D,lineNumber:182,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:D,lineNumber:183,columnNumber:19}},"View Demo Credentials"),l?e.createElement(Ka,{className:"w-4 h-4",__self:this,__source:{fileName:D,lineNumber:185,columnNumber:21}}):e.createElement(Ba,{className:"w-4 h-4",__self:this,__source:{fileName:D,lineNumber:187,columnNumber:21}})),l&&e.createElement("div",{className:"mt-4 p-4 bg-white rounded-lg border border-gray-200 shadow-sm",__self:this,__source:{fileName:D,lineNumber:192,columnNumber:19}},e.createElement("h3",{className:"text-sm font-semibold text-gray-900 mb-3 text-center",__self:this,__source:{fileName:D,lineNumber:193,columnNumber:21}},"Demo Account Access"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",__self:this,__source:{fileName:D,lineNumber:196,columnNumber:21}},f.map((w,g)=>e.createElement("div",{key:g,className:`p-3 rounded-lg border ${w.color} text-xs`,__self:this,__source:{fileName:D,lineNumber:198,columnNumber:25}},e.createElement("div",{className:"flex items-center gap-2 mb-1",__self:this,__source:{fileName:D,lineNumber:202,columnNumber:27}},w.icon,e.createElement("span",{className:"font-semibold",__self:this,__source:{fileName:D,lineNumber:204,columnNumber:29}},w.role)),e.createElement("div",{className:"font-mono text-xs mb-1",__self:this,__source:{fileName:D,lineNumber:208,columnNumber:27}},w.phone),e.createElement("div",{className:"text-xs opacity-80",__self:this,__source:{fileName:D,lineNumber:211,columnNumber:27}},w.description)))),e.createElement("div",{className:"text-center mt-3 text-xs text-gray-600",__self:this,__source:{fileName:D,lineNumber:217,columnNumber:21}},"Password for all accounts:"," ",e.createElement("span",{className:"font-mono font-semibold",__self:this,__source:{fileName:D,lineNumber:219,columnNumber:23}},"password123")),e.createElement("div",{className:"text-center mt-2",__self:this,__source:{fileName:D,lineNumber:223,columnNumber:21}},e.createElement(xe,{to:"/login",className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 font-medium",__self:this,__source:{fileName:D,lineNumber:224,columnNumber:23}},e.createElement(pt,{className:"w-3 h-3",__self:this,__source:{fileName:D,lineNumber:228,columnNumber:25}}),"Login to any demo account"))))))),e.createElement("section",{className:"py-20",__self:this,__source:{fileName:D,lineNumber:241,columnNumber:7}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:D,lineNumber:242,columnNumber:9}},e.createElement("div",{className:"text-center mb-16",__self:this,__source:{fileName:D,lineNumber:243,columnNumber:11}},e.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:D,lineNumber:244,columnNumber:13}},"Why Choose Zuasoko?"),e.createElement("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",__self:this,__source:{fileName:D,lineNumber:247,columnNumber:13}},"We're revolutionizing agriculture in Kenya by creating direct connections between farmers and customers.")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",__self:this,__source:{fileName:D,lineNumber:253,columnNumber:11}},_.map((w,g)=>e.createElement("div",{key:g,className:"text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow",__self:this,__source:{fileName:D,lineNumber:255,columnNumber:15}},e.createElement("div",{className:"flex justify-center mb-4",__self:this,__source:{fileName:D,lineNumber:259,columnNumber:17}},w.icon),e.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-2",__self:this,__source:{fileName:D,lineNumber:260,columnNumber:17}},w.title),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:D,lineNumber:263,columnNumber:17}},w.description)))))),e.createElement("section",{className:"bg-gradient-to-br from-gray-50 to-gray-100 py-20",__self:this,__source:{fileName:D,lineNumber:271,columnNumber:7}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:D,lineNumber:272,columnNumber:9}},e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",__self:this,__source:{fileName:D,lineNumber:273,columnNumber:11}},e.createElement("div",{className:"space-y-8",__self:this,__source:{fileName:D,lineNumber:275,columnNumber:13}},e.createElement("div",{className:"text-center lg:text-left",__self:this,__source:{fileName:D,lineNumber:276,columnNumber:15}},e.createElement("div",{className:"inline-flex items-center gap-2 bg-primary-100 text-primary-700 px-4 py-2 rounded-full text-sm font-medium mb-4",__self:this,__source:{fileName:D,lineNumber:277,columnNumber:17}},e.createElement(ml,{className:"w-4 h-4",__self:this,__source:{fileName:D,lineNumber:278,columnNumber:19}}),"Now Available on Mobile"),e.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:D,lineNumber:281,columnNumber:17}},"Take Zuasoko"," ",e.createElement("span",{className:"text-primary-600",__self:this,__source:{fileName:D,lineNumber:283,columnNumber:19}},"Anywhere")),e.createElement("p",{className:"text-xl text-gray-600 mb-8",__self:this,__source:{fileName:D,lineNumber:285,columnNumber:17}},"Access fresh produce, manage your farm, or track deliveries on the go. Our mobile app brings the complete Zuasoko experience to your smartphone.")),e.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",__self:this,__source:{fileName:D,lineNumber:293,columnNumber:15}},e.createElement("button",{onClick:()=>{n?u():alert(`Android app coming soon! 

We're putting the finishing touches on our mobile app. Stay tuned for the official release!`)},disabled:b,className:`group px-6 py-3 rounded-xl flex items-center gap-3 transition-all duration-300 transform hover:scale-105 shadow-lg ${n?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-900 hover:bg-gray-800 text-white"} ${b?"opacity-50 cursor-not-allowed":""}`,__self:this,__source:{fileName:D,lineNumber:294,columnNumber:17}},e.createElement("div",{className:"bg-white p-1 rounded",__self:this,__source:{fileName:D,lineNumber:311,columnNumber:19}},b?e.createElement("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin",__self:this,__source:{fileName:D,lineNumber:313,columnNumber:23}}):e.createElement(Ga,{className:"w-6 h-6 text-gray-900",__self:this,__source:{fileName:D,lineNumber:315,columnNumber:23}})),e.createElement("div",{className:"text-left",__self:this,__source:{fileName:D,lineNumber:318,columnNumber:19}},e.createElement("div",{className:"text-xs text-gray-300",__self:this,__source:{fileName:D,lineNumber:319,columnNumber:21}},n?"DOWNLOAD":"GET IT ON"),e.createElement("div",{className:"text-lg font-semibold",__self:this,__source:{fileName:D,lineNumber:322,columnNumber:21}},n?"Direct APK":"Google Play"),n&&i&&e.createElement("div",{className:"text-xs text-gray-300",__self:this,__source:{fileName:D,lineNumber:326,columnNumber:23}},"v",i.version,"  ",i.size)),e.createElement(yr,{className:"w-4 h-4 ml-2 group-hover:animate-bounce",__self:this,__source:{fileName:D,lineNumber:331,columnNumber:19}}),n&&e.createElement("div",{className:"bg-green-400 text-green-900 px-2 py-1 rounded text-xs font-bold ml-2",__self:this,__source:{fileName:D,lineNumber:333,columnNumber:21}},"READY")),e.createElement("a",{href:"#",className:"group bg-gray-900 text-white px-6 py-3 rounded-xl flex items-center gap-3 hover:bg-gray-800 transition-all duration-300 transform hover:scale-105 shadow-lg opacity-60 cursor-not-allowed",onClick:w=>{w.preventDefault(),alert(`iOS app coming soon! 

We're working hard to bring Zuasoko to the App Store. Keep an eye out for updates!`)},__self:this,__source:{fileName:D,lineNumber:339,columnNumber:17}},e.createElement("div",{className:"bg-white p-1 rounded",__self:this,__source:{fileName:D,lineNumber:349,columnNumber:19}},e.createElement(za,{className:"w-6 h-6 text-gray-900",__self:this,__source:{fileName:D,lineNumber:350,columnNumber:21}})),e.createElement("div",{className:"text-left",__self:this,__source:{fileName:D,lineNumber:352,columnNumber:19}},e.createElement("div",{className:"text-xs text-gray-300",__self:this,__source:{fileName:D,lineNumber:353,columnNumber:21}},"Download on the"),e.createElement("div",{className:"text-lg font-semibold",__self:this,__source:{fileName:D,lineNumber:354,columnNumber:21}},"App Store")),e.createElement("div",{className:"bg-yellow-500 text-yellow-900 px-2 py-1 rounded text-xs font-bold ml-2",__self:this,__source:{fileName:D,lineNumber:356,columnNumber:19}},"SOON"))),n&&i&&e.createElement("div",{className:"text-center mt-6",__self:this,__source:{fileName:D,lineNumber:364,columnNumber:17}},e.createElement("button",{onClick:()=>m(!0),className:"text-primary-600 hover:text-primary-700 font-medium text-sm border border-primary-300 hover:border-primary-500 px-4 py-2 rounded-lg transition-colors",__self:this,__source:{fileName:D,lineNumber:365,columnNumber:19}},"View App Details & Permissions")),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",__self:this,__source:{fileName:D,lineNumber:375,columnNumber:15}},o.map((w,g)=>e.createElement("div",{key:g,className:"flex items-start gap-3 p-4 bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:D,lineNumber:377,columnNumber:19}},e.createElement("div",{className:"flex-shrink-0 p-2 bg-primary-50 rounded-lg",__self:this,__source:{fileName:D,lineNumber:381,columnNumber:21}},w.icon),e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:384,columnNumber:21}},e.createElement("h4",{className:"font-semibold text-gray-900 mb-1",__self:this,__source:{fileName:D,lineNumber:385,columnNumber:23}},w.title),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:D,lineNumber:388,columnNumber:23}},w.description)))))),e.createElement("div",{className:"relative",__self:this,__source:{fileName:D,lineNumber:398,columnNumber:13}},e.createElement("div",{className:"relative mx-auto w-64 h-96 lg:w-80 lg:h-[480px]",__self:this,__source:{fileName:D,lineNumber:400,columnNumber:15}},e.createElement("div",{className:"absolute inset-0 bg-gray-900 rounded-[2.5rem] shadow-2xl",__self:this,__source:{fileName:D,lineNumber:402,columnNumber:17}},e.createElement("div",{className:"absolute inset-2 bg-white rounded-[2rem] overflow-hidden",__self:this,__source:{fileName:D,lineNumber:403,columnNumber:19}},e.createElement("div",{className:"bg-primary-600 h-8 flex items-center justify-between px-4",__self:this,__source:{fileName:D,lineNumber:405,columnNumber:21}},e.createElement("div",{className:"text-white text-xs font-medium",__self:this,__source:{fileName:D,lineNumber:406,columnNumber:23}},"9:41"),e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:D,lineNumber:407,columnNumber:23}},e.createElement("div",{className:"w-1 h-1 bg-white rounded-full",__self:this,__source:{fileName:D,lineNumber:408,columnNumber:25}}),e.createElement("div",{className:"w-1 h-1 bg-white rounded-full",__self:this,__source:{fileName:D,lineNumber:409,columnNumber:25}}),e.createElement("div",{className:"w-1 h-1 bg-white rounded-full",__self:this,__source:{fileName:D,lineNumber:410,columnNumber:25}}))),e.createElement("div",{className:"p-4 space-y-4",__self:this,__source:{fileName:D,lineNumber:415,columnNumber:21}},e.createElement("div",{className:"flex items-center gap-3 mb-6",__self:this,__source:{fileName:D,lineNumber:416,columnNumber:23}},e.createElement("div",{className:"w-10 h-10 bg-primary-600 rounded-xl flex items-center justify-center",__self:this,__source:{fileName:D,lineNumber:417,columnNumber:25}},e.createElement(Pt,{className:"w-6 h-6 text-white",__self:this,__source:{fileName:D,lineNumber:418,columnNumber:27}})),e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:420,columnNumber:25}},e.createElement("div",{className:"font-bold text-gray-900",__self:this,__source:{fileName:D,lineNumber:421,columnNumber:27}},"Zuasoko"),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:D,lineNumber:422,columnNumber:27}},"Fresh from farm"))),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:D,lineNumber:429,columnNumber:23}},e.createElement("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center gap-3",__self:this,__source:{fileName:D,lineNumber:430,columnNumber:25}},e.createElement("div",{className:"w-12 h-12 bg-green-200 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:D,lineNumber:431,columnNumber:27}},e.createElement(Pt,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:D,lineNumber:432,columnNumber:29}})),e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:D,lineNumber:434,columnNumber:27}},e.createElement("div",{className:"font-medium text-sm",__self:this,__source:{fileName:D,lineNumber:435,columnNumber:29}},"Organic Tomatoes"),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:D,lineNumber:438,columnNumber:29}},"Fresh from Nakuru"),e.createElement("div",{className:"text-primary-600 font-bold text-sm",__self:this,__source:{fileName:D,lineNumber:441,columnNumber:29}},"KES 120/kg"))),e.createElement("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center gap-3",__self:this,__source:{fileName:D,lineNumber:447,columnNumber:25}},e.createElement("div",{className:"w-12 h-12 bg-orange-200 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:D,lineNumber:448,columnNumber:27}},e.createElement(Pt,{className:"w-6 h-6 text-orange-600",__self:this,__source:{fileName:D,lineNumber:449,columnNumber:29}})),e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:D,lineNumber:451,columnNumber:27}},e.createElement("div",{className:"font-medium text-sm",__self:this,__source:{fileName:D,lineNumber:452,columnNumber:29}},"Fresh Carrots"),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:D,lineNumber:455,columnNumber:29}},"Direct from farm"),e.createElement("div",{className:"text-primary-600 font-bold text-sm",__self:this,__source:{fileName:D,lineNumber:458,columnNumber:29}},"KES 80/kg"))),e.createElement("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center gap-3",__self:this,__source:{fileName:D,lineNumber:464,columnNumber:25}},e.createElement("div",{className:"w-12 h-12 bg-purple-200 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:D,lineNumber:465,columnNumber:27}},e.createElement(Pt,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:D,lineNumber:466,columnNumber:29}})),e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:D,lineNumber:468,columnNumber:27}},e.createElement("div",{className:"font-medium text-sm",__self:this,__source:{fileName:D,lineNumber:469,columnNumber:29}},"Spinach Bunch"),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:D,lineNumber:472,columnNumber:29}},"Locally grown"),e.createElement("div",{className:"text-primary-600 font-bold text-sm",__self:this,__source:{fileName:D,lineNumber:475,columnNumber:29}},"KES 50/bunch")))),e.createElement("div",{className:"absolute bottom-4 left-4 right-4 bg-white border border-gray-200 rounded-lg p-2",__self:this,__source:{fileName:D,lineNumber:483,columnNumber:23}},e.createElement("div",{className:"flex justify-around",__self:this,__source:{fileName:D,lineNumber:484,columnNumber:25}},e.createElement("div",{className:"p-2 bg-primary-600 rounded-lg",__self:this,__source:{fileName:D,lineNumber:485,columnNumber:27}},e.createElement(Pt,{className:"w-4 h-4 text-white",__self:this,__source:{fileName:D,lineNumber:486,columnNumber:29}})),e.createElement("div",{className:"p-2",__self:this,__source:{fileName:D,lineNumber:488,columnNumber:27}},e.createElement(it,{className:"w-4 h-4 text-gray-400",__self:this,__source:{fileName:D,lineNumber:489,columnNumber:29}})),e.createElement("div",{className:"p-2",__self:this,__source:{fileName:D,lineNumber:491,columnNumber:27}},e.createElement(Ut,{className:"w-4 h-4 text-gray-400",__self:this,__source:{fileName:D,lineNumber:492,columnNumber:29}})),e.createElement("div",{className:"p-2",__self:this,__source:{fileName:D,lineNumber:494,columnNumber:27}},e.createElement(tt,{className:"w-4 h-4 text-gray-400",__self:this,__source:{fileName:D,lineNumber:495,columnNumber:29}})))))))),e.createElement("div",{className:"mt-8 text-center",__self:this,__source:{fileName:D,lineNumber:505,columnNumber:15}},e.createElement("div",{className:"inline-block p-4 bg-white rounded-xl shadow-lg border border-gray-200",__self:this,__source:{fileName:D,lineNumber:506,columnNumber:17}},e.createElement("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center mb-3",__self:this,__source:{fileName:D,lineNumber:507,columnNumber:19}},e.createElement(Ha,{className:"w-12 h-12 text-gray-600",__self:this,__source:{fileName:D,lineNumber:508,columnNumber:21}})),e.createElement("div",{className:"text-sm font-medium text-gray-900 mb-1",__self:this,__source:{fileName:D,lineNumber:510,columnNumber:19}},"Scan to Download"),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:D,lineNumber:513,columnNumber:19}},"Coming Soon"))),e.createElement("div",{className:"absolute -top-4 -left-4 w-8 h-8 bg-primary-200 rounded-full animate-pulse",__self:this,__source:{fileName:D,lineNumber:518,columnNumber:15}}),e.createElement("div",{className:"absolute -bottom-8 -right-8 w-12 h-12 bg-green-200 rounded-full animate-pulse delay-300",__self:this,__source:{fileName:D,lineNumber:519,columnNumber:15}}),e.createElement("div",{className:"absolute top-1/2 -right-6 w-6 h-6 bg-yellow-200 rounded-full animate-pulse delay-700",__self:this,__source:{fileName:D,lineNumber:520,columnNumber:15}}))))),t&&r?.role==="ADMIN"&&e.createElement("section",{className:"bg-red-50 py-12",__self:this,__source:{fileName:D,lineNumber:528,columnNumber:9}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:D,lineNumber:529,columnNumber:11}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:D,lineNumber:530,columnNumber:13}},e.createElement("div",{className:"inline-flex items-center gap-2 mb-4",__self:this,__source:{fileName:D,lineNumber:531,columnNumber:15}},e.createElement(pt,{className:"w-6 h-6 text-red-600",__self:this,__source:{fileName:D,lineNumber:532,columnNumber:17}}),e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:D,lineNumber:533,columnNumber:17}},"Admin Dashboard")),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:D,lineNumber:537,columnNumber:15}},"Welcome back, Administrator. Manage your platform efficiently."),e.createElement("div",{className:"flex flex-wrap justify-center gap-4",__self:this,__source:{fileName:D,lineNumber:540,columnNumber:15}},e.createElement(xe,{to:"/admin/dashboard",className:"bg-red-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-red-700 transition-colors",__self:this,__source:{fileName:D,lineNumber:541,columnNumber:17}},"View Dashboard"),e.createElement(xe,{to:"/admin/users",className:"bg-white text-red-600 px-6 py-2 rounded-lg font-medium border border-red-600 hover:bg-red-50 transition-colors",__self:this,__source:{fileName:D,lineNumber:547,columnNumber:17}},"Manage Users"),e.createElement(xe,{to:"/admin/analytics",className:"bg-white text-red-600 px-6 py-2 rounded-lg font-medium border border-red-600 hover:bg-red-50 transition-colors",__self:this,__source:{fileName:D,lineNumber:553,columnNumber:17}},"View Analytics"))))),e.createElement("section",{className:"bg-primary-600 py-16",__self:this,__source:{fileName:D,lineNumber:566,columnNumber:7}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",__self:this,__source:{fileName:D,lineNumber:567,columnNumber:9}},e.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",__self:this,__source:{fileName:D,lineNumber:568,columnNumber:11}},"Ready to Get Started?"),e.createElement("p",{className:"text-xl text-primary-100 mb-8 max-w-2xl mx-auto",__self:this,__source:{fileName:D,lineNumber:571,columnNumber:11}},"Join thousands of farmers and customers who are already part of the Zuasoko community."),!t&&e.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",__self:this,__source:{fileName:D,lineNumber:577,columnNumber:13}},e.createElement(xe,{to:"/register",className:"bg-white text-primary-600 px-8 py-3 rounded-lg text-lg font-semibold hover:bg-gray-100 transition-colors",__self:this,__source:{fileName:D,lineNumber:578,columnNumber:15}},"Register Now"),e.createElement(xe,{to:"/login",className:"bg-transparent text-white px-8 py-3 rounded-lg text-lg font-semibold border-2 border-white hover:bg-white hover:text-primary-600 transition-colors",__self:this,__source:{fileName:D,lineNumber:584,columnNumber:15}},"Login")))),a&&i&&e.createElement(Wi,{isOpen:a,onClose:()=>m(!1),appInfo:i,onDownload:u,__self:this,__source:{fileName:D,lineNumber:597,columnNumber:9}}))}const Ji="/api",Xe=me.create({baseURL:Ji,timeout:3e4,headers:{"Content-Type":"application/json"}});Xe.interceptors.request.use(t=>{console.log(" API REQUEST:",t.method?.toUpperCase(),t.url,"Data:",t.data);const r=localStorage.getItem("authToken")||localStorage.getItem("token");return r&&(t.headers.Authorization=`Bearer ${r}`),t});Xe.interceptors.response.use(t=>(console.log(" API SUCCESS:",t.config.url,"Status:",t.status,"Data sample:",t.data),t),t=>(console.error(" API ERROR:",{url:t.config?.url,method:t.config?.method,status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,message:t.message,hostname:window.location.hostname,timestamp:new Date().toISOString()}),Promise.reject(t)));const Xt={login:async t=>{console.log(" ATTEMPTING LOGIN with real database:",t.phone);const r=await Xe.post("/auth/login",t);return console.log(" LOGIN SUCCESS:",r.data),r.data},register:async t=>{console.log(" ATTEMPTING REGISTRATION with real database");const r=await Xe.post("/auth/register",t);return console.log(" REGISTRATION SUCCESS:",r.data),r.data},getProducts:async t=>{const r=t?`/marketplace/products?${t}`:"/marketplace/products";console.log(" FETCHING PRODUCTS from real database:",r);const l=await Xe.get(r);return console.log(" PRODUCTS SUCCESS:",l.data.products?.length||l.data.length,"products"),l.data},getProduct:async t=>{console.log(" FETCHING SINGLE PRODUCT from real database:",t);const r=await Xe.get(`/marketplace/products/${t}`);return console.log(" SINGLE PRODUCT SUCCESS:",r.data),r.data},getCategories:async()=>{console.log(" FETCHING CATEGORIES from real database");const t=await Xe.get("/marketplace/categories");return console.log(" CATEGORIES SUCCESS:",t.data),t.data},getCounties:async()=>{console.log(" FETCHING COUNTIES from real database");const t=await Xe.get("/marketplace/counties");return console.log(" COUNTIES SUCCESS:",t.data),t.data},getWalletBalance:async()=>{console.log(" FETCHING WALLET BALANCE from real database");const t=await Xe.get("/wallet/balance");return console.log(" WALLET SUCCESS:",t.data),t.data},createOrder:async t=>{console.log(" CREATING ORDER in real database");const r=await Xe.post("/orders",t);return console.log(" ORDER SUCCESS:",r.data),r.data},getOrders:async()=>{console.log(" FETCHING ORDERS from real database");const t=await Xe.get("/orders");return console.log(" ORDERS SUCCESS:",t.data),t.data},getUsers:async()=>{console.log(" FETCHING USERS from real database");const t=await Xe.get("/admin/users");return console.log(" USERS SUCCESS:",t.data),t.data},approveUser:async t=>{console.log(" APPROVING USER in real database:",t);const r=await Xe.post(`/admin/users/${t}/approve`);return console.log(" USER APPROVAL SUCCESS:",r.data),r.data},get:async t=>{console.log(" GENERIC GET REQUEST to real database:",t);const r=await Xe.get(t);return console.log(" GENERIC GET SUCCESS:",r.data),r}};var X="/app/code/frontend/src/pages/marketplace/MarketplacePage.tsx";function Yi(){const[t,r]=P.useState([]),[l,s]=P.useState([]),[a,m]=P.useState([]),[n,i]=P.useState(!0),[b,u]=P.useState({category:"",county:"",search:"",minPrice:"",maxPrice:"",featured:!1}),[_,o]=P.useState(!1),[f,h]=P.useState({page:1,limit:12,total:0,totalPages:0}),{addToCart:w,isLoading:g}=Qt(),{user:p,isAuthenticated:S}=Ae(),E=async(F=1)=>{try{i(!0),console.log(" FETCHING PRODUCTS - Page:",F,"Filters:",b);const C=new URLSearchParams({page:F.toString(),limit:f.limit.toString(),...b.category&&{category:b.category},...b.county&&{county:b.county},...b.search&&{search:b.search},...b.minPrice&&{minPrice:b.minPrice},...b.maxPrice&&{maxPrice:b.maxPrice},...b.featured&&{featured:"true"}}),c=await Xt.getProducts(C);console.log(" PRODUCTS RESPONSE:",c),r(c.products||c),c.pagination?h(x=>({...x,...c.pagination,page:F})):h(x=>({...x,page:F,total:c.products?.length||c.length||0,totalPages:1}))}catch(C){console.error(" FAILED TO FETCH PRODUCTS:",C),L.error("Failed to load products from database")}finally{i(!1)}},M=async()=>{try{console.log(" FETCHING METADATA from real database");const[F,C]=await Promise.all([Xt.getCategories(),Xt.getCounties()]);console.log(" CATEGORIES RESPONSE:",F),console.log(" COUNTIES RESPONSE:",C),s(F.categories||F||[]),m(C.counties||C||[])}catch(F){console.error(" FAILED TO FETCH METADATA:",F),L.error("Failed to load categories and counties from database")}};P.useEffect(()=>{M()},[]),P.useEffect(()=>{E(1)},[b]);const I=(F,C)=>{u(c=>({...c,[F]:C}))},B=F=>{try{w(F,1),L.success(`Added ${F.name} to cart`)}catch(C){console.error("Failed to add to cart:",C),L.error("Failed to add item to cart")}},q=()=>{u({category:"",county:"",search:"",minPrice:"",maxPrice:"",featured:!1})},le=F=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(F);return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:X,lineNumber:194,columnNumber:5}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:X,lineNumber:196,columnNumber:7}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2",__self:this,__source:{fileName:X,lineNumber:197,columnNumber:9}},"Fresh Marketplace"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:X,lineNumber:200,columnNumber:9}},"Discover fresh produce directly from local farmers")),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-8",__self:this,__source:{fileName:X,lineNumber:206,columnNumber:7}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-center lg:space-x-4 space-y-4 lg:space-y-0",__self:this,__source:{fileName:X,lineNumber:207,columnNumber:9}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:X,lineNumber:209,columnNumber:11}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:X,lineNumber:210,columnNumber:13}},e.createElement(nr,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400",__self:this,__source:{fileName:X,lineNumber:211,columnNumber:15}}),e.createElement("input",{type:"text",placeholder:"Search products...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:b.search,onChange:F=>I("search",F.target.value),__self:this,__source:{fileName:X,lineNumber:212,columnNumber:15}}))),e.createElement("div",{className:"flex flex-wrap gap-2",__self:this,__source:{fileName:X,lineNumber:223,columnNumber:11}},e.createElement("button",{onClick:()=>I("featured",!b.featured),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b.featured?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,__self:this,__source:{fileName:X,lineNumber:224,columnNumber:13}},e.createElement(mr,{className:`w-4 h-4 inline mr-1 ${b.featured?"fill-current":""}`,__self:this,__source:{fileName:X,lineNumber:232,columnNumber:15}}),"Featured"),e.createElement("button",{onClick:()=>o(!_),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-medium transition-colors",__self:this,__source:{fileName:X,lineNumber:238,columnNumber:13}},e.createElement(Wa,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:X,lineNumber:242,columnNumber:15}}),"Filters"))),_&&e.createElement("div",{className:"mt-6 pt-6 border-t border-gray-200",__self:this,__source:{fileName:X,lineNumber:250,columnNumber:11}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",__self:this,__source:{fileName:X,lineNumber:251,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:X,lineNumber:253,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:X,lineNumber:254,columnNumber:17}},"Category"),e.createElement("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:b.category,onChange:F=>I("category",F.target.value),__self:this,__source:{fileName:X,lineNumber:257,columnNumber:17}},e.createElement("option",{value:"",__self:this,__source:{fileName:X,lineNumber:264,columnNumber:19}},"All Categories"),(Array.isArray(l)?l:[]).map(F=>e.createElement("option",{key:F,value:F,__self:this,__source:{fileName:X,lineNumber:266,columnNumber:21}},F)))),e.createElement("div",{__self:this,__source:{fileName:X,lineNumber:274,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:X,lineNumber:275,columnNumber:17}},"County"),e.createElement("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:b.county,onChange:F=>I("county",F.target.value),__self:this,__source:{fileName:X,lineNumber:278,columnNumber:17}},e.createElement("option",{value:"",__self:this,__source:{fileName:X,lineNumber:283,columnNumber:19}},"All Counties"),(Array.isArray(a)?a:[]).map(F=>e.createElement("option",{key:F,value:F,__self:this,__source:{fileName:X,lineNumber:285,columnNumber:21}},F)))),e.createElement("div",{__self:this,__source:{fileName:X,lineNumber:293,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:X,lineNumber:294,columnNumber:17}},"Min Price (KES)"),e.createElement("input",{type:"number",placeholder:"0",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:b.minPrice,onChange:F=>I("minPrice",F.target.value),__self:this,__source:{fileName:X,lineNumber:297,columnNumber:17}})),e.createElement("div",{__self:this,__source:{fileName:X,lineNumber:308,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:X,lineNumber:309,columnNumber:17}},"Max Price (KES)"),e.createElement("input",{type:"number",placeholder:"1000",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:b.maxPrice,onChange:F=>I("maxPrice",F.target.value),__self:this,__source:{fileName:X,lineNumber:312,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex justify-end",__self:this,__source:{fileName:X,lineNumber:324,columnNumber:13}},e.createElement("button",{onClick:q,className:"text-gray-600 hover:text-gray-900 text-sm font-medium",__self:this,__source:{fileName:X,lineNumber:325,columnNumber:15}},"Clear All Filters")))),e.createElement("div",{className:"flex justify-between items-center mb-6",__self:this,__source:{fileName:X,lineNumber:337,columnNumber:7}},e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:X,lineNumber:338,columnNumber:9}},n?"Loading...":`Showing ${t.length} of ${f.total} products`),f.totalPages>1&&e.createElement("div",{className:"text-sm text-gray-600",__self:this,__source:{fileName:X,lineNumber:345,columnNumber:11}},"Page ",f.page," of ",f.totalPages)),n?e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",__self:this,__source:{fileName:X,lineNumber:353,columnNumber:9}},[...Array(8)].map((F,C)=>e.createElement("div",{key:C,className:"bg-white rounded-lg shadow-sm border overflow-hidden animate-pulse",__self:this,__source:{fileName:X,lineNumber:355,columnNumber:13}},e.createElement("div",{className:"h-48 bg-gray-200",__self:this,__source:{fileName:X,lineNumber:359,columnNumber:15}}),e.createElement("div",{className:"p-4",__self:this,__source:{fileName:X,lineNumber:360,columnNumber:15}},e.createElement("div",{className:"h-4 bg-gray-200 rounded mb-2",__self:this,__source:{fileName:X,lineNumber:361,columnNumber:17}}),e.createElement("div",{className:"h-3 bg-gray-200 rounded mb-2",__self:this,__source:{fileName:X,lineNumber:362,columnNumber:17}}),e.createElement("div",{className:"h-6 bg-gray-200 rounded",__self:this,__source:{fileName:X,lineNumber:363,columnNumber:17}}))))):t.length===0?e.createElement("div",{className:"text-center py-16",__self:this,__source:{fileName:X,lineNumber:369,columnNumber:9}},e.createElement("div",{className:"text-gray-400 text-6xl mb-4",__self:this,__source:{fileName:X,lineNumber:370,columnNumber:11}},""),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:X,lineNumber:371,columnNumber:11}},"No products found"),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:X,lineNumber:374,columnNumber:11}},"Try adjusting your search or filter criteria"),e.createElement("button",{onClick:q,className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:X,lineNumber:377,columnNumber:11}},"Clear Filters")):e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",__self:this,__source:{fileName:X,lineNumber:385,columnNumber:9}},(Array.isArray(t)?t:[]).map(F=>e.createElement("div",{key:F.id,className:"bg-white rounded-lg shadow-sm border overflow-hidden hover:shadow-md transition-shadow",__self:this,__source:{fileName:X,lineNumber:387,columnNumber:13}},e.createElement("div",{className:"relative h-48 bg-gray-200",__self:this,__source:{fileName:X,lineNumber:392,columnNumber:15}},F.images&&F.images.length>0?e.createElement("img",{src:F.images[0],alt:F.name,className:"w-full h-full object-cover",onError:C=>{C.currentTarget.src="/api/placeholder/300/200?text="+encodeURIComponent(F.name)},__self:this,__source:{fileName:X,lineNumber:394,columnNumber:19}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400",__self:this,__source:{fileName:X,lineNumber:405,columnNumber:19}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:X,lineNumber:406,columnNumber:21}},e.createElement(xt,{className:"w-8 h-8 mx-auto mb-2",__self:this,__source:{fileName:X,lineNumber:407,columnNumber:23}}),e.createElement("span",{className:"text-sm",__self:this,__source:{fileName:X,lineNumber:408,columnNumber:23}},F.name))),(F.isFeatured||F.is_featured)&&e.createElement("div",{className:"absolute top-2 left-2 bg-yellow-400 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium",__self:this,__source:{fileName:X,lineNumber:415,columnNumber:19}}," Featured"),(F.stockQuantity||F.stock_quantity)<10&&(F.stockQuantity||F.stock_quantity)>0&&e.createElement("div",{className:"absolute top-2 right-2 bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",__self:this,__source:{fileName:X,lineNumber:423,columnNumber:21}},"Low Stock"),(F.stockQuantity||F.stock_quantity)===0&&e.createElement("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",__self:this,__source:{fileName:X,lineNumber:429,columnNumber:19}},e.createElement("span",{className:"text-white font-medium",__self:this,__source:{fileName:X,lineNumber:430,columnNumber:21}},"Out of Stock"))),e.createElement("div",{className:"p-4",__self:this,__source:{fileName:X,lineNumber:436,columnNumber:15}},e.createElement("div",{className:"flex items-start justify-between mb-2",__self:this,__source:{fileName:X,lineNumber:437,columnNumber:17}},e.createElement("h3",{className:"font-semibold text-gray-900 text-sm line-clamp-2",__self:this,__source:{fileName:X,lineNumber:438,columnNumber:19}},F.name),e.createElement("button",{className:"text-gray-400 hover:text-red-500 transition-colors ml-2",__self:this,__source:{fileName:X,lineNumber:441,columnNumber:19}},e.createElement(El,{className:"w-4 h-4",__self:this,__source:{fileName:X,lineNumber:442,columnNumber:21}}))),e.createElement("p",{className:"text-gray-600 text-xs mb-2 line-clamp-2",__self:this,__source:{fileName:X,lineNumber:446,columnNumber:17}},F.description),e.createElement("div",{className:"flex items-center text-xs text-gray-500 mb-3",__self:this,__source:{fileName:X,lineNumber:450,columnNumber:17}},e.createElement(it,{className:"w-3 h-3 mr-1",__self:this,__source:{fileName:X,lineNumber:451,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:X,lineNumber:452,columnNumber:19}},F.farmer?.county||F.farmer_county||"Unknown"),e.createElement("span",{className:"mx-2",__self:this,__source:{fileName:X,lineNumber:457,columnNumber:19}},""),e.createElement("span",{__self:this,__source:{fileName:X,lineNumber:458,columnNumber:19}},F.farmer?.user?.firstName||F.farmer_name||"Farmer"," ",F.farmer?.user?.lastName||"")),F.tags&&F.tags.length>0&&e.createElement("div",{className:"flex flex-wrap gap-1 mb-3",__self:this,__source:{fileName:X,lineNumber:468,columnNumber:19}},(Array.isArray(F.tags)?F.tags:[]).slice(0,3).map(C=>e.createElement("span",{key:C,className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",__self:this,__source:{fileName:X,lineNumber:470,columnNumber:23}},C))),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:X,lineNumber:480,columnNumber:17}},e.createElement("div",{__self:this,__source:{fileName:X,lineNumber:481,columnNumber:19}},e.createElement("div",{className:"text-lg font-bold text-gray-900",__self:this,__source:{fileName:X,lineNumber:482,columnNumber:21}},le(F.pricePerUnit||F.price_per_unit)),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:X,lineNumber:487,columnNumber:21}},"per ",F.unit)),e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:X,lineNumber:492,columnNumber:19}},e.createElement(xe,{to:`/marketplace/product/${F.id}`,className:"bg-gray-100 text-gray-700 px-2 py-2 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium flex items-center",__self:this,__source:{fileName:X,lineNumber:493,columnNumber:21}},e.createElement(xt,{className:"w-4 h-4",__self:this,__source:{fileName:X,lineNumber:497,columnNumber:23}})),(F.stockQuantity||F.stock_quantity)>0?e.createElement("button",{onClick:()=>B(F),disabled:g,className:"bg-primary-600 text-white px-3 py-2 rounded-lg hover:bg-primary-700 disabled:opacity-50 transition-colors text-sm font-medium flex items-center space-x-1",__self:this,__source:{fileName:X,lineNumber:501,columnNumber:23}},e.createElement(gt,{className:"w-4 h-4",__self:this,__source:{fileName:X,lineNumber:506,columnNumber:25}}),e.createElement("span",{__self:this,__source:{fileName:X,lineNumber:507,columnNumber:25}},"Add to Cart")):e.createElement("button",{disabled:!0,className:"bg-gray-300 text-gray-500 px-3 py-2 rounded-lg text-sm font-medium flex items-center space-x-1 cursor-not-allowed",__self:this,__source:{fileName:X,lineNumber:510,columnNumber:23}},e.createElement("span",{__self:this,__source:{fileName:X,lineNumber:514,columnNumber:25}},"Out of Stock")))))))),f.totalPages>1&&e.createElement("div",{className:"mt-8 flex justify-center",__self:this,__source:{fileName:X,lineNumber:527,columnNumber:9}},e.createElement("div",{className:"flex space-x-1",__self:this,__source:{fileName:X,lineNumber:528,columnNumber:11}},e.createElement("button",{onClick:()=>E(f.page-1),disabled:f.page===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:X,lineNumber:529,columnNumber:13}},"Previous"),[...Array(Math.min(5,f.totalPages))].map((F,C)=>{const c=Math.max(1,f.page-2)+C;return c>f.totalPages?null:e.createElement("button",{key:c,onClick:()=>E(c),className:`px-3 py-2 text-sm font-medium border rounded-md ${c===f.page?"bg-primary-600 text-white border-primary-600":"text-gray-500 bg-white border-gray-300 hover:bg-gray-50"}`,__self:this,__source:{fileName:X,lineNumber:542,columnNumber:17}},c)}),e.createElement("button",{onClick:()=>E(f.page+1),disabled:f.page===f.totalPages,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:X,lineNumber:556,columnNumber:13}},"Next"))))}var $="/app/code/frontend/src/pages/marketplace/ProductPage.tsx";function Zi(){const{id:t}=Ma(),r=_t(),[l,s]=P.useState(null),[a,m]=P.useState([]),[n,i]=P.useState(!0),[b,u]=P.useState(0),[_,o]=P.useState(1),[f,h]=P.useState(!1),{addToCart:w,isLoading:g}=Qt(),{user:p,isAuthenticated:S}=Ae();P.useEffect(()=>{t&&E()},[t]);const E=async()=>{try{i(!0);const c=await me.get(`/api/marketplace/products/${t}`),x=c.data.product||c.data;s(x),x&&M(x.category,x.farmer.county)}catch(c){console.error("Failed to fetch product:",c),c.response?.status===404?(L.error("Product not found"),r("/marketplace")):L.error("Failed to load product details")}finally{i(!1)}},M=async(c,x)=>{try{const Q=await me.get(`/api/marketplace/products?category=${c}&county=${x}&limit=4`),re=Q.data.products||Q.data,Ne=Array.isArray(re)?re:[];m(Ne.filter(he=>he?.id!==t))}catch(Q){console.error("Failed to fetch related products:",Q)}},I=async()=>{if(!S){L.error("Please login to add items to cart");return}if(p?.role!=="CUSTOMER"){L.error("Only customers can add items to cart");return}if(l)try{await w(l.id,_),o(1)}catch{}},B=async()=>{if(navigator.share)try{await navigator.share({title:l?.name,text:l?.description,url:window.location.href})}catch(c){console.log("Error sharing:",c)}else navigator.clipboard.writeText(window.location.href),L.success("Link copied to clipboard!")},q=c=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(c),le=c=>new Date(c).toLocaleDateString("en-KE",{year:"numeric",month:"long",day:"numeric"}),F=()=>l?l.stockQuantity===0?{text:"Out of Stock",color:"text-red-600",bgColor:"bg-red-100"}:l.stockQuantity<=(l.minStockLevel||5)?{text:"Low Stock",color:"text-orange-600",bgColor:"bg-orange-100"}:{text:"In Stock",color:"text-green-600",bgColor:"bg-green-100"}:null;if(n)return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:$,lineNumber:207,columnNumber:7}},e.createElement("div",{className:"animate-pulse",__self:this,__source:{fileName:$,lineNumber:208,columnNumber:9}},e.createElement("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8",__self:this,__source:{fileName:$,lineNumber:209,columnNumber:11}}),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",__self:this,__source:{fileName:$,lineNumber:210,columnNumber:11}},e.createElement("div",{className:"h-96 bg-gray-200 rounded-lg",__self:this,__source:{fileName:$,lineNumber:211,columnNumber:13}}),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:$,lineNumber:212,columnNumber:13}},e.createElement("div",{className:"h-8 bg-gray-200 rounded w-3/4",__self:this,__source:{fileName:$,lineNumber:213,columnNumber:15}}),e.createElement("div",{className:"h-4 bg-gray-200 rounded w-1/2",__self:this,__source:{fileName:$,lineNumber:214,columnNumber:15}}),e.createElement("div",{className:"h-12 bg-gray-200 rounded w-1/3",__self:this,__source:{fileName:$,lineNumber:215,columnNumber:15}}),e.createElement("div",{className:"h-32 bg-gray-200 rounded",__self:this,__source:{fileName:$,lineNumber:216,columnNumber:15}})))));if(!l)return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:$,lineNumber:226,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:$,lineNumber:227,columnNumber:9}},e.createElement("h1",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:$,lineNumber:228,columnNumber:11}},"Product not found"),e.createElement(xe,{to:"/marketplace",className:"text-primary-600 hover:text-primary-700 mt-4 inline-block",__self:this,__source:{fileName:$,lineNumber:231,columnNumber:11}},"Back to Marketplace")));const C=F();return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:$,lineNumber:245,columnNumber:5}},e.createElement("nav",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-8",__self:this,__source:{fileName:$,lineNumber:247,columnNumber:7}},e.createElement(xe,{to:"/marketplace",className:"hover:text-gray-900",__self:this,__source:{fileName:$,lineNumber:248,columnNumber:9}},"Marketplace"),e.createElement("span",{__self:this,__source:{fileName:$,lineNumber:251,columnNumber:9}},"/"),e.createElement("span",{className:"text-gray-900",__self:this,__source:{fileName:$,lineNumber:252,columnNumber:9}},l.name)),e.createElement("button",{onClick:()=>r(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",__self:this,__source:{fileName:$,lineNumber:256,columnNumber:7}},e.createElement(rr,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:$,lineNumber:260,columnNumber:9}}),"Back"),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",__self:this,__source:{fileName:$,lineNumber:264,columnNumber:7}},e.createElement("div",{__self:this,__source:{fileName:$,lineNumber:266,columnNumber:9}},e.createElement("div",{className:"aspect-square bg-gray-200 rounded-lg overflow-hidden mb-4",__self:this,__source:{fileName:$,lineNumber:267,columnNumber:11}},l.images&&l.images.length>0?e.createElement("img",{src:l.images[b]||l.images[0],alt:l.name,className:"w-full h-full object-cover",onError:c=>{c.currentTarget.src="/api/placeholder/400/400?text="+encodeURIComponent(l.name)},__self:this,__source:{fileName:$,lineNumber:269,columnNumber:15}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400",__self:this,__source:{fileName:$,lineNumber:280,columnNumber:15}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:$,lineNumber:281,columnNumber:17}},e.createElement("div",{className:"text-4xl mb-2",__self:this,__source:{fileName:$,lineNumber:282,columnNumber:19}},""),e.createElement("span",{__self:this,__source:{fileName:$,lineNumber:283,columnNumber:19}},l.name)))),l.images&&l.images.length>1&&e.createElement("div",{className:"grid grid-cols-4 gap-2",__self:this,__source:{fileName:$,lineNumber:291,columnNumber:13}},l.images.slice(0,4).map((c,x)=>e.createElement("button",{key:x,onClick:()=>u(x),className:`aspect-square bg-gray-200 rounded-lg overflow-hidden border-2 ${b===x?"border-primary-600":"border-transparent"}`,__self:this,__source:{fileName:$,lineNumber:293,columnNumber:17}},e.createElement("img",{src:c,alt:`${l.name} ${x+1}`,className:"w-full h-full object-cover",onError:Q=>{Q.currentTarget.src="/api/placeholder/100/100?text="+(x+1)},__self:this,__source:{fileName:$,lineNumber:302,columnNumber:19}}))))),e.createElement("div",{__self:this,__source:{fileName:$,lineNumber:318,columnNumber:9}},e.createElement("div",{className:"flex items-start justify-between mb-4",__self:this,__source:{fileName:$,lineNumber:319,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:$,lineNumber:320,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2",__self:this,__source:{fileName:$,lineNumber:321,columnNumber:15}},l.name),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:$,lineNumber:324,columnNumber:15}},l.category)),e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:$,lineNumber:327,columnNumber:13}},e.createElement("button",{onClick:B,className:"p-2 text-gray-400 hover:text-gray-600 border border-gray-300 rounded-lg",__self:this,__source:{fileName:$,lineNumber:328,columnNumber:15}},e.createElement(Qa,{className:"w-5 h-5",__self:this,__source:{fileName:$,lineNumber:332,columnNumber:17}})),e.createElement("button",{className:"p-2 text-gray-400 hover:text-red-500 border border-gray-300 rounded-lg",__self:this,__source:{fileName:$,lineNumber:334,columnNumber:15}},e.createElement(El,{className:"w-5 h-5",__self:this,__source:{fileName:$,lineNumber:335,columnNumber:17}})))),e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:$,lineNumber:341,columnNumber:11}},e.createElement("div",{className:"text-3xl font-bold text-gray-900 mb-2",__self:this,__source:{fileName:$,lineNumber:342,columnNumber:13}},q(l.pricePerUnit),e.createElement("span",{className:"text-lg font-normal text-gray-600 ml-2",__self:this,__source:{fileName:$,lineNumber:344,columnNumber:15}},"per ",l.unit)),C&&e.createElement("div",{className:"flex items-center space-x-4",__self:this,__source:{fileName:$,lineNumber:350,columnNumber:15}},e.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${C.bgColor} ${C.color}`,__self:this,__source:{fileName:$,lineNumber:351,columnNumber:17}},C.text),e.createElement("span",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:$,lineNumber:356,columnNumber:17}},l.stockQuantity," ",l.unit," available"))),e.createElement("div",{className:"flex flex-wrap gap-2 mb-6",__self:this,__source:{fileName:$,lineNumber:364,columnNumber:11}},l.isFeatured&&e.createElement("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium",__self:this,__source:{fileName:$,lineNumber:366,columnNumber:15}}," Featured"),l.tags.map(c=>e.createElement("span",{key:c,className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm",__self:this,__source:{fileName:$,lineNumber:371,columnNumber:15}},c))),e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:$,lineNumber:381,columnNumber:11}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2",__self:this,__source:{fileName:$,lineNumber:382,columnNumber:13}},"Description"),e.createElement("p",{className:"text-gray-700 leading-relaxed",__self:this,__source:{fileName:$,lineNumber:385,columnNumber:13}},l.description)),e.createElement("div",{className:"grid grid-cols-2 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",__self:this,__source:{fileName:$,lineNumber:391,columnNumber:11}},l.harvestDate&&e.createElement("div",{__self:this,__source:{fileName:$,lineNumber:393,columnNumber:15}},e.createElement("span",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:$,lineNumber:394,columnNumber:17}},"Harvest Date"),e.createElement("p",{className:"text-gray-900",__self:this,__source:{fileName:$,lineNumber:397,columnNumber:17}},le(l.harvestDate))),l.expiryDate&&e.createElement("div",{__self:this,__source:{fileName:$,lineNumber:403,columnNumber:15}},e.createElement("span",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:$,lineNumber:404,columnNumber:17}},"Best Before"),e.createElement("p",{className:"text-gray-900",__self:this,__source:{fileName:$,lineNumber:407,columnNumber:17}},le(l.expiryDate))),e.createElement("div",{__self:this,__source:{fileName:$,lineNumber:412,columnNumber:13}},e.createElement("span",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:$,lineNumber:413,columnNumber:15}},"Category"),e.createElement("p",{className:"text-gray-900",__self:this,__source:{fileName:$,lineNumber:416,columnNumber:15}},l.category)),e.createElement("div",{__self:this,__source:{fileName:$,lineNumber:418,columnNumber:13}},e.createElement("span",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:$,lineNumber:419,columnNumber:15}},"Unit"),e.createElement("p",{className:"text-gray-900",__self:this,__source:{fileName:$,lineNumber:420,columnNumber:15}},l.unit))),S&&p?.role==="CUSTOMER"&&l.stockQuantity>0&&e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:$,lineNumber:428,columnNumber:15}},e.createElement("div",{className:"flex items-center space-x-4 mb-4",__self:this,__source:{fileName:$,lineNumber:429,columnNumber:17}},e.createElement("label",{className:"text-sm font-medium text-gray-700",__self:this,__source:{fileName:$,lineNumber:430,columnNumber:19}},"Quantity:"),e.createElement("div",{className:"flex items-center border border-gray-300 rounded-lg",__self:this,__source:{fileName:$,lineNumber:433,columnNumber:19}},e.createElement("button",{onClick:()=>o(Math.max(1,_-1)),className:"px-3 py-2 text-gray-600 hover:text-gray-900",__self:this,__source:{fileName:$,lineNumber:434,columnNumber:21}},"-"),e.createElement("input",{type:"number",min:"1",max:l.stockQuantity,value:_,onChange:c=>o(Math.max(1,parseInt(c.target.value)||1)),className:"w-16 px-2 py-2 text-center border-0 focus:ring-0",__self:this,__source:{fileName:$,lineNumber:440,columnNumber:21}}),e.createElement("button",{onClick:()=>o(Math.min(l.stockQuantity,_+1)),className:"px-3 py-2 text-gray-600 hover:text-gray-900",__self:this,__source:{fileName:$,lineNumber:450,columnNumber:21}},"+")),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:$,lineNumber:461,columnNumber:19}},"Total: ",q(l.pricePerUnit*_))),e.createElement("button",{onClick:I,disabled:g,className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg hover:bg-primary-700 disabled:opacity-50 transition-colors font-medium flex items-center justify-center",__self:this,__source:{fileName:$,lineNumber:466,columnNumber:17}},e.createElement(gt,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:$,lineNumber:471,columnNumber:19}}),"Add to Cart")),e.createElement("div",{className:"border-t border-gray-200 pt-6",__self:this,__source:{fileName:$,lineNumber:478,columnNumber:11}},e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",__self:this,__source:{fileName:$,lineNumber:479,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:$,lineNumber:480,columnNumber:15}},e.createElement(Te,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:$,lineNumber:481,columnNumber:17}}),e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:$,lineNumber:482,columnNumber:17}},"Free delivery over KES 1000")),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:$,lineNumber:486,columnNumber:15}},e.createElement(Ie,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:$,lineNumber:487,columnNumber:17}}),e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:$,lineNumber:488,columnNumber:17}},"Delivered within 24h")),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:$,lineNumber:490,columnNumber:15}},e.createElement(pt,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:$,lineNumber:491,columnNumber:17}}),e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:$,lineNumber:492,columnNumber:17}},"Quality guaranteed")))))),e.createElement("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-8",__self:this,__source:{fileName:$,lineNumber:500,columnNumber:7}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:$,lineNumber:501,columnNumber:9}},"About the Farmer"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:$,lineNumber:505,columnNumber:9}},e.createElement("div",{__self:this,__source:{fileName:$,lineNumber:506,columnNumber:11}},e.createElement("div",{className:"flex items-center mb-3",__self:this,__source:{fileName:$,lineNumber:507,columnNumber:13}},e.createElement("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mr-4",__self:this,__source:{fileName:$,lineNumber:508,columnNumber:15}},e.createElement("span",{className:"text-primary-600 font-semibold text-lg",__self:this,__source:{fileName:$,lineNumber:509,columnNumber:17}},l.farmer.user.firstName[0],l.farmer.user.lastName[0])),e.createElement("div",{__self:this,__source:{fileName:$,lineNumber:514,columnNumber:15}},e.createElement("h4",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:$,lineNumber:515,columnNumber:17}},l.farmer.user.firstName," ",l.farmer.user.lastName),l.farmer.farmName&&e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:$,lineNumber:519,columnNumber:19}},l.farmer.farmName))),e.createElement("div",{className:"space-y-2 text-sm",__self:this,__source:{fileName:$,lineNumber:526,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:$,lineNumber:527,columnNumber:15}},e.createElement(it,{className:"w-4 h-4 text-gray-400 mr-2",__self:this,__source:{fileName:$,lineNumber:528,columnNumber:17}}),e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:$,lineNumber:529,columnNumber:17}},l.farmer.subCounty?`${l.farmer.subCounty}, `:"",l.farmer.county)),l.farmer.farmSize&&e.createElement("div",{__self:this,__source:{fileName:$,lineNumber:538,columnNumber:17}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:$,lineNumber:539,columnNumber:19}},"Farm Size: ",l.farmer.farmSize," acres")))),e.createElement("div",{__self:this,__source:{fileName:$,lineNumber:547,columnNumber:11}},e.createElement("button",{onClick:()=>h(!f),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors text-sm font-medium mb-4",__self:this,__source:{fileName:$,lineNumber:548,columnNumber:13}},"Contact Farmer"),f&&e.createElement("div",{className:"space-y-2 text-sm",__self:this,__source:{fileName:$,lineNumber:556,columnNumber:15}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:$,lineNumber:557,columnNumber:17}},e.createElement(Et,{className:"w-4 h-4 text-gray-400 mr-2",__self:this,__source:{fileName:$,lineNumber:558,columnNumber:19}}),e.createElement("a",{href:`tel:${l.farmer.user.phone}`,className:"text-primary-600 hover:text-primary-700",__self:this,__source:{fileName:$,lineNumber:559,columnNumber:19}},l.farmer.user.phone)),l.farmer.user.email&&e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:$,lineNumber:567,columnNumber:19}},e.createElement(Or,{className:"w-4 h-4 text-gray-400 mr-2",__self:this,__source:{fileName:$,lineNumber:568,columnNumber:21}}),e.createElement("a",{href:`mailto:${l.farmer.user.email}`,className:"text-primary-600 hover:text-primary-700",__self:this,__source:{fileName:$,lineNumber:569,columnNumber:21}},l.farmer.user.email)))))),a.length>0&&e.createElement("div",{__self:this,__source:{fileName:$,lineNumber:585,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-6",__self:this,__source:{fileName:$,lineNumber:586,columnNumber:11}},"Related Products"),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",__self:this,__source:{fileName:$,lineNumber:590,columnNumber:11}},a.map(c=>e.createElement(xe,{key:c.id,to:`/marketplace/product/${c.id}`,className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",__self:this,__source:{fileName:$,lineNumber:592,columnNumber:15}},e.createElement("div",{className:"aspect-square bg-gray-200",__self:this,__source:{fileName:$,lineNumber:597,columnNumber:17}},c.images&&c.images.length>0?e.createElement("img",{src:c.images[0],alt:c.name,className:"w-full h-full object-cover",onError:x=>{x.currentTarget.src="/api/placeholder/200/200?text="+encodeURIComponent(c.name)},__self:this,__source:{fileName:$,lineNumber:599,columnNumber:21}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400",__self:this,__source:{fileName:$,lineNumber:610,columnNumber:21}},"")),e.createElement("div",{className:"p-4",__self:this,__source:{fileName:$,lineNumber:616,columnNumber:17}},e.createElement("h4",{className:"font-semibold text-gray-900 text-sm mb-1 line-clamp-2",__self:this,__source:{fileName:$,lineNumber:617,columnNumber:19}},c.name),e.createElement("p",{className:"text-xs text-gray-600 mb-2",__self:this,__source:{fileName:$,lineNumber:620,columnNumber:19}},c.farmer.county," "," ",c.farmer.user.firstName," ",c.farmer.user.lastName),e.createElement("div",{className:"text-lg font-bold text-gray-900",__self:this,__source:{fileName:$,lineNumber:625,columnNumber:19}},q(c.pricePerUnit),e.createElement("span",{className:"text-xs font-normal text-gray-600 ml-1",__self:this,__source:{fileName:$,lineNumber:627,columnNumber:21}},"/",c.unit))))))))}var ye="/app/code/frontend/src/pages/auth/LoginPage.tsx";function Xi(){const[t,r]=P.useState({phone:"",password:""}),[l,s]=P.useState(!1),{login:a,isLoading:m}=Ae(),n=_t(),b=Cs().state?.from?.pathname||"/",u=async o=>{o.preventDefault();try{const f=t.phone.trim(),h=t.password.trim();console.log(" LoginPage - About to call login with:",{phone:f,password:h,formData:t}),await a(f,h),L.success("Login successful!");const{user:w}=Ae.getState();w?.role==="ADMIN"?n("/admin/dashboard",{replace:!0}):w?.role==="FARMER"?n("/farmer/dashboard",{replace:!0}):w?.role==="CUSTOMER"?n("/customer/dashboard",{replace:!0}):w?.role==="DRIVER"?n("/driver/dashboard",{replace:!0}):n(b,{replace:!0})}catch(f){L.error(f.message||"Login failed")}},_=o=>{r({...t,[o.target.name]:o.target.value})};return e.createElement("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",__self:this,__source:{fileName:ye,lineNumber:62,columnNumber:5}},e.createElement("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",__self:this,__source:{fileName:ye,lineNumber:63,columnNumber:7}},e.createElement("div",{className:"flex justify-center",__self:this,__source:{fileName:ye,lineNumber:64,columnNumber:9}},e.createElement("div",{className:"w-12 h-12 bg-primary-600 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:ye,lineNumber:65,columnNumber:11}},e.createElement("span",{className:"text-white font-bold text-lg",__self:this,__source:{fileName:ye,lineNumber:66,columnNumber:13}},"Z"))),e.createElement("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",__self:this,__source:{fileName:ye,lineNumber:69,columnNumber:9}},"Sign in to your account"),e.createElement("p",{className:"mt-2 text-center text-sm text-gray-600",__self:this,__source:{fileName:ye,lineNumber:72,columnNumber:9}},"Or"," ",e.createElement(xe,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",__self:this,__source:{fileName:ye,lineNumber:74,columnNumber:11}},"create a new account"))),e.createElement("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",__self:this,__source:{fileName:ye,lineNumber:83,columnNumber:7}},e.createElement("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",__self:this,__source:{fileName:ye,lineNumber:84,columnNumber:9}},e.createElement("form",{className:"space-y-6",onSubmit:u,__self:this,__source:{fileName:ye,lineNumber:85,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:ye,lineNumber:86,columnNumber:13}},e.createElement("label",{htmlFor:"phone",className:"form-label",__self:this,__source:{fileName:ye,lineNumber:87,columnNumber:15}},"Phone Number"),e.createElement("input",{id:"phone",name:"phone",type:"tel",required:!0,placeholder:"e.g., +254712345678 or 0712345678",className:"form-input",value:t.phone,onChange:_,__self:this,__source:{fileName:ye,lineNumber:90,columnNumber:15}})),e.createElement("div",{__self:this,__source:{fileName:ye,lineNumber:102,columnNumber:13}},e.createElement("label",{htmlFor:"password",className:"form-label",__self:this,__source:{fileName:ye,lineNumber:103,columnNumber:15}},"Password"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:ye,lineNumber:106,columnNumber:15}},e.createElement("input",{id:"password",name:"password",type:l?"text":"password",required:!0,className:"form-input pr-10",value:t.password,onChange:_,__self:this,__source:{fileName:ye,lineNumber:107,columnNumber:17}}),e.createElement("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!l),__self:this,__source:{fileName:ye,lineNumber:116,columnNumber:17}},l?e.createElement(xr,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:ye,lineNumber:122,columnNumber:21}}):e.createElement(xt,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:ye,lineNumber:124,columnNumber:21}})))),e.createElement("div",{__self:this,__source:{fileName:ye,lineNumber:130,columnNumber:13}},e.createElement("button",{type:"submit",disabled:m,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:ye,lineNumber:131,columnNumber:15}},m?"Signing in...":"Sign in"))),e.createElement("div",{className:"mt-6",__self:this,__source:{fileName:ye,lineNumber:141,columnNumber:11}},e.createElement("button",{type:"button",onClick:()=>{r({phone:"+254712345678",password:"password123"}),u({preventDefault:()=>{}})},className:"w-full mb-4 bg-green-600 text-white py-2 px-4 rounded-md text-sm font-medium hover:bg-green-700",__self:this,__source:{fileName:ye,lineNumber:142,columnNumber:13}}," Test Admin Login (+254712345678 / password123)"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:ye,lineNumber:156,columnNumber:13}},e.createElement("div",{className:"absolute inset-0 flex items-center",__self:this,__source:{fileName:ye,lineNumber:157,columnNumber:15}},e.createElement("div",{className:"w-full border-t border-gray-300",__self:this,__source:{fileName:ye,lineNumber:158,columnNumber:17}})),e.createElement("div",{className:"relative flex justify-center text-sm",__self:this,__source:{fileName:ye,lineNumber:160,columnNumber:15}},e.createElement("span",{className:"px-2 bg-white text-gray-500",__self:this,__source:{fileName:ye,lineNumber:161,columnNumber:17}},"Demo Accounts"))),e.createElement("div",{className:"mt-4 space-y-2 text-xs text-gray-600",__self:this,__source:{fileName:ye,lineNumber:167,columnNumber:13}},e.createElement("p",{__self:this,__source:{fileName:ye,lineNumber:168,columnNumber:15}},e.createElement("strong",{__self:this,__source:{fileName:ye,lineNumber:169,columnNumber:17}},"Admin:")," +254712345678 / password123"),e.createElement("p",{__self:this,__source:{fileName:ye,lineNumber:171,columnNumber:15}},e.createElement("strong",{__self:this,__source:{fileName:ye,lineNumber:172,columnNumber:17}},"Farmer:")," +254734567890 / password123"),e.createElement("p",{__self:this,__source:{fileName:ye,lineNumber:174,columnNumber:15}},e.createElement("strong",{__self:this,__source:{fileName:ye,lineNumber:175,columnNumber:17}},"Customer:")," +254756789012 / password123"),e.createElement("p",{__self:this,__source:{fileName:ye,lineNumber:177,columnNumber:15}},e.createElement("strong",{__self:this,__source:{fileName:ye,lineNumber:178,columnNumber:17}},"Driver:")," +254778901234 / password123"))))))}var _r=t=>t.type==="checkbox",Mt=t=>t instanceof Date,Qe=t=>t==null;const ga=t=>typeof t=="object";var Oe=t=>!Qe(t)&&!Array.isArray(t)&&ga(t)&&!Mt(t),eu=t=>Oe(t)&&t.target?_r(t.target)?t.target.checked:t.target.value:t,tu=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,ru=(t,r)=>t.has(tu(r)),lu=t=>{const r=t.constructor&&t.constructor.prototype;return Oe(r)&&r.hasOwnProperty("isPrototypeOf")},Pl=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Be(t){let r;const l=Array.isArray(t),s=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)r=new Date(t);else if(!(Pl&&(t instanceof Blob||s))&&(l||Oe(t)))if(r=l?[]:{},!l&&!lu(t))r=t;else for(const a in t)t.hasOwnProperty(a)&&(r[a]=Be(t[a]));else return t;return r}var Gr=t=>/^\w*$/.test(t),$e=t=>t===void 0,Dl=t=>Array.isArray(t)?t.filter(Boolean):[],Rl=t=>Dl(t.replace(/["|']|\]/g,"").split(/\.|\[/)),oe=(t,r,l)=>{if(!r||!Oe(t))return l;const s=(Gr(r)?[r]:Rl(r)).reduce((a,m)=>Qe(a)?a:a[m],t);return $e(s)||s===t?$e(t[r])?l:t[r]:s},bt=t=>typeof t=="boolean",De=(t,r,l)=>{let s=-1;const a=Gr(r)?[r]:Rl(r),m=a.length,n=m-1;for(;++s<m;){const i=a[s];let b=l;if(s!==n){const u=t[i];b=Oe(u)||Array.isArray(u)?u:isNaN(+a[s+1])?{}:[]}if(i==="__proto__"||i==="constructor"||i==="prototype")return;t[i]=b,t=t[i]}};const Ns={BLUR:"blur",FOCUS_OUT:"focusout"},ot={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},vt={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},su=e.createContext(null);su.displayName="HookFormContext";var au=(t,r,l,s=!0)=>{const a={defaultValues:r._defaultValues};for(const m in t)Object.defineProperty(a,m,{get:()=>{const n=m;return r._proxyFormState[n]!==ot.all&&(r._proxyFormState[n]=!s||ot.all),t[n]}});return a};const mu=typeof window<"u"?e.useLayoutEffect:e.useEffect;var ht=t=>typeof t=="string",nu=(t,r,l,s,a)=>ht(t)?(s&&r.watch.add(t),oe(l,t,a)):Array.isArray(t)?t.map(m=>(s&&r.watch.add(m),oe(l,m))):(s&&(r.watchAll=!0),l),pl=t=>Qe(t)||!ga(t);function Ft(t,r,l=new WeakSet){if(pl(t)||pl(r))return t===r;if(Mt(t)&&Mt(r))return t.getTime()===r.getTime();const s=Object.keys(t),a=Object.keys(r);if(s.length!==a.length)return!1;if(l.has(t)||l.has(r))return!0;l.add(t),l.add(r);for(const m of s){const n=t[m];if(!a.includes(m))return!1;if(m!=="ref"){const i=r[m];if(Mt(n)&&Mt(i)||Oe(n)&&Oe(i)||Array.isArray(n)&&Array.isArray(i)?!Ft(n,i,l):n!==i)return!1}}return!0}var iu=(t,r,l,s,a)=>r?{...l[t],types:{...l[t]&&l[t].types?l[t].types:{},[s]:a||!0}}:{},er=t=>Array.isArray(t)?t:[t],fs=()=>{let t=[];return{get observers(){return t},next:a=>{for(const m of t)m.next&&m.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(m=>m!==a)}}),unsubscribe:()=>{t=[]}}},et=t=>Oe(t)&&!Object.keys(t).length,Fl=t=>t.type==="file",ct=t=>typeof t=="function",Dr=t=>{if(!Pl)return!1;const r=t?t.ownerDocument:0;return t instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},pa=t=>t.type==="select-multiple",Tl=t=>t.type==="radio",uu=t=>Tl(t)||_r(t),sl=t=>Dr(t)&&t.isConnected;function ou(t,r){const l=r.slice(0,-1).length;let s=0;for(;s<l;)t=$e(t)?s++:t[r[s++]];return t}function cu(t){for(const r in t)if(t.hasOwnProperty(r)&&!$e(t[r]))return!1;return!0}function Ue(t,r){const l=Array.isArray(r)?r:Gr(r)?[r]:Rl(r),s=l.length===1?t:ou(t,l),a=l.length-1,m=l[a];return s&&delete s[m],a!==0&&(Oe(s)&&et(s)||Array.isArray(s)&&cu(s))&&Ue(t,l.slice(0,-1)),t}var ya=t=>{for(const r in t)if(ct(t[r]))return!0;return!1};function Rr(t,r={}){const l=Array.isArray(t);if(Oe(t)||l)for(const s in t)Array.isArray(t[s])||Oe(t[s])&&!ya(t[s])?(r[s]=Array.isArray(t[s])?[]:{},Rr(t[s],r[s])):Qe(t[s])||(r[s]=!0);return r}function xa(t,r,l){const s=Array.isArray(t);if(Oe(t)||s)for(const a in t)Array.isArray(t[a])||Oe(t[a])&&!ya(t[a])?$e(r)||pl(l[a])?l[a]=Array.isArray(t[a])?Rr(t[a],[]):{...Rr(t[a])}:xa(t[a],Qe(r)?{}:r[a],l[a]):l[a]=!Ft(t[a],r[a]);return l}var Yt=(t,r)=>xa(t,r,Rr(r));const bs={value:!1,isValid:!1},ds={value:!0,isValid:!0};var Ea=t=>{if(Array.isArray(t)){if(t.length>1){const r=t.filter(l=>l&&l.checked&&!l.disabled).map(l=>l.value);return{value:r,isValid:!!r.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!$e(t[0].attributes.value)?$e(t[0].value)||t[0].value===""?ds:{value:t[0].value,isValid:!0}:ds:bs}return bs},va=(t,{valueAsNumber:r,valueAsDate:l,setValueAs:s})=>$e(t)?t:r?t===""?NaN:t&&+t:l&&ht(t)?new Date(t):s?s(t):t;const hs={isValid:!1,value:null};var wa=t=>Array.isArray(t)?t.reduce((r,l)=>l&&l.checked&&!l.disabled?{isValid:!0,value:l.value}:r,hs):hs;function gs(t){const r=t.ref;return Fl(r)?r.files:Tl(r)?wa(t.refs).value:pa(r)?[...r.selectedOptions].map(({value:l})=>l):_r(r)?Ea(t.refs).value:va($e(r.value)?t.ref.value:r.value,t)}var _u=(t,r,l,s)=>{const a={};for(const m of t){const n=oe(r,m);n&&De(a,m,n._f)}return{criteriaMode:l,names:[...t],fields:a,shouldUseNativeValidation:s}},Fr=t=>t instanceof RegExp,Zt=t=>$e(t)?t:Fr(t)?t.source:Oe(t)?Fr(t.value)?t.value.source:t.value:t,ps=t=>({isOnSubmit:!t||t===ot.onSubmit,isOnBlur:t===ot.onBlur,isOnChange:t===ot.onChange,isOnAll:t===ot.all,isOnTouch:t===ot.onTouched});const ys="AsyncFunction";var Nu=t=>!!t&&!!t.validate&&!!(ct(t.validate)&&t.validate.constructor.name===ys||Oe(t.validate)&&Object.values(t.validate).find(r=>r.constructor.name===ys)),fu=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),xs=(t,r,l)=>!l&&(r.watchAll||r.watch.has(t)||[...r.watch].some(s=>t.startsWith(s)&&/^\.\w+/.test(t.slice(s.length))));const tr=(t,r,l,s)=>{for(const a of l||Object.keys(t)){const m=oe(t,a);if(m){const{_f:n,...i}=m;if(n){if(n.refs&&n.refs[0]&&r(n.refs[0],a)&&!s)return!0;if(n.ref&&r(n.ref,n.name)&&!s)return!0;if(tr(i,r))break}else if(Oe(i)&&tr(i,r))break}}};function Es(t,r,l){const s=oe(t,l);if(s||Gr(l))return{error:s,name:l};const a=l.split(".");for(;a.length;){const m=a.join("."),n=oe(r,m),i=oe(t,m);if(n&&!Array.isArray(n)&&l!==m)return{name:l};if(i&&i.type)return{name:m,error:i};if(i&&i.root&&i.root.type)return{name:`${m}.root`,error:i.root};a.pop()}return{name:l}}var bu=(t,r,l,s)=>{l(t);const{name:a,...m}=t;return et(m)||Object.keys(m).length>=Object.keys(r).length||Object.keys(m).find(n=>r[n]===(!s||ot.all))},du=(t,r,l)=>!t||!r||t===r||er(t).some(s=>s&&(l?s===r:s.startsWith(r)||r.startsWith(s))),hu=(t,r,l,s,a)=>a.isOnAll?!1:!l&&a.isOnTouch?!(r||t):(l?s.isOnBlur:a.isOnBlur)?!t:(l?s.isOnChange:a.isOnChange)?t:!0,gu=(t,r)=>!Dl(oe(t,r)).length&&Ue(t,r),pu=(t,r,l)=>{const s=er(oe(t,l));return De(s,"root",r[l]),De(t,l,s),t},pr=t=>ht(t);function vs(t,r,l="validate"){if(pr(t)||Array.isArray(t)&&t.every(pr)||bt(t)&&!t)return{type:l,message:pr(t)?t:"",ref:r}}var Bt=t=>Oe(t)&&!Fr(t)?t:{value:t,message:""},ws=async(t,r,l,s,a,m)=>{const{ref:n,refs:i,required:b,maxLength:u,minLength:_,min:o,max:f,pattern:h,validate:w,name:g,valueAsNumber:p,mount:S}=t._f,E=oe(l,g);if(!S||r.has(g))return{};const M=i?i[0]:n,I=Q=>{a&&M.reportValidity&&(M.setCustomValidity(bt(Q)?"":Q||""),M.reportValidity())},B={},q=Tl(n),le=_r(n),F=q||le,C=(p||Fl(n))&&$e(n.value)&&$e(E)||Dr(n)&&n.value===""||E===""||Array.isArray(E)&&!E.length,c=iu.bind(null,g,s,B),x=(Q,re,Ne,he=vt.maxLength,Ee=vt.minLength)=>{const Re=Q?re:Ne;B[g]={type:Q?he:Ee,message:Re,ref:n,...c(Q?he:Ee,Re)}};if(m?!Array.isArray(E)||!E.length:b&&(!F&&(C||Qe(E))||bt(E)&&!E||le&&!Ea(i).isValid||q&&!wa(i).isValid)){const{value:Q,message:re}=pr(b)?{value:!!b,message:b}:Bt(b);if(Q&&(B[g]={type:vt.required,message:re,ref:M,...c(vt.required,re)},!s))return I(re),B}if(!C&&(!Qe(o)||!Qe(f))){let Q,re;const Ne=Bt(f),he=Bt(o);if(!Qe(E)&&!isNaN(E)){const Ee=n.valueAsNumber||E&&+E;Qe(Ne.value)||(Q=Ee>Ne.value),Qe(he.value)||(re=Ee<he.value)}else{const Ee=n.valueAsDate||new Date(E),Re=Ke=>new Date(new Date().toDateString()+" "+Ke),Le=n.type=="time",qe=n.type=="week";ht(Ne.value)&&E&&(Q=Le?Re(E)>Re(Ne.value):qe?E>Ne.value:Ee>new Date(Ne.value)),ht(he.value)&&E&&(re=Le?Re(E)<Re(he.value):qe?E<he.value:Ee<new Date(he.value))}if((Q||re)&&(x(!!Q,Ne.message,he.message,vt.max,vt.min),!s))return I(B[g].message),B}if((u||_)&&!C&&(ht(E)||m&&Array.isArray(E))){const Q=Bt(u),re=Bt(_),Ne=!Qe(Q.value)&&E.length>+Q.value,he=!Qe(re.value)&&E.length<+re.value;if((Ne||he)&&(x(Ne,Q.message,re.message),!s))return I(B[g].message),B}if(h&&!C&&ht(E)){const{value:Q,message:re}=Bt(h);if(Fr(Q)&&!E.match(Q)&&(B[g]={type:vt.pattern,message:re,ref:n,...c(vt.pattern,re)},!s))return I(re),B}if(w){if(ct(w)){const Q=await w(E,l),re=vs(Q,M);if(re&&(B[g]={...re,...c(vt.validate,re.message)},!s))return I(re.message),B}else if(Oe(w)){let Q={};for(const re in w){if(!et(Q)&&!s)break;const Ne=vs(await w[re](E,l),M,re);Ne&&(Q={...Ne,...c(re,Ne.message)},I(Ne.message),s&&(B[g]=Q))}if(!et(Q)&&(B[g]={ref:M,...Q},!s))return B}}return I(!0),B};const yu={mode:ot.onSubmit,reValidateMode:ot.onChange,shouldFocusError:!0};function xu(t={}){let r={...yu,...t},l={submitCount:0,isDirty:!1,isReady:!1,isLoading:ct(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},s={},a=Oe(r.defaultValues)||Oe(r.values)?Be(r.defaultValues||r.values)||{}:{},m=r.shouldUnregister?{}:Be(a),n={action:!1,mount:!1,watch:!1},i={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},b,u=0;const _={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let o={..._};const f={array:fs(),state:fs()},h=r.criteriaMode===ot.all,w=y=>O=>{clearTimeout(u),u=setTimeout(y,O)},g=async y=>{if(!r.disabled&&(_.isValid||o.isValid||y)){const O=r.resolver?et((await le()).errors):await C(s,!0);O!==l.isValid&&f.state.next({isValid:O})}},p=(y,O)=>{!r.disabled&&(_.isValidating||_.validatingFields||o.isValidating||o.validatingFields)&&((y||Array.from(i.mount)).forEach(K=>{K&&(O?De(l.validatingFields,K,O):Ue(l.validatingFields,K))}),f.state.next({validatingFields:l.validatingFields,isValidating:!et(l.validatingFields)}))},S=(y,O=[],K,ie,ne=!0,se=!0)=>{if(ie&&K&&!r.disabled){if(n.action=!0,se&&Array.isArray(oe(s,y))){const _e=K(oe(s,y),ie.argA,ie.argB);ne&&De(s,y,_e)}if(se&&Array.isArray(oe(l.errors,y))){const _e=K(oe(l.errors,y),ie.argA,ie.argB);ne&&De(l.errors,y,_e),gu(l.errors,y)}if((_.touchedFields||o.touchedFields)&&se&&Array.isArray(oe(l.touchedFields,y))){const _e=K(oe(l.touchedFields,y),ie.argA,ie.argB);ne&&De(l.touchedFields,y,_e)}(_.dirtyFields||o.dirtyFields)&&(l.dirtyFields=Yt(a,m)),f.state.next({name:y,isDirty:x(y,O),dirtyFields:l.dirtyFields,errors:l.errors,isValid:l.isValid})}else De(m,y,O)},E=(y,O)=>{De(l.errors,y,O),f.state.next({errors:l.errors})},M=y=>{l.errors=y,f.state.next({errors:l.errors,isValid:!1})},I=(y,O,K,ie)=>{const ne=oe(s,y);if(ne){const se=oe(m,y,$e(K)?oe(a,y):K);$e(se)||ie&&ie.defaultChecked||O?De(m,y,O?se:gs(ne._f)):Ne(y,se),n.mount&&g()}},B=(y,O,K,ie,ne)=>{let se=!1,_e=!1;const we={name:y};if(!r.disabled){if(!K||ie){(_.isDirty||o.isDirty)&&(_e=l.isDirty,l.isDirty=we.isDirty=x(),se=_e!==we.isDirty);const ke=Ft(oe(a,y),O);_e=!!oe(l.dirtyFields,y),ke?Ue(l.dirtyFields,y):De(l.dirtyFields,y,!0),we.dirtyFields=l.dirtyFields,se=se||(_.dirtyFields||o.dirtyFields)&&_e!==!ke}if(K){const ke=oe(l.touchedFields,y);ke||(De(l.touchedFields,y,K),we.touchedFields=l.touchedFields,se=se||(_.touchedFields||o.touchedFields)&&ke!==K)}se&&ne&&f.state.next(we)}return se?we:{}},q=(y,O,K,ie)=>{const ne=oe(l.errors,y),se=(_.isValid||o.isValid)&&bt(O)&&l.isValid!==O;if(r.delayError&&K?(b=w(()=>E(y,K)),b(r.delayError)):(clearTimeout(u),b=null,K?De(l.errors,y,K):Ue(l.errors,y)),(K?!Ft(ne,K):ne)||!et(ie)||se){const _e={...ie,...se&&bt(O)?{isValid:O}:{},errors:l.errors,name:y};l={...l,..._e},f.state.next(_e)}},le=async y=>{p(y,!0);const O=await r.resolver(m,r.context,_u(y||i.mount,s,r.criteriaMode,r.shouldUseNativeValidation));return p(y),O},F=async y=>{const{errors:O}=await le(y);if(y)for(const K of y){const ie=oe(O,K);ie?De(l.errors,K,ie):Ue(l.errors,K)}else l.errors=O;return O},C=async(y,O,K={valid:!0})=>{for(const ie in y){const ne=y[ie];if(ne){const{_f:se,..._e}=ne;if(se){const we=i.array.has(se.name),ke=ne._f&&Nu(ne._f);ke&&_.validatingFields&&p([ie],!0);const mt=await ws(ne,i.disabled,m,h,r.shouldUseNativeValidation&&!O,we);if(ke&&_.validatingFields&&p([ie]),mt[se.name]&&(K.valid=!1,O))break;!O&&(oe(mt,se.name)?we?pu(l.errors,mt,se.name):De(l.errors,se.name,mt[se.name]):Ue(l.errors,se.name))}!et(_e)&&await C(_e,O,K)}}return K.valid},c=()=>{for(const y of i.unMount){const O=oe(s,y);O&&(O._f.refs?O._f.refs.every(K=>!sl(K)):!sl(O._f.ref))&&ve(y)}i.unMount=new Set},x=(y,O)=>!r.disabled&&(y&&O&&De(m,y,O),!Ft(Ke(),a)),Q=(y,O,K)=>nu(y,i,{...n.mount?m:$e(O)?a:ht(y)?{[y]:O}:O},K,O),re=y=>Dl(oe(n.mount?m:a,y,r.shouldUnregister?oe(a,y,[]):[])),Ne=(y,O,K={})=>{const ie=oe(s,y);let ne=O;if(ie){const se=ie._f;se&&(!se.disabled&&De(m,y,va(O,se)),ne=Dr(se.ref)&&Qe(O)?"":O,pa(se.ref)?[...se.ref.options].forEach(_e=>_e.selected=ne.includes(_e.value)):se.refs?_r(se.ref)?se.refs.forEach(_e=>{(!_e.defaultChecked||!_e.disabled)&&(Array.isArray(ne)?_e.checked=!!ne.find(we=>we===_e.value):_e.checked=ne===_e.value||!!ne)}):se.refs.forEach(_e=>_e.checked=_e.value===ne):Fl(se.ref)?se.ref.value="":(se.ref.value=ne,se.ref.type||f.state.next({name:y,values:Be(m)})))}(K.shouldDirty||K.shouldTouch)&&B(y,ne,K.shouldTouch,K.shouldDirty,!0),K.shouldValidate&&qe(y)},he=(y,O,K)=>{for(const ie in O){if(!O.hasOwnProperty(ie))return;const ne=O[ie],se=y+"."+ie,_e=oe(s,se);(i.array.has(y)||Oe(ne)||_e&&!_e._f)&&!Mt(ne)?he(se,ne,K):Ne(se,ne,K)}},Ee=(y,O,K={})=>{const ie=oe(s,y),ne=i.array.has(y),se=Be(O);De(m,y,se),ne?(f.array.next({name:y,values:Be(m)}),(_.isDirty||_.dirtyFields||o.isDirty||o.dirtyFields)&&K.shouldDirty&&f.state.next({name:y,dirtyFields:Yt(a,m),isDirty:x(y,se)})):ie&&!ie._f&&!Qe(se)?he(y,se,K):Ne(y,se,K),xs(y,i)&&f.state.next({...l,name:y}),f.state.next({name:n.mount?y:void 0,values:Be(m)})},Re=async y=>{n.mount=!0;const O=y.target;let K=O.name,ie=!0;const ne=oe(s,K),se=ke=>{ie=Number.isNaN(ke)||Mt(ke)&&isNaN(ke.getTime())||Ft(ke,oe(m,K,ke))},_e=ps(r.mode),we=ps(r.reValidateMode);if(ne){let ke,mt;const Nr=O.type?gs(ne._f):eu(y),At=y.type===Ns.BLUR||y.type===Ns.FOCUS_OUT,Ra=!fu(ne._f)&&!r.resolver&&!oe(l.errors,K)&&!ne._f.deps||hu(At,oe(l.touchedFields,K),l.isSubmitted,we,_e),Hr=xs(K,i,At);De(m,K,Nr),At?(ne._f.onBlur&&ne._f.onBlur(y),b&&b(0)):ne._f.onChange&&ne._f.onChange(y);const Wr=B(K,Nr,At),Fa=!et(Wr)||Hr;if(!At&&f.state.next({name:K,type:y.type,values:Be(m)}),Ra)return(_.isValid||o.isValid)&&(r.mode==="onBlur"?At&&g():At||g()),Fa&&f.state.next({name:K,...Hr?{}:Wr});if(!At&&Hr&&f.state.next({...l}),r.resolver){const{errors:jl}=await le([K]);if(se(Nr),ie){const Ta=Es(l.errors,s,K),Ul=Es(jl,s,Ta.name||K);ke=Ul.error,K=Ul.name,mt=et(jl)}}else p([K],!0),ke=(await ws(ne,i.disabled,m,h,r.shouldUseNativeValidation))[K],p([K]),se(Nr),ie&&(ke?mt=!1:(_.isValid||o.isValid)&&(mt=await C(s,!0)));ie&&(ne._f.deps&&qe(ne._f.deps),q(K,mt,ke,Wr))}},Le=(y,O)=>{if(oe(l.errors,O)&&y.focus)return y.focus(),1},qe=async(y,O={})=>{let K,ie;const ne=er(y);if(r.resolver){const se=await F($e(y)?y:ne);K=et(se),ie=y?!ne.some(_e=>oe(se,_e)):K}else y?(ie=(await Promise.all(ne.map(async se=>{const _e=oe(s,se);return await C(_e&&_e._f?{[se]:_e}:_e)}))).every(Boolean),!(!ie&&!l.isValid)&&g()):ie=K=await C(s);return f.state.next({...!ht(y)||(_.isValid||o.isValid)&&K!==l.isValid?{}:{name:y},...r.resolver||!y?{isValid:K}:{},errors:l.errors}),O.shouldFocus&&!ie&&tr(s,Le,y?ne:i.mount),ie},Ke=y=>{const O={...n.mount?m:a};return $e(y)?O:ht(y)?oe(O,y):y.map(K=>oe(O,K))},at=(y,O)=>({invalid:!!oe((O||l).errors,y),isDirty:!!oe((O||l).dirtyFields,y),error:oe((O||l).errors,y),isValidating:!!oe(l.validatingFields,y),isTouched:!!oe((O||l).touchedFields,y)}),St=y=>{y&&er(y).forEach(O=>Ue(l.errors,O)),f.state.next({errors:y?l.errors:{}})},Ct=(y,O,K)=>{const ie=(oe(s,y,{_f:{}})._f||{}).ref,ne=oe(l.errors,y)||{},{ref:se,message:_e,type:we,...ke}=ne;De(l.errors,y,{...ke,...O,ref:ie}),f.state.next({name:y,errors:l.errors,isValid:!1}),K&&K.shouldFocus&&ie&&ie.focus&&ie.focus()},Ze=(y,O)=>ct(y)?f.state.subscribe({next:K=>"values"in K&&y(Q(void 0,O),K)}):Q(y,O,!0),U=y=>f.state.subscribe({next:O=>{du(y.name,O.name,y.exact)&&bu(O,y.formState||_,Da,y.reRenderRoot)&&y.callback({values:{...m},...l,...O,defaultValues:a})}}).unsubscribe,be=y=>(n.mount=!0,o={...o,...y.formState},U({...y,formState:o})),ve=(y,O={})=>{for(const K of y?er(y):i.mount)i.mount.delete(K),i.array.delete(K),O.keepValue||(Ue(s,K),Ue(m,K)),!O.keepError&&Ue(l.errors,K),!O.keepDirty&&Ue(l.dirtyFields,K),!O.keepTouched&&Ue(l.touchedFields,K),!O.keepIsValidating&&Ue(l.validatingFields,K),!r.shouldUnregister&&!O.keepDefaultValue&&Ue(a,K);f.state.next({values:Be(m)}),f.state.next({...l,...O.keepDirty?{isDirty:x()}:{}}),!O.keepIsValid&&g()},Me=({disabled:y,name:O})=>{(bt(y)&&n.mount||y||i.disabled.has(O))&&(y?i.disabled.add(O):i.disabled.delete(O))},je=(y,O={})=>{let K=oe(s,y);const ie=bt(O.disabled)||bt(r.disabled);return De(s,y,{...K||{},_f:{...K&&K._f?K._f:{ref:{name:y}},name:y,mount:!0,...O}}),i.mount.add(y),K?Me({disabled:bt(O.disabled)?O.disabled:r.disabled,name:y}):I(y,!0,O.value),{...ie?{disabled:O.disabled||r.disabled}:{},...r.progressive?{required:!!O.required,min:Zt(O.min),max:Zt(O.max),minLength:Zt(O.minLength),maxLength:Zt(O.maxLength),pattern:Zt(O.pattern)}:{},name:y,onChange:Re,onBlur:Re,ref:ne=>{if(ne){je(y,O),K=oe(s,y);const se=$e(ne.value)&&ne.querySelectorAll&&ne.querySelectorAll("input,select,textarea")[0]||ne,_e=uu(se),we=K._f.refs||[];if(_e?we.find(ke=>ke===se):se===K._f.ref)return;De(s,y,{_f:{...K._f,..._e?{refs:[...we.filter(sl),se,...Array.isArray(oe(a,y))?[{}]:[]],ref:{type:se.type,name:y}}:{ref:se}}}),I(y,!1,void 0,se)}else K=oe(s,y,{}),K._f&&(K._f.mount=!1),(r.shouldUnregister||O.shouldUnregister)&&!(ru(i.array,y)&&n.action)&&i.unMount.add(y)}}},zr=()=>r.shouldFocusError&&tr(s,Le,i.mount),Aa=y=>{bt(y)&&(f.state.next({disabled:y}),tr(s,(O,K)=>{const ie=oe(s,K);ie&&(O.disabled=ie._f.disabled||y,Array.isArray(ie._f.refs)&&ie._f.refs.forEach(ne=>{ne.disabled=ie._f.disabled||y}))},0,!1))},Ol=(y,O)=>async K=>{let ie;K&&(K.preventDefault&&K.preventDefault(),K.persist&&K.persist());let ne=Be(m);if(f.state.next({isSubmitting:!0}),r.resolver){const{errors:se,values:_e}=await le();l.errors=se,ne=Be(_e)}else await C(s);if(i.disabled.size)for(const se of i.disabled)Ue(ne,se);if(Ue(l.errors,"root"),et(l.errors)){f.state.next({errors:{}});try{await y(ne,K)}catch(se){ie=se}}else O&&await O({...l.errors},K),zr(),setTimeout(zr);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:et(l.errors)&&!ie,submitCount:l.submitCount+1,errors:l.errors}),ie)throw ie},ka=(y,O={})=>{oe(s,y)&&($e(O.defaultValue)?Ee(y,Be(oe(a,y))):(Ee(y,O.defaultValue),De(a,y,Be(O.defaultValue))),O.keepTouched||Ue(l.touchedFields,y),O.keepDirty||(Ue(l.dirtyFields,y),l.isDirty=O.defaultValue?x(y,Be(oe(a,y))):x()),O.keepError||(Ue(l.errors,y),_.isValid&&g()),f.state.next({...l}))},Il=(y,O={})=>{const K=y?Be(y):a,ie=Be(K),ne=et(y),se=ne?a:ie;if(O.keepDefaultValues||(a=K),!O.keepValues){if(O.keepDirtyValues){const _e=new Set([...i.mount,...Object.keys(Yt(a,m))]);for(const we of Array.from(_e))oe(l.dirtyFields,we)?De(se,we,oe(m,we)):Ee(we,oe(se,we))}else{if(Pl&&$e(y))for(const _e of i.mount){const we=oe(s,_e);if(we&&we._f){const ke=Array.isArray(we._f.refs)?we._f.refs[0]:we._f.ref;if(Dr(ke)){const mt=ke.closest("form");if(mt){mt.reset();break}}}}if(O.keepFieldsRef)for(const _e of i.mount)Ee(_e,oe(se,_e));else s={}}m=r.shouldUnregister?O.keepDefaultValues?Be(a):{}:Be(se),f.array.next({values:{...se}}),f.state.next({values:{...se}})}i={mount:O.keepDirtyValues?i.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},n.mount=!_.isValid||!!O.keepIsValid||!!O.keepDirtyValues,n.watch=!!r.shouldUnregister,f.state.next({submitCount:O.keepSubmitCount?l.submitCount:0,isDirty:ne?!1:O.keepDirty?l.isDirty:!!(O.keepDefaultValues&&!Ft(y,a)),isSubmitted:O.keepIsSubmitted?l.isSubmitted:!1,dirtyFields:ne?{}:O.keepDirtyValues?O.keepDefaultValues&&m?Yt(a,m):l.dirtyFields:O.keepDefaultValues&&y?Yt(a,y):O.keepDirty?l.dirtyFields:{},touchedFields:O.keepTouched?l.touchedFields:{},errors:O.keepErrors?l.errors:{},isSubmitSuccessful:O.keepIsSubmitSuccessful?l.isSubmitSuccessful:!1,isSubmitting:!1})},Ll=(y,O)=>Il(ct(y)?y(m):y,O),Pa=(y,O={})=>{const K=oe(s,y),ie=K&&K._f;if(ie){const ne=ie.refs?ie.refs[0]:ie.ref;ne.focus&&(ne.focus(),O.shouldSelect&&ct(ne.select)&&ne.select())}},Da=y=>{l={...l,...y}},Ml={control:{register:je,unregister:ve,getFieldState:at,handleSubmit:Ol,setError:Ct,_subscribe:U,_runSchema:le,_focusError:zr,_getWatch:Q,_getDirty:x,_setValid:g,_setFieldArray:S,_setDisabledField:Me,_setErrors:M,_getFieldArray:re,_reset:Il,_resetDefaultValues:()=>ct(r.defaultValues)&&r.defaultValues().then(y=>{Ll(y,r.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:c,_disableForm:Aa,_subjects:f,_proxyFormState:_,get _fields(){return s},get _formValues(){return m},get _state(){return n},set _state(y){n=y},get _defaultValues(){return a},get _names(){return i},set _names(y){i=y},get _formState(){return l},get _options(){return r},set _options(y){r={...r,...y}}},subscribe:be,trigger:qe,register:je,handleSubmit:Ol,watch:Ze,setValue:Ee,getValues:Ke,reset:Ll,resetField:ka,clearErrors:St,unregister:ve,setError:Ct,setFocus:Pa,getFieldState:at};return{...Ml,formControl:Ml}}function Sa(t={}){const r=e.useRef(void 0),l=e.useRef(void 0),[s,a]=e.useState({isDirty:!1,isValidating:!1,isLoading:ct(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ct(t.defaultValues)?void 0:t.defaultValues});if(!r.current)if(t.formControl)r.current={...t.formControl,formState:s},t.defaultValues&&!ct(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:n,...i}=xu(t);r.current={...i,formState:s}}const m=r.current.control;return m._options=t,mu(()=>{const n=m._subscribe({formState:m._proxyFormState,callback:()=>a({...m._formState}),reRenderRoot:!0});return a(i=>({...i,isReady:!0})),m._formState.isReady=!0,n},[m]),e.useEffect(()=>m._disableForm(t.disabled),[m,t.disabled]),e.useEffect(()=>{t.mode&&(m._options.mode=t.mode),t.reValidateMode&&(m._options.reValidateMode=t.reValidateMode)},[m,t.mode,t.reValidateMode]),e.useEffect(()=>{t.errors&&(m._setErrors(t.errors),m._focusError())},[m,t.errors]),e.useEffect(()=>{t.shouldUnregister&&m._subjects.state.next({values:m._getWatch()})},[m,t.shouldUnregister]),e.useEffect(()=>{if(m._proxyFormState.isDirty){const n=m._getDirty();n!==s.isDirty&&m._subjects.state.next({isDirty:n})}},[m,s.isDirty]),e.useEffect(()=>{t.values&&!Ft(t.values,l.current)?(m._reset(t.values,{keepFieldsRef:!0,...m._options.resetOptions}),l.current=t.values,a(n=>({...n}))):m._resetDefaultValues()},[m,t.values]),e.useEffect(()=>{m._state.mount||(m._setValid(),m._state.mount=!0),m._state.watch&&(m._state.watch=!1,m._subjects.state.next({...m._formState})),m._removeUnmounted()}),r.current.formState=au(s,m),r.current}var k="/app/code/frontend/src/pages/auth/RegisterPage.tsx";const Ss=["Nairobi","Mombasa","Kiambu","Nakuru","Machakos","Kajiado","Murang'a","Nyeri","Meru","Embu","Tharaka-Nithi","Kirinyaga","Nyandarua","Laikipia","Samburu","Trans-Nzoia","Uasin-Gishu","Elgeyo-Marakwet","Nandi","Baringo","Kericho","Bomet","Kakamega","Vihiga","Bungoma","Busia","Siaya","Kisumu","Homa Bay","Migori","Kisii","Nyamira","Narok","Turkana","West Pokot","Isiolo","Marsabit","Mandera","Wajir","Garissa","Tana River","Lamu","Taita-Taveta","Kwale","Kilifi"],Eu=["Motorcycle","Three-wheeler","Pickup Truck","Van","Small Truck","Large Truck"],vu=[{value:"CUSTOMER",label:"Customer",description:"Shop for fresh produce from local farmers",icon:e.createElement(nt,{className:"w-8 h-8",__self:void 0,__source:{fileName:k,lineNumber:121,columnNumber:11}}),color:"bg-blue-500"},{value:"FARMER",label:"Farmer",description:"Sell your produce directly to customers",icon:e.createElement(Pt,{className:"w-8 h-8",__self:void 0,__source:{fileName:k,lineNumber:128,columnNumber:11}}),color:"bg-green-500"},{value:"DRIVER",label:"Driver",description:"Deliver products and earn money",icon:e.createElement(Te,{className:"w-8 h-8",__self:void 0,__source:{fileName:k,lineNumber:135,columnNumber:11}}),color:"bg-orange-500"},{value:"FARMER_AGENT",label:"Farmer Agent",description:"Help farmers join the platform",icon:e.createElement(tt,{className:"w-8 h-8",__self:void 0,__source:{fileName:k,lineNumber:142,columnNumber:11}}),color:"bg-purple-500"}];function wu(){const t=_t(),[r,l]=P.useState(1),[s,a]=P.useState(!1),[m,n]=P.useState(!1),[i,b]=P.useState(!1),[u,_]=P.useState([]),[o,f]=P.useState([]),{register:h,handleSubmit:w,watch:g,setValue:p,formState:{errors:S}}=Sa(),E=g("role"),M=g("password");P.useEffect(()=>{(async()=>{try{const c=await me.get("/api/farmer-categories");_(c.data.categories||[])}catch(c){console.error("Failed to fetch farmer categories:",c),L.error("Failed to load farmer categories")}})()},[]);const I=C=>{f(c=>c.includes(C)?c.filter(x=>x!==C):[...c,C])},B=async C=>{if(C.password!==C.confirmPassword){L.error("Passwords do not match");return}if(C.role==="FARMER"&&o.length===0){L.error("Please select at least one farming category");return}b(!0);try{const c={firstName:C.firstName,lastName:C.lastName,phone:C.phone,email:C.email,password:C.password,role:C.role,county:C.county};C.role==="FARMER"?(C.farmName&&(c.farmName=C.farmName),C.farmSize&&(c.farmSize=C.farmSize),C.kraPin&&(c.kraPin=C.kraPin),C.subCounty&&(c.subCounty=C.subCounty),c.categories=o):C.role==="DRIVER"?(c.licenseNumber=C.licenseNumber,c.vehicleType=C.vehicleType,c.vehicleRegNo=C.vehicleRegNo,c.idNumber=C.idNumber):C.role==="FARMER_AGENT"&&(c.assignedCounty=C.assignedCounty);const x=await me.post("/api/auth/register",c);L.success("Registration successful! Please login to continue."),x.data.requiresPayment&&L("You will need to pay the activation fee after login",{icon:""}),x.data.requiresApproval&&L("Your application will be reviewed by our team",{icon:""}),t("/login")}catch(c){console.error("Registration error:",c);const x=c.response?.data?.error||"Registration failed";L.error(x)}finally{b(!1)}},q=()=>{r<3&&l(r+1)},le=()=>{r>1&&l(r-1)},F=C=>{p("role",C),q()};return e.createElement("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",__self:this,__source:{fileName:k,lineNumber:268,columnNumber:5}},e.createElement("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",__self:this,__source:{fileName:k,lineNumber:269,columnNumber:7}},e.createElement("div",{className:"flex justify-center",__self:this,__source:{fileName:k,lineNumber:270,columnNumber:9}},e.createElement("div",{className:"w-12 h-12 bg-primary-600 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:k,lineNumber:271,columnNumber:11}},e.createElement("span",{className:"text-white font-bold text-lg",__self:this,__source:{fileName:k,lineNumber:272,columnNumber:13}},"Z"))),e.createElement("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",__self:this,__source:{fileName:k,lineNumber:275,columnNumber:9}},"Create your account"),e.createElement("p",{className:"mt-2 text-center text-sm text-gray-600",__self:this,__source:{fileName:k,lineNumber:278,columnNumber:9}},"Or"," ",e.createElement(xe,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",__self:this,__source:{fileName:k,lineNumber:280,columnNumber:11}},"sign in to your existing account"))),e.createElement("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",__self:this,__source:{fileName:k,lineNumber:289,columnNumber:7}},e.createElement("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",__self:this,__source:{fileName:k,lineNumber:290,columnNumber:9}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:k,lineNumber:292,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:k,lineNumber:293,columnNumber:13}},[1,2,3].map(C=>e.createElement("div",{key:C,className:`flex items-center ${r>=C?"text-primary-600":"text-gray-400"}`,__self:this,__source:{fileName:k,lineNumber:295,columnNumber:17}},e.createElement("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${r>=C?"border-primary-600 bg-primary-600 text-white":"border-gray-300"}`,__self:this,__source:{fileName:k,lineNumber:301,columnNumber:19}},r>C?e.createElement(Er,{className:"w-4 h-4",__self:this,__source:{fileName:k,lineNumber:308,columnNumber:39}}):C),C<3&&e.createElement("div",{className:`w-16 h-0.5 mx-2 ${r>C?"bg-primary-600":"bg-gray-200"}`,__self:this,__source:{fileName:k,lineNumber:311,columnNumber:21}})))),e.createElement("div",{className:"flex justify-between mt-2 text-xs text-gray-600",__self:this,__source:{fileName:k,lineNumber:320,columnNumber:13}},e.createElement("span",{__self:this,__source:{fileName:k,lineNumber:321,columnNumber:15}},"Role"),e.createElement("span",{__self:this,__source:{fileName:k,lineNumber:322,columnNumber:15}},"Info"),e.createElement("span",{__self:this,__source:{fileName:k,lineNumber:323,columnNumber:15}},"Details"))),e.createElement("form",{onSubmit:w(B),__self:this,__source:{fileName:k,lineNumber:327,columnNumber:11}},r===1&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:k,lineNumber:330,columnNumber:15}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4",__self:this,__source:{fileName:k,lineNumber:331,columnNumber:17}},"Choose your role"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:k,lineNumber:335,columnNumber:17}},vu.map(C=>e.createElement("button",{key:C.value,type:"button",onClick:()=>F(C.value),className:"w-full p-4 border border-gray-300 rounded-lg hover:border-primary-500 hover:bg-primary-50 transition-colors text-left",__self:this,__source:{fileName:k,lineNumber:337,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:k,lineNumber:343,columnNumber:23}},e.createElement("div",{className:`${C.color} text-white p-2 rounded-lg mr-4`,__self:this,__source:{fileName:k,lineNumber:344,columnNumber:25}},C.icon),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:349,columnNumber:25}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:k,lineNumber:350,columnNumber:27}},C.label),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:k,lineNumber:353,columnNumber:27}},C.description))))))),r===2&&e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:k,lineNumber:366,columnNumber:15}},e.createElement("div",{className:"flex items-center mb-4",__self:this,__source:{fileName:k,lineNumber:367,columnNumber:17}},e.createElement("button",{type:"button",onClick:le,className:"mr-4 text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:k,lineNumber:368,columnNumber:19}},e.createElement(rr,{className:"w-5 h-5",__self:this,__source:{fileName:k,lineNumber:373,columnNumber:21}})),e.createElement("h3",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:k,lineNumber:375,columnNumber:19}},"Basic Information")),e.createElement("div",{className:"grid grid-cols-2 gap-4",__self:this,__source:{fileName:k,lineNumber:380,columnNumber:17}},e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:381,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:382,columnNumber:21}},"First Name *"),e.createElement("input",{...h("firstName",{required:"First name is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:385,columnNumber:21}}),S.firstName&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:k,lineNumber:392,columnNumber:23}},S.firstName.message)),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:398,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:399,columnNumber:21}},"Last Name *"),e.createElement("input",{...h("lastName",{required:"Last name is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:402,columnNumber:21}}),S.lastName&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:k,lineNumber:409,columnNumber:23}},S.lastName.message))),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:416,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:417,columnNumber:19}},"Phone Number *"),e.createElement("input",{...h("phone",{required:"Phone number is required",pattern:{value:/^(\+254|0)[7-9]\d{8}$/,message:"Please enter a valid Kenyan phone number"}}),placeholder:"+254712345678 or 0712345678",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:420,columnNumber:19}}),S.phone&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:k,lineNumber:432,columnNumber:21}},S.phone.message)),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:438,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:439,columnNumber:19}},"Email Address"),e.createElement("input",{...h("email",{pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"}}),type:"email",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:442,columnNumber:19}}),S.email&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:k,lineNumber:453,columnNumber:21}},S.email.message)),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:459,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:460,columnNumber:19}},"County *"),e.createElement("select",{...h("county",{required:"County is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:463,columnNumber:19}},e.createElement("option",{value:"",__self:this,__source:{fileName:k,lineNumber:467,columnNumber:21}},"Select County"),Ss.map(C=>e.createElement("option",{key:C,value:C,__self:this,__source:{fileName:k,lineNumber:469,columnNumber:23}},C))),S.county&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:k,lineNumber:475,columnNumber:21}},S.county.message)),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:481,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:482,columnNumber:19}},"Password *"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:k,lineNumber:485,columnNumber:19}},e.createElement("input",{...h("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:s?"text":"password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:486,columnNumber:21}}),e.createElement("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!s),__self:this,__source:{fileName:k,lineNumber:497,columnNumber:21}},s?e.createElement(xr,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:k,lineNumber:503,columnNumber:25}}):e.createElement(xt,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:k,lineNumber:505,columnNumber:25}}))),S.password&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:k,lineNumber:510,columnNumber:21}},S.password.message)),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:516,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:517,columnNumber:19}},"Confirm Password *"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:k,lineNumber:520,columnNumber:19}},e.createElement("input",{...h("confirmPassword",{required:"Please confirm your password",validate:C=>C===M||"Passwords do not match"}),type:m?"text":"password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:521,columnNumber:21}}),e.createElement("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>n(!m),__self:this,__source:{fileName:k,lineNumber:530,columnNumber:21}},m?e.createElement(xr,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:k,lineNumber:538,columnNumber:25}}):e.createElement(xt,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:k,lineNumber:540,columnNumber:25}}))),S.confirmPassword&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:k,lineNumber:545,columnNumber:21}},S.confirmPassword.message)),e.createElement("button",{type:"button",onClick:q,className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 transition-colors font-medium flex items-center justify-center",__self:this,__source:{fileName:k,lineNumber:551,columnNumber:17}},"Next",e.createElement(Ot,{className:"w-5 h-5 ml-2",__self:this,__source:{fileName:k,lineNumber:557,columnNumber:19}}))),r===3&&e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:k,lineNumber:564,columnNumber:15}},e.createElement("div",{className:"flex items-center mb-4",__self:this,__source:{fileName:k,lineNumber:565,columnNumber:17}},e.createElement("button",{type:"button",onClick:le,className:"mr-4 text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:k,lineNumber:566,columnNumber:19}},e.createElement(rr,{className:"w-5 h-5",__self:this,__source:{fileName:k,lineNumber:571,columnNumber:21}})),e.createElement("h3",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:k,lineNumber:573,columnNumber:19}},E==="FARMER"&&"Farm Details",E==="DRIVER"&&"Driver Information",E==="FARMER_AGENT"&&"Agent Information",E==="CUSTOMER"&&"Almost Done!")),E==="FARMER"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:k,lineNumber:583,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:584,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:585,columnNumber:23}},"Farm Name"),e.createElement("input",{...h("farmName"),placeholder:"e.g., Green Valley Farm",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:588,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:595,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:596,columnNumber:23}},"Sub-County"),e.createElement("input",{...h("subCounty"),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:599,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:605,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:606,columnNumber:23}},"Farm Size (acres)"),e.createElement("input",{...h("farmSize"),type:"number",step:"0.1",placeholder:"e.g., 5.5",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:609,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:618,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:619,columnNumber:23}},"KRA PIN"),e.createElement("input",{...h("kraPin"),placeholder:"e.g., A123456789K",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:622,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:629,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-3",__self:this,__source:{fileName:k,lineNumber:630,columnNumber:23}},"Farming Categories *"),e.createElement("p",{className:"text-sm text-gray-600 mb-3",__self:this,__source:{fileName:k,lineNumber:633,columnNumber:23}},"Select one or more categories that describe what you farm:"),u.length>0?e.createElement("div",{className:"grid grid-cols-2 gap-3 max-h-48 overflow-y-auto",__self:this,__source:{fileName:k,lineNumber:637,columnNumber:25}},u.map(C=>e.createElement("label",{key:C.id,className:"flex items-start p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",__self:this,__source:{fileName:k,lineNumber:639,columnNumber:29}},e.createElement("input",{type:"checkbox",checked:o.includes(C.id),onChange:()=>I(C.id),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500 mt-0.5 mr-3",__self:this,__source:{fileName:k,lineNumber:643,columnNumber:31}}),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:k,lineNumber:649,columnNumber:31}},e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:k,lineNumber:650,columnNumber:33}},C.name),C.description&&e.createElement("div",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:k,lineNumber:654,columnNumber:35}},C.description))))):e.createElement("div",{className:"text-center py-4 text-gray-500 border border-gray-200 rounded-lg",__self:this,__source:{fileName:k,lineNumber:663,columnNumber:25}},"Loading categories..."),o.length>0&&e.createElement("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",__self:this,__source:{fileName:k,lineNumber:669,columnNumber:25}},e.createElement("p",{className:"text-sm text-green-800",__self:this,__source:{fileName:k,lineNumber:670,columnNumber:27}},"Selected ",o.length," categor",o.length===1?"y":"ies",":",e.createElement("span",{className:"font-medium ml-1",__self:this,__source:{fileName:k,lineNumber:672,columnNumber:29}},u.filter(C=>o.includes(C.id)).map(C=>C.name).join(", ")))),o.length===0&&e.createElement("p",{className:"text-sm text-red-600 mt-2",__self:this,__source:{fileName:k,lineNumber:683,columnNumber:25}},"Please select at least one farming category.")),e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",__self:this,__source:{fileName:k,lineNumber:689,columnNumber:21}},e.createElement("div",{className:"flex",__self:this,__source:{fileName:k,lineNumber:690,columnNumber:23}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:k,lineNumber:691,columnNumber:25}},e.createElement("svg",{className:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",__self:this,__source:{fileName:k,lineNumber:692,columnNumber:27}},e.createElement("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd",__self:this,__source:{fileName:k,lineNumber:697,columnNumber:29}}))),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:k,lineNumber:704,columnNumber:25}},e.createElement("h3",{className:"text-sm font-medium text-yellow-800",__self:this,__source:{fileName:k,lineNumber:705,columnNumber:27}},"Activation Fee Required"),e.createElement("div",{className:"mt-2 text-sm text-yellow-700",__self:this,__source:{fileName:k,lineNumber:708,columnNumber:27}},e.createElement("p",{__self:this,__source:{fileName:k,lineNumber:709,columnNumber:29}},"Farmers need to pay a one-time activation fee of KES 300 after registration.")))))),E==="DRIVER"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:k,lineNumber:722,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:723,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:724,columnNumber:23}},"Driving License Number *"),e.createElement("input",{...h("licenseNumber",{required:"License number is required for drivers"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:727,columnNumber:23}}),S.licenseNumber&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:k,lineNumber:734,columnNumber:25}},S.licenseNumber.message)),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:740,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:741,columnNumber:23}},"Vehicle Type *"),e.createElement("select",{...h("vehicleType",{required:"Vehicle type is required for drivers"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:744,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:k,lineNumber:750,columnNumber:25}},"Select Vehicle Type"),Eu.map(C=>e.createElement("option",{key:C,value:C,__self:this,__source:{fileName:k,lineNumber:752,columnNumber:27}},C))),S.vehicleType&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:k,lineNumber:758,columnNumber:25}},S.vehicleType.message)),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:764,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:765,columnNumber:23}},"Vehicle Registration Number *"),e.createElement("input",{...h("vehicleRegNo",{required:"Vehicle registration number is required for drivers"}),placeholder:"e.g., KCA 123X",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:768,columnNumber:23}}),S.vehicleRegNo&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:k,lineNumber:777,columnNumber:25}},S.vehicleRegNo.message)),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:783,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:784,columnNumber:23}},"National ID Number *"),e.createElement("input",{...h("idNumber",{required:"ID number is required for drivers"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:787,columnNumber:23}}),S.idNumber&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:k,lineNumber:794,columnNumber:25}},S.idNumber.message)),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",__self:this,__source:{fileName:k,lineNumber:800,columnNumber:21}},e.createElement("div",{className:"flex",__self:this,__source:{fileName:k,lineNumber:801,columnNumber:23}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:k,lineNumber:802,columnNumber:25}},e.createElement("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",__self:this,__source:{fileName:k,lineNumber:803,columnNumber:27}},e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd",__self:this,__source:{fileName:k,lineNumber:808,columnNumber:29}}))),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:k,lineNumber:815,columnNumber:25}},e.createElement("h3",{className:"text-sm font-medium text-blue-800",__self:this,__source:{fileName:k,lineNumber:816,columnNumber:27}},"Approval Required"),e.createElement("div",{className:"mt-2 text-sm text-blue-700",__self:this,__source:{fileName:k,lineNumber:819,columnNumber:27}},e.createElement("p",{__self:this,__source:{fileName:k,lineNumber:820,columnNumber:29}},"Driver applications require verification and approval by our team.")))))),E==="FARMER_AGENT"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:k,lineNumber:833,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:834,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:k,lineNumber:835,columnNumber:23}},"Assigned County *"),e.createElement("select",{...h("assignedCounty",{required:"Assigned county is required for agents"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:k,lineNumber:838,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:k,lineNumber:844,columnNumber:25}},"Select County"),Ss.map(C=>e.createElement("option",{key:C,value:C,__self:this,__source:{fileName:k,lineNumber:846,columnNumber:27}},C))),S.assignedCounty&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:k,lineNumber:852,columnNumber:25}},S.assignedCounty.message)),e.createElement("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",__self:this,__source:{fileName:k,lineNumber:858,columnNumber:21}},e.createElement("div",{className:"flex",__self:this,__source:{fileName:k,lineNumber:859,columnNumber:23}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:k,lineNumber:860,columnNumber:25}},e.createElement("svg",{className:"h-5 w-5 text-purple-400",fill:"currentColor",viewBox:"0 0 20 20",__self:this,__source:{fileName:k,lineNumber:861,columnNumber:27}},e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd",__self:this,__source:{fileName:k,lineNumber:866,columnNumber:29}}))),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:k,lineNumber:873,columnNumber:25}},e.createElement("h3",{className:"text-sm font-medium text-purple-800",__self:this,__source:{fileName:k,lineNumber:874,columnNumber:27}},"Agent Responsibilities"),e.createElement("div",{className:"mt-2 text-sm text-purple-700",__self:this,__source:{fileName:k,lineNumber:877,columnNumber:27}},e.createElement("p",{__self:this,__source:{fileName:k,lineNumber:878,columnNumber:29}},"As an agent, you'll help onboard farmers in your assigned county and earn commissions.")))))),E==="CUSTOMER"&&e.createElement("div",{className:"text-center py-8",__self:this,__source:{fileName:k,lineNumber:891,columnNumber:19}},e.createElement("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",__self:this,__source:{fileName:k,lineNumber:892,columnNumber:21}},e.createElement(Er,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:k,lineNumber:893,columnNumber:23}})),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:k,lineNumber:895,columnNumber:21}},"You're all set!"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:k,lineNumber:898,columnNumber:21}},"Complete your registration to start shopping for fresh produce.")),e.createElement("button",{type:"submit",disabled:i,className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",__self:this,__source:{fileName:k,lineNumber:905,columnNumber:17}},i?"Creating Account...":"Create Account"))))))}var N="/app/code/frontend/src/pages/farmer/FarmerDashboard.tsx";function Su(){const{user:t}=Ae(),[r,l]=P.useState(!1),[s,a]=P.useState("overview"),[m,n]=P.useState([]),[i,b]=P.useState(null),[u,_]=P.useState([]),[o,f]=P.useState(!0),[h,w]=P.useState({totalConsignments:0,pendingConsignments:0,completedConsignments:0,totalEarnings:0}),[g,p]=P.useState(!1),[S,E]=P.useState(""),[M,I]=P.useState(!1);P.useEffect(()=>{B()},[]);const B=async()=>{try{f(!0);const x=localStorage.getItem("authToken")||localStorage.getItem("token"),[Q,re,Ne]=await Promise.all([me.get("/api/consignments",{headers:{Authorization:`Bearer ${x}`}}),me.get("/api/wallet",{headers:{Authorization:`Bearer ${x}`}}),me.get("/api/notifications",{headers:{Authorization:`Bearer ${x}`}})]);console.log(" Raw API responses:",{consignments:Q.data,wallet:re.data,notifications:Ne.data});let he=[];Q.data&&Q.data.consignments&&Array.isArray(Q.data.consignments)?he=Q.data.consignments:Array.isArray(Q.data)&&(he=Q.data);let Ee={balance:0,transactions:[]};re.data&&re.data.wallet?Ee={balance:parseFloat(re.data.wallet.balance)||0,transactions:Array.isArray(re.data.wallet.transactions)?re.data.wallet.transactions:[]}:re.data&&typeof re.data=="object"&&(Ee={balance:parseFloat(re.data.balance)||0,transactions:Array.isArray(re.data.transactions)?re.data.transactions:[]});let Re=[];Ne.data&&Ne.data.notifications&&Array.isArray(Ne.data.notifications)?Re=Ne.data.notifications:Array.isArray(Ne.data)&&(Re=Ne.data),console.log(" Processed data:",{consignments:he.length,wallet:Ee,notifications:Re.length}),n(he),b(Ee),_(Re);const Le=Array.isArray(he)?he:[],qe=Le.length,Ke=Le.filter(Ze=>Ze&&Ze.status==="PENDING").length,at=Le.filter(Ze=>Ze&&Ze.status==="COMPLETED").length,St=Array.isArray(Ee.transactions)?Ee.transactions:[],Ct=(Number(Ee.balance)||0)+St.filter(Ze=>Ze&&Ze.type==="DEBIT").reduce((Ze,U)=>Ze+(parseFloat(U.amount)||0),0);console.log(" Calculated stats:",{totalConsignments:qe,pendingConsignments:Ke,completedConsignments:at,totalEarnings:Ct}),w({totalConsignments:qe,pendingConsignments:Ke,completedConsignments:at,totalEarnings:Ct})}catch(x){console.error("Failed to fetch dashboard data:",x),L.error("Failed to load dashboard data")}finally{f(!1)}},q=async(x,Q)=>{try{const re=localStorage.getItem("authToken")||localStorage.getItem("token"),Ne=await me.post("/api/wallet/withdraw",{amount:x,phoneNumber:Q},{headers:{Authorization:`Bearer ${re}`}});L.success("Withdrawal initiated! Check your phone for M-Pesa prompt."),B()}catch(re){L.error(re.response?.data?.error||"Withdrawal failed")}},le=async()=>{if(!S.trim()){L.error("Please enter your phone number");return}if(!/^(\+254|254|0)[17]\d{8}$/.test(S.replace(/\s/g,""))){L.error("Please enter a valid Kenyan phone number");return}I(!0);try{const Q=localStorage.getItem("authToken")||localStorage.getItem("token"),re=await me.post("/api/admin/registration-fees/stk-push",{farmer_id:t?.id,phone_number:S,amount:300},{headers:{Authorization:`Bearer ${Q}`}});re.data.success?(L.success("Registration fee payment initiated! Check your phone for M-Pesa prompt."),p(!1),E("")):L.error(re.data.message||"Failed to initiate payment")}catch(Q){console.error("Payment error:",Q),L.error(Q.response?.data?.message||"Failed to initiate payment. Please try again.")}finally{I(!1)}},F=[{id:"overview",label:"Overview",icon:Rt},{id:"consignments",label:"Consignments",icon:ge},{id:"wallet",label:"Wallet",icon:Jr},{id:"notifications",label:"Notifications",icon:Ut},{id:"profile",label:"Profile",icon:Gt}],C=x=>({PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",PRICE_SUGGESTED:"bg-blue-100 text-blue-800",DRIVER_ASSIGNED:"bg-indigo-100 text-indigo-800",IN_TRANSIT:"bg-purple-100 text-purple-800",DELIVERED:"bg-cyan-100 text-cyan-800",COMPLETED:"bg-green-100 text-green-800"})[x]||"bg-gray-100 text-gray-800",c=x=>{const re={PENDING:Ie,APPROVED:Fe,REJECTED:Je,PRICE_SUGGESTED:Ye,DRIVER_ASSIGNED:Te,IN_TRANSIT:Te,DELIVERED:Fe,COMPLETED:Fe}[x]||wt;return e.createElement(re,{className:"w-4 h-4",__self:this,__source:{fileName:N,lineNumber:288,columnNumber:12}})};return o?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:N,lineNumber:293,columnNumber:7}},e.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600",__self:this,__source:{fileName:N,lineNumber:294,columnNumber:9}})):e.createElement("div",{className:"min-h-screen bg-gray-50 flex",__self:this,__source:{fileName:N,lineNumber:300,columnNumber:5}},e.createElement("div",{className:`${r?"translate-x-0":"-translate-x-full"} fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0`,__self:this,__source:{fileName:N,lineNumber:302,columnNumber:7}},e.createElement("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",__self:this,__source:{fileName:N,lineNumber:305,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-800",__self:this,__source:{fileName:N,lineNumber:306,columnNumber:11}},"Farmer Dashboard"),e.createElement("button",{onClick:()=>l(!1),className:"lg:hidden text-gray-500 hover:text-gray-700",__self:this,__source:{fileName:N,lineNumber:309,columnNumber:11}},e.createElement(Je,{className:"w-6 h-6",__self:this,__source:{fileName:N,lineNumber:313,columnNumber:13}}))),e.createElement("nav",{className:"mt-6",__self:this,__source:{fileName:N,lineNumber:317,columnNumber:9}},F.map(x=>{const Q=x.icon;return e.createElement("button",{key:x.id,onClick:()=>{a(x.id),l(!1)},className:`w-full flex items-center px-6 py-3 text-left hover:bg-gray-50 transition-colors ${s===x.id?"bg-green-50 text-green-600 border-r-2 border-green-600":"text-gray-600"}`,__self:this,__source:{fileName:N,lineNumber:321,columnNumber:15}},e.createElement(Q,{className:"w-5 h-5 mr-3",__self:this,__source:{fileName:N,lineNumber:333,columnNumber:17}}),x.label)})),e.createElement("div",{className:"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-200",__self:this,__source:{fileName:N,lineNumber:341,columnNumber:9}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:342,columnNumber:11}},e.createElement("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white font-semibold",__self:this,__source:{fileName:N,lineNumber:343,columnNumber:13}},t?.firstName?.[0],t?.lastName?.[0]),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:N,lineNumber:347,columnNumber:13}},e.createElement("p",{className:"text-sm font-medium text-gray-800",__self:this,__source:{fileName:N,lineNumber:348,columnNumber:15}},t?.firstName," ",t?.lastName),e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:N,lineNumber:351,columnNumber:15}},t?.county))))),e.createElement("div",{className:"flex-1 flex flex-col overflow-hidden",__self:this,__source:{fileName:N,lineNumber:358,columnNumber:7}},e.createElement("div",{className:"bg-white shadow-sm border-b border-gray-200",__self:this,__source:{fileName:N,lineNumber:360,columnNumber:9}},e.createElement("div",{className:"flex items-center justify-between h-16 px-6",__self:this,__source:{fileName:N,lineNumber:361,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:362,columnNumber:13}},e.createElement("button",{onClick:()=>l(!0),className:"lg:hidden text-gray-500 hover:text-gray-700 mr-3",__self:this,__source:{fileName:N,lineNumber:363,columnNumber:15}},e.createElement(As,{className:"w-6 h-6",__self:this,__source:{fileName:N,lineNumber:367,columnNumber:17}})),e.createElement("h1",{className:"text-xl font-semibold text-gray-800 capitalize",__self:this,__source:{fileName:N,lineNumber:369,columnNumber:15}},s)),!t?.registrationFeePaid&&e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg px-4 py-2",__self:this,__source:{fileName:N,lineNumber:375,columnNumber:15}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:376,columnNumber:17}},e.createElement(wt,{className:"w-4 h-4 text-red-600 mr-2",__self:this,__source:{fileName:N,lineNumber:377,columnNumber:19}}),e.createElement("span",{className:"text-sm text-red-800",__self:this,__source:{fileName:N,lineNumber:378,columnNumber:19}},"Registration fee required"),e.createElement("button",{onClick:()=>p(!0),className:"ml-3 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",__self:this,__source:{fileName:N,lineNumber:381,columnNumber:19}},"Pay KES 300"))))),e.createElement("div",{className:"flex-1 overflow-auto p-6",__self:this,__source:{fileName:N,lineNumber:394,columnNumber:9}},s==="overview"&&e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:N,lineNumber:396,columnNumber:13}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",__self:this,__source:{fileName:N,lineNumber:398,columnNumber:15}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:N,lineNumber:399,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:400,columnNumber:19}},e.createElement(ge,{className:"w-8 h-8 text-blue-600",__self:this,__source:{fileName:N,lineNumber:401,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:N,lineNumber:402,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:N,lineNumber:403,columnNumber:23}},"Total Consignments"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:N,lineNumber:406,columnNumber:23}},h.totalConsignments)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:N,lineNumber:413,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:414,columnNumber:19}},e.createElement(Ie,{className:"w-8 h-8 text-yellow-600",__self:this,__source:{fileName:N,lineNumber:415,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:N,lineNumber:416,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:N,lineNumber:417,columnNumber:23}},"Pending"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:N,lineNumber:420,columnNumber:23}},h.pendingConsignments)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:N,lineNumber:427,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:428,columnNumber:19}},e.createElement(Fe,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:N,lineNumber:429,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:N,lineNumber:430,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:N,lineNumber:431,columnNumber:23}},"Completed"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:N,lineNumber:434,columnNumber:23}},h.completedConsignments)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:N,lineNumber:441,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:442,columnNumber:19}},e.createElement(Jr,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:N,lineNumber:443,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:N,lineNumber:444,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:N,lineNumber:445,columnNumber:23}},"Wallet Balance"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:N,lineNumber:448,columnNumber:23}},"KES ",i?.balance?.toLocaleString()||0))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:N,lineNumber:457,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:N,lineNumber:458,columnNumber:17}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",__self:this,__source:{fileName:N,lineNumber:461,columnNumber:17}},e.createElement("button",{onClick:()=>a("consignments"),className:"flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",disabled:!t?.registrationFeePaid,__self:this,__source:{fileName:N,lineNumber:462,columnNumber:19}},e.createElement($t,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:N,lineNumber:467,columnNumber:21}}),"Submit Consignment"),e.createElement("button",{onClick:()=>a("wallet"),className:"flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",__self:this,__source:{fileName:N,lineNumber:471,columnNumber:19}},e.createElement(Jr,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:N,lineNumber:475,columnNumber:21}}),"Manage Wallet"),e.createElement("button",{onClick:()=>a("consignments"),className:"flex items-center justify-center px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",__self:this,__source:{fileName:N,lineNumber:479,columnNumber:19}},e.createElement(xt,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:N,lineNumber:483,columnNumber:21}}),"View Consignments"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:N,lineNumber:490,columnNumber:15}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:N,lineNumber:491,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:N,lineNumber:492,columnNumber:19}},"Recent Consignments")),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:N,lineNumber:496,columnNumber:17}},(Array.isArray(m)?m:[]).slice(0,5).map(x=>e.createElement("div",{key:x.id,className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0",__self:this,__source:{fileName:N,lineNumber:500,columnNumber:23}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:504,columnNumber:25}},e.createElement("img",{src:Array.isArray(x.images)&&x.images.length>0&&x.images[0]&&x.images[0].trim()!==""?x.images[0]:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=400&h=400&fit=crop",alt:x.title,className:"w-12 h-12 rounded-lg object-cover",onError:Q=>{const re=Q.target;re.src="https://images.unsplash.com/photo-1542838132-92c53300491e?w=400&h=400&fit=crop"},__self:this,__source:{fileName:N,lineNumber:505,columnNumber:27}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:N,lineNumber:521,columnNumber:27}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:N,lineNumber:522,columnNumber:29}},x.title),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:N,lineNumber:525,columnNumber:29}},x.quantity," ",x.unit))),e.createElement("div",{className:"flex items-center space-x-3",__self:this,__source:{fileName:N,lineNumber:530,columnNumber:25}},e.createElement("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C(x.status)}`,__self:this,__source:{fileName:N,lineNumber:531,columnNumber:27}},c(x.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:N,lineNumber:535,columnNumber:29}},x.status.replace("_"," "))),e.createElement("span",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:N,lineNumber:539,columnNumber:27}},"KES"," ",x.finalPricePerUnit||x.bidPricePerUnit,"/kg"))))))),s==="consignments"&&e.createElement(Cu,{consignments:m,onRefresh:B,canSubmit:t?.registrationFeePaid||!1,showPaymentModal:g,setShowPaymentModal:p,__self:this,__source:{fileName:N,lineNumber:554,columnNumber:13}}),s==="wallet"&&e.createElement(Au,{wallet:i,onWithdraw:q,onRefresh:B,__self:this,__source:{fileName:N,lineNumber:564,columnNumber:13}}),s==="notifications"&&e.createElement(ku,{notifications:u,onRefresh:B,__self:this,__source:{fileName:N,lineNumber:572,columnNumber:13}}),s==="profile"&&e.createElement(Pu,{user:t,__self:this,__source:{fileName:N,lineNumber:578,columnNumber:43}}))),g&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",__self:this,__source:{fileName:N,lineNumber:584,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-sm w-full max-h-[80vh] flex flex-col",__self:this,__source:{fileName:N,lineNumber:585,columnNumber:11}},e.createElement("div",{className:"px-4 py-3 border-b border-gray-200 flex-shrink-0",__self:this,__source:{fileName:N,lineNumber:586,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:N,lineNumber:587,columnNumber:15}},e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:N,lineNumber:588,columnNumber:17}},e.createElement("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",__self:this,__source:{fileName:N,lineNumber:589,columnNumber:19}},e.createElement(st,{className:"w-4 h-4 text-green-600",__self:this,__source:{fileName:N,lineNumber:590,columnNumber:21}})),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:592,columnNumber:19}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:N,lineNumber:593,columnNumber:21}},"Pay Registration Fee"),e.createElement("p",{className:"text-xs text-gray-600",__self:this,__source:{fileName:N,lineNumber:596,columnNumber:21}},"KES 300.00"))),e.createElement("button",{onClick:()=>{p(!1),E("")},className:"text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:N,lineNumber:599,columnNumber:17}},e.createElement(Je,{className:"w-5 h-5",__self:this,__source:{fileName:N,lineNumber:606,columnNumber:19}})))),e.createElement("div",{className:"flex-1 overflow-y-auto px-4 py-4",__self:this,__source:{fileName:N,lineNumber:611,columnNumber:13}},e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:N,lineNumber:612,columnNumber:15}},e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",__self:this,__source:{fileName:N,lineNumber:613,columnNumber:17}},e.createElement("div",{className:"flex items-start space-x-2",__self:this,__source:{fileName:N,lineNumber:614,columnNumber:19}},e.createElement(Et,{className:"w-4 h-4 text-blue-600 mt-0.5",__self:this,__source:{fileName:N,lineNumber:615,columnNumber:21}}),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:616,columnNumber:21}},e.createElement("h4",{className:"text-sm font-medium text-blue-800",__self:this,__source:{fileName:N,lineNumber:617,columnNumber:23}},"M-Pesa Payment"),e.createElement("p",{className:"text-xs text-blue-700 mt-1",__self:this,__source:{fileName:N,lineNumber:620,columnNumber:23}},"Enter your M-Pesa phone number for STK push.")))),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:627,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:628,columnNumber:19}},"Phone Number *"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:N,lineNumber:631,columnNumber:19}},e.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",__self:this,__source:{fileName:N,lineNumber:632,columnNumber:21}},e.createElement(Et,{className:"w-4 h-4 text-gray-400",__self:this,__source:{fileName:N,lineNumber:633,columnNumber:23}})),e.createElement("input",{type:"tel",value:S,onChange:x=>E(x.target.value),placeholder:"+254712345678",className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:M,__self:this,__source:{fileName:N,lineNumber:635,columnNumber:21}})),e.createElement("p",{className:"text-xs text-gray-600 mt-1",__self:this,__source:{fileName:N,lineNumber:644,columnNumber:19}},"M-Pesa registered number")),e.createElement("div",{className:"bg-gray-50 rounded-lg p-3",__self:this,__source:{fileName:N,lineNumber:649,columnNumber:17}},e.createElement("h5",{className:"text-sm font-medium text-gray-900 mb-2",__self:this,__source:{fileName:N,lineNumber:650,columnNumber:19}},"Payment Summary"),e.createElement("div",{className:"space-y-1 text-xs",__self:this,__source:{fileName:N,lineNumber:653,columnNumber:19}},e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:N,lineNumber:654,columnNumber:21}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:N,lineNumber:655,columnNumber:23}},"Registration Fee:"),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:N,lineNumber:656,columnNumber:23}},"KES 300.00")),e.createElement("div",{className:"flex justify-between border-t border-gray-200 pt-1",__self:this,__source:{fileName:N,lineNumber:658,columnNumber:21}},e.createElement("span",{className:"font-medium text-gray-900",__self:this,__source:{fileName:N,lineNumber:659,columnNumber:23}},"Total:"),e.createElement("span",{className:"font-semibold text-green-600",__self:this,__source:{fileName:N,lineNumber:660,columnNumber:23}},"KES 300.00")))),e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",__self:this,__source:{fileName:N,lineNumber:667,columnNumber:17}},e.createElement("p",{className:"text-xs text-yellow-800",__self:this,__source:{fileName:N,lineNumber:668,columnNumber:19}},e.createElement("strong",{__self:this,__source:{fileName:N,lineNumber:669,columnNumber:21}},"Note:")," After payment, you can submit consignments. STK push appears within 30 seconds.")))),e.createElement("div",{className:"px-4 py-3 border-t border-gray-200 flex-shrink-0",__self:this,__source:{fileName:N,lineNumber:676,columnNumber:13}},e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:N,lineNumber:677,columnNumber:15}},e.createElement("button",{onClick:()=>{p(!1),E("")},disabled:M,className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50",__self:this,__source:{fileName:N,lineNumber:678,columnNumber:17}},"Cancel"),e.createElement("button",{onClick:le,disabled:M||!S.trim(),className:"flex-1 bg-green-600 text-white px-3 py-2 text-sm rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-1",__self:this,__source:{fileName:N,lineNumber:688,columnNumber:17}},M?e.createElement(e.Fragment,null,e.createElement("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin",__self:this,__source:{fileName:N,lineNumber:695,columnNumber:23}}),e.createElement("span",{__self:this,__source:{fileName:N,lineNumber:696,columnNumber:23}},"Processing...")):e.createElement(e.Fragment,null,e.createElement(st,{className:"w-3 h-3",__self:this,__source:{fileName:N,lineNumber:700,columnNumber:23}}),e.createElement("span",{__self:this,__source:{fileName:N,lineNumber:701,columnNumber:23}},"Pay KES 300"))))))))}function Cu({consignments:t,onRefresh:r,canSubmit:l,showPaymentModal:s,setShowPaymentModal:a}){const[m,n]=P.useState(!1),[i,b]=P.useState({title:"",description:"",category:"Vegetables",quantity:"",unit:"kg",bidPricePerUnit:"",location:"",harvestDate:"",expiryDate:"",images:[""]}),u=async f=>{if(f.preventDefault(),!l){L.error("Please pay the registration fee first");return}try{const h=localStorage.getItem("authToken")||localStorage.getItem("token");await me.post("/api/consignments",{...i,quantity:parseFloat(i.quantity),bidPricePerUnit:parseFloat(i.bidPricePerUnit)},{headers:{Authorization:`Bearer ${h}`}}),L.success("Consignment submitted successfully!"),n(!1),b({title:"",description:"",category:"Vegetables",quantity:"",unit:"kg",bidPricePerUnit:"",location:"",harvestDate:"",expiryDate:"",images:[""]}),r()}catch(h){L.error(h.response?.data?.error||"Failed to submit consignment")}},_=f=>({PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",PRICE_SUGGESTED:"bg-blue-100 text-blue-800",DRIVER_ASSIGNED:"bg-indigo-100 text-indigo-800",IN_TRANSIT:"bg-purple-100 text-purple-800",DELIVERED:"bg-cyan-100 text-cyan-800",COMPLETED:"bg-green-100 text-green-800"})[f]||"bg-gray-100 text-gray-800",o=f=>{const w={PENDING:Ie,APPROVED:Fe,REJECTED:Je,PRICE_SUGGESTED:Ye,DRIVER_ASSIGNED:Te,IN_TRANSIT:Te,DELIVERED:Fe,COMPLETED:Fe}[f]||wt;return e.createElement(w,{className:"w-4 h-4",__self:this,__source:{fileName:N,lineNumber:803,columnNumber:12}})};return e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:N,lineNumber:807,columnNumber:5}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:N,lineNumber:808,columnNumber:7}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:N,lineNumber:809,columnNumber:9}},"My Consignments"),e.createElement("button",{onClick:()=>n(!0),disabled:!l,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",__self:this,__source:{fileName:N,lineNumber:810,columnNumber:9}},e.createElement($t,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:N,lineNumber:815,columnNumber:11}}),"Submit New Consignment")),!l&&e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",__self:this,__source:{fileName:N,lineNumber:821,columnNumber:9}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:N,lineNumber:822,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:823,columnNumber:13}},e.createElement(wt,{className:"w-5 h-5 text-yellow-600 mr-2",__self:this,__source:{fileName:N,lineNumber:824,columnNumber:15}}),e.createElement("span",{className:"text-yellow-800",__self:this,__source:{fileName:N,lineNumber:825,columnNumber:15}},"You must pay the KES 300 registration fee before submitting consignments.")),e.createElement("button",{onClick:()=>a(!0),className:"ml-3 bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",__self:this,__source:{fileName:N,lineNumber:830,columnNumber:13}},"Pay Now"))),m&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:N,lineNumber:841,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",__self:this,__source:{fileName:N,lineNumber:842,columnNumber:11}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:N,lineNumber:843,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:N,lineNumber:844,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:N,lineNumber:845,columnNumber:17}},"Submit New Consignment"),e.createElement("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700",__self:this,__source:{fileName:N,lineNumber:848,columnNumber:17}},e.createElement(Je,{className:"w-6 h-6",__self:this,__source:{fileName:N,lineNumber:852,columnNumber:19}})))),e.createElement("form",{onSubmit:u,className:"p-6 space-y-4",__self:this,__source:{fileName:N,lineNumber:857,columnNumber:13}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",__self:this,__source:{fileName:N,lineNumber:858,columnNumber:15}},e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:859,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:860,columnNumber:19}},"Title"),e.createElement("input",{type:"text",required:!0,value:i.title,onChange:f=>b(h=>({...h,title:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Fresh Tomatoes",__self:this,__source:{fileName:N,lineNumber:863,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:878,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:879,columnNumber:19}},"Category"),e.createElement("select",{value:i.category,onChange:f=>b(h=>({...h,category:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:N,lineNumber:882,columnNumber:19}},e.createElement("option",{value:"Vegetables",__self:this,__source:{fileName:N,lineNumber:892,columnNumber:21}},"Vegetables"),e.createElement("option",{value:"Fruits",__self:this,__source:{fileName:N,lineNumber:893,columnNumber:21}},"Fruits"),e.createElement("option",{value:"Grains",__self:this,__source:{fileName:N,lineNumber:894,columnNumber:21}},"Grains"),e.createElement("option",{value:"Legumes",__self:this,__source:{fileName:N,lineNumber:895,columnNumber:21}},"Legumes"))),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:899,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:900,columnNumber:19}},"Quantity"),e.createElement("input",{type:"number",required:!0,value:i.quantity,onChange:f=>b(h=>({...h,quantity:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 500",__self:this,__source:{fileName:N,lineNumber:903,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:918,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:919,columnNumber:19}},"Unit"),e.createElement("select",{value:i.unit,onChange:f=>b(h=>({...h,unit:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:N,lineNumber:922,columnNumber:19}},e.createElement("option",{value:"kg",__self:this,__source:{fileName:N,lineNumber:929,columnNumber:21}},"Kilograms (kg)"),e.createElement("option",{value:"tonnes",__self:this,__source:{fileName:N,lineNumber:930,columnNumber:21}},"Tonnes"),e.createElement("option",{value:"bags",__self:this,__source:{fileName:N,lineNumber:931,columnNumber:21}},"Bags"),e.createElement("option",{value:"pieces",__self:this,__source:{fileName:N,lineNumber:932,columnNumber:21}},"Pieces"))),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:936,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:937,columnNumber:19}},"Bid Price per Unit (KES)"),e.createElement("input",{type:"number",required:!0,value:i.bidPricePerUnit,onChange:f=>b(h=>({...h,bidPricePerUnit:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 80",__self:this,__source:{fileName:N,lineNumber:940,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:955,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:956,columnNumber:19}},"Location"),e.createElement("input",{type:"text",required:!0,value:i.location,onChange:f=>b(h=>({...h,location:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Nakuru",__self:this,__source:{fileName:N,lineNumber:959,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:974,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:975,columnNumber:19}},"Harvest Date"),e.createElement("input",{type:"date",required:!0,value:i.harvestDate,onChange:f=>b(h=>({...h,harvestDate:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:N,lineNumber:978,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:992,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:993,columnNumber:19}},"Expiry Date"),e.createElement("input",{type:"date",required:!0,value:i.expiryDate,onChange:f=>b(h=>({...h,expiryDate:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:N,lineNumber:996,columnNumber:19}}))),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:1011,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:1012,columnNumber:17}},"Description"),e.createElement("textarea",{required:!0,value:i.description,onChange:f=>b(h=>({...h,description:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:3,placeholder:"Describe your produce quality, farming methods, etc.",__self:this,__source:{fileName:N,lineNumber:1015,columnNumber:17}})),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:1030,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:1031,columnNumber:17}},"Image URL"),e.createElement("input",{type:"url",value:Array.isArray(i.images)&&i.images.length>0?i.images[0]:"",onChange:f=>b(h=>({...h,images:[f.target.value]})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"https://example.com/image.jpg",__self:this,__source:{fileName:N,lineNumber:1034,columnNumber:17}})),e.createElement("div",{className:"flex justify-end space-x-3 pt-4",__self:this,__source:{fileName:N,lineNumber:1052,columnNumber:15}},e.createElement("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",__self:this,__source:{fileName:N,lineNumber:1053,columnNumber:17}},"Cancel"),e.createElement("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",__self:this,__source:{fileName:N,lineNumber:1060,columnNumber:17}},"Submit Consignment"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:N,lineNumber:1073,columnNumber:7}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:N,lineNumber:1074,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:N,lineNumber:1075,columnNumber:11}},"All Consignments (",(Array.isArray(t)?t:[]).length,")")),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:N,lineNumber:1080,columnNumber:9}},(Array.isArray(t)?t:[]).map(f=>e.createElement("div",{key:f.id,className:"p-6",__self:this,__source:{fileName:N,lineNumber:1083,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:N,lineNumber:1084,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:1085,columnNumber:19}},e.createElement("img",{src:Array.isArray(f.images)&&f.images.length>0&&f.images[0]&&f.images[0].trim()!==""?f.images[0]:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=400&h=400&fit=crop",alt:f.title,className:"w-16 h-16 rounded-lg object-cover",onError:h=>{const w=h.target;w.src="https://images.unsplash.com/photo-1542838132-92c53300491e?w=400&h=400&fit=crop"},__self:this,__source:{fileName:N,lineNumber:1086,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:N,lineNumber:1102,columnNumber:21}},e.createElement("h4",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:N,lineNumber:1103,columnNumber:23}},f.title),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:N,lineNumber:1106,columnNumber:23}},f.description),e.createElement("div",{className:"flex items-center space-x-4 mt-2",__self:this,__source:{fileName:N,lineNumber:1109,columnNumber:23}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:N,lineNumber:1110,columnNumber:25}},f.quantity," ",f.unit),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:N,lineNumber:1113,columnNumber:25}},"KES ",f.bidPricePerUnit,"/",f.unit),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:N,lineNumber:1116,columnNumber:25}},f.location)))),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:N,lineNumber:1122,columnNumber:19}},e.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${_(f.status)}`,__self:this,__source:{fileName:N,lineNumber:1123,columnNumber:21}},o(f.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:N,lineNumber:1127,columnNumber:23}},f.status.replace("_"," "))),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:N,lineNumber:1131,columnNumber:21}},new Date(f.createdAt).toLocaleDateString()))),f.adminNotes&&e.createElement("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",__self:this,__source:{fileName:N,lineNumber:1137,columnNumber:19}},e.createElement("p",{className:"text-sm text-gray-700",__self:this,__source:{fileName:N,lineNumber:1138,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:N,lineNumber:1139,columnNumber:23}},"Admin Notes:")," ",f.adminNotes)))))))}function Au({wallet:t,onWithdraw:r,onRefresh:l}){const[s,a]=P.useState(!1),[m,n]=P.useState(""),[i,b]=P.useState(""),u=async _=>{_.preventDefault();const o=parseFloat(m);if(o<10){L.error("Minimum withdrawal amount is KES 10");return}if(o>t.balance){L.error("Insufficient balance");return}await r(o,i),a(!1),n(""),b("")};return e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:N,lineNumber:1179,columnNumber:5}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:N,lineNumber:1180,columnNumber:7}},e.createElement("div",{className:"flex items-center justify-between mb-6",__self:this,__source:{fileName:N,lineNumber:1181,columnNumber:9}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:N,lineNumber:1182,columnNumber:11}},"Wallet"),e.createElement("button",{onClick:()=>a(!0),disabled:!t?.balance||t.balance<10,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed",__self:this,__source:{fileName:N,lineNumber:1183,columnNumber:11}},"Withdraw Funds")),e.createElement("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-6 text-white",__self:this,__source:{fileName:N,lineNumber:1192,columnNumber:9}},e.createElement("h3",{className:"text-lg font-medium mb-2",__self:this,__source:{fileName:N,lineNumber:1193,columnNumber:11}},"Available Balance"),e.createElement("p",{className:"text-3xl font-bold",__self:this,__source:{fileName:N,lineNumber:1194,columnNumber:11}},"KES ",t?.balance?.toLocaleString()||0))),s&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:N,lineNumber:1201,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full",__self:this,__source:{fileName:N,lineNumber:1202,columnNumber:11}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:N,lineNumber:1203,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:N,lineNumber:1204,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:N,lineNumber:1205,columnNumber:17}},"Withdraw Funds"),e.createElement("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700",__self:this,__source:{fileName:N,lineNumber:1208,columnNumber:17}},e.createElement(Je,{className:"w-6 h-6",__self:this,__source:{fileName:N,lineNumber:1212,columnNumber:19}})))),e.createElement("form",{onSubmit:u,className:"p-6 space-y-4",__self:this,__source:{fileName:N,lineNumber:1217,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:1218,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:1219,columnNumber:17}},"Amount (KES)"),e.createElement("input",{type:"number",min:"10",max:t?.balance||0,required:!0,value:m,onChange:_=>n(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter amount",__self:this,__source:{fileName:N,lineNumber:1222,columnNumber:17}}),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:N,lineNumber:1232,columnNumber:17}},"Minimum: KES 10 | Available: KES"," ",t?.balance?.toLocaleString()||0)),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:1238,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:1239,columnNumber:17}},"M-Pesa Phone Number"),e.createElement("input",{type:"tel",required:!0,value:i,onChange:_=>b(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"+254712345678",__self:this,__source:{fileName:N,lineNumber:1242,columnNumber:17}})),e.createElement("div",{className:"flex justify-end space-x-3 pt-4",__self:this,__source:{fileName:N,lineNumber:1252,columnNumber:15}},e.createElement("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",__self:this,__source:{fileName:N,lineNumber:1253,columnNumber:17}},"Cancel"),e.createElement("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",__self:this,__source:{fileName:N,lineNumber:1260,columnNumber:17}},"Withdraw"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:N,lineNumber:1273,columnNumber:7}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:N,lineNumber:1274,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:N,lineNumber:1275,columnNumber:11}},"Transaction History")),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:N,lineNumber:1279,columnNumber:9}},(Array.isArray(t?.transactions)?t.transactions:[]).map(_=>e.createElement("div",{key:_.id,className:"p-6 flex items-center justify-between",__self:this,__source:{fileName:N,lineNumber:1282,columnNumber:15}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:1286,columnNumber:17}},e.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${_.type==="CREDIT"?"bg-green-100":"bg-red-100"}`,__self:this,__source:{fileName:N,lineNumber:1287,columnNumber:19}},_.type==="CREDIT"?e.createElement(Rt,{className:"w-5 h-5 text-green-600",__self:this,__source:{fileName:N,lineNumber:1295,columnNumber:23}}):e.createElement(Rt,{className:"w-5 h-5 text-red-600 transform rotate-180",__self:this,__source:{fileName:N,lineNumber:1297,columnNumber:23}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:N,lineNumber:1302,columnNumber:19}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:N,lineNumber:1303,columnNumber:21}},_.description),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:N,lineNumber:1306,columnNumber:21}},new Date(_.createdAt).toLocaleDateString()," at"," ",new Date(_.createdAt).toLocaleTimeString()))),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:N,lineNumber:1312,columnNumber:17}},e.createElement("p",{className:`font-semibold ${_.type==="CREDIT"?"text-green-600":"text-red-600"}`,__self:this,__source:{fileName:N,lineNumber:1313,columnNumber:19}},_.type==="CREDIT"?"+":"-","KES"," ",_.amount.toLocaleString())))),(!t?.transactions||t.transactions.length===0)&&e.createElement("div",{className:"p-6 text-center text-gray-500",__self:this,__source:{fileName:N,lineNumber:1328,columnNumber:13}},"No transactions yet"))))}function ku({notifications:t,onRefresh:r}){const l=async s=>{try{const a=localStorage.getItem("authToken")||localStorage.getItem("token");await me.put("/api/notifications/${notificationId}/read",{},{headers:{Authorization:`Bearer ${a}`}}),r()}catch(a){console.error("Failed to mark notification as read:",a),L.error("Failed to mark notification as read")}};return e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:N,lineNumber:1356,columnNumber:5}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:N,lineNumber:1357,columnNumber:7}},"Notifications"),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:N,lineNumber:1359,columnNumber:7}},e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:N,lineNumber:1360,columnNumber:9}},(Array.isArray(t)?t:[]).map(s=>e.createElement("div",{key:s.id,className:`p-6 ${s.isRead?"bg-white":"bg-blue-50"}`,__self:this,__source:{fileName:N,lineNumber:1363,columnNumber:15}},e.createElement("div",{className:"flex items-start justify-between",__self:this,__source:{fileName:N,lineNumber:1367,columnNumber:17}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:N,lineNumber:1368,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:1369,columnNumber:21}},e.createElement("h4",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:N,lineNumber:1370,columnNumber:23}},s.title),!s.isRead&&e.createElement("span",{className:"ml-2 w-2 h-2 bg-blue-600 rounded-full",__self:this,__source:{fileName:N,lineNumber:1374,columnNumber:25}})),e.createElement("p",{className:"text-gray-700 mt-1",__self:this,__source:{fileName:N,lineNumber:1377,columnNumber:21}},s.message),e.createElement("p",{className:"text-sm text-gray-500 mt-2",__self:this,__source:{fileName:N,lineNumber:1378,columnNumber:21}},new Date(s.createdAt).toLocaleDateString()," at"," ",new Date(s.createdAt).toLocaleTimeString())),!s.isRead&&e.createElement("button",{onClick:()=>l(s.id),className:"ml-4 text-blue-600 hover:text-blue-800 text-sm font-medium",__self:this,__source:{fileName:N,lineNumber:1384,columnNumber:21}},"Mark as read")))),(Array.isArray(t)?t:[]).length===0&&e.createElement("div",{className:"p-6 text-center text-gray-500",__self:this,__source:{fileName:N,lineNumber:1396,columnNumber:13}},"No notifications yet"))))}function Pu({user:t}){return e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:N,lineNumber:1409,columnNumber:5}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:N,lineNumber:1410,columnNumber:7}},"Profile"),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:N,lineNumber:1412,columnNumber:7}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:N,lineNumber:1413,columnNumber:9}},e.createElement("div",{className:"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",__self:this,__source:{fileName:N,lineNumber:1414,columnNumber:11}},t?.firstName?.[0],t?.lastName?.[0]),e.createElement("div",{className:"ml-6",__self:this,__source:{fileName:N,lineNumber:1418,columnNumber:11}},e.createElement("h3",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:N,lineNumber:1419,columnNumber:13}},t?.firstName," ",t?.lastName),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:N,lineNumber:1422,columnNumber:13}},t?.email),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:N,lineNumber:1423,columnNumber:13}},t?.phone))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:N,lineNumber:1427,columnNumber:9}},e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:1428,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:1429,columnNumber:13}},"Role"),e.createElement("p",{className:"text-gray-900 capitalize",__self:this,__source:{fileName:N,lineNumber:1432,columnNumber:13}},t?.role)),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:1434,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:1435,columnNumber:13}},"County"),e.createElement("p",{className:"text-gray-900",__self:this,__source:{fileName:N,lineNumber:1438,columnNumber:13}},t?.county)),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:1440,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:1441,columnNumber:13}},"Registration Status"),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:1444,columnNumber:13}},t?.registrationFeePaid?e.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",__self:this,__source:{fileName:N,lineNumber:1446,columnNumber:17}},e.createElement(Fe,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:N,lineNumber:1447,columnNumber:19}}),"Paid"):e.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",__self:this,__source:{fileName:N,lineNumber:1451,columnNumber:17}},e.createElement(wt,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:N,lineNumber:1452,columnNumber:19}}),"Fee Required"))),e.createElement("div",{__self:this,__source:{fileName:N,lineNumber:1458,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:N,lineNumber:1459,columnNumber:13}},"Verification Status"),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:N,lineNumber:1462,columnNumber:13}},t?.verified?e.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",__self:this,__source:{fileName:N,lineNumber:1464,columnNumber:17}},e.createElement(Fe,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:N,lineNumber:1465,columnNumber:19}}),"Verified"):e.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",__self:this,__source:{fileName:N,lineNumber:1469,columnNumber:17}},e.createElement(Ie,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:N,lineNumber:1470,columnNumber:19}}),"Pending"))))))}var ue="/app/code/frontend/src/pages/customer/CustomerDashboard.tsx";function Du(){const{user:t}=Ae(),r=_t(),[l,s]=P.useState([]),[a,m]=P.useState(!0),[n,i]=P.useState({totalOrders:0,completedOrders:0,totalSpent:0,pendingOrders:0});P.useEffect(()=>{r("/customer/profile",{replace:!0})},[r]),P.useEffect(()=>{b()},[]);const b=async()=>{try{m(!0);const o=localStorage.getItem("authToken")||localStorage.getItem("token"),f=await me.get("/api/orders",{headers:{Authorization:`Bearer ${o}`}});console.log(" Raw orders response:",f.data);let h=[];f.data&&Array.isArray(f.data.orders)?h=f.data.orders:Array.isArray(f.data)&&(h=f.data),console.log(" Processed orders:",h.length),s(h);const w=Array.isArray(h)?h:[],g=w.length,p=w.filter(M=>M&&M.status==="DELIVERED").length,S=w.filter(M=>M&&M.paymentStatus==="COMPLETED").reduce((M,I)=>M+(parseFloat(I.totalAmount)||0),0),E=w.filter(M=>M&&M.status==="PENDING").length;i({totalOrders:g,completedOrders:p,totalSpent:S,pendingOrders:E})}catch(o){if(console.error("Failed to fetch orders:",o),o.response?.status===404){console.log(" Using fallback demo orders (endpoint not found)");const f=[{id:"order_1",orderNumber:"ORD-2024-001",totalAmount:2500,paymentStatus:"COMPLETED",status:"DELIVERED",deliveryAddress:"123 Main Street, Nairobi",notes:"Please deliver in the morning",createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:new Date().toISOString(),customerName:"John Doe",items:[{id:"item_1",productName:"Organic Tomatoes",quantity:5,unit:"kg",pricePerUnit:120,totalPrice:600}]},{id:"order_2",orderNumber:"ORD-2024-002",totalAmount:1800,paymentStatus:"PENDING",status:"PROCESSING",deliveryAddress:"456 Oak Avenue, Nakuru",notes:"Call before delivery",createdAt:new Date(Date.now()-36e5).toISOString(),updatedAt:new Date().toISOString(),customerName:"John Doe",items:[{id:"item_3",productName:"Premium Maize",quantity:2,unit:"bags",pricePerUnit:900,totalPrice:1800}]}];s(f),i({totalOrders:2,completedOrders:1,totalSpent:2500,pendingOrders:1}),L("Using demo data - backend deployment needed",{icon:""})}else L.error("Failed to load orders")}finally{m(!1)}},u=o=>({PENDING:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",PROCESSING:"bg-indigo-100 text-indigo-800",SHIPPED:"bg-purple-100 text-purple-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",_=o=>{const h={PENDING:Ie,CONFIRMED:ge,PROCESSING:ge,SHIPPED:Te,DELIVERED:ge,CANCELLED:ge}[o]||ge;return e.createElement(h,{className:"w-4 h-4",__self:this,__source:{fileName:ue,lineNumber:206,columnNumber:12}})};return a?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:ue,lineNumber:211,columnNumber:7}},e.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600",__self:this,__source:{fileName:ue,lineNumber:212,columnNumber:9}})):e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:ue,lineNumber:218,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:ue,lineNumber:219,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:ue,lineNumber:221,columnNumber:9}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:ue,lineNumber:222,columnNumber:11}},"Welcome back, ",t?.firstName,"!"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:ue,lineNumber:225,columnNumber:11}},"Manage your profile and view your order history")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:ue,lineNumber:231,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:ue,lineNumber:232,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:ue,lineNumber:233,columnNumber:13}},e.createElement(Tt,{className:"w-8 h-8 text-blue-600",__self:this,__source:{fileName:ue,lineNumber:234,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:ue,lineNumber:235,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:ue,lineNumber:236,columnNumber:17}},"Total Orders"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:ue,lineNumber:239,columnNumber:17}},n.totalOrders)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:ue,lineNumber:246,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:ue,lineNumber:247,columnNumber:13}},e.createElement(Ie,{className:"w-8 h-8 text-yellow-600",__self:this,__source:{fileName:ue,lineNumber:248,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:ue,lineNumber:249,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:ue,lineNumber:250,columnNumber:17}},"Pending Orders"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:ue,lineNumber:253,columnNumber:17}},n.pendingOrders)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:ue,lineNumber:260,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:ue,lineNumber:261,columnNumber:13}},e.createElement(ge,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:ue,lineNumber:262,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:ue,lineNumber:263,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:ue,lineNumber:264,columnNumber:17}},"Completed"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:ue,lineNumber:265,columnNumber:17}},n.completedOrders)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:ue,lineNumber:272,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:ue,lineNumber:273,columnNumber:13}},e.createElement(st,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:ue,lineNumber:274,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:ue,lineNumber:275,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:ue,lineNumber:276,columnNumber:17}},"Total Spent"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:ue,lineNumber:277,columnNumber:17}},"KES ",n.totalSpent.toLocaleString()))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 mb-8",__self:this,__source:{fileName:ue,lineNumber:286,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:ue,lineNumber:287,columnNumber:11}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",__self:this,__source:{fileName:ue,lineNumber:290,columnNumber:11}},e.createElement("button",{onClick:()=>r("/marketplace"),className:"flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",__self:this,__source:{fileName:ue,lineNumber:291,columnNumber:13}},e.createElement(Tt,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:ue,lineNumber:295,columnNumber:15}}),"Browse Marketplace"),e.createElement("button",{onClick:()=>r("/customer/orders"),className:"flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",__self:this,__source:{fileName:ue,lineNumber:299,columnNumber:13}},e.createElement(ge,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:ue,lineNumber:303,columnNumber:15}}),"View Orders"),e.createElement("button",{onClick:()=>r("/customer/profile"),className:"flex items-center justify-center px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",__self:this,__source:{fileName:ue,lineNumber:307,columnNumber:13}},e.createElement(nt,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:ue,lineNumber:311,columnNumber:15}}),"Edit Profile"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:ue,lineNumber:318,columnNumber:9}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:ue,lineNumber:319,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:ue,lineNumber:320,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:ue,lineNumber:321,columnNumber:15}},"Recent Orders"),e.createElement("button",{onClick:()=>r("/customer/orders"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",__self:this,__source:{fileName:ue,lineNumber:324,columnNumber:15}},"View All"))),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:ue,lineNumber:332,columnNumber:11}},(Array.isArray(l)?l:[]).slice(0,3).map(o=>e.createElement("div",{key:o.id,className:"flex items-center justify-between py-4 border-b border-gray-100 last:border-b-0",__self:this,__source:{fileName:ue,lineNumber:334,columnNumber:15}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:ue,lineNumber:338,columnNumber:17}},e.createElement("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:ue,lineNumber:339,columnNumber:19}},Array.isArray(o?.items)&&o.items[0]?.product?.images?.[0]?e.createElement("img",{src:o.items[0].product.images[0],alt:o.items[0].product.name||"Product",className:"w-12 h-12 rounded-lg object-cover",__self:this,__source:{fileName:ue,lineNumber:341,columnNumber:23}}):e.createElement(ge,{className:"w-6 h-6 text-gray-400",__self:this,__source:{fileName:ue,lineNumber:347,columnNumber:23}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:ue,lineNumber:350,columnNumber:19}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:ue,lineNumber:351,columnNumber:21}},"Order #",o?.id?String(o.id).slice(-8):"N/A"),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:ue,lineNumber:354,columnNumber:21}},Array.isArray(o?.items)?o.items.length:0," item",Array.isArray(o?.items)&&o.items.length>1?"s":"","  KES"," ",(o?.totalAmount||0).toLocaleString()),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:ue,lineNumber:359,columnNumber:21}},o?.orderDate?new Date(o.orderDate).toLocaleDateString():o?.createdAt?new Date(o.createdAt).toLocaleDateString():"Unknown date"))),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:ue,lineNumber:365,columnNumber:17}},e.createElement("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u(o.status)}`,__self:this,__source:{fileName:ue,lineNumber:366,columnNumber:19}},_(o.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:ue,lineNumber:370,columnNumber:21}},o.status)),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:ue,lineNumber:372,columnNumber:19}},o.paymentMethod||"Payment method not specified")))),l.length===0&&e.createElement("div",{className:"text-center py-8",__self:this,__source:{fileName:ue,lineNumber:379,columnNumber:15}},e.createElement(ge,{className:"w-12 h-12 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:ue,lineNumber:380,columnNumber:17}}),e.createElement("p",{className:"text-gray-500",__self:this,__source:{fileName:ue,lineNumber:381,columnNumber:17}},"No orders yet"),e.createElement("button",{onClick:()=>r("/marketplace"),className:"mt-3 text-blue-600 hover:text-blue-800 font-medium",__self:this,__source:{fileName:ue,lineNumber:382,columnNumber:17}},"Start Shopping"))))))}var G="/app/code/frontend/src/pages/customer/ProfilePage.tsx";function Ru(){const{user:t,updateUser:r}=Ae(),l=_t(),[s,a]=P.useState(!1),[m,n]=P.useState(!1),[i,b]=P.useState([]),[u,_]=P.useState({totalOrders:0,completedOrders:0,totalSpent:0,pendingOrders:0}),[o,f]=P.useState({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",county:t?.county||""});P.useEffect(()=>{h()},[]);const h=async()=>{try{const S=localStorage.getItem("token"),E=await me.get("/api/orders",{headers:{Authorization:`Bearer ${S}`}}),M=E.data.orders||E.data;b(M);const I=Array.isArray(M)?M:[],B=I.length,q=I.filter(C=>C?.status==="DELIVERED").length,le=I.filter(C=>C?.paymentStatus==="COMPLETED").reduce((C,c)=>C+(c?.totalAmount||0),0),F=I.filter(C=>C?.status==="PENDING").length;_({totalOrders:B,completedOrders:q,totalSpent:le,pendingOrders:F})}catch(S){if(console.error("Failed to fetch orders:",S),S.response?.status===404){console.log(" Using fallback demo orders (endpoint not found)");const E=[{id:"order_1",orderNumber:"ORD-2024-001",totalAmount:2500,paymentStatus:"COMPLETED",status:"DELIVERED",deliveryAddress:"123 Main Street, Nairobi",createdAt:new Date(Date.now()-864e5).toISOString(),items:[{productName:"Organic Tomatoes",quantity:5,totalPrice:600}]}];b(E),_({totalOrders:1,completedOrders:1,totalSpent:2500,pendingOrders:0})}}},w=async()=>{try{n(!0);const S=localStorage.getItem("token"),E=await me.put("/api/profile",o,{headers:{Authorization:`Bearer ${S}`}});r(E.data.user),a(!1),L.success("Profile updated successfully!")}catch(S){L.error(S.response?.data?.error||"Failed to update profile")}finally{n(!1)}},g=()=>{f({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",county:t?.county||""}),a(!1)},p=S=>({PENDING:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",PROCESSING:"bg-indigo-100 text-indigo-800",SHIPPED:"bg-purple-100 text-purple-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[S]||"bg-gray-100 text-gray-800";return e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:G,lineNumber:179,columnNumber:5}},e.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:G,lineNumber:180,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:G,lineNumber:182,columnNumber:9}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:G,lineNumber:183,columnNumber:11}},"My Profile"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:G,lineNumber:184,columnNumber:11}},"Manage your personal information and preferences")),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",__self:this,__source:{fileName:G,lineNumber:189,columnNumber:9}},e.createElement("div",{className:"lg:col-span-2",__self:this,__source:{fileName:G,lineNumber:191,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:G,lineNumber:192,columnNumber:13}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:G,lineNumber:193,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:G,lineNumber:194,columnNumber:17}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:G,lineNumber:195,columnNumber:19}},"Personal Information"),s?e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:G,lineNumber:207,columnNumber:21}},e.createElement("button",{onClick:w,disabled:m,className:"flex items-center text-green-600 hover:text-green-800 disabled:opacity-50",__self:this,__source:{fileName:G,lineNumber:208,columnNumber:23}},e.createElement(vl,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:G,lineNumber:213,columnNumber:25}}),"Save"),e.createElement("button",{onClick:g,className:"flex items-center text-red-600 hover:text-red-800",__self:this,__source:{fileName:G,lineNumber:216,columnNumber:23}},e.createElement(Je,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:G,lineNumber:220,columnNumber:25}}),"Cancel")):e.createElement("button",{onClick:()=>a(!0),className:"flex items-center text-blue-600 hover:text-blue-800",__self:this,__source:{fileName:G,lineNumber:199,columnNumber:21}},e.createElement(Ja,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:G,lineNumber:203,columnNumber:23}}),"Edit"))),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:G,lineNumber:228,columnNumber:15}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:G,lineNumber:230,columnNumber:17}},e.createElement("div",{className:"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",__self:this,__source:{fileName:G,lineNumber:231,columnNumber:19}},t?.firstName?.[0],t?.lastName?.[0]),e.createElement("div",{className:"ml-6",__self:this,__source:{fileName:G,lineNumber:235,columnNumber:19}},e.createElement("h3",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:G,lineNumber:236,columnNumber:21}},t?.firstName," ",t?.lastName),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:G,lineNumber:239,columnNumber:21}},t?.role),e.createElement("div",{className:"flex items-center mt-1",__self:this,__source:{fileName:G,lineNumber:240,columnNumber:21}},e.createElement(pt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:G,lineNumber:241,columnNumber:23}}),e.createElement("span",{className:"text-sm text-green-600",__self:this,__source:{fileName:G,lineNumber:242,columnNumber:23}},"Verified Account")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:G,lineNumber:250,columnNumber:17}},e.createElement("div",{__self:this,__source:{fileName:G,lineNumber:251,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:G,lineNumber:252,columnNumber:21}},e.createElement(nt,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:G,lineNumber:253,columnNumber:23}}),"First Name"),s?e.createElement("input",{type:"text",value:o.firstName,onChange:S=>f(E=>({...E,firstName:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:G,lineNumber:257,columnNumber:23}}):e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:G,lineNumber:269,columnNumber:23}},t?.firstName)),e.createElement("div",{__self:this,__source:{fileName:G,lineNumber:273,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:G,lineNumber:274,columnNumber:21}},e.createElement(nt,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:G,lineNumber:275,columnNumber:23}}),"Last Name"),s?e.createElement("input",{type:"text",value:o.lastName,onChange:S=>f(E=>({...E,lastName:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:G,lineNumber:279,columnNumber:23}}):e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:G,lineNumber:291,columnNumber:23}},t?.lastName)),e.createElement("div",{__self:this,__source:{fileName:G,lineNumber:295,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:G,lineNumber:296,columnNumber:21}},e.createElement(Or,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:G,lineNumber:297,columnNumber:23}}),"Email Address"),s?e.createElement("input",{type:"email",value:o.email,onChange:S=>f(E=>({...E,email:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:G,lineNumber:301,columnNumber:23}}):e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:G,lineNumber:313,columnNumber:23}},t?.email)),e.createElement("div",{__self:this,__source:{fileName:G,lineNumber:317,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:G,lineNumber:318,columnNumber:21}},e.createElement(Et,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:G,lineNumber:319,columnNumber:23}}),"Phone Number"),e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:G,lineNumber:322,columnNumber:21}},t?.phone),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:G,lineNumber:323,columnNumber:21}},"Phone number cannot be changed")),e.createElement("div",{__self:this,__source:{fileName:G,lineNumber:328,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:G,lineNumber:329,columnNumber:21}},e.createElement(it,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:G,lineNumber:330,columnNumber:23}}),"County"),s?e.createElement("select",{value:o.county,onChange:S=>f(E=>({...E,county:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:G,lineNumber:334,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:G,lineNumber:344,columnNumber:25}},"Select County"),e.createElement("option",{value:"Nairobi",__self:this,__source:{fileName:G,lineNumber:345,columnNumber:25}},"Nairobi"),e.createElement("option",{value:"Kiambu",__self:this,__source:{fileName:G,lineNumber:346,columnNumber:25}},"Kiambu"),e.createElement("option",{value:"Nakuru",__self:this,__source:{fileName:G,lineNumber:347,columnNumber:25}},"Nakuru"),e.createElement("option",{value:"Mombasa",__self:this,__source:{fileName:G,lineNumber:348,columnNumber:25}},"Mombasa"),e.createElement("option",{value:"Kisumu",__self:this,__source:{fileName:G,lineNumber:349,columnNumber:25}},"Kisumu"),e.createElement("option",{value:"Eldoret",__self:this,__source:{fileName:G,lineNumber:350,columnNumber:25}},"Eldoret"),e.createElement("option",{value:"Thika",__self:this,__source:{fileName:G,lineNumber:351,columnNumber:25}},"Thika"),e.createElement("option",{value:"Nyeri",__self:this,__source:{fileName:G,lineNumber:352,columnNumber:25}},"Nyeri")):e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:G,lineNumber:355,columnNumber:23}},t?.county)),e.createElement("div",{__self:this,__source:{fileName:G,lineNumber:359,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:G,lineNumber:360,columnNumber:21}},e.createElement(yt,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:G,lineNumber:361,columnNumber:23}}),"Member Since"),e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:G,lineNumber:364,columnNumber:21}},new Date(t?.createdAt||new Date).toLocaleDateString())))))),e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:G,lineNumber:376,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:G,lineNumber:378,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:G,lineNumber:379,columnNumber:15}},"Account Summary"),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:G,lineNumber:382,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:G,lineNumber:383,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:G,lineNumber:384,columnNumber:19}},e.createElement(Tt,{className:"w-5 h-5 text-blue-600 mr-2",__self:this,__source:{fileName:G,lineNumber:385,columnNumber:21}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:G,lineNumber:386,columnNumber:21}},"Total Orders")),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:G,lineNumber:388,columnNumber:19}},u.totalOrders)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:G,lineNumber:393,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:G,lineNumber:394,columnNumber:19}},e.createElement(Ie,{className:"w-5 h-5 text-yellow-600 mr-2",__self:this,__source:{fileName:G,lineNumber:395,columnNumber:21}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:G,lineNumber:396,columnNumber:21}},"Pending")),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:G,lineNumber:398,columnNumber:19}},u.pendingOrders)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:G,lineNumber:403,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:G,lineNumber:404,columnNumber:19}},e.createElement(ge,{className:"w-5 h-5 text-green-600 mr-2",__self:this,__source:{fileName:G,lineNumber:405,columnNumber:21}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:G,lineNumber:406,columnNumber:21}},"Completed")),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:G,lineNumber:408,columnNumber:19}},u.completedOrders)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:G,lineNumber:413,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:G,lineNumber:414,columnNumber:19}},e.createElement(st,{className:"w-5 h-5 text-green-600 mr-2",__self:this,__source:{fileName:G,lineNumber:415,columnNumber:21}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:G,lineNumber:416,columnNumber:21}},"Total Spent")),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:G,lineNumber:418,columnNumber:19}},"KES ",u.totalSpent.toLocaleString())))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:G,lineNumber:426,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:G,lineNumber:427,columnNumber:15}},"Quick Actions"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:G,lineNumber:430,columnNumber:15}},e.createElement("button",{onClick:()=>l("/marketplace"),className:"w-full flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",__self:this,__source:{fileName:G,lineNumber:431,columnNumber:17}},e.createElement(Tt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:G,lineNumber:435,columnNumber:19}}),"Browse Marketplace"),e.createElement("button",{onClick:()=>l("/customer/orders"),className:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",__self:this,__source:{fileName:G,lineNumber:439,columnNumber:17}},e.createElement(ge,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:G,lineNumber:443,columnNumber:19}}),"View Order History"),e.createElement("button",{onClick:()=>l("/cart"),className:"w-full flex items-center justify-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",__self:this,__source:{fileName:G,lineNumber:447,columnNumber:17}},e.createElement(Tt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:G,lineNumber:451,columnNumber:19}}),"View Cart"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:G,lineNumber:458,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between mb-4",__self:this,__source:{fileName:G,lineNumber:459,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:G,lineNumber:460,columnNumber:17}},"Recent Orders"),e.createElement("button",{onClick:()=>l("/customer/orders"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",__self:this,__source:{fileName:G,lineNumber:463,columnNumber:17}},"View All")),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:G,lineNumber:470,columnNumber:15}},(Array.isArray(i)?i:[]).slice(0,3).map(S=>e.createElement("div",{key:S.id,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",__self:this,__source:{fileName:G,lineNumber:472,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:G,lineNumber:476,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:G,lineNumber:477,columnNumber:23}},"Order #",S.id.slice(-6)),e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:G,lineNumber:480,columnNumber:23}},new Date(S.orderDate).toLocaleDateString())),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:G,lineNumber:484,columnNumber:21}},e.createElement("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${p(S.status)}`,__self:this,__source:{fileName:G,lineNumber:485,columnNumber:23}},S.status),e.createElement("p",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:G,lineNumber:490,columnNumber:23}},"KES ",S.totalAmount.toLocaleString())))),i.length===0&&e.createElement("div",{className:"text-center py-4",__self:this,__source:{fileName:G,lineNumber:497,columnNumber:19}},e.createElement(ge,{className:"w-8 h-8 text-gray-400 mx-auto mb-2",__self:this,__source:{fileName:G,lineNumber:498,columnNumber:21}}),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:G,lineNumber:499,columnNumber:21}},"No orders yet"),e.createElement("button",{onClick:()=>l("/marketplace"),className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium",__self:this,__source:{fileName:G,lineNumber:500,columnNumber:21}},"Start Shopping"))))))))}var J="/app/code/frontend/src/pages/customer/OrderHistoryPage.tsx";function Fu(){const{user:t}=Ae(),[r,l]=P.useState([]),[s,a]=P.useState(!0),[m,n]=P.useState(null);P.useEffect(()=>{i()},[]);const i=async()=>{try{a(!0);const o=localStorage.getItem("authToken")||localStorage.getItem("token"),f=await me.get("/api/orders",{headers:{Authorization:`Bearer ${o}`}});let h=[];f.data&&Array.isArray(f.data.orders)?h=f.data.orders:Array.isArray(f.data)&&(h=f.data),l(h)}catch(o){console.error("Failed to fetch orders:",o),L.error("Failed to load orders")}finally{a(!1)}},b=o=>({PENDING:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",PROCESSING:"bg-indigo-100 text-indigo-800",SHIPPED:"bg-purple-100 text-purple-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",u=o=>{const h={PENDING:Ie,CONFIRMED:ge,PROCESSING:ge,SHIPPED:Te,DELIVERED:Fe,CANCELLED:Je}[o]||ge;return e.createElement(h,{className:"w-4 h-4",__self:this,__source:{fileName:J,lineNumber:102,columnNumber:12}})},_=o=>({PENDING:"bg-yellow-100 text-yellow-800",COMPLETED:"bg-green-100 text-green-800",FAILED:"bg-red-100 text-red-800",CANCELLED:"bg-gray-100 text-gray-800"})[o]||"bg-gray-100 text-gray-800";return s?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:J,lineNumber:117,columnNumber:7}},e.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600",__self:this,__source:{fileName:J,lineNumber:118,columnNumber:9}})):e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:J,lineNumber:124,columnNumber:5}},e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:J,lineNumber:125,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:J,lineNumber:127,columnNumber:9}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:J,lineNumber:128,columnNumber:11}},"Order History"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:J,lineNumber:129,columnNumber:11}},"Track and manage your orders")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:J,lineNumber:133,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:J,lineNumber:134,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:135,columnNumber:13}},e.createElement(ge,{className:"w-8 h-8 text-blue-600",__self:this,__source:{fileName:J,lineNumber:136,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:J,lineNumber:137,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:J,lineNumber:138,columnNumber:17}},"Total Orders"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:J,lineNumber:141,columnNumber:17}},r.length)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:J,lineNumber:148,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:149,columnNumber:13}},e.createElement(Ie,{className:"w-8 h-8 text-yellow-600",__self:this,__source:{fileName:J,lineNumber:150,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:J,lineNumber:151,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:J,lineNumber:152,columnNumber:17}},"Pending"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:J,lineNumber:153,columnNumber:17}},(Array.isArray(r)?r:[]).filter(o=>o?.status==="PENDING").length)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:J,lineNumber:160,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:161,columnNumber:13}},e.createElement(Fe,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:J,lineNumber:162,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:J,lineNumber:163,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:J,lineNumber:164,columnNumber:17}},"Delivered"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:J,lineNumber:165,columnNumber:17}},(Array.isArray(r)?r:[]).filter(o=>o?.status==="DELIVERED").length)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:J,lineNumber:172,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:173,columnNumber:13}},e.createElement(st,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:J,lineNumber:174,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:J,lineNumber:175,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:J,lineNumber:176,columnNumber:17}},"Total Spent"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:J,lineNumber:177,columnNumber:17}},"KES"," ",(Array.isArray(r)?r:[]).filter(o=>o?.paymentStatus==="COMPLETED").reduce((o,f)=>o+(f?.totalAmount||0),0).toLocaleString()))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:J,lineNumber:190,columnNumber:9}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:J,lineNumber:191,columnNumber:11}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:J,lineNumber:192,columnNumber:13}},"All Orders")),r.length===0?e.createElement("div",{className:"p-12 text-center",__self:this,__source:{fileName:J,lineNumber:196,columnNumber:13}},e.createElement(ge,{className:"w-16 h-16 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:J,lineNumber:197,columnNumber:15}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:J,lineNumber:198,columnNumber:15}},"No orders yet"),e.createElement("p",{className:"text-gray-500 mb-6",__self:this,__source:{fileName:J,lineNumber:201,columnNumber:15}},"Start shopping to see your orders here"),e.createElement("button",{onClick:()=>window.location.href="/marketplace",className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700",__self:this,__source:{fileName:J,lineNumber:204,columnNumber:15}},"Browse Marketplace")):e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:J,lineNumber:212,columnNumber:13}},(Array.isArray(r)?r:[]).map(o=>e.createElement("div",{key:o.id,className:"p-6",__self:this,__source:{fileName:J,lineNumber:214,columnNumber:17}},e.createElement("div",{className:"flex items-center justify-between mb-4",__self:this,__source:{fileName:J,lineNumber:215,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:216,columnNumber:21}},e.createElement("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:J,lineNumber:217,columnNumber:23}},o.items[0]?.product?.images?.[0]?e.createElement("img",{src:o.items[0].product.images[0],alt:o.items[0].product.name,className:"w-12 h-12 rounded-lg object-cover",__self:this,__source:{fileName:J,lineNumber:219,columnNumber:27}}):e.createElement(ge,{className:"w-6 h-6 text-gray-400",__self:this,__source:{fileName:J,lineNumber:225,columnNumber:27}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:J,lineNumber:228,columnNumber:23}},e.createElement("h3",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:J,lineNumber:229,columnNumber:25}},"Order #",o.id.slice(-8)),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:J,lineNumber:232,columnNumber:25}},Array.isArray(o?.items)?o.items.length:0," item",Array.isArray(o?.items)&&o.items.length>1?"s":"","  KES"," ",o.totalAmount.toLocaleString()))),e.createElement("div",{className:"flex items-center space-x-3",__self:this,__source:{fileName:J,lineNumber:240,columnNumber:21}},e.createElement("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${b(o.status)}`,__self:this,__source:{fileName:J,lineNumber:241,columnNumber:23}},u(o.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:J,lineNumber:245,columnNumber:25}},o.status)),e.createElement("button",{onClick:()=>n(o),className:"text-blue-600 hover:text-blue-800 font-medium text-sm flex items-center",__self:this,__source:{fileName:J,lineNumber:247,columnNumber:23}},e.createElement(xt,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:J,lineNumber:251,columnNumber:25}}),"View Details"))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",__self:this,__source:{fileName:J,lineNumber:257,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:258,columnNumber:21}},e.createElement(yt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:J,lineNumber:259,columnNumber:23}}),"Ordered: ",new Date(o.orderDate).toLocaleDateString()),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:262,columnNumber:21}},e.createElement(st,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:J,lineNumber:263,columnNumber:23}}),"Payment:"," ",e.createElement("span",{className:`ml-1 px-2 py-0.5 rounded text-xs ${_(o.paymentStatus)}`,__self:this,__source:{fileName:J,lineNumber:265,columnNumber:23}},o.paymentStatus)),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:271,columnNumber:21}},e.createElement(Te,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:J,lineNumber:272,columnNumber:23}}),"Method: ",o.paymentMethod)),o.status==="SHIPPED"||o.status==="DELIVERED"?e.createElement("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",__self:this,__source:{fileName:J,lineNumber:279,columnNumber:21}},e.createElement("p",{className:"text-sm text-green-800",__self:this,__source:{fileName:J,lineNumber:280,columnNumber:23}},o.status==="DELIVERED"?"Order delivered successfully!":"Your order is on the way!")):null)))),m&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:J,lineNumber:295,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",__self:this,__source:{fileName:J,lineNumber:296,columnNumber:13}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:J,lineNumber:297,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:J,lineNumber:298,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:J,lineNumber:299,columnNumber:19}},"Order Details #",m.id.slice(-8)),e.createElement("button",{onClick:()=>n(null),className:"text-gray-500 hover:text-gray-700",__self:this,__source:{fileName:J,lineNumber:302,columnNumber:19}},e.createElement(Je,{className:"w-6 h-6",__self:this,__source:{fileName:J,lineNumber:306,columnNumber:21}})))),e.createElement("div",{className:"p-6 space-y-6",__self:this,__source:{fileName:J,lineNumber:311,columnNumber:15}},e.createElement("div",{__self:this,__source:{fileName:J,lineNumber:313,columnNumber:17}},e.createElement("h4",{className:"font-medium text-gray-900 mb-2",__self:this,__source:{fileName:J,lineNumber:314,columnNumber:19}},"Order Status"),e.createElement("div",{className:"flex items-center space-x-4",__self:this,__source:{fileName:J,lineNumber:317,columnNumber:19}},e.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${b(m.status)}`,__self:this,__source:{fileName:J,lineNumber:318,columnNumber:21}},u(m.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:J,lineNumber:322,columnNumber:23}},m.status)),e.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${_(m.paymentStatus)}`,__self:this,__source:{fileName:J,lineNumber:324,columnNumber:21}},m.paymentStatus))),e.createElement("div",{__self:this,__source:{fileName:J,lineNumber:333,columnNumber:17}},e.createElement("h4",{className:"font-medium text-gray-900 mb-2",__self:this,__source:{fileName:J,lineNumber:334,columnNumber:19}},"Items Ordered"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:J,lineNumber:337,columnNumber:19}},(Array.isArray(m?.items)?m.items:[]).map(o=>e.createElement("div",{key:o.id,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",__self:this,__source:{fileName:J,lineNumber:339,columnNumber:23}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:343,columnNumber:25}},e.createElement("img",{src:o.product.images[0]||"/placeholder.jpg",alt:o.product.name,className:"w-12 h-12 rounded-lg object-cover",__self:this,__source:{fileName:J,lineNumber:344,columnNumber:27}}),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:J,lineNumber:349,columnNumber:27}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:J,lineNumber:350,columnNumber:29}},o.product.name),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:J,lineNumber:353,columnNumber:29}},o.quantity," ",o.product.unit,"  KES"," ",o.pricePerUnit))),e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:J,lineNumber:359,columnNumber:25}},"KES ",o.totalPrice.toLocaleString()))))),e.createElement("div",{__self:this,__source:{fileName:J,lineNumber:368,columnNumber:17}},e.createElement("h4",{className:"font-medium text-gray-900 mb-2",__self:this,__source:{fileName:J,lineNumber:369,columnNumber:19}},"Delivery Information"),e.createElement("div",{className:"space-y-2 text-sm text-gray-600",__self:this,__source:{fileName:J,lineNumber:372,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:373,columnNumber:21}},e.createElement(it,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:J,lineNumber:374,columnNumber:23}}),m.deliveryAddress),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:377,columnNumber:21}},e.createElement(Et,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:J,lineNumber:378,columnNumber:23}}),m.deliveryPhone),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:J,lineNumber:381,columnNumber:21}},e.createElement(yt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:J,lineNumber:382,columnNumber:23}}),"Expected:"," ",new Date(m.estimatedDelivery).toLocaleDateString()))),e.createElement("div",{className:"border-t pt-4",__self:this,__source:{fileName:J,lineNumber:392,columnNumber:17}},e.createElement("div",{className:"flex justify-between items-center",__self:this,__source:{fileName:J,lineNumber:393,columnNumber:19}},e.createElement("span",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:J,lineNumber:394,columnNumber:21}},"Total Amount"),e.createElement("span",{className:"text-lg font-bold text-gray-900",__self:this,__source:{fileName:J,lineNumber:397,columnNumber:21}},"KES ",m.totalAmount.toLocaleString())),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:J,lineNumber:401,columnNumber:19}},"Payment via ",m.paymentMethod)))))))}var te="/app/code/frontend/src/pages/cart/CartPage.tsx";function Tu(){const{cart:t,updateQuantity:r,removeFromCart:l,clearCart:s,refreshCart:a}=Qt(),{user:m,isAuthenticated:n}=Ae();_t();const[i,b]=P.useState(null),[u,_]=P.useState(""),[o,f]=P.useState(null);P.useEffect(()=>{a()},[a]);const h=async(c,x)=>{if(!(x<0)){b(c);try{x===0?l(c):r(c,x)}catch{}finally{b(null)}}},w=async c=>{if(window.confirm("Are you sure you want to remove this item from your cart?"))try{l(c)}catch{}},g=async()=>{if(window.confirm("Are you sure you want to clear your entire cart?"))try{await s()}catch{}},p=()=>{u.toLowerCase()==="first10"?(f({code:"FIRST10",discount:10,type:"percentage"}),L.success("Coupon applied successfully!"),_("")):u.toLowerCase()==="save100"?(f({code:"SAVE100",discount:100,type:"fixed"}),L.success("Coupon applied successfully!"),_("")):L.error("Invalid coupon code")},S=()=>{f(null),L.success("Coupon removed")},E=c=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(c),M=c=>o?o.type==="percentage"?c*o.discount/100:Math.min(o.discount,c):0,I=c=>c>=1e3?0:150;if(!t||t.items.length===0)return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:te,lineNumber:171,columnNumber:7}},e.createElement("div",{className:"text-center py-16",__self:this,__source:{fileName:te,lineNumber:172,columnNumber:9}},e.createElement(Tt,{className:"w-24 h-24 text-gray-300 mx-auto mb-6",__self:this,__source:{fileName:te,lineNumber:173,columnNumber:11}}),e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:te,lineNumber:174,columnNumber:11}},"Your cart is empty"),e.createElement("p",{className:"text-gray-600 mb-8",__self:this,__source:{fileName:te,lineNumber:177,columnNumber:11}},"Looks like you haven't added any items to your cart yet."),e.createElement(xe,{to:"/marketplace",className:"bg-primary-600 text-white px-8 py-3 rounded-lg hover:bg-primary-700 transition-colors font-medium inline-flex items-center",__self:this,__source:{fileName:te,lineNumber:180,columnNumber:11}},e.createElement(Tt,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:te,lineNumber:184,columnNumber:13}}),"Start Shopping")));const B=t.totalAmount,q=M(B),le=B-q,F=I(le),C=le+F;return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:te,lineNumber:199,columnNumber:5}},e.createElement("div",{className:"flex items-center justify-between mb-8",__self:this,__source:{fileName:te,lineNumber:201,columnNumber:7}},e.createElement("div",{__self:this,__source:{fileName:te,lineNumber:202,columnNumber:9}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:te,lineNumber:203,columnNumber:11}},"Shopping Cart"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:te,lineNumber:204,columnNumber:11}},t.totalItems," ",t.totalItems===1?"item":"items"," in your cart")),t.items.length>0&&e.createElement("button",{onClick:g,className:"text-red-600 hover:text-red-700 text-sm font-medium",__self:this,__source:{fileName:te,lineNumber:211,columnNumber:11}},"Clear Cart")),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",__self:this,__source:{fileName:te,lineNumber:220,columnNumber:7}},e.createElement("div",{className:"lg:col-span-2",__self:this,__source:{fileName:te,lineNumber:222,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border",__self:this,__source:{fileName:te,lineNumber:223,columnNumber:11}},e.createElement("div",{className:"p-6",__self:this,__source:{fileName:te,lineNumber:224,columnNumber:13}},e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:te,lineNumber:225,columnNumber:15}},t.items.map(c=>e.createElement("div",{key:c.id,className:"flex items-start space-x-4 pb-6 border-b border-gray-200 last:border-b-0 last:pb-0",__self:this,__source:{fileName:te,lineNumber:227,columnNumber:19}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:te,lineNumber:232,columnNumber:21}},e.createElement("div",{className:"w-20 h-20 bg-gray-200 rounded-lg overflow-hidden",__self:this,__source:{fileName:te,lineNumber:233,columnNumber:23}},c.images&&c.images.length>0?e.createElement("img",{src:c.images[0],alt:c.name,className:"w-full h-full object-cover",onError:x=>{x.currentTarget.src="/api/placeholder/80/80?text="+encodeURIComponent(c.name)},__self:this,__source:{fileName:te,lineNumber:235,columnNumber:27}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",__self:this,__source:{fileName:te,lineNumber:246,columnNumber:27}},""))),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:te,lineNumber:254,columnNumber:21}},e.createElement("div",{className:"flex items-start justify-between",__self:this,__source:{fileName:te,lineNumber:255,columnNumber:23}},e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:te,lineNumber:256,columnNumber:25}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-1",__self:this,__source:{fileName:te,lineNumber:257,columnNumber:27}},e.createElement(xe,{to:`/marketplace/product/${c.productId}`,className:"hover:text-primary-600 transition-colors",__self:this,__source:{fileName:te,lineNumber:258,columnNumber:29}},c.name)),e.createElement("div",{className:"flex items-center text-sm text-gray-600 mb-2",__self:this,__source:{fileName:te,lineNumber:266,columnNumber:27}},e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:267,columnNumber:29}},"Fresh Produce")),e.createElement("div",{className:"flex items-center space-x-4 mb-3",__self:this,__source:{fileName:te,lineNumber:270,columnNumber:27}},e.createElement("span",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:te,lineNumber:271,columnNumber:29}},E(c.pricePerUnit)," / ",c.unit))),e.createElement("div",{className:"flex flex-col items-end space-y-2 ml-4",__self:this,__source:{fileName:te,lineNumber:278,columnNumber:25}},e.createElement("button",{onClick:()=>w(c.id),className:"text-gray-400 hover:text-red-500 transition-colors",title:"Remove item",__self:this,__source:{fileName:te,lineNumber:279,columnNumber:27}},e.createElement(wl,{className:"w-5 h-5",__self:this,__source:{fileName:te,lineNumber:284,columnNumber:29}})),e.createElement("button",{className:"text-gray-400 hover:text-red-500 transition-colors",__self:this,__source:{fileName:te,lineNumber:287,columnNumber:27}},e.createElement(El,{className:"w-5 h-5",__self:this,__source:{fileName:te,lineNumber:288,columnNumber:29}})))),e.createElement("div",{className:"flex items-center justify-between mt-4",__self:this,__source:{fileName:te,lineNumber:294,columnNumber:23}},e.createElement("div",{className:"flex items-center border border-gray-300 rounded-lg",__self:this,__source:{fileName:te,lineNumber:295,columnNumber:25}},e.createElement("button",{onClick:()=>h(c.id,c.quantity-1),disabled:i===c.id||c.quantity<=1,className:"p-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:te,lineNumber:296,columnNumber:27}},e.createElement(Ya,{className:"w-4 h-4",__self:this,__source:{fileName:te,lineNumber:305,columnNumber:29}})),e.createElement("input",{type:"number",min:"1",max:999,value:c.quantity,onChange:x=>{const Q=parseInt(x.target.value)||1;Q!==c.quantity&&h(c.id,Q)},className:"w-16 px-2 py-2 text-center border-0 focus:ring-0",disabled:i===c.id,__self:this,__source:{fileName:te,lineNumber:308,columnNumber:27}}),e.createElement("button",{onClick:()=>h(c.id,c.quantity+1),disabled:i===c.id,className:"p-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:te,lineNumber:323,columnNumber:27}},e.createElement($t,{className:"w-4 h-4",__self:this,__source:{fileName:te,lineNumber:330,columnNumber:29}}))),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:te,lineNumber:334,columnNumber:25}},e.createElement("div",{className:"text-lg font-bold text-gray-900",__self:this,__source:{fileName:te,lineNumber:335,columnNumber:27}},E((c.pricePerUnit||0)*(c.quantity||0))),c.quantity>1&&e.createElement("div",{className:"text-sm text-gray-600",__self:this,__source:{fileName:te,lineNumber:341,columnNumber:29}},c.quantity," "," ",E(c.pricePerUnit||0)))),i===c.id&&e.createElement("div",{className:"mt-2 text-sm text-primary-600",__self:this,__source:{fileName:te,lineNumber:350,columnNumber:25}},"Updating..."))))))),e.createElement("div",{className:"mt-6",__self:this,__source:{fileName:te,lineNumber:362,columnNumber:11}},e.createElement(xe,{to:"/marketplace",className:"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center",__self:this,__source:{fileName:te,lineNumber:363,columnNumber:13}}," Continue Shopping"))),e.createElement("div",{__self:this,__source:{fileName:te,lineNumber:373,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6 sticky top-6",__self:this,__source:{fileName:te,lineNumber:374,columnNumber:11}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:te,lineNumber:375,columnNumber:13}},"Order Summary"),e.createElement("div",{className:"space-y-3 mb-6",__self:this,__source:{fileName:te,lineNumber:379,columnNumber:13}},e.createElement("div",{className:"flex justify-between text-gray-600",__self:this,__source:{fileName:te,lineNumber:380,columnNumber:15}},e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:381,columnNumber:17}},"Subtotal (",t.totalItems," items)"),e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:382,columnNumber:17}},E(B))),o&&e.createElement("div",{className:"flex justify-between text-green-600",__self:this,__source:{fileName:te,lineNumber:386,columnNumber:17}},e.createElement("span",{className:"flex items-center",__self:this,__source:{fileName:te,lineNumber:387,columnNumber:19}},e.createElement(lr,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:te,lineNumber:388,columnNumber:21}}),o.code,e.createElement("button",{onClick:S,className:"ml-2 text-red-500 hover:text-red-700",__self:this,__source:{fileName:te,lineNumber:390,columnNumber:21}},"")),e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:397,columnNumber:19}},"-",E(q))),e.createElement("div",{className:"flex justify-between text-gray-600",__self:this,__source:{fileName:te,lineNumber:401,columnNumber:15}},e.createElement("span",{className:"flex items-center",__self:this,__source:{fileName:te,lineNumber:402,columnNumber:17}},"Delivery Fee",F===0&&e.createElement("span",{className:"ml-2 text-green-600 text-sm",__self:this,__source:{fileName:te,lineNumber:405,columnNumber:21}},"(Free)")),e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:408,columnNumber:17}},E(F))),e.createElement("div",{className:"border-t border-gray-200 pt-3",__self:this,__source:{fileName:te,lineNumber:411,columnNumber:15}},e.createElement("div",{className:"flex justify-between text-lg font-semibold text-gray-900",__self:this,__source:{fileName:te,lineNumber:412,columnNumber:17}},e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:413,columnNumber:19}},"Total"),e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:414,columnNumber:19}},E(C))))),e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:te,lineNumber:420,columnNumber:13}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:te,lineNumber:421,columnNumber:15}},"Coupon Code"),e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:te,lineNumber:424,columnNumber:15}},e.createElement("input",{type:"text",placeholder:"Enter coupon code",value:u,onChange:c=>_(c.target.value),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:te,lineNumber:425,columnNumber:17}}),e.createElement("button",{onClick:p,disabled:!u.trim(),className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",__self:this,__source:{fileName:te,lineNumber:432,columnNumber:17}},"Apply")),e.createElement("p",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:te,lineNumber:440,columnNumber:15}},"Try: FIRST10 (10% off) or SAVE100 (KES 100 off)")),e.createElement("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",__self:this,__source:{fileName:te,lineNumber:446,columnNumber:13}},e.createElement("div",{className:"flex items-center text-sm text-gray-600 mb-2",__self:this,__source:{fileName:te,lineNumber:447,columnNumber:15}},e.createElement(Ie,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:te,lineNumber:448,columnNumber:17}}),e.createElement("span",{__self:this,__source:{fileName:te,lineNumber:449,columnNumber:17}},"Estimated delivery: 1-2 business days")),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:te,lineNumber:451,columnNumber:15}},F===0?" You qualify for free delivery!":`Spend ${E(1e3-le)} more for free delivery`)),e.createElement(xe,{to:"/checkout",className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg hover:bg-primary-700 transition-colors font-medium inline-flex items-center justify-center",__self:this,__source:{fileName:te,lineNumber:459,columnNumber:13}},"Proceed to Checkout",e.createElement(Ot,{className:"w-5 h-5 ml-2",__self:this,__source:{fileName:te,lineNumber:464,columnNumber:15}})),e.createElement("div",{className:"mt-4 text-center",__self:this,__source:{fileName:te,lineNumber:468,columnNumber:13}},e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:te,lineNumber:469,columnNumber:15}}," Secure checkout powered by M-Pesa"))))))}const Tr=t=>{const r=t.replace(/[\s\-\(\)]/g,"");return r.startsWith("+254")?r.substring(1):r.startsWith("254")?r:r.startsWith("0")?"254"+r.substring(1):r.length===9&&(r.startsWith("7")||r.startsWith("1"))?"254"+r:r},yl=t=>{const r=Tr(t);return/^254[71]\d{8}$/.test(r)},Ou=async(t,r=30,l=2e3)=>{for(let s=0;s<r;s++)try{const m=await(await fetch(`/api/payments/status/${t}`)).json();if(m.status==="COMPLETED")return{success:!0,status:"COMPLETED",data:m};if(m.status==="FAILED"||m.status==="CANCELLED")return{success:!1,status:m.status,data:m};await new Promise(n=>setTimeout(n,l))}catch(a){console.error("Error polling payment status:",a)}return{success:!1,status:"TIMEOUT"}};var T="/app/code/frontend/src/pages/checkout/CheckoutPage.tsx";const Iu=["Nairobi","Mombasa","Kiambu","Nakuru","Machakos","Kajiado","Murang'a","Nyeri","Meru","Embu","Tharaka-Nithi","Kirinyaga","Nyandarua","Laikipia","Samburu","Trans-Nzoia","Uasin-Gishu","Elgeyo-Marakwet","Nandi","Baringo","Kericho","Bomet","Kakamega","Vihiga","Bungoma","Busia","Siaya","Kisumu","Homa Bay","Migori","Kisii","Nyamira","Narok","Turkana","West Pokot","Isiolo","Marsabit","Mandera","Wajir","Garissa","Tana River","Lamu","Taita-Taveta","Kwale","Kilifi"];function Lu(){const t=_t(),{cart:r,clearCart:l}=Qt(),{user:s,isAuthenticated:a,loginWithData:m}=Ae(),[n,i]=P.useState(null),[b,u]=P.useState(!0),[_,o]=P.useState(!1),[f,h]=P.useState(1),[w,g]=P.useState(null),{register:p,handleSubmit:S,watch:E,setValue:M,formState:{errors:I}}=Sa({defaultValues:{firstName:s?.firstName||"",lastName:s?.lastName||"",phone:s?.phone||"",email:s?.email||"",paymentMethod:"MPESA",mpesaPhone:s?.phone||"",createAccount:!a,password:""}}),B=E("paymentMethod");E("county");const q=E("createAccount");P.useEffect(()=>{le()},[]);const le=async()=>{try{u(!0);const c=r.totalAmount>2e3?0:300,x={items:r.items,totalItems:r.totalItems,totalAmount:r.totalAmount,isReadyForCheckout:r.items.length>0,deliveryFee:c,subtotal:r.totalAmount,total:r.totalAmount+c,grandTotal:r.totalAmount+c,unavailableItems:[]};if(i(x),r.totalItems===0){L.error("Your cart is empty"),t("/marketplace");return}}catch(c){console.error("Failed to load cart summary:",c),L.error("Failed to load cart summary"),t("/cart")}finally{u(!1)}},F=async c=>{if(n){o(!0);try{const x={items:n.items.map(re=>({productId:re.productId,quantity:re.quantity,price:re.pricePerUnit})),customerInfo:{firstName:c.firstName,lastName:c.lastName,phone:c.phone,email:c.email,address:`${c.street}, ${c.ward}, ${c.subCounty}, ${c.county}`,county:c.county,buildingName:c.buildingName,deliveryInstructions:c.deliveryInstructions},paymentMethod:c.paymentMethod,mpesaPhone:c.paymentMethod==="MPESA"?c.mpesaPhone:void 0,deliveryFee:n.deliveryFee,totalAmount:n.grandTotal},Q=await me.post("/api/orders",x);if(g(Q.data),c.paymentMethod==="MPESA"&&c.mpesaPhone)try{const re=Tr(c.mpesaPhone);if(!yl(re)){L.error("Please enter a valid Kenyan phone number");return}L("Initiating M-Pesa payment...",{icon:""});const Ne=await me.post("/api/payments/stk-push",{phone:re,amount:n.grandTotal,orderId:Q.data.orderId,accountReference:`Order-${Q.data.orderId}`,transactionDesc:`Payment for order ${Q.data.orderId}`});if(Ne.data.success){L.success("M-Pesa payment request sent! Please check your phone.");try{L("Waiting for payment confirmation...",{icon:""});const he=await Ou(Ne.data.transactionId);he.success?L.success("Payment completed successfully!"):L.error(`Payment ${he.status.toLowerCase()}. Please try again.`)}catch(he){console.error("Payment polling error:",he),L("Payment initiated. Status will be updated shortly.",{icon:""})}}else L.error("Failed to initiate M-Pesa payment")}catch(re){console.error("M-Pesa STK push error:",re),L.error("Failed to process M-Pesa payment")}if(!a&&c.createAccount&&c.password)try{const re={firstName:c.firstName,lastName:c.lastName,phone:c.phone,email:c.email,password:c.password,county:c.county,role:"CUSTOMER"},Ne=await me.post("/api/auth/register",re);if(Ne.data.success){const{user:he,token:Ee}=Ne.data;m(he,Ee),L.success("Account created and logged in successfully!")}}catch(re){console.error("Failed to create account:",re),L.error("Order placed successfully, but failed to create account. You can register later.")}await l(),h(4),L.success("Order placed successfully!")}catch(x){console.error("Failed to create order:",x);const Q=x.response?.data?.error||"Failed to place order";L.error(Q)}finally{o(!1)}}},C=c=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(c);return b?e.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:T,lineNumber:325,columnNumber:7}},e.createElement("div",{className:"animate-pulse",__self:this,__source:{fileName:T,lineNumber:326,columnNumber:9}},e.createElement("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8",__self:this,__source:{fileName:T,lineNumber:327,columnNumber:11}}),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",__self:this,__source:{fileName:T,lineNumber:328,columnNumber:11}},e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:T,lineNumber:329,columnNumber:13}},e.createElement("div",{className:"h-32 bg-gray-200 rounded-lg",__self:this,__source:{fileName:T,lineNumber:330,columnNumber:15}}),e.createElement("div",{className:"h-48 bg-gray-200 rounded-lg",__self:this,__source:{fileName:T,lineNumber:331,columnNumber:15}})),e.createElement("div",{className:"h-64 bg-gray-200 rounded-lg",__self:this,__source:{fileName:T,lineNumber:333,columnNumber:13}})))):!n||n.totalItems===0?e.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:T,lineNumber:342,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:T,lineNumber:343,columnNumber:9}},e.createElement(Tt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4",__self:this,__source:{fileName:T,lineNumber:344,columnNumber:11}}),e.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2",__self:this,__source:{fileName:T,lineNumber:345,columnNumber:11}},"No items to checkout"),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:T,lineNumber:348,columnNumber:11}},"Your cart is empty or items are unavailable"),e.createElement("button",{onClick:()=>t("/marketplace"),className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:T,lineNumber:351,columnNumber:11}},"Continue Shopping"))):e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:T,lineNumber:363,columnNumber:5}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:T,lineNumber:365,columnNumber:7}},e.createElement("button",{onClick:()=>t("/cart"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",__self:this,__source:{fileName:T,lineNumber:366,columnNumber:9}},e.createElement(rr,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:T,lineNumber:370,columnNumber:11}}),"Back to Cart"),e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:T,lineNumber:374,columnNumber:9}},"Checkout"),e.createElement("div",{className:"mt-6",__self:this,__source:{fileName:T,lineNumber:377,columnNumber:9}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:T,lineNumber:378,columnNumber:11}},[{step:1,title:"Information"},{step:2,title:"Review"},{step:3,title:"Payment"},{step:4,title:"Confirmation"}].map((c,x)=>e.createElement(e.Fragment,{key:c.step,__self:this,__source:{fileName:T,lineNumber:385,columnNumber:15}},e.createElement("div",{className:`flex items-center ${f>=c.step?"text-primary-600":"text-gray-400"}`,__self:this,__source:{fileName:T,lineNumber:386,columnNumber:17}},e.createElement("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${f>=c.step?"border-primary-600 bg-primary-600 text-white":"border-gray-300"}`,__self:this,__source:{fileName:T,lineNumber:391,columnNumber:19}},f>c.step?e.createElement(Er,{className:"w-4 h-4",__self:this,__source:{fileName:T,lineNumber:399,columnNumber:23}}):c.step),e.createElement("span",{className:"ml-2 text-sm font-medium",__self:this,__source:{fileName:T,lineNumber:404,columnNumber:19}},c.title)),x<3&&e.createElement("div",{className:`flex-1 h-0.5 mx-4 ${f>c.step?"bg-primary-600":"bg-gray-200"}`,__self:this,__source:{fileName:T,lineNumber:407,columnNumber:19}})))))),f===4?e.createElement("div",{className:"max-w-2xl mx-auto",__self:this,__source:{fileName:T,lineNumber:421,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-8 text-center",__self:this,__source:{fileName:T,lineNumber:422,columnNumber:11}},e.createElement("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",__self:this,__source:{fileName:T,lineNumber:423,columnNumber:13}},e.createElement(Er,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:T,lineNumber:424,columnNumber:15}})),e.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:T,lineNumber:427,columnNumber:13}},"Order Placed Successfully!"),w&&e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:T,lineNumber:432,columnNumber:15}},e.createElement("p",{className:"text-gray-600 mb-2",__self:this,__source:{fileName:T,lineNumber:433,columnNumber:17}},"Order Number:"),e.createElement("p",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:T,lineNumber:434,columnNumber:17}},w.order?.orderNumber||w.order?.id),e.createElement("p",{className:"text-gray-600 mb-2",__self:this,__source:{fileName:T,lineNumber:438,columnNumber:17}},"Total Amount:"),e.createElement("p",{className:"text-2xl font-bold text-primary-600 mb-6",__self:this,__source:{fileName:T,lineNumber:439,columnNumber:17}},C(n.grandTotal)),e.createElement("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",__self:this,__source:{fileName:T,lineNumber:443,columnNumber:17}},e.createElement("div",{className:"flex items-center text-blue-700 mb-2",__self:this,__source:{fileName:T,lineNumber:444,columnNumber:19}},e.createElement(Ie,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:T,lineNumber:445,columnNumber:21}}),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:T,lineNumber:446,columnNumber:21}},"Estimated Delivery")),e.createElement("p",{className:"text-blue-600",__self:this,__source:{fileName:T,lineNumber:448,columnNumber:19}},"1-2 business days"))),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:T,lineNumber:453,columnNumber:13}},e.createElement("button",{onClick:()=>t("/customer/dashboard"),className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg hover:bg-primary-700 transition-colors font-medium",__self:this,__source:{fileName:T,lineNumber:454,columnNumber:15}},"View Order Status"),e.createElement("button",{onClick:()=>t("/marketplace"),className:"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-200 transition-colors font-medium",__self:this,__source:{fileName:T,lineNumber:461,columnNumber:15}},"Continue Shopping")))):e.createElement("form",{onSubmit:S(F),__self:this,__source:{fileName:T,lineNumber:471,columnNumber:9}},e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",__self:this,__source:{fileName:T,lineNumber:472,columnNumber:11}},e.createElement("div",{className:"lg:col-span-2 space-y-8",__self:this,__source:{fileName:T,lineNumber:474,columnNumber:13}},f>=1&&e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6",__self:this,__source:{fileName:T,lineNumber:477,columnNumber:17}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:T,lineNumber:478,columnNumber:19}},e.createElement(nt,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:T,lineNumber:479,columnNumber:21}}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:T,lineNumber:480,columnNumber:21}},"Customer Information")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",__self:this,__source:{fileName:T,lineNumber:485,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:T,lineNumber:486,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:T,lineNumber:487,columnNumber:23}},"First Name *"),e.createElement("input",{...p("firstName",{required:"First name is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:f>1,__self:this,__source:{fileName:T,lineNumber:490,columnNumber:23}}),I.firstName&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:T,lineNumber:498,columnNumber:25}},I.firstName.message)),e.createElement("div",{__self:this,__source:{fileName:T,lineNumber:504,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:T,lineNumber:505,columnNumber:23}},"Last Name *"),e.createElement("input",{...p("lastName",{required:"Last name is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:f>1,__self:this,__source:{fileName:T,lineNumber:508,columnNumber:23}}),I.lastName&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:T,lineNumber:516,columnNumber:25}},I.lastName.message)),e.createElement("div",{__self:this,__source:{fileName:T,lineNumber:522,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:T,lineNumber:523,columnNumber:23}},"Phone Number *"),e.createElement("input",{...p("phone",{required:"Phone number is required",pattern:{value:/^(\+254|0)[7-9]\d{8}$/,message:"Please enter a valid Kenyan phone number"}}),placeholder:"+254712345678",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:f>1,__self:this,__source:{fileName:T,lineNumber:526,columnNumber:23}}),I.phone&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:T,lineNumber:539,columnNumber:25}},I.phone.message)),e.createElement("div",{__self:this,__source:{fileName:T,lineNumber:545,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:T,lineNumber:546,columnNumber:23}},"Email Address"),e.createElement("input",{...p("email",{pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"}}),type:"email",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:f>1,__self:this,__source:{fileName:T,lineNumber:549,columnNumber:23}}),I.email&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:T,lineNumber:561,columnNumber:25}},I.email.message)))),f>=1&&!a&&e.createElement("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-6",__self:this,__source:{fileName:T,lineNumber:572,columnNumber:17}},e.createElement("div",{className:"flex items-center mb-4",__self:this,__source:{fileName:T,lineNumber:573,columnNumber:19}},e.createElement(Za,{className:"w-5 h-5 text-blue-600 mr-2",__self:this,__source:{fileName:T,lineNumber:574,columnNumber:21}}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:T,lineNumber:575,columnNumber:21}},"Create Account (Optional)")),e.createElement("div",{className:"mb-4",__self:this,__source:{fileName:T,lineNumber:580,columnNumber:19}},e.createElement("label",{className:"flex items-center",__self:this,__source:{fileName:T,lineNumber:581,columnNumber:21}},e.createElement("input",{...p("createAccount"),type:"checkbox",className:"mr-2",__self:this,__source:{fileName:T,lineNumber:582,columnNumber:23}}),e.createElement("span",{className:"text-sm text-gray-700",__self:this,__source:{fileName:T,lineNumber:587,columnNumber:23}},"Create an account to track your orders and save delivery addresses"))),q&&e.createElement("div",{__self:this,__source:{fileName:T,lineNumber:595,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:T,lineNumber:596,columnNumber:23}},"Password *"),e.createElement("input",{...p("password",{required:q?"Password is required":!1,minLength:{value:6,message:"Password must be at least 6 characters"}}),type:"password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter password for your new account",disabled:f>1,__self:this,__source:{fileName:T,lineNumber:599,columnNumber:23}}),I.password&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:T,lineNumber:615,columnNumber:25}},I.password.message))),f>=1&&e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6",__self:this,__source:{fileName:T,lineNumber:626,columnNumber:17}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:T,lineNumber:627,columnNumber:19}},e.createElement(it,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:T,lineNumber:628,columnNumber:21}}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:T,lineNumber:629,columnNumber:21}},"Delivery Address")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",__self:this,__source:{fileName:T,lineNumber:634,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:T,lineNumber:635,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:T,lineNumber:636,columnNumber:23}},"County *"),e.createElement("select",{...p("county",{required:"County is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:f>1,__self:this,__source:{fileName:T,lineNumber:639,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:T,lineNumber:646,columnNumber:25}},"Select County"),Iu.map(c=>e.createElement("option",{key:c,value:c,__self:this,__source:{fileName:T,lineNumber:648,columnNumber:27}},c))),I.county&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:T,lineNumber:654,columnNumber:25}},I.county.message)),e.createElement("div",{__self:this,__source:{fileName:T,lineNumber:660,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:T,lineNumber:661,columnNumber:23}},"Sub-County *"),e.createElement("input",{...p("subCounty",{required:"Sub-county is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:f>1,__self:this,__source:{fileName:T,lineNumber:664,columnNumber:23}}),I.subCounty&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:T,lineNumber:672,columnNumber:25}},I.subCounty.message)),e.createElement("div",{__self:this,__source:{fileName:T,lineNumber:678,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:T,lineNumber:679,columnNumber:23}},"Ward *"),e.createElement("input",{...p("ward",{required:"Ward is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:f>1,__self:this,__source:{fileName:T,lineNumber:682,columnNumber:23}}),I.ward&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:T,lineNumber:688,columnNumber:25}},I.ward.message)),e.createElement("div",{__self:this,__source:{fileName:T,lineNumber:694,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:T,lineNumber:695,columnNumber:23}},"Street/Road *"),e.createElement("input",{...p("street",{required:"Street is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:f>1,__self:this,__source:{fileName:T,lineNumber:698,columnNumber:23}}),I.street&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:T,lineNumber:706,columnNumber:25}},I.street.message)),e.createElement("div",{className:"md:col-span-2",__self:this,__source:{fileName:T,lineNumber:712,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:T,lineNumber:713,columnNumber:23}},"Building/House Name"),e.createElement("input",{...p("buildingName"),placeholder:"Optional: Building name, house number, apartment, etc.",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:f>1,__self:this,__source:{fileName:T,lineNumber:716,columnNumber:23}})),e.createElement("div",{className:"md:col-span-2",__self:this,__source:{fileName:T,lineNumber:724,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:T,lineNumber:725,columnNumber:23}},"Delivery Instructions"),e.createElement("textarea",{...p("deliveryInstructions"),rows:3,placeholder:"Optional: Special delivery instructions, landmarks, etc.",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:f>1,__self:this,__source:{fileName:T,lineNumber:728,columnNumber:23}})))),f>=2&&e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6",__self:this,__source:{fileName:T,lineNumber:742,columnNumber:17}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:T,lineNumber:743,columnNumber:19}},e.createElement(st,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:T,lineNumber:744,columnNumber:21}}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:T,lineNumber:745,columnNumber:21}},"Payment Method")),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:T,lineNumber:750,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:T,lineNumber:751,columnNumber:21}},e.createElement("input",{...p("paymentMethod"),type:"radio",value:"MPESA",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300",disabled:f>2,__self:this,__source:{fileName:T,lineNumber:752,columnNumber:23}}),e.createElement("label",{className:"ml-3 block text-sm font-medium text-gray-700",__self:this,__source:{fileName:T,lineNumber:759,columnNumber:23}},"M-Pesa STK Push")),B==="MPESA"&&e.createElement("div",{className:"ml-7",__self:this,__source:{fileName:T,lineNumber:765,columnNumber:23}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:T,lineNumber:766,columnNumber:25}},"M-Pesa Phone Number *"),e.createElement("input",{...p("mpesaPhone",{required:B==="MPESA"?"M-Pesa phone number is required":!1,pattern:{value:/^(\+254|0)[7-9]\d{8}$/,message:"Please enter a valid Kenyan phone number"}}),placeholder:"+254712345678",className:"w-full max-w-md border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:f>2,__self:this,__source:{fileName:T,lineNumber:769,columnNumber:25}}),I.mpesaPhone&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:T,lineNumber:786,columnNumber:27}},I.mpesaPhone.message)),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:T,lineNumber:793,columnNumber:21}},e.createElement("input",{...p("paymentMethod"),type:"radio",value:"COD",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300",disabled:f>2,__self:this,__source:{fileName:T,lineNumber:794,columnNumber:23}}),e.createElement("label",{className:"ml-3 block text-sm font-medium text-gray-700",__self:this,__source:{fileName:T,lineNumber:801,columnNumber:23}},"Cash on Delivery")))),e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:T,lineNumber:810,columnNumber:15}},f>1&&f<4&&e.createElement("button",{type:"button",onClick:()=>h(f-1),className:"bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium",__self:this,__source:{fileName:T,lineNumber:812,columnNumber:19}},"Previous"),f<3&&e.createElement("button",{type:"button",onClick:()=>h(f+1),className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors font-medium ml-auto",__self:this,__source:{fileName:T,lineNumber:822,columnNumber:19}},"Next"),f===3&&e.createElement("button",{type:"submit",disabled:_,className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium ml-auto",__self:this,__source:{fileName:T,lineNumber:832,columnNumber:19}},_?"Placing Order...":"Place Order"))),e.createElement("div",{__self:this,__source:{fileName:T,lineNumber:844,columnNumber:13}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6 sticky top-6",__self:this,__source:{fileName:T,lineNumber:845,columnNumber:15}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:T,lineNumber:846,columnNumber:17}},"Order Summary"),e.createElement("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto",__self:this,__source:{fileName:T,lineNumber:851,columnNumber:17}},n.items.map(c=>e.createElement("div",{key:c.id,className:"flex items-center space-x-3",__self:this,__source:{fileName:T,lineNumber:853,columnNumber:21}},e.createElement("div",{className:"w-12 h-12 bg-gray-200 rounded overflow-hidden flex-shrink-0",__self:this,__source:{fileName:T,lineNumber:854,columnNumber:23}},c.images&&c.images.length>0?e.createElement("img",{src:c.images[0],alt:c.name,className:"w-full h-full object-cover",onError:x=>{x.currentTarget.src="/api/placeholder/48/48?text="+encodeURIComponent(c.name)},__self:this,__source:{fileName:T,lineNumber:856,columnNumber:27}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",__self:this,__source:{fileName:T,lineNumber:867,columnNumber:27}},"")),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:T,lineNumber:873,columnNumber:23}},e.createElement("p",{className:"text-sm font-medium text-gray-900 truncate",__self:this,__source:{fileName:T,lineNumber:874,columnNumber:25}},c.name),e.createElement("p",{className:"text-xs text-gray-600",__self:this,__source:{fileName:T,lineNumber:877,columnNumber:25}},c.quantity,"  ",C(c.pricePerUnit))),e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:T,lineNumber:882,columnNumber:23}},C((c.pricePerUnit||0)*(c.quantity||0)))))),e.createElement("div",{className:"space-y-2 mb-6",__self:this,__source:{fileName:T,lineNumber:892,columnNumber:17}},e.createElement("div",{className:"flex justify-between text-gray-600",__self:this,__source:{fileName:T,lineNumber:893,columnNumber:19}},e.createElement("span",{__self:this,__source:{fileName:T,lineNumber:894,columnNumber:21}},"Subtotal (",n.totalItems," items)"),e.createElement("span",{__self:this,__source:{fileName:T,lineNumber:895,columnNumber:21}},C(n.totalAmount))),e.createElement("div",{className:"flex justify-between text-gray-600",__self:this,__source:{fileName:T,lineNumber:898,columnNumber:19}},e.createElement("span",{className:"flex items-center",__self:this,__source:{fileName:T,lineNumber:899,columnNumber:21}},"Delivery Fee",n.deliveryFee===0&&e.createElement("span",{className:"ml-2 text-green-600 text-sm",__self:this,__source:{fileName:T,lineNumber:902,columnNumber:25}},"(Free)")),e.createElement("span",{__self:this,__source:{fileName:T,lineNumber:907,columnNumber:21}},C(n.deliveryFee))),e.createElement("div",{className:"border-t border-gray-200 pt-2",__self:this,__source:{fileName:T,lineNumber:910,columnNumber:19}},e.createElement("div",{className:"flex justify-between text-lg font-semibold text-gray-900",__self:this,__source:{fileName:T,lineNumber:911,columnNumber:21}},e.createElement("span",{__self:this,__source:{fileName:T,lineNumber:912,columnNumber:23}},"Total"),e.createElement("span",{__self:this,__source:{fileName:T,lineNumber:913,columnNumber:23}},C(n.grandTotal))))),e.createElement("div",{className:"bg-gray-50 rounded-lg p-4",__self:this,__source:{fileName:T,lineNumber:919,columnNumber:17}},e.createElement("div",{className:"flex items-center text-sm text-gray-600 mb-2",__self:this,__source:{fileName:T,lineNumber:920,columnNumber:19}},e.createElement(Te,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:T,lineNumber:921,columnNumber:21}}),e.createElement("span",{__self:this,__source:{fileName:T,lineNumber:922,columnNumber:21}},"Estimated delivery: 1-2 business days")),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:T,lineNumber:924,columnNumber:19}},"Orders placed before 3 PM are processed the same day")))))))}var A="/app/code/frontend/src/pages/admin/AdminDashboard.tsx";function Mu(){const{user:t,token:r}=Ae(),l=_t(),s=p=>{l("/admin/consignments")},a=async p=>{try{await new Promise(S=>setTimeout(S,500)),L.success(`User ${p} approved successfully`),b(S=>({...S,recentUsers:S.recentUsers.map(E=>E.id===p?{...E,status:"ACTIVE"}:E),pendingApprovals:Math.max(0,S.pendingApprovals-1)}))}catch(S){console.error("Error approving user:",S),L.error("Failed to approve user")}},m=async()=>{try{console.log(" Fetching users from real database");const p=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!p.ok)throw new Error(`HTTP ${p.status}: ${p.statusText}`);const S=await p.json();console.log(" Raw API response:",S);let E=[];S&&typeof S=="object"&&(Array.isArray(S.users)?E=S.users:Array.isArray(S)?E=S:S.users&&typeof S.users=="object"&&(E=[S.users])),console.log(" Processed users data:",E);const M=Array.isArray(E)?E:[];b(I=>({...I,totalUsers:M.length,pendingApprovals:M.filter(B=>B&&(B.status==="PENDING"||B.verified===!1)).length,recentUsers:M.slice(0,5).map(B=>({id:B?.id||"unknown",name:`${B?.first_name||B?.firstName||"Unknown"} ${B?.last_name||B?.lastName||"User"}`,email:B?.email||"No email",role:B?.role||"USER",status:B?.verified?"ACTIVE":"PENDING",joinedAt:B?.created_at||B?.createdAt?new Date(B.created_at||B.createdAt).toLocaleDateString():"Unknown"}))}))}catch(p){console.error("Error fetching users:",p),L.error("Failed to fetch users data")}},n=async()=>{try{console.log(" Fetching recent activity from database");const p=await Xt.get("/admin/activity");if(console.log(" Raw activity response:",p),p&&p.data&&p.data.success&&Array.isArray(p.data.activities)){const S=p.data.activities.map(E=>({id:E?.id||Math.random(),type:E?.type||"system",message:E?.description||E?.message||"Unknown activity",time:E?.timestamp?new Date(E.timestamp).toLocaleString():"Unknown time",status:E?.status||"completed"}));b(E=>({...E,recentActivities:S})),console.log(" Recent activity loaded:",S)}else throw console.log(" Activity response not in expected format, using fallback data"),new Error("Invalid response format")}catch(p){console.error(" Error fetching recent activity:",p),b(S=>({...S,recentActivities:[{id:1,type:"user",message:"New farmer registration: John Kimani",time:"5 minutes ago",status:"pending"},{id:2,type:"consignment",message:"Consignment submitted by Jane Wanjiku",time:"15 minutes ago",status:"pending"}]}))}},[i,b]=P.useState({totalUsers:0,pendingApprovals:0,activeConsignments:0,monthlyRevenue:0,recentActivities:[],pendingConsignments:[],recentUsers:[]}),[u,_]=P.useState(!0),o=async()=>{try{console.log(" Fetching analytics stats from database");const p=await Xt.get("/admin/analytics/stats");if(console.log(" Raw analytics response:",p),p&&p.data&&p.data.success){const S=p.data.stats||{};console.log(" Analytics stats received:",S),b(E=>({...E,totalUsers:parseInt(S.totalUsers)||E.totalUsers||0,pendingApprovals:parseInt(S.pendingApprovals)||E.pendingApprovals||0,activeConsignments:parseInt(S.totalConsignments)||E.activeConsignments||0,monthlyRevenue:parseFloat(S.totalRevenue)||E.monthlyRevenue||0}))}else console.log(" Analytics response not in expected format, keeping existing stats")}catch(p){console.error(" Error fetching analytics stats:",p),console.log(" Using fallback stats due to analytics fetch failure")}};P.useEffect(()=>{(async()=>{_(!0),await Promise.all([m(),o(),n()]),b(S=>({...S,pendingConsignments:[{id:1,title:"Organic Tomatoes - 100kg",farmer:"Jane Wanjiku",value:13e3,submittedAt:"2 hours ago"},{id:2,title:"Premium Maize - 200kg",farmer:"Peter Kamau",value:12e3,submittedAt:"5 hours ago"},{id:3,title:"Fresh Spinach - 50 bunches",farmer:"Grace Muthoni",value:2500,submittedAt:"1 day ago"}]})),_(!1)})()},[]);const f=[{title:"Manage Users",description:"View and manage platform users",icon:tt,color:"bg-blue-500",link:"/admin/users",count:i.totalUsers},{title:"Review Consignments",description:"Approve pending consignments",icon:ge,color:"bg-green-500",link:"/admin/consignments",count:i.pendingApprovals},{title:"Marketplace Management",description:"Manage products and orders",icon:Ye,color:"bg-orange-500",link:"/admin/marketplace",count:null},{title:"Registration Fees",description:"Manage farmer registration fees",icon:st,color:"bg-red-500",link:"/admin/registration-fees",count:null},{title:"Farmer Categories",description:"Manage farming categories",icon:lr,color:"bg-indigo-500",link:"/admin/farmer-categories",count:null},{title:"View Analytics",description:"Platform insights and metrics",icon:xl,color:"bg-purple-500",link:"/admin/analytics",count:null},{title:"System Settings",description:"Configure platform settings",icon:Gt,color:"bg-gray-500",link:"/admin/settings",count:null}],h=p=>{switch(p){case"user":return e.createElement(tt,{className:"w-4 h-4",__self:this,__source:{fileName:A,lineNumber:324,columnNumber:16}});case"consignment":return e.createElement(ge,{className:"w-4 h-4",__self:this,__source:{fileName:A,lineNumber:326,columnNumber:16}});case"order":return e.createElement(Ye,{className:"w-4 h-4",__self:this,__source:{fileName:A,lineNumber:328,columnNumber:16}});case"driver":return e.createElement(Te,{className:"w-4 h-4",__self:this,__source:{fileName:A,lineNumber:330,columnNumber:16}});default:return e.createElement(vr,{className:"w-4 h-4",__self:this,__source:{fileName:A,lineNumber:332,columnNumber:16}})}},w=p=>{switch(p){case"pending":return"text-yellow-600 bg-yellow-100";case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},g=p=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(p);return u?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:A,lineNumber:359,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:A,lineNumber:360,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:A,lineNumber:361,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:A,lineNumber:362,columnNumber:11}},"Loading dashboard..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:A,lineNumber:369,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:A,lineNumber:370,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:A,lineNumber:372,columnNumber:9}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:373,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:A,lineNumber:374,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:A,lineNumber:375,columnNumber:15}},"Welcome back, ",t?.firstName,"!"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:A,lineNumber:378,columnNumber:15}},"Here's what's happening on your platform today.")),e.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600",__self:this,__source:{fileName:A,lineNumber:382,columnNumber:13}},e.createElement(vr,{className:"w-4 h-4",__self:this,__source:{fileName:A,lineNumber:383,columnNumber:15}}),e.createElement("span",{__self:this,__source:{fileName:A,lineNumber:384,columnNumber:15}},"Admin Dashboard")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:A,lineNumber:390,columnNumber:9}},e.createElement("button",{onClick:()=>l("/admin/users"),className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow text-left group",__self:this,__source:{fileName:A,lineNumber:391,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:395,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:A,lineNumber:396,columnNumber:15}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg group-hover:bg-blue-200 transition-colors",__self:this,__source:{fileName:A,lineNumber:397,columnNumber:17}},e.createElement(tt,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:A,lineNumber:398,columnNumber:19}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:A,lineNumber:400,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:A,lineNumber:401,columnNumber:19}},i.totalUsers),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:A,lineNumber:404,columnNumber:19}},"Total Users"))),e.createElement(Ot,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-600 transition-colors",__self:this,__source:{fileName:A,lineNumber:407,columnNumber:15}})),e.createElement("div",{className:"mt-3 pt-3 border-t border-gray-100",__self:this,__source:{fileName:A,lineNumber:409,columnNumber:13}},e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:A,lineNumber:410,columnNumber:15}},"Click to view user management"))),e.createElement("button",{onClick:()=>l("/admin/users?filter=pending"),className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow text-left group",__self:this,__source:{fileName:A,lineNumber:414,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:418,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:A,lineNumber:419,columnNumber:15}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg group-hover:bg-yellow-200 transition-colors",__self:this,__source:{fileName:A,lineNumber:420,columnNumber:17}},e.createElement(wt,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:A,lineNumber:421,columnNumber:19}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:A,lineNumber:423,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:A,lineNumber:424,columnNumber:19}},i.pendingApprovals),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:A,lineNumber:427,columnNumber:19}},"Pending Approvals"))),e.createElement(Ot,{className:"w-4 h-4 text-gray-400 group-hover:text-yellow-600 transition-colors",__self:this,__source:{fileName:A,lineNumber:430,columnNumber:15}})),e.createElement("div",{className:"mt-3 pt-3 border-t border-gray-100",__self:this,__source:{fileName:A,lineNumber:432,columnNumber:13}},e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:A,lineNumber:433,columnNumber:15}},"Click to review pending users"))),e.createElement("button",{onClick:()=>l("/admin/consignments"),className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow text-left group",__self:this,__source:{fileName:A,lineNumber:437,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:441,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:A,lineNumber:442,columnNumber:15}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg group-hover:bg-green-200 transition-colors",__self:this,__source:{fileName:A,lineNumber:443,columnNumber:17}},e.createElement(ge,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:A,lineNumber:444,columnNumber:19}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:A,lineNumber:446,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:A,lineNumber:447,columnNumber:19}},i.activeConsignments),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:A,lineNumber:450,columnNumber:19}},"Active Consignments"))),e.createElement(Ot,{className:"w-4 h-4 text-gray-400 group-hover:text-green-600 transition-colors",__self:this,__source:{fileName:A,lineNumber:453,columnNumber:15}})),e.createElement("div",{className:"mt-3 pt-3 border-t border-gray-100",__self:this,__source:{fileName:A,lineNumber:455,columnNumber:13}},e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:A,lineNumber:456,columnNumber:15}},"Click to manage consignments"))),e.createElement("button",{onClick:()=>l("/admin/analytics"),className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow text-left group",__self:this,__source:{fileName:A,lineNumber:460,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:464,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:A,lineNumber:465,columnNumber:15}},e.createElement("div",{className:"p-3 bg-purple-100 rounded-lg group-hover:bg-purple-200 transition-colors",__self:this,__source:{fileName:A,lineNumber:466,columnNumber:17}},e.createElement(Ye,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:A,lineNumber:467,columnNumber:19}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:A,lineNumber:469,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:A,lineNumber:470,columnNumber:19}},g(i.monthlyRevenue)),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:A,lineNumber:473,columnNumber:19}},"Monthly Revenue"))),e.createElement(Ot,{className:"w-4 h-4 text-gray-400 group-hover:text-purple-600 transition-colors",__self:this,__source:{fileName:A,lineNumber:476,columnNumber:15}})),e.createElement("div",{className:"mt-3 pt-3 border-t border-gray-100",__self:this,__source:{fileName:A,lineNumber:478,columnNumber:13}},e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:A,lineNumber:479,columnNumber:15}},"Click to view revenue analytics")))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",__self:this,__source:{fileName:A,lineNumber:485,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:A,lineNumber:486,columnNumber:11}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:A,lineNumber:487,columnNumber:13}},"User Breakdown"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:A,lineNumber:488,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:489,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:A,lineNumber:490,columnNumber:17}},"Total Users"),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:A,lineNumber:491,columnNumber:17}},i.totalUsers)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:493,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:A,lineNumber:494,columnNumber:17}},"Farmers"),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:A,lineNumber:495,columnNumber:17}},Math.floor(i.totalUsers*.6))),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:497,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:A,lineNumber:498,columnNumber:17}},"Customers"),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:A,lineNumber:499,columnNumber:17}},Math.floor(i.totalUsers*.35))),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:501,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:A,lineNumber:502,columnNumber:17}},"Drivers"),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:A,lineNumber:503,columnNumber:17}},Math.floor(i.totalUsers*.05))),e.createElement("div",{className:"flex items-center justify-between border-t border-gray-200 pt-3",__self:this,__source:{fileName:A,lineNumber:505,columnNumber:15}},e.createElement("span",{className:"text-sm text-red-600",__self:this,__source:{fileName:A,lineNumber:506,columnNumber:17}},"Pending Verification"),e.createElement("span",{className:"font-medium text-red-600",__self:this,__source:{fileName:A,lineNumber:507,columnNumber:17}},i.pendingApprovals))),e.createElement("button",{onClick:()=>l("/admin/users"),className:"mt-4 w-full bg-blue-50 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-100 transition-colors text-sm font-medium",__self:this,__source:{fileName:A,lineNumber:510,columnNumber:13}},"Manage Users ")),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:A,lineNumber:518,columnNumber:11}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:A,lineNumber:519,columnNumber:13}},"Consignment Status"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:A,lineNumber:520,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:521,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:A,lineNumber:522,columnNumber:17}},"Total Consignments"),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:A,lineNumber:523,columnNumber:17}},i.activeConsignments)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:525,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:A,lineNumber:526,columnNumber:17}},"Pending Review"),e.createElement("span",{className:"font-medium text-yellow-600",__self:this,__source:{fileName:A,lineNumber:527,columnNumber:17}},Math.floor(i.activeConsignments*.3))),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:529,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:A,lineNumber:530,columnNumber:17}},"Approved & Active"),e.createElement("span",{className:"font-medium text-green-600",__self:this,__source:{fileName:A,lineNumber:531,columnNumber:17}},Math.floor(i.activeConsignments*.5))),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:533,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:A,lineNumber:534,columnNumber:17}},"In Transit"),e.createElement("span",{className:"font-medium text-blue-600",__self:this,__source:{fileName:A,lineNumber:535,columnNumber:17}},Math.floor(i.activeConsignments*.15))),e.createElement("div",{className:"flex items-center justify-between border-t border-gray-200 pt-3",__self:this,__source:{fileName:A,lineNumber:537,columnNumber:15}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:A,lineNumber:538,columnNumber:17}},"Completed This Month"),e.createElement("span",{className:"font-medium text-green-600",__self:this,__source:{fileName:A,lineNumber:539,columnNumber:17}},Math.floor(i.activeConsignments*.8)))),e.createElement("button",{onClick:()=>l("/admin/consignments"),className:"mt-4 w-full bg-green-50 text-green-600 px-4 py-2 rounded-lg hover:bg-green-100 transition-colors text-sm font-medium",__self:this,__source:{fileName:A,lineNumber:542,columnNumber:13}},"Manage Consignments "))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:A,lineNumber:552,columnNumber:9}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-6",__self:this,__source:{fileName:A,lineNumber:553,columnNumber:11}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",__self:this,__source:{fileName:A,lineNumber:556,columnNumber:11}},f.map((p,S)=>e.createElement(xe,{key:S,to:p.link,className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-all duration-200 group",__self:this,__source:{fileName:A,lineNumber:558,columnNumber:15}},e.createElement("div",{className:"flex items-start justify-between mb-3",__self:this,__source:{fileName:A,lineNumber:563,columnNumber:17}},e.createElement("div",{className:`p-2 rounded-lg ${p.color}`,__self:this,__source:{fileName:A,lineNumber:564,columnNumber:19}},e.createElement(p.icon,{className:"w-5 h-5 text-white",__self:this,__source:{fileName:A,lineNumber:565,columnNumber:21}})),p.count!==null&&e.createElement("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs font-medium",__self:this,__source:{fileName:A,lineNumber:568,columnNumber:21}},p.count)),e.createElement("h3",{className:"font-medium text-gray-900 group-hover:text-primary-600 transition-colors",__self:this,__source:{fileName:A,lineNumber:573,columnNumber:17}},p.title),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:A,lineNumber:576,columnNumber:17}},p.description),e.createElement("div",{className:"flex items-center mt-3 text-primary-600 group-hover:text-primary-700",__self:this,__source:{fileName:A,lineNumber:579,columnNumber:17}},e.createElement("span",{className:"text-sm font-medium",__self:this,__source:{fileName:A,lineNumber:580,columnNumber:19}},"Manage"),e.createElement(Ot,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",__self:this,__source:{fileName:A,lineNumber:581,columnNumber:19}})))))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",__self:this,__source:{fileName:A,lineNumber:589,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:A,lineNumber:591,columnNumber:11}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:A,lineNumber:592,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:593,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:A,lineNumber:594,columnNumber:17}},"Recent Activity"),e.createElement(Ut,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:A,lineNumber:597,columnNumber:17}}))),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:A,lineNumber:600,columnNumber:13}},(Array.isArray(i.recentActivities)?i.recentActivities:[]).map(p=>e.createElement("div",{key:p.id,className:"p-6",__self:this,__source:{fileName:A,lineNumber:602,columnNumber:17}},e.createElement("div",{className:"flex items-start",__self:this,__source:{fileName:A,lineNumber:603,columnNumber:19}},e.createElement("div",{className:`p-2 rounded-lg ${w(p.status)} mr-4`,__self:this,__source:{fileName:A,lineNumber:604,columnNumber:21}},h(p.type)),e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:A,lineNumber:609,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:A,lineNumber:610,columnNumber:23}},p.message),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:A,lineNumber:613,columnNumber:23}},p.time)),p.status==="pending"&&e.createElement("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium",__self:this,__source:{fileName:A,lineNumber:618,columnNumber:23}},"Action Required"))))),e.createElement("div",{className:"p-6 border-t border-gray-200",__self:this,__source:{fileName:A,lineNumber:626,columnNumber:13}},e.createElement(xe,{to:"/admin/notifications",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",__self:this,__source:{fileName:A,lineNumber:627,columnNumber:15}},"View all activities "))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:A,lineNumber:637,columnNumber:11}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:A,lineNumber:638,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:639,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:A,lineNumber:640,columnNumber:17}},"Pending Consignments"),e.createElement(ge,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:A,lineNumber:643,columnNumber:17}}))),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:A,lineNumber:646,columnNumber:13}},(Array.isArray(i.pendingConsignments)?i.pendingConsignments:[]).map(p=>e.createElement("div",{key:p.id,className:"p-6",__self:this,__source:{fileName:A,lineNumber:648,columnNumber:17}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:649,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:A,lineNumber:650,columnNumber:21}},e.createElement("h4",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:A,lineNumber:651,columnNumber:23}},p.title),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:A,lineNumber:654,columnNumber:23}},"by ",p.farmer),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:A,lineNumber:657,columnNumber:23}},p.submittedAt)),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:A,lineNumber:661,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:A,lineNumber:662,columnNumber:23}},g(p.value)),e.createElement("button",{onClick:()=>s(p.id),className:"mt-2 bg-primary-600 text-white px-3 py-1 rounded text-xs hover:bg-primary-700",__self:this,__source:{fileName:A,lineNumber:665,columnNumber:23}},"Review")))))),e.createElement("div",{className:"p-6 border-t border-gray-200",__self:this,__source:{fileName:A,lineNumber:676,columnNumber:13}},e.createElement(xe,{to:"/admin/consignments",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",__self:this,__source:{fileName:A,lineNumber:677,columnNumber:15}},"View all consignments ")))),e.createElement("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:A,lineNumber:688,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:A,lineNumber:689,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:A,lineNumber:690,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:A,lineNumber:691,columnNumber:15}},"Recent Users"),e.createElement(nl,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:A,lineNumber:694,columnNumber:15}}))),e.createElement("div",{className:"overflow-x-auto",__self:this,__source:{fileName:A,lineNumber:697,columnNumber:11}},e.createElement("table",{className:"min-w-full divide-y divide-gray-200",__self:this,__source:{fileName:A,lineNumber:698,columnNumber:13}},e.createElement("thead",{className:"bg-gray-50",__self:this,__source:{fileName:A,lineNumber:699,columnNumber:15}},e.createElement("tr",{__self:this,__source:{fileName:A,lineNumber:700,columnNumber:17}},e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:A,lineNumber:701,columnNumber:19}},"User"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:A,lineNumber:704,columnNumber:19}},"Role"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:A,lineNumber:707,columnNumber:19}},"Status"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:A,lineNumber:710,columnNumber:19}},"Joined"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:A,lineNumber:713,columnNumber:19}},"Action"))),e.createElement("tbody",{className:"bg-white divide-y divide-gray-200",__self:this,__source:{fileName:A,lineNumber:718,columnNumber:15}},(Array.isArray(i.recentUsers)?i.recentUsers:[]).map(p=>e.createElement("tr",{key:p.id,__self:this,__source:{fileName:A,lineNumber:720,columnNumber:19}},e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:A,lineNumber:721,columnNumber:21}},e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:A,lineNumber:722,columnNumber:23}},p.name)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:A,lineNumber:726,columnNumber:21}},e.createElement("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",__self:this,__source:{fileName:A,lineNumber:727,columnNumber:23}},p.role)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:A,lineNumber:731,columnNumber:21}},e.createElement("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${p.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,__self:this,__source:{fileName:A,lineNumber:732,columnNumber:23}},p.status)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",__self:this,__source:{fileName:A,lineNumber:742,columnNumber:21}},p.joinedAt),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",__self:this,__source:{fileName:A,lineNumber:745,columnNumber:21}},p.status==="PENDING"?e.createElement("button",{onClick:()=>a(p.id),className:"text-green-600 hover:text-green-900",__self:this,__source:{fileName:A,lineNumber:747,columnNumber:25}},"Approve"):e.createElement("button",{onClick:()=>l("/admin/users"),className:"text-primary-600 hover:text-primary-900",__self:this,__source:{fileName:A,lineNumber:754,columnNumber:25}},"View"))))))),e.createElement("div",{className:"p-6 border-t border-gray-200",__self:this,__source:{fileName:A,lineNumber:767,columnNumber:11}},e.createElement(xe,{to:"/admin/users",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",__self:this,__source:{fileName:A,lineNumber:768,columnNumber:13}},"View all users ")))))}var z="/app/code/frontend/src/pages/admin/UserManagementPage.tsx";const ju={ADMIN:"bg-red-100 text-red-800",FARMER:"bg-green-100 text-green-800",CUSTOMER:"bg-blue-100 text-blue-800",DRIVER:"bg-purple-100 text-purple-800",AGENT:"bg-yellow-100 text-yellow-800"},Uu={ACTIVE:"bg-green-100 text-green-800",PENDING:"bg-yellow-100 text-yellow-800",SUSPENDED:"bg-orange-100 text-orange-800",BLOCKED:"bg-red-100 text-red-800"};function $u(){const{token:t}=Ae(),[r,l]=P.useState([]),[s,a]=P.useState(!0),[m,n]=P.useState(""),[i,b]=P.useState("ALL"),[u,_]=P.useState("ALL"),[o,f]=P.useState(null),[h,w]=P.useState(!1),[g,p]=P.useState("activate");P.useEffect(()=>{S()},[]);const S=async()=>{try{const F=[{id:"1",phone:"+254712345678",email:"admin@zuasoko.com",firstName:"Admin",lastName:"User",role:"ADMIN",status:"ACTIVE",createdAt:new Date().toISOString()},{id:"2",phone:"+254734567890",email:"farmer@zuasoko.com",firstName:"Jane",lastName:"Wanjiku",role:"FARMER",status:"ACTIVE",profile:{farmName:"Green Valley Farm",county:"Kiambu"},createdAt:new Date(Date.now()-6048e5).toISOString()},{id:"3",phone:"+254756789012",email:"customer@zuasoko.com",firstName:"Mary",lastName:"Wangari",role:"CUSTOMER",status:"ACTIVE",profile:{county:"Nairobi"},createdAt:new Date(Date.now()-12096e5).toISOString()},{id:"4",phone:"+254778901234",email:"driver@zuasoko.com",firstName:"Michael",lastName:"Kiprotich",role:"DRIVER",status:"ACTIVE",profile:{vehicleType:"Pickup Truck",licenseNumber:"DL123456789"},createdAt:new Date(Date.now()-18144e5).toISOString()},{id:"5",phone:"+254790123456",email:"pending.farmer@zuasoko.com",firstName:"John",lastName:"Kimani",role:"FARMER",status:"PENDING",profile:{farmName:"Highlands Farm",county:"Nyeri"},createdAt:new Date(Date.now()-1728e5).toISOString()}];l(F)}catch(F){console.error("Error fetching users:",F),L.error("Failed to fetch users")}finally{a(!1)}},E=(F,C)=>{f(F),p(C),w(!0)},M=async()=>{if(o)try{let F=o.status,C="";switch(g){case"activate":F="ACTIVE",C="User activated successfully";break;case"suspend":F="SUSPENDED",C="User suspended successfully";break;case"block":F="BLOCKED",C="User blocked successfully";break;case"delete":l(r.filter(c=>c.id!==o.id)),L.success("User deleted successfully"),w(!1);return}l(r.map(c=>c.id===o.id?{...c,status:F}:c)),L.success(C),w(!1)}catch{L.error("Failed to update user")}},I=Array.isArray(r)?r:[],B=I.filter(F=>{const C=F.firstName.toLowerCase().includes(m.toLowerCase())||F.lastName.toLowerCase().includes(m.toLowerCase())||F.email?.toLowerCase().includes(m.toLowerCase())||F.phone.includes(m),c=i==="ALL"||F.role===i,x=u==="ALL"||F.status===u;return C&&c&&x}),le=(()=>{const F=I.length,C=I.filter(Q=>Q.status==="ACTIVE").length,c=I.filter(Q=>Q.status==="PENDING").length,x=I.filter(Q=>Q.status==="BLOCKED"||Q.status==="SUSPENDED").length;return{total:F,active:C,pending:c,blocked:x}})();return s?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:z,lineNumber:223,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:z,lineNumber:224,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:z,lineNumber:225,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:z,lineNumber:226,columnNumber:11}},"Loading users..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:z,lineNumber:233,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:z,lineNumber:234,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:z,lineNumber:236,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:z,lineNumber:237,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:z,lineNumber:238,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:z,lineNumber:239,columnNumber:15}},"User Management"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:z,lineNumber:242,columnNumber:15}},"Manage platform users and their permissions")),e.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600",__self:this,__source:{fileName:z,lineNumber:246,columnNumber:13}},e.createElement(pt,{className:"w-4 h-4",__self:this,__source:{fileName:z,lineNumber:247,columnNumber:15}}),e.createElement("span",{__self:this,__source:{fileName:z,lineNumber:248,columnNumber:15}},"Admin Panel")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:z,lineNumber:254,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:z,lineNumber:255,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:z,lineNumber:256,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:z,lineNumber:257,columnNumber:15}},e.createElement(tt,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:z,lineNumber:258,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:z,lineNumber:260,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:z,lineNumber:261,columnNumber:17}},le.total),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:z,lineNumber:264,columnNumber:17}},"Total Users")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:z,lineNumber:269,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:z,lineNumber:270,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:z,lineNumber:271,columnNumber:15}},e.createElement(nl,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:z,lineNumber:272,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:z,lineNumber:274,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:z,lineNumber:275,columnNumber:17}},le.active),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:z,lineNumber:278,columnNumber:17}},"Active Users")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:z,lineNumber:283,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:z,lineNumber:284,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:z,lineNumber:285,columnNumber:15}},e.createElement(nl,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:z,lineNumber:286,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:z,lineNumber:288,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:z,lineNumber:289,columnNumber:17}},le.pending),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:z,lineNumber:292,columnNumber:17}},"Pending Approval")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:z,lineNumber:297,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:z,lineNumber:298,columnNumber:13}},e.createElement("div",{className:"p-3 bg-red-100 rounded-lg",__self:this,__source:{fileName:z,lineNumber:299,columnNumber:15}},e.createElement(Xa,{className:"w-6 h-6 text-red-600",__self:this,__source:{fileName:z,lineNumber:300,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:z,lineNumber:302,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:z,lineNumber:303,columnNumber:17}},le.blocked),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:z,lineNumber:306,columnNumber:17}},"Blocked/Suspended"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:z,lineNumber:313,columnNumber:9}},e.createElement("div",{className:"flex flex-col lg:flex-row gap-4",__self:this,__source:{fileName:z,lineNumber:314,columnNumber:11}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:z,lineNumber:315,columnNumber:13}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:z,lineNumber:316,columnNumber:15}},e.createElement(nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5",__self:this,__source:{fileName:z,lineNumber:317,columnNumber:17}}),e.createElement("input",{type:"text",placeholder:"Search users...",value:m,onChange:F=>n(F.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",__self:this,__source:{fileName:z,lineNumber:318,columnNumber:17}}))),e.createElement("div",{className:"flex gap-4",__self:this,__source:{fileName:z,lineNumber:328,columnNumber:13}},e.createElement("select",{value:i,onChange:F=>b(F.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",__self:this,__source:{fileName:z,lineNumber:329,columnNumber:15}},e.createElement("option",{value:"ALL",__self:this,__source:{fileName:z,lineNumber:334,columnNumber:17}},"All Roles"),e.createElement("option",{value:"ADMIN",__self:this,__source:{fileName:z,lineNumber:335,columnNumber:17}},"Admin"),e.createElement("option",{value:"FARMER",__self:this,__source:{fileName:z,lineNumber:336,columnNumber:17}},"Farmer"),e.createElement("option",{value:"CUSTOMER",__self:this,__source:{fileName:z,lineNumber:337,columnNumber:17}},"Customer"),e.createElement("option",{value:"DRIVER",__self:this,__source:{fileName:z,lineNumber:338,columnNumber:17}},"Driver"),e.createElement("option",{value:"AGENT",__self:this,__source:{fileName:z,lineNumber:339,columnNumber:17}},"Agent")),e.createElement("select",{value:u,onChange:F=>_(F.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",__self:this,__source:{fileName:z,lineNumber:342,columnNumber:15}},e.createElement("option",{value:"ALL",__self:this,__source:{fileName:z,lineNumber:347,columnNumber:17}},"All Status"),e.createElement("option",{value:"ACTIVE",__self:this,__source:{fileName:z,lineNumber:348,columnNumber:17}},"Active"),e.createElement("option",{value:"PENDING",__self:this,__source:{fileName:z,lineNumber:349,columnNumber:17}},"Pending"),e.createElement("option",{value:"SUSPENDED",__self:this,__source:{fileName:z,lineNumber:350,columnNumber:17}},"Suspended"),e.createElement("option",{value:"BLOCKED",__self:this,__source:{fileName:z,lineNumber:351,columnNumber:17}},"Blocked"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",__self:this,__source:{fileName:z,lineNumber:358,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:z,lineNumber:359,columnNumber:11}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:z,lineNumber:360,columnNumber:13}},"Users (",B.length,")")),e.createElement("div",{className:"overflow-x-auto",__self:this,__source:{fileName:z,lineNumber:365,columnNumber:11}},e.createElement("table",{className:"min-w-full divide-y divide-gray-200",__self:this,__source:{fileName:z,lineNumber:366,columnNumber:13}},e.createElement("thead",{className:"bg-gray-50",__self:this,__source:{fileName:z,lineNumber:367,columnNumber:15}},e.createElement("tr",{__self:this,__source:{fileName:z,lineNumber:368,columnNumber:17}},e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:z,lineNumber:369,columnNumber:19}},"User"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:z,lineNumber:372,columnNumber:19}},"Contact"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:z,lineNumber:375,columnNumber:19}},"Role"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:z,lineNumber:378,columnNumber:19}},"Status"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:z,lineNumber:381,columnNumber:19}},"Joined"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:z,lineNumber:384,columnNumber:19}},"Actions"))),e.createElement("tbody",{className:"bg-white divide-y divide-gray-200",__self:this,__source:{fileName:z,lineNumber:389,columnNumber:15}},(Array.isArray(B)?B:[]).map(F=>e.createElement("tr",{key:F.id,className:"hover:bg-gray-50",__self:this,__source:{fileName:z,lineNumber:391,columnNumber:19}},e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:z,lineNumber:392,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:z,lineNumber:393,columnNumber:23}},e.createElement("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",__self:this,__source:{fileName:z,lineNumber:394,columnNumber:25}},e.createElement("span",{className:"text-primary-600 font-medium",__self:this,__source:{fileName:z,lineNumber:395,columnNumber:27}},F.firstName[0],F.lastName[0])),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:z,lineNumber:400,columnNumber:25}},e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:z,lineNumber:401,columnNumber:27}},F.firstName," ",F.lastName),F.profile?.farmName&&e.createElement("div",{className:"text-sm text-gray-500",__self:this,__source:{fileName:z,lineNumber:405,columnNumber:29}},F.profile.farmName)))),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:z,lineNumber:412,columnNumber:21}},e.createElement("div",{className:"text-sm text-gray-900",__self:this,__source:{fileName:z,lineNumber:413,columnNumber:23}},e.createElement("div",{className:"flex items-center gap-1 mb-1",__self:this,__source:{fileName:z,lineNumber:414,columnNumber:25}},e.createElement(Et,{className:"w-3 h-3",__self:this,__source:{fileName:z,lineNumber:415,columnNumber:27}}),F.phone),F.email&&e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:z,lineNumber:419,columnNumber:27}},e.createElement(Or,{className:"w-3 h-3",__self:this,__source:{fileName:z,lineNumber:420,columnNumber:29}}),F.email))),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:z,lineNumber:426,columnNumber:21}},e.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ju[F.role]||"bg-gray-100 text-gray-800"}`,__self:this,__source:{fileName:z,lineNumber:427,columnNumber:23}},F.role)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:z,lineNumber:436,columnNumber:21}},e.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Uu[F.status]||"bg-gray-100 text-gray-800"}`,__self:this,__source:{fileName:z,lineNumber:437,columnNumber:23}},F.status)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",__self:this,__source:{fileName:z,lineNumber:447,columnNumber:21}},new Date(F.createdAt).toLocaleDateString()),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",__self:this,__source:{fileName:z,lineNumber:450,columnNumber:21}},e.createElement("div",{className:"flex items-center gap-2",__self:this,__source:{fileName:z,lineNumber:451,columnNumber:23}},F.status==="PENDING"&&e.createElement("button",{onClick:()=>E(F,"activate"),className:"text-green-600 hover:text-green-900",__self:this,__source:{fileName:z,lineNumber:453,columnNumber:27}},"Activate"),F.status==="ACTIVE"&&e.createElement("button",{onClick:()=>E(F,"suspend"),className:"text-yellow-600 hover:text-yellow-900",__self:this,__source:{fileName:z,lineNumber:461,columnNumber:27}},"Suspend"),F.status!=="BLOCKED"&&e.createElement("button",{onClick:()=>E(F,"block"),className:"text-red-600 hover:text-red-900",__self:this,__source:{fileName:z,lineNumber:469,columnNumber:27}},"Block"))))))))),h&&o&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:z,lineNumber:487,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full",__self:this,__source:{fileName:z,lineNumber:488,columnNumber:13}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:z,lineNumber:489,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:z,lineNumber:490,columnNumber:17}},"Confirm Action")),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:z,lineNumber:495,columnNumber:15}},e.createElement("p",{className:"text-gray-600 mb-4",__self:this,__source:{fileName:z,lineNumber:496,columnNumber:17}},"Are you sure you want to ",g,' user "',o.firstName," ",o.lastName,'"?'),g==="delete"&&e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",__self:this,__source:{fileName:z,lineNumber:502,columnNumber:19}},e.createElement("p",{className:"text-red-700 text-sm",__self:this,__source:{fileName:z,lineNumber:503,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:z,lineNumber:504,columnNumber:23}},"Warning:")," This action cannot be undone. All user data will be permanently deleted.")),e.createElement("div",{className:"flex gap-4",__self:this,__source:{fileName:z,lineNumber:510,columnNumber:17}},e.createElement("button",{type:"button",onClick:()=>w(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",__self:this,__source:{fileName:z,lineNumber:511,columnNumber:19}},"Cancel"),e.createElement("button",{onClick:M,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${g==="delete"?"bg-red-600 text-white hover:bg-red-700":"bg-primary-600 text-white hover:bg-primary-700"}`,__self:this,__source:{fileName:z,lineNumber:518,columnNumber:19}},"Confirm ",g)))))))}var H="/app/code/frontend/src/pages/admin/ConsignmentManagementPage.tsx";const qu={PENDING:{color:"bg-yellow-100 text-yellow-800",icon:Ie,label:"Pending Review"},APPROVED:{color:"bg-green-100 text-green-800",icon:Fe,label:"Approved"},REJECTED:{color:"bg-red-100 text-red-800",icon:Rs,label:"Rejected"},PRICE_SUGGESTED:{color:"bg-blue-100 text-blue-800",icon:Ye,label:"Price Suggested"},DRIVER_ASSIGNED:{color:"bg-purple-100 text-purple-800",icon:Te,label:"Driver Assigned"},IN_TRANSIT:{color:"bg-indigo-100 text-indigo-800",icon:Te,label:"In Transit"},DELIVERED:{color:"bg-teal-100 text-teal-800",icon:ge,label:"Delivered"},COMPLETED:{color:"bg-gray-100 text-gray-800",icon:Fe,label:"Completed"}};function Vu(){const{token:t}=Ae(),[r,l]=P.useState([]),[s,a]=P.useState([]),[m,n]=P.useState(!0),[i,b]=P.useState("ALL"),[u,_]=P.useState(null),[o,f]=P.useState(!1),[h,w]=P.useState("approve"),[g,p]=P.useState(""),[S,E]=P.useState("");P.useEffect(()=>{M(),I()},[]);const M=async()=>{try{console.log(" Fetching consignments from live database");const c=await me.get("/api/consignments",{headers:{Authorization:`Bearer ${t}`}});console.log(" Consignments response:",c.data);const x=Array.isArray(c.data)?c.data:c.data.consignments||[];console.log(" Setting consignments array:",x),l(Array.isArray(x)?x:[])}catch(c){console.error(" Error fetching consignments:",c),L.error("Failed to fetch consignments from database"),l([])}finally{n(!1)}},I=async()=>{try{console.log(" Fetching drivers from live database");const c=await me.get("/api/drivers",{headers:{Authorization:`Bearer ${t}`}});console.log(" Drivers response:",c.data);const x=Array.isArray(c.data)?c.data:c.data.drivers||[];console.log(" Setting drivers array:",x),a(Array.isArray(x)?x:[])}catch(c){console.error(" Error fetching drivers:",c),L.error("Failed to fetch drivers from database"),a([])}},B=async(c,x)=>{_(c),w(x),f(!0),x==="suggest_price"&&p(c.proposedPricePerUnit?.toString()||"0")},q=async()=>{if(u)try{let c={};switch(h){case"approve":c={status:"APPROVED"};break;case"reject":c={status:"REJECTED"};break;case"suggest_price":if(!g||Number(g)<=0){L.error("Please enter a valid price");return}c={status:"PRICE_SUGGESTED",suggestedPrice:Number(g)};break;case"assign_driver":if(!S){L.error("Please select a driver");return}c={status:"DRIVER_ASSIGNED",driverId:S};break}await me.patch(`/api/admin/consignments/${u.id}`,c,{headers:{Authorization:`Bearer ${t}`}}),L.success("Consignment updated successfully!"),f(!1),M(),p(""),E("")}catch(c){console.error("Error updating consignment:",c),L.error("Failed to update consignment")}},le=Array.isArray(r)?r:[],F=i==="ALL"?le:le.filter(c=>c.status===i),C=c=>{switch(c.status){case"PENDING":return e.createElement("div",{className:"flex gap-2",__self:this,__source:{fileName:H,lineNumber:248,columnNumber:11}},e.createElement("button",{onClick:()=>B(c,"approve"),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",__self:this,__source:{fileName:H,lineNumber:249,columnNumber:13}},"Approve"),e.createElement("button",{onClick:()=>B(c,"suggest_price"),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",__self:this,__source:{fileName:H,lineNumber:255,columnNumber:13}},"Suggest Price"),e.createElement("button",{onClick:()=>B(c,"reject"),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",__self:this,__source:{fileName:H,lineNumber:261,columnNumber:13}},"Reject"));case"APPROVED":return e.createElement("button",{onClick:()=>B(c,"assign_driver"),className:"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700",__self:this,__source:{fileName:H,lineNumber:272,columnNumber:11}},"Assign Driver");default:return null}};return m?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:H,lineNumber:287,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:H,lineNumber:288,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:H,lineNumber:289,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:H,lineNumber:290,columnNumber:11}},"Loading consignments..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:H,lineNumber:297,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:H,lineNumber:298,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:H,lineNumber:300,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:H,lineNumber:301,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:H,lineNumber:302,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:H,lineNumber:303,columnNumber:15}},"Consignment Management"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:H,lineNumber:306,columnNumber:15}},"Review and manage farmer consignments")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:H,lineNumber:314,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:H,lineNumber:315,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:H,lineNumber:316,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:H,lineNumber:317,columnNumber:15}},e.createElement(Ie,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:H,lineNumber:318,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:H,lineNumber:320,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:H,lineNumber:321,columnNumber:17}},le.filter(c=>c.status==="PENDING").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:H,lineNumber:327,columnNumber:17}},"Pending Review")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:H,lineNumber:332,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:H,lineNumber:333,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:H,lineNumber:334,columnNumber:15}},e.createElement(Fe,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:H,lineNumber:335,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:H,lineNumber:337,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:H,lineNumber:338,columnNumber:17}},le.filter(c=>c.status==="APPROVED").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:H,lineNumber:344,columnNumber:17}},"Approved")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:H,lineNumber:349,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:H,lineNumber:350,columnNumber:13}},e.createElement("div",{className:"p-3 bg-purple-100 rounded-lg",__self:this,__source:{fileName:H,lineNumber:351,columnNumber:15}},e.createElement(Te,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:H,lineNumber:352,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:H,lineNumber:354,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:H,lineNumber:355,columnNumber:17}},le.filter(c=>c.status==="DRIVER_ASSIGNED"||c.status==="IN_TRANSIT").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:H,lineNumber:364,columnNumber:17}},"In Transit")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:H,lineNumber:369,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:H,lineNumber:370,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:H,lineNumber:371,columnNumber:15}},e.createElement(ge,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:H,lineNumber:372,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:H,lineNumber:374,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:H,lineNumber:375,columnNumber:17}},le.filter(c=>c.status==="DELIVERED"||c.status==="COMPLETED").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:H,lineNumber:383,columnNumber:17}},"Completed"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:H,lineNumber:390,columnNumber:9}},e.createElement("div",{className:"flex flex-wrap gap-2",__self:this,__source:{fileName:H,lineNumber:391,columnNumber:11}},["ALL","PENDING","APPROVED","DRIVER_ASSIGNED","IN_TRANSIT","DELIVERED"].map(c=>e.createElement("button",{key:c,onClick:()=>b(c),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i===c?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,__self:this,__source:{fileName:H,lineNumber:400,columnNumber:15}},c.replace("_"," "))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:H,lineNumber:416,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:H,lineNumber:417,columnNumber:11}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:H,lineNumber:418,columnNumber:13}},"Consignments (",F.length,")")),F.length===0?e.createElement("div",{className:"p-12 text-center",__self:this,__source:{fileName:H,lineNumber:424,columnNumber:13}},e.createElement(ge,{className:"w-16 h-16 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:H,lineNumber:425,columnNumber:15}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:H,lineNumber:426,columnNumber:15}},"No consignments found"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:H,lineNumber:429,columnNumber:15}},i==="ALL"?"No consignments have been submitted yet":`No ${i.toLowerCase()} consignments`)):e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:H,lineNumber:436,columnNumber:13}},F.map(c=>{const x=qu[c.status],Q=x?.icon||ge,re=(c.finalPricePerUnit||c.proposedPricePerUnit||0)*(c.quantity||0);return e.createElement("div",{key:c.id,className:"p-6 hover:bg-gray-50",__self:this,__source:{fileName:H,lineNumber:447,columnNumber:19}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",__self:this,__source:{fileName:H,lineNumber:448,columnNumber:21}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:H,lineNumber:449,columnNumber:23}},e.createElement("div",{className:"flex items-start gap-4",__self:this,__source:{fileName:H,lineNumber:450,columnNumber:25}},e.createElement("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",__self:this,__source:{fileName:H,lineNumber:451,columnNumber:27}},e.createElement(ge,{className:"w-8 h-8 text-gray-600",__self:this,__source:{fileName:H,lineNumber:452,columnNumber:29}})),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:H,lineNumber:455,columnNumber:27}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-1",__self:this,__source:{fileName:H,lineNumber:456,columnNumber:29}},c.title),e.createElement("p",{className:"text-gray-600 text-sm mb-3",__self:this,__source:{fileName:H,lineNumber:459,columnNumber:29}},c.description),c.farmer&&e.createElement("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-2",__self:this,__source:{fileName:H,lineNumber:465,columnNumber:31}},e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:H,lineNumber:466,columnNumber:33}},e.createElement(nt,{className:"w-4 h-4",__self:this,__source:{fileName:H,lineNumber:467,columnNumber:35}}),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:468,columnNumber:35}},c.farmer.name)),e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:H,lineNumber:470,columnNumber:33}},e.createElement(Et,{className:"w-4 h-4",__self:this,__source:{fileName:H,lineNumber:471,columnNumber:35}}),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:472,columnNumber:35}},c.farmer.phone)),c.farmer.profile?.county&&e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:H,lineNumber:475,columnNumber:35}},e.createElement(it,{className:"w-4 h-4",__self:this,__source:{fileName:H,lineNumber:476,columnNumber:37}}),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:477,columnNumber:37}},c.farmer.profile.county))),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 mb-3",__self:this,__source:{fileName:H,lineNumber:486,columnNumber:29}},e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:487,columnNumber:31}},c.quantity," ",c.unit),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:490,columnNumber:31}},""),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:491,columnNumber:31}},"KSh ",c.proposedPricePerUnit," per"," ",c.unit),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:495,columnNumber:31}},""),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:496,columnNumber:31}},c.category),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:497,columnNumber:31}},""),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:498,columnNumber:31}},"Total: KSh ",re.toLocaleString())),c.status==="PRICE_SUGGESTED"&&c.adminSuggestedPrice&&e.createElement("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",__self:this,__source:{fileName:H,lineNumber:506,columnNumber:33}},e.createElement("p",{className:"text-sm text-blue-700",__self:this,__source:{fileName:H,lineNumber:507,columnNumber:35}},e.createElement("strong",{__self:this,__source:{fileName:H,lineNumber:508,columnNumber:37}},"Price suggested:")," KSh"," ",c.adminSuggestedPrice," per"," ",c.unit,e.createElement("span",{className:"ml-2 text-blue-600",__self:this,__source:{fileName:H,lineNumber:511,columnNumber:37}},"(Total: KSh"," ",(c.adminSuggestedPrice*c.quantity).toLocaleString(),")")))))),e.createElement("div",{className:"flex flex-col lg:items-end gap-3",__self:this,__source:{fileName:H,lineNumber:526,columnNumber:23}},e.createElement("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${x?.color||"bg-gray-100 text-gray-800"}`,__self:this,__source:{fileName:H,lineNumber:527,columnNumber:25}},e.createElement(Q,{className:"w-4 h-4",__self:this,__source:{fileName:H,lineNumber:530,columnNumber:27}}),x?.label||c.status),e.createElement("div",{className:"flex items-center gap-2 text-xs text-gray-400",__self:this,__source:{fileName:H,lineNumber:534,columnNumber:25}},e.createElement(yt,{className:"w-3 h-3",__self:this,__source:{fileName:H,lineNumber:535,columnNumber:27}}),new Date(c.createdAt).toLocaleDateString()),C(c))))}))),o&&u&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:H,lineNumber:551,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full",__self:this,__source:{fileName:H,lineNumber:552,columnNumber:13}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:H,lineNumber:553,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:H,lineNumber:554,columnNumber:17}},h==="approve"&&"Approve Consignment",h==="reject"&&"Reject Consignment",h==="suggest_price"&&"Suggest New Price",h==="assign_driver"&&"Assign Driver"),e.createElement("p",{className:"text-gray-600 text-sm mt-1",__self:this,__source:{fileName:H,lineNumber:560,columnNumber:17}},u.title)),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:H,lineNumber:565,columnNumber:15}},h==="suggest_price"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:H,lineNumber:567,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:H,lineNumber:568,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:H,lineNumber:569,columnNumber:23}},"Current proposed price: KSh"," ",u.proposedPricePerUnit," per"," ",u.unit),e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:H,lineNumber:574,columnNumber:23}},"Your suggested price (KSh per ",u.unit,")"),e.createElement("input",{type:"number",value:g,onChange:c=>p(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter suggested price",min:"1",required:!0,__self:this,__source:{fileName:H,lineNumber:578,columnNumber:23}}))),h==="assign_driver"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:H,lineNumber:592,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:H,lineNumber:593,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:H,lineNumber:594,columnNumber:23}},"Select Driver"),e.createElement("select",{value:S,onChange:c=>E(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,__self:this,__source:{fileName:H,lineNumber:597,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:H,lineNumber:603,columnNumber:25}},"Choose a driver"),Array.isArray(s)?s.filter(c=>c.isAvailable).map(c=>e.createElement("option",{key:c.id,value:c.userId,__self:this,__source:{fileName:H,lineNumber:608,columnNumber:33}},c.name," - ",c.vehicleType," (",c.vehicleRegNo,") - Rating:"," ",c.rating,"")):[]))),(h==="approve"||h==="reject")&&e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:H,lineNumber:621,columnNumber:19}},"Are you sure you want to ",h," this consignment?"),e.createElement("div",{className:"flex gap-4 mt-6",__self:this,__source:{fileName:H,lineNumber:626,columnNumber:17}},e.createElement("button",{type:"button",onClick:()=>f(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",__self:this,__source:{fileName:H,lineNumber:627,columnNumber:19}},"Cancel"),e.createElement("button",{onClick:q,className:"flex-1 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:H,lineNumber:634,columnNumber:19}},"Confirm")))))))}var V="/app/code/frontend/src/pages/admin/AnalyticsPage.tsx";function Ku(){const{token:t}=Ae(),[r,l]=P.useState(!0),[s,a]=P.useState("30"),[m,n]=P.useState({totalUsers:0,totalConsignments:0,totalOrders:0,totalRevenue:0,activeDrivers:0,pendingApprovals:0,userGrowth:0,revenueGrowth:0}),[i,b]=P.useState([]);P.useEffect(()=>{u()},[]);const u=async()=>{try{l(!0),console.log(" Fetching analytics data from database");const[w,g]=await Promise.all([me.get("/api/admin/analytics/stats",{headers:{Authorization:`Bearer ${t}`}}),me.get("/api/admin/analytics/monthly",{headers:{Authorization:`Bearer ${t}`}})]);w.data.success&&(n(w.data.stats),console.log(" Analytics stats loaded:",w.data.stats)),g.data.success&&(b(g.data.monthlyData),console.log(" Monthly data loaded:",g.data.monthlyData))}catch(w){console.error(" Error fetching analytics:",w),L.error("Failed to fetch analytics data"),n({totalUsers:1247,totalConsignments:856,totalOrders:2341,totalRevenue:4567890,activeDrivers:23,pendingApprovals:12,userGrowth:12.5,revenueGrowth:8.2}),b([{name:"Jan",value:32e4},{name:"Feb",value:28e4},{name:"Mar",value:45e4},{name:"Apr",value:38e4},{name:"May",value:52e4},{name:"Jun",value:49e4},{name:"Jul",value:64e4},{name:"Aug",value:58e4},{name:"Sep",value:72e4},{name:"Oct",value:68e4},{name:"Nov",value:75e4},{name:"Dec",value:82e4}])}finally{l(!1)}},[_]=P.useState([{name:"Vegetables",value:45},{name:"Fruits",value:25},{name:"Grains",value:15},{name:"Leafy Greens",value:10},{name:"Others",value:5}]),[o]=P.useState([{id:1,type:"order",message:"New order placed by Mary Wangari",amount:"KSh 2,450",time:"5 minutes ago"},{id:2,type:"consignment",message:"Consignment approved for Jane Wanjiku",amount:"KSh 15,000",time:"12 minutes ago"},{id:3,type:"user",message:"New farmer registered: Peter Kamau",amount:"",time:"25 minutes ago"},{id:4,type:"delivery",message:"Delivery completed by Michael Kiprotich",amount:"KSh 3,200",time:"1 hour ago"},{id:5,type:"payment",message:"Payment processed for Grace Muthoni",amount:"KSh 8,750",time:"2 hours ago"}]);P.useEffect(()=>{setTimeout(()=>l(!1),1e3)},[s]);const f=w=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(w),h=w=>{switch(w){case"order":return e.createElement(ge,{className:"w-4 h-4 text-blue-600",__self:this,__source:{fileName:V,lineNumber:183,columnNumber:16}});case"consignment":return e.createElement(Rt,{className:"w-4 h-4 text-green-600",__self:this,__source:{fileName:V,lineNumber:185,columnNumber:16}});case"user":return e.createElement(tt,{className:"w-4 h-4 text-purple-600",__self:this,__source:{fileName:V,lineNumber:187,columnNumber:16}});case"delivery":return e.createElement(Te,{className:"w-4 h-4 text-orange-600",__self:this,__source:{fileName:V,lineNumber:189,columnNumber:16}});case"payment":return e.createElement(Ye,{className:"w-4 h-4 text-emerald-600",__self:this,__source:{fileName:V,lineNumber:191,columnNumber:16}});default:return e.createElement(vr,{className:"w-4 h-4 text-gray-600",__self:this,__source:{fileName:V,lineNumber:193,columnNumber:16}})}};return r?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:V,lineNumber:199,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:V,lineNumber:200,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:V,lineNumber:201,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:V,lineNumber:202,columnNumber:11}},"Loading analytics..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:V,lineNumber:209,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:V,lineNumber:210,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:V,lineNumber:212,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:V,lineNumber:213,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:214,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:V,lineNumber:215,columnNumber:15}},"Analytics Dashboard"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:V,lineNumber:218,columnNumber:15}},"Platform insights and performance metrics")),e.createElement("div",{className:"flex items-center gap-4",__self:this,__source:{fileName:V,lineNumber:222,columnNumber:13}},e.createElement("button",{onClick:u,disabled:r,className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2",__self:this,__source:{fileName:V,lineNumber:223,columnNumber:15}},e.createElement(qt,{className:`w-4 h-4 ${r?"animate-spin":""}`,__self:this,__source:{fileName:V,lineNumber:228,columnNumber:17}}),e.createElement("span",{__self:this,__source:{fileName:V,lineNumber:231,columnNumber:17}},"Refresh")),e.createElement("select",{value:s,onChange:w=>a(w.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",__self:this,__source:{fileName:V,lineNumber:233,columnNumber:15}},e.createElement("option",{value:"7",__self:this,__source:{fileName:V,lineNumber:238,columnNumber:17}},"Last 7 days"),e.createElement("option",{value:"30",__self:this,__source:{fileName:V,lineNumber:239,columnNumber:17}},"Last 30 days"),e.createElement("option",{value:"90",__self:this,__source:{fileName:V,lineNumber:240,columnNumber:17}},"Last 3 months"),e.createElement("option",{value:"365",__self:this,__source:{fileName:V,lineNumber:241,columnNumber:17}},"Last year")),e.createElement("button",{className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2",__self:this,__source:{fileName:V,lineNumber:243,columnNumber:15}},e.createElement(yr,{className:"w-4 h-4",__self:this,__source:{fileName:V,lineNumber:244,columnNumber:17}}),"Export")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:V,lineNumber:252,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:V,lineNumber:253,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:V,lineNumber:254,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:255,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:V,lineNumber:256,columnNumber:17}},"Total Revenue"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:V,lineNumber:259,columnNumber:17}},f(m.totalRevenue))),e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:V,lineNumber:263,columnNumber:15}},e.createElement(Ye,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:V,lineNumber:264,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex items-center",__self:this,__source:{fileName:V,lineNumber:267,columnNumber:13}},e.createElement(Rt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:V,lineNumber:268,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium text-green-600",__self:this,__source:{fileName:V,lineNumber:269,columnNumber:15}},"+",m.revenueGrowth,"%"),e.createElement("span",{className:"text-sm text-gray-500 ml-2",__self:this,__source:{fileName:V,lineNumber:272,columnNumber:15}},"vs last month"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:V,lineNumber:276,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:V,lineNumber:277,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:278,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:V,lineNumber:279,columnNumber:17}},"Total Users"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:V,lineNumber:280,columnNumber:17}},m.totalUsers.toLocaleString())),e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:V,lineNumber:284,columnNumber:15}},e.createElement(tt,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:V,lineNumber:285,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex items-center",__self:this,__source:{fileName:V,lineNumber:288,columnNumber:13}},e.createElement(Rt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:V,lineNumber:289,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium text-green-600",__self:this,__source:{fileName:V,lineNumber:290,columnNumber:15}},"+",m.userGrowth,"%"),e.createElement("span",{className:"text-sm text-gray-500 ml-2",__self:this,__source:{fileName:V,lineNumber:293,columnNumber:15}},"vs last month"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:V,lineNumber:297,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:V,lineNumber:298,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:299,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:V,lineNumber:300,columnNumber:17}},"Total Orders"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:V,lineNumber:303,columnNumber:17}},m.totalOrders.toLocaleString())),e.createElement("div",{className:"p-3 bg-purple-100 rounded-lg",__self:this,__source:{fileName:V,lineNumber:307,columnNumber:15}},e.createElement(ge,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:V,lineNumber:308,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex items-center",__self:this,__source:{fileName:V,lineNumber:311,columnNumber:13}},e.createElement(Rt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:V,lineNumber:312,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium text-green-600",__self:this,__source:{fileName:V,lineNumber:313,columnNumber:15}},"+15.3%"),e.createElement("span",{className:"text-sm text-gray-500 ml-2",__self:this,__source:{fileName:V,lineNumber:314,columnNumber:15}},"vs last month"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:V,lineNumber:318,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:V,lineNumber:319,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:320,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:V,lineNumber:321,columnNumber:17}},"Active Drivers"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:V,lineNumber:324,columnNumber:17}},m.activeDrivers)),e.createElement("div",{className:"p-3 bg-orange-100 rounded-lg",__self:this,__source:{fileName:V,lineNumber:328,columnNumber:15}},e.createElement(Te,{className:"w-6 h-6 text-orange-600",__self:this,__source:{fileName:V,lineNumber:329,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex items-center",__self:this,__source:{fileName:V,lineNumber:332,columnNumber:13}},e.createElement(Rt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:V,lineNumber:333,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium text-green-600",__self:this,__source:{fileName:V,lineNumber:334,columnNumber:15}},"+2"),e.createElement("span",{className:"text-sm text-gray-500 ml-2",__self:this,__source:{fileName:V,lineNumber:335,columnNumber:15}},"vs last month")))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",__self:this,__source:{fileName:V,lineNumber:341,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:V,lineNumber:343,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between mb-6",__self:this,__source:{fileName:V,lineNumber:344,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:V,lineNumber:345,columnNumber:15}},"Monthly Revenue"),e.createElement(xl,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:V,lineNumber:348,columnNumber:15}})),e.createElement("div",{className:"h-64 flex items-end justify-between gap-2",__self:this,__source:{fileName:V,lineNumber:350,columnNumber:13}},i.map((w,g)=>e.createElement("div",{key:g,className:"flex flex-col items-center flex-1",__self:this,__source:{fileName:V,lineNumber:352,columnNumber:17}},e.createElement("div",{className:"bg-primary-600 rounded-t w-full transition-all duration-300 hover:bg-primary-700",style:{height:`${w.value/Math.max(...i.map(p=>p.value))*100}%`,minHeight:"4px"},__self:this,__source:{fileName:V,lineNumber:353,columnNumber:19}}),e.createElement("span",{className:"text-xs text-gray-500 mt-2",__self:this,__source:{fileName:V,lineNumber:360,columnNumber:19}},w.name))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:V,lineNumber:369,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between mb-6",__self:this,__source:{fileName:V,lineNumber:370,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:V,lineNumber:371,columnNumber:15}},"Product Categories"),e.createElement(em,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:V,lineNumber:374,columnNumber:15}})),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:V,lineNumber:376,columnNumber:13}},_.map((w,g)=>e.createElement("div",{key:g,className:"flex items-center justify-between",__self:this,__source:{fileName:V,lineNumber:378,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:V,lineNumber:379,columnNumber:19}},e.createElement("div",{className:"w-4 h-4 rounded mr-3",style:{backgroundColor:`hsl(${g*72}, 70%, 50%)`},__self:this,__source:{fileName:V,lineNumber:380,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-gray-700",__self:this,__source:{fileName:V,lineNumber:386,columnNumber:21}},w.name)),e.createElement("span",{className:"text-sm text-gray-500",__self:this,__source:{fileName:V,lineNumber:390,columnNumber:19}},w.value,"%")))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:V,lineNumber:398,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:V,lineNumber:399,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:V,lineNumber:400,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:V,lineNumber:401,columnNumber:15}},"Recent Activity"),e.createElement(vr,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:V,lineNumber:404,columnNumber:15}}))),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:V,lineNumber:407,columnNumber:11}},o.map(w=>e.createElement("div",{key:w.id,className:"p-6 hover:bg-gray-50",__self:this,__source:{fileName:V,lineNumber:409,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:V,lineNumber:410,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:V,lineNumber:411,columnNumber:19}},e.createElement("div",{className:"p-2 bg-gray-100 rounded-lg mr-4",__self:this,__source:{fileName:V,lineNumber:412,columnNumber:21}},h(w.type)),e.createElement("div",{__self:this,__source:{fileName:V,lineNumber:415,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:V,lineNumber:416,columnNumber:23}},w.message),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:V,lineNumber:419,columnNumber:23}},w.time))),w.amount&&e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:V,lineNumber:423,columnNumber:21}},w.amount)))))),e.createElement("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:V,lineNumber:434,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:V,lineNumber:435,columnNumber:11}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",__self:this,__source:{fileName:V,lineNumber:438,columnNumber:11}},e.createElement("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",__self:this,__source:{fileName:V,lineNumber:439,columnNumber:13}},e.createElement(tt,{className:"w-6 h-6 text-blue-600 mb-2",__self:this,__source:{fileName:V,lineNumber:440,columnNumber:15}}),e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:V,lineNumber:441,columnNumber:15}},"Manage Users"),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:V,lineNumber:442,columnNumber:15}},"View and manage platform users")),e.createElement("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",__self:this,__source:{fileName:V,lineNumber:447,columnNumber:13}},e.createElement(ge,{className:"w-6 h-6 text-green-600 mb-2",__self:this,__source:{fileName:V,lineNumber:448,columnNumber:15}}),e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:V,lineNumber:449,columnNumber:15}},"Review Consignments"),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:V,lineNumber:450,columnNumber:15}},"Approve pending consignments")),e.createElement("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",__self:this,__source:{fileName:V,lineNumber:455,columnNumber:13}},e.createElement(yr,{className:"w-6 h-6 text-purple-600 mb-2",__self:this,__source:{fileName:V,lineNumber:456,columnNumber:15}}),e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:V,lineNumber:457,columnNumber:15}},"Generate Reports"),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:V,lineNumber:458,columnNumber:15}},"Download detailed analytics"))))))}var R="/app/code/frontend/src/pages/admin/AdminSettingsPage.tsx";function Bu(){const{token:t}=Ae(),[r,l]=P.useState(!0),[s,a]=P.useState(!1),[m,n]=P.useState("platform"),[i,b]=P.useState(!1),[u,_]=P.useState({platform:{name:"Zuasoko Agricultural Platform",description:"Connecting farmers directly with customers and managing agricultural supply chains",supportEmail:"support@zuasoko.com",supportPhone:"+254700000000"},fees:{farmerRegistrationFee:300,registrationFeeEnabled:!0,gracePeriodDays:7},payments:{mpesaEnabled:!0,mpesaShortcode:"174379",mpesaPasskey:"",bankTransferEnabled:!0,commissionRate:5},notifications:{emailEnabled:!0,smsEnabled:!0,pushEnabled:!0,adminNotifications:!0},security:{passwordMinLength:8,sessionTimeout:24,twoFactorRequired:!1,maxLoginAttempts:5},features:{consignmentApprovalRequired:!0,autoDriverAssignment:!1,inventoryTracking:!0,priceModeration:!0}});P.useEffect(()=>{o()},[]);const o=async()=>{try{const g=await me.get("/api/admin/settings",{headers:{Authorization:`Bearer ${t}`}});g.data.settings&&_(g.data.settings)}catch{console.log("Using default settings - API endpoint not available")}finally{l(!1)}},f=async()=>{a(!0);try{await me.put("/api/admin/settings",u,{headers:{Authorization:`Bearer ${t}`}}),L.success("Settings saved successfully")}catch(g){console.error("Error saving settings:",g),L.success("Settings saved locally (demo mode)")}finally{a(!1)}},h=(g,p,S)=>{_(E=>({...E,[g]:{...E[g],[p]:S}}))},w=[{id:"platform",label:"Platform",icon:Vl},{id:"payments",label:"Payments",icon:st},{id:"fees",label:"Registration Fees",icon:Ye},{id:"notifications",label:"Notifications",icon:Ut},{id:"security",label:"Security",icon:pt},{id:"features",label:"Features",icon:Gt}];return r?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:R,lineNumber:171,columnNumber:7}},e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:R,lineNumber:172,columnNumber:9}},e.createElement(qt,{className:"w-5 h-5 animate-spin text-green-600",__self:this,__source:{fileName:R,lineNumber:173,columnNumber:11}}),e.createElement("span",{__self:this,__source:{fileName:R,lineNumber:174,columnNumber:11}},"Loading settings..."))):e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:R,lineNumber:181,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:R,lineNumber:182,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:R,lineNumber:184,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:R,lineNumber:185,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:186,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:R,lineNumber:187,columnNumber:15}},"System Settings"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:R,lineNumber:190,columnNumber:15}},"Configure platform settings and system behavior")),e.createElement("button",{onClick:f,disabled:s,className:"bg-green-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2",__self:this,__source:{fileName:R,lineNumber:194,columnNumber:13}},s?e.createElement(qt,{className:"w-4 h-4 animate-spin",__self:this,__source:{fileName:R,lineNumber:200,columnNumber:17}}):e.createElement(vl,{className:"w-4 h-4",__self:this,__source:{fileName:R,lineNumber:202,columnNumber:17}}),e.createElement("span",{__self:this,__source:{fileName:R,lineNumber:204,columnNumber:15}},s?"Saving...":"Save Changes")))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",__self:this,__source:{fileName:R,lineNumber:209,columnNumber:9}},e.createElement("div",{className:"lg:col-span-1",__self:this,__source:{fileName:R,lineNumber:211,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:R,lineNumber:212,columnNumber:13}},e.createElement("div",{className:"p-4 border-b border-gray-200",__self:this,__source:{fileName:R,lineNumber:213,columnNumber:15}},e.createElement("h3",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:R,lineNumber:214,columnNumber:17}},"Settings Categories")),e.createElement("nav",{className:"p-2",__self:this,__source:{fileName:R,lineNumber:218,columnNumber:15}},w.map(g=>e.createElement("button",{key:g.id,onClick:()=>n(g.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ${m===g.id?"bg-green-50 text-green-700 border border-green-200":"text-gray-600 hover:bg-gray-50"}`,__self:this,__source:{fileName:R,lineNumber:220,columnNumber:19}},e.createElement(g.icon,{className:"w-5 h-5",__self:this,__source:{fileName:R,lineNumber:229,columnNumber:21}}),e.createElement("span",{__self:this,__source:{fileName:R,lineNumber:230,columnNumber:21}},g.label)))))),e.createElement("div",{className:"lg:col-span-3",__self:this,__source:{fileName:R,lineNumber:238,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:R,lineNumber:239,columnNumber:13}},m==="platform"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:R,lineNumber:242,columnNumber:17}},e.createElement("div",{className:"flex items-center space-x-3 mb-6",__self:this,__source:{fileName:R,lineNumber:243,columnNumber:19}},e.createElement(Vl,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:R,lineNumber:244,columnNumber:21}}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:R,lineNumber:245,columnNumber:21}},"Platform Configuration")),e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:R,lineNumber:250,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:251,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:R,lineNumber:252,columnNumber:23}},"Platform Name"),e.createElement("input",{type:"text",value:u.platform.name,onChange:g=>h("platform","name",g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:R,lineNumber:255,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:265,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:R,lineNumber:266,columnNumber:23}},"Platform Description"),e.createElement("textarea",{value:u.platform.description,onChange:g=>h("platform","description",g.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:R,lineNumber:269,columnNumber:23}})),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:R,lineNumber:283,columnNumber:21}},e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:284,columnNumber:23}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:R,lineNumber:285,columnNumber:25}},"Support Email"),e.createElement("input",{type:"email",value:u.platform.supportEmail,onChange:g=>h("platform","supportEmail",g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:R,lineNumber:288,columnNumber:25}})),e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:302,columnNumber:23}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:R,lineNumber:303,columnNumber:25}},"Support Phone"),e.createElement("input",{type:"tel",value:u.platform.supportPhone,onChange:g=>h("platform","supportPhone",g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:R,lineNumber:306,columnNumber:25}}))))),m==="payments"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:R,lineNumber:326,columnNumber:17}},e.createElement("div",{className:"flex items-center space-x-3 mb-6",__self:this,__source:{fileName:R,lineNumber:327,columnNumber:19}},e.createElement(st,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:R,lineNumber:328,columnNumber:21}}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:R,lineNumber:329,columnNumber:21}},"Payment Configuration")),e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:R,lineNumber:334,columnNumber:19}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:R,lineNumber:335,columnNumber:21}},e.createElement("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",__self:this,__source:{fileName:R,lineNumber:336,columnNumber:23}},e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:337,columnNumber:25}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:R,lineNumber:338,columnNumber:27}},"M-Pesa Integration"),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:R,lineNumber:341,columnNumber:27}},"Enable M-Pesa payments")),e.createElement("label",{className:"relative inline-flex items-center cursor-pointer",__self:this,__source:{fileName:R,lineNumber:345,columnNumber:25}},e.createElement("input",{type:"checkbox",checked:u.payments.mpesaEnabled,onChange:g=>h("payments","mpesaEnabled",g.target.checked),className:"sr-only peer",__self:this,__source:{fileName:R,lineNumber:346,columnNumber:27}}),e.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600",__self:this,__source:{fileName:R,lineNumber:358,columnNumber:27}}))),e.createElement("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",__self:this,__source:{fileName:R,lineNumber:362,columnNumber:23}},e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:363,columnNumber:25}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:R,lineNumber:364,columnNumber:27}},"Bank Transfer"),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:R,lineNumber:367,columnNumber:27}},"Enable bank transfers")),e.createElement("label",{className:"relative inline-flex items-center cursor-pointer",__self:this,__source:{fileName:R,lineNumber:371,columnNumber:25}},e.createElement("input",{type:"checkbox",checked:u.payments.bankTransferEnabled,onChange:g=>h("payments","bankTransferEnabled",g.target.checked),className:"sr-only peer",__self:this,__source:{fileName:R,lineNumber:372,columnNumber:27}}),e.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600",__self:this,__source:{fileName:R,lineNumber:384,columnNumber:27}})))),u.payments.mpesaEnabled&&e.createElement("div",{className:"space-y-4 p-4 bg-green-50 rounded-lg border border-green-200",__self:this,__source:{fileName:R,lineNumber:390,columnNumber:23}},e.createElement("h4",{className:"font-medium text-green-900",__self:this,__source:{fileName:R,lineNumber:391,columnNumber:25}},"M-Pesa Configuration"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",__self:this,__source:{fileName:R,lineNumber:395,columnNumber:25}},e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:396,columnNumber:27}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:R,lineNumber:397,columnNumber:29}},"Business Shortcode"),e.createElement("input",{type:"text",value:u.payments.mpesaShortcode,onChange:g=>h("payments","mpesaShortcode",g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:R,lineNumber:400,columnNumber:29}})),e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:414,columnNumber:27}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:R,lineNumber:415,columnNumber:29}},"Passkey"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:R,lineNumber:418,columnNumber:29}},e.createElement("input",{type:i?"text":"password",value:u.payments.mpesaPasskey,onChange:g=>h("payments","mpesaPasskey",g.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter M-Pesa passkey",__self:this,__source:{fileName:R,lineNumber:419,columnNumber:31}}),e.createElement("button",{type:"button",onClick:()=>b(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",__self:this,__source:{fileName:R,lineNumber:432,columnNumber:31}},i?e.createElement(xr,{className:"w-4 h-4 text-gray-400",__self:this,__source:{fileName:R,lineNumber:438,columnNumber:35}}):e.createElement(xt,{className:"w-4 h-4 text-gray-400",__self:this,__source:{fileName:R,lineNumber:440,columnNumber:35}})))))),e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:449,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:R,lineNumber:450,columnNumber:23}},"Commission Rate (%)"),e.createElement("input",{type:"number",min:"0",max:"20",step:"0.1",value:u.payments.commissionRate,onChange:g=>h("payments","commissionRate",parseFloat(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:R,lineNumber:453,columnNumber:23}}),e.createElement("p",{className:"text-sm text-gray-600 mt-1",__self:this,__source:{fileName:R,lineNumber:468,columnNumber:23}},"Platform commission charged on transactions")))),m==="notifications"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:R,lineNumber:478,columnNumber:17}},e.createElement("div",{className:"flex items-center space-x-3 mb-6",__self:this,__source:{fileName:R,lineNumber:479,columnNumber:19}},e.createElement(Ut,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:R,lineNumber:480,columnNumber:21}}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:R,lineNumber:481,columnNumber:21}},"Notification Settings")),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:R,lineNumber:486,columnNumber:19}},[{key:"emailEnabled",label:"Email Notifications",desc:"Send notifications via email"},{key:"smsEnabled",label:"SMS Notifications",desc:"Send notifications via SMS"},{key:"pushEnabled",label:"Push Notifications",desc:"Send push notifications to mobile apps"},{key:"adminNotifications",label:"Admin Notifications",desc:"Receive admin-specific notifications"}].map(g=>e.createElement("div",{key:g.key,className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",__self:this,__source:{fileName:R,lineNumber:509,columnNumber:23}},e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:513,columnNumber:25}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:R,lineNumber:514,columnNumber:27}},g.label),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:R,lineNumber:517,columnNumber:27}},g.desc)),e.createElement("label",{className:"relative inline-flex items-center cursor-pointer",__self:this,__source:{fileName:R,lineNumber:519,columnNumber:25}},e.createElement("input",{type:"checkbox",checked:u.notifications[g.key],onChange:p=>h("notifications",g.key,p.target.checked),className:"sr-only peer",__self:this,__source:{fileName:R,lineNumber:520,columnNumber:27}}),e.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600",__self:this,__source:{fileName:R,lineNumber:536,columnNumber:27}})))))),m==="fees"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:R,lineNumber:546,columnNumber:17}},e.createElement("div",{className:"flex items-center space-x-3 mb-6",__self:this,__source:{fileName:R,lineNumber:547,columnNumber:19}},e.createElement(Ye,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:R,lineNumber:548,columnNumber:21}}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:R,lineNumber:549,columnNumber:21}},"Registration Fee Configuration")),e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:R,lineNumber:554,columnNumber:19}},e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",__self:this,__source:{fileName:R,lineNumber:555,columnNumber:21}},e.createElement("div",{className:"flex items-start space-x-3",__self:this,__source:{fileName:R,lineNumber:556,columnNumber:23}},e.createElement(il,{className:"w-5 h-5 text-yellow-600 mt-1",__self:this,__source:{fileName:R,lineNumber:557,columnNumber:25}}),e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:558,columnNumber:25}},e.createElement("h4",{className:"font-medium text-yellow-800",__self:this,__source:{fileName:R,lineNumber:559,columnNumber:27}},"Important"),e.createElement("p",{className:"text-sm text-yellow-700 mt-1",__self:this,__source:{fileName:R,lineNumber:562,columnNumber:27}},"Farmers must pay the registration fee before they can register consignments. This helps maintain platform quality and covers operational costs.")))),e.createElement("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",__self:this,__source:{fileName:R,lineNumber:571,columnNumber:21}},e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:572,columnNumber:23}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:R,lineNumber:573,columnNumber:25}},"Enable Registration Fee"),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:R,lineNumber:576,columnNumber:25}},"Require farmers to pay registration fee before consignment submission")),e.createElement("label",{className:"relative inline-flex items-center cursor-pointer",__self:this,__source:{fileName:R,lineNumber:581,columnNumber:23}},e.createElement("input",{type:"checkbox",checked:u.fees.registrationFeeEnabled,onChange:g=>h("fees","registrationFeeEnabled",g.target.checked),className:"sr-only peer",__self:this,__source:{fileName:R,lineNumber:582,columnNumber:25}}),e.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600",__self:this,__source:{fileName:R,lineNumber:594,columnNumber:25}}))),u.fees.registrationFeeEnabled&&e.createElement("div",{className:"space-y-4 p-4 bg-green-50 rounded-lg border border-green-200",__self:this,__source:{fileName:R,lineNumber:599,columnNumber:23}},e.createElement("h4",{className:"font-medium text-green-900",__self:this,__source:{fileName:R,lineNumber:600,columnNumber:25}},"Registration Fee Settings"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",__self:this,__source:{fileName:R,lineNumber:604,columnNumber:25}},e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:605,columnNumber:27}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:R,lineNumber:606,columnNumber:29}},"Registration Fee Amount (KES)"),e.createElement("input",{type:"number",min:"0",step:"1",value:u.fees.farmerRegistrationFee,onChange:g=>h("fees","farmerRegistrationFee",parseInt(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:R,lineNumber:609,columnNumber:29}}),e.createElement("p",{className:"text-sm text-gray-600 mt-1",__self:this,__source:{fileName:R,lineNumber:623,columnNumber:29}},"Amount farmers must pay to register on the platform")),e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:629,columnNumber:27}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:R,lineNumber:630,columnNumber:29}},"Grace Period (Days)"),e.createElement("input",{type:"number",min:"0",max:"30",value:u.fees.gracePeriodDays,onChange:g=>h("fees","gracePeriodDays",parseInt(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:R,lineNumber:633,columnNumber:29}}),e.createElement("p",{className:"text-sm text-gray-600 mt-1",__self:this,__source:{fileName:R,lineNumber:647,columnNumber:29}},"Days to allow farmers to submit consignments before payment"))),e.createElement("div",{className:"bg-white p-4 rounded border border-green-300",__self:this,__source:{fileName:R,lineNumber:654,columnNumber:25}},e.createElement("h5",{className:"font-medium text-gray-900 mb-2",__self:this,__source:{fileName:R,lineNumber:655,columnNumber:27}},"Payment Process"),e.createElement("ol",{className:"text-sm text-gray-700 space-y-1 list-decimal list-inside",__self:this,__source:{fileName:R,lineNumber:658,columnNumber:27}},e.createElement("li",{__self:this,__source:{fileName:R,lineNumber:659,columnNumber:29}},"Farmer registers on the platform"),e.createElement("li",{__self:this,__source:{fileName:R,lineNumber:660,columnNumber:29}},"Admin sends STK push for registration fee payment"),e.createElement("li",{__self:this,__source:{fileName:R,lineNumber:663,columnNumber:29}},"Upon successful payment, farmer can submit consignments"),e.createElement("li",{__self:this,__source:{fileName:R,lineNumber:667,columnNumber:29}},"Unpaid farmers have"," ",u.fees.gracePeriodDays," days grace period")))))),m==="security"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:R,lineNumber:681,columnNumber:17}},e.createElement("div",{className:"flex items-center space-x-3 mb-6",__self:this,__source:{fileName:R,lineNumber:682,columnNumber:19}},e.createElement(pt,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:R,lineNumber:683,columnNumber:21}}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:R,lineNumber:684,columnNumber:21}},"Security Configuration")),e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:R,lineNumber:689,columnNumber:19}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:R,lineNumber:690,columnNumber:21}},e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:691,columnNumber:23}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:R,lineNumber:692,columnNumber:25}},"Minimum Password Length"),e.createElement("input",{type:"number",min:"6",max:"20",value:u.security.passwordMinLength,onChange:g=>h("security","passwordMinLength",parseInt(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:R,lineNumber:695,columnNumber:25}})),e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:711,columnNumber:23}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:R,lineNumber:712,columnNumber:25}},"Session Timeout (hours)"),e.createElement("input",{type:"number",min:"1",max:"168",value:u.security.sessionTimeout,onChange:g=>h("security","sessionTimeout",parseInt(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:R,lineNumber:715,columnNumber:25}}))),e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:732,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:R,lineNumber:733,columnNumber:23}},"Maximum Login Attempts"),e.createElement("input",{type:"number",min:"3",max:"10",value:u.security.maxLoginAttempts,onChange:g=>h("security","maxLoginAttempts",parseInt(g.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:R,lineNumber:736,columnNumber:23}})),e.createElement("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",__self:this,__source:{fileName:R,lineNumber:752,columnNumber:21}},e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:753,columnNumber:23}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:R,lineNumber:754,columnNumber:25}},"Two-Factor Authentication"),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:R,lineNumber:757,columnNumber:25}},"Require 2FA for admin accounts")),e.createElement("label",{className:"relative inline-flex items-center cursor-pointer",__self:this,__source:{fileName:R,lineNumber:761,columnNumber:23}},e.createElement("input",{type:"checkbox",checked:u.security.twoFactorRequired,onChange:g=>h("security","twoFactorRequired",g.target.checked),className:"sr-only peer",__self:this,__source:{fileName:R,lineNumber:762,columnNumber:25}}),e.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600",__self:this,__source:{fileName:R,lineNumber:774,columnNumber:25}}))))),m==="features"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:R,lineNumber:783,columnNumber:17}},e.createElement("div",{className:"flex items-center space-x-3 mb-6",__self:this,__source:{fileName:R,lineNumber:784,columnNumber:19}},e.createElement(Gt,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:R,lineNumber:785,columnNumber:21}}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:R,lineNumber:786,columnNumber:21}},"Platform Features")),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:R,lineNumber:791,columnNumber:19}},[{key:"consignmentApprovalRequired",label:"Require Consignment Approval",desc:"Admin approval required for all consignments"},{key:"autoDriverAssignment",label:"Auto Driver Assignment",desc:"Automatically assign drivers to deliveries"},{key:"inventoryTracking",label:"Inventory Tracking",desc:"Track product inventory levels"},{key:"priceModeration",label:"Price Moderation",desc:"Review and moderate product prices"}].map(g=>e.createElement("div",{key:g.key,className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",__self:this,__source:{fileName:R,lineNumber:814,columnNumber:23}},e.createElement("div",{__self:this,__source:{fileName:R,lineNumber:818,columnNumber:25}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:R,lineNumber:819,columnNumber:27}},g.label),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:R,lineNumber:822,columnNumber:27}},g.desc)),e.createElement("label",{className:"relative inline-flex items-center cursor-pointer",__self:this,__source:{fileName:R,lineNumber:824,columnNumber:25}},e.createElement("input",{type:"checkbox",checked:u.features[g.key],onChange:p=>h("features",g.key,p.target.checked),className:"sr-only peer",__self:this,__source:{fileName:R,lineNumber:825,columnNumber:27}}),e.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600",__self:this,__source:{fileName:R,lineNumber:841,columnNumber:27}})))))))))))}var d="/app/code/frontend/src/pages/admin/MarketplaceManagementPage.tsx";function Gu(){const{token:t}=Ae(),[r,l]=P.useState("products"),[s,a]=P.useState(!0),[m,n]=P.useState([]),[i,b]=P.useState([]),[u,_]=P.useState([]),[o,f]=P.useState([]),[h,w]=P.useState(""),[g,p]=P.useState("all"),[S,E]=P.useState("all"),[M,I]=P.useState(!1),[B,q]=P.useState(null),[le,F]=P.useState(null),[C,c]=P.useState({name:"",category:"",price_per_unit:"",unit:"kg",description:"",stock_quantity:"",is_featured:!1,farmer_name:"Admin",farmer_county:"Central",images:[]}),[x,Q]=P.useState({totalProducts:0,activeProducts:0,totalOrders:0,pendingOrders:0,totalRevenue:0,unpaidOrders:0});P.useEffect(()=>{re()},[r]),P.useEffect(()=>{Ee()},[h,g,S,m,i]);const re=async()=>{a(!0);try{r==="products"?await Ne():r==="orders"&&await he()}finally{a(!1)}},Ne=async()=>{try{console.log(" Fetching marketplace products (refresh)");const U=await me.get("/api/admin/marketplace/products",{headers:{Authorization:`Bearer ${t}`}});if(U.data.success){const be=U.data.products;console.log(" Setting new product data:",be),n(be),Q(ve=>({...ve,totalProducts:be.length,activeProducts:be.filter(Me=>Me.is_active).length})),console.log(" Products state updated successfully")}}catch(U){console.error(" Error fetching products:",U),L.error("Failed to fetch products")}},he=async()=>{try{console.log(" Fetching orders");const U=await me.get("/api/admin/orders",{headers:{Authorization:`Bearer ${t}`}});if(U.data.success){const be=U.data.orders;b(be);const ve=be.filter(Me=>Me.payment_status==="PAID").reduce((Me,je)=>Me+je.total_amount,0);Q(Me=>({...Me,totalOrders:be.length,pendingOrders:be.filter(je=>je.status==="PENDING").length,totalRevenue:ve,unpaidOrders:be.filter(je=>je.payment_status==="UNPAID").length})),console.log(" Orders loaded:",be)}}catch(U){console.error(" Error fetching orders:",U),L.error("Failed to fetch orders")}},Ee=()=>{if(r==="products"){let U=m.filter(be=>{const ve=be.name.toLowerCase().includes(h.toLowerCase())||be.description.toLowerCase().includes(h.toLowerCase()),Me=g==="all"||g==="active"&&be.is_active||g==="inactive"&&!be.is_active,je=S==="all"||be.category===S;return ve&&Me&&je});_(U)}else if(r==="orders"){let U=i.filter(be=>{const ve=be.first_name?.toLowerCase().includes(h.toLowerCase())||be.last_name?.toLowerCase().includes(h.toLowerCase())||be.customer_phone.includes(h)||be.customer_email?.toLowerCase().includes(h.toLowerCase()),Me=g==="all"||be.status===g;return ve&&Me});f(U)}},Re=async U=>{if(U.preventDefault(),!C.name||!C.category||!C.price_per_unit){L.error("Please fill in all required fields");return}try{const be={...C,price_per_unit:parseFloat(C.price_per_unit),stock_quantity:parseInt(C.stock_quantity)||0};console.log(" Saving product data:",be),console.log(" Editing existing product:",B?.id);let ve;B?(ve=await me.put(`/api/admin/marketplace/products/${B.id}`,be,{headers:{Authorization:`Bearer ${t}`}}),L.success("Product updated successfully")):(ve=await me.post("/api/admin/marketplace/products",be,{headers:{Authorization:`Bearer ${t}`}}),L.success("Product created successfully")),ve.data.success?(console.log(" Product update response:",ve.data),I(!1),q(null),Ke(),await Ne()):(console.error(" Product update failed:",ve.data),L.error(ve.data.message||"Failed to save product"))}catch(be){console.error(" Error saving product:",be),be.response?.data?.message?L.error(be.response.data.message):L.error("Failed to save product")}},Le=async U=>{if(confirm("Are you sure you want to delete this product?"))try{await me.delete(`/api/admin/marketplace/products/${U}`,{headers:{Authorization:`Bearer ${t}`}}),L.success("Product deleted successfully"),Ne()}catch(be){console.error(" Error deleting product:",be),L.error("Failed to delete product")}},qe=U=>{console.log(" Editing product:",U),q(U),c({name:U.name,category:U.category,price_per_unit:U.price_per_unit.toString(),unit:U.unit,description:U.description||"",stock_quantity:U.stock_quantity.toString(),is_featured:U.is_featured||!1,farmer_name:U.farmer_name||"Admin",farmer_county:U.farmer_county||"Central",images:U.images||[]}),I(!0)},Ke=()=>{c({name:"",category:"",price_per_unit:"",unit:"kg",description:"",stock_quantity:"",is_featured:!1,farmer_name:"Admin",farmer_county:"Central",images:[]})},at=async U=>{try{(await me.post(`/api/admin/orders/${U.id}/stk-push`,{phone_number:U.customer_phone,amount:U.total_amount},{headers:{Authorization:`Bearer ${t}`}})).data.success&&(L.success("STK push initiated successfully"),he())}catch(be){console.error(" Error initiating STK push:",be),L.error("Failed to initiate STK push")}},St=async U=>{try{const be=await me.get(`/api/admin/orders/${U.id}/invoice`,{headers:{Authorization:`Bearer ${t}`}});if(be.data.success){const ve=be.data.invoice,Me=window.open("","_blank");Me&&(Me.document.write(`
            <html>
              <head>
                <title>Invoice ${ve.invoice_number}</title>
                <style>
                  body { font-family: Arial, sans-serif; margin: 20px; }
                  .header { text-align: center; margin-bottom: 30px; }
                  .invoice-details { margin-bottom: 20px; }
                  .customer-info { margin-bottom: 20px; }
                  table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
                  th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
                  th { background-color: #f2f2f2; }
                  .total { font-weight: bold; font-size: 18px; }
                  .footer { margin-top: 30px; text-align: center; color: #666; }
                </style>
              </head>
              <body>
                <div class="header">
                  <h1>Zuasoko Agricultural Platform</h1>
                  <h2>Invoice ${ve.invoice_number}</h2>
                </div>
                
                <div class="invoice-details">
                  <p><strong>Order ID:</strong> ${ve.order_id}</p>
                  <p><strong>Date:</strong> ${new Date(ve.created_at).toLocaleDateString()}</p>
                  <p><strong>Due Date:</strong> ${new Date(ve.due_date).toLocaleDateString()}</p>
                  <p><strong>Status:</strong> ${ve.payment_status}</p>
                </div>
                
                <div class="customer-info">
                  <h3>Customer Information</h3>
                  <p><strong>Name:</strong> ${ve.customer.name}</p>
                  <p><strong>Phone:</strong> ${ve.customer.phone}</p>
                  <p><strong>Email:</strong> ${ve.customer.email}</p>
                  <p><strong>County:</strong> ${ve.customer.county}</p>
                </div>
                
                <table>
                  <thead>
                    <tr>
                      <th>Product</th>
                      <th>Quantity</th>
                      <th>Unit Price</th>
                      <th>Total</th>
                    </tr>
                  </thead>
                  <tbody>
                    ${ve.items.map(je=>`
                      <tr>
                        <td>${je.product_name}</td>
                        <td>${je.quantity}</td>
                        <td>KSh ${je.unit_price?.toLocaleString()}</td>
                        <td>KSh ${(je.total||je.quantity*je.unit_price)?.toLocaleString()}</td>
                      </tr>
                    `).join("")}
                  </tbody>
                  <tfoot>
                    <tr class="total">
                      <td colspan="3"><strong>Total Amount</strong></td>
                      <td><strong>KSh ${ve.total_amount.toLocaleString()}</strong></td>
                    </tr>
                  </tfoot>
                </table>
                
                <div class="footer">
                  <p>Thank you for your business!</p>
                  <p>For any inquiries, contact us at support@zuasoko.com</p>
                </div>
              </body>
            </html>
          `),Me.document.close(),Me.print()),L.success("Invoice generated successfully")}}catch(be){console.error(" Error generating invoice:",be),L.error("Failed to generate invoice")}},Ct=["Vegetables","Fruits","Grains","Leafy Greens","Root Vegetables","Herbs"],Ze=["kg","pieces","bunches","bags","boxes"];return s?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:d,lineNumber:477,columnNumber:7}},e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:d,lineNumber:478,columnNumber:9}},e.createElement(qt,{className:"w-5 h-5 animate-spin text-green-600",__self:this,__source:{fileName:d,lineNumber:479,columnNumber:11}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:480,columnNumber:11}},"Loading marketplace data..."))):e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:d,lineNumber:487,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:d,lineNumber:488,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:d,lineNumber:490,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:d,lineNumber:491,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:492,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:d,lineNumber:493,columnNumber:15}},"Marketplace Management"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:d,lineNumber:496,columnNumber:15}},"Manage products, orders, and marketplace operations")),e.createElement("div",{className:"flex items-center space-x-4",__self:this,__source:{fileName:d,lineNumber:500,columnNumber:13}},e.createElement("button",{onClick:re,className:"bg-gray-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700 flex items-center space-x-2",__self:this,__source:{fileName:d,lineNumber:501,columnNumber:15}},e.createElement(qt,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:505,columnNumber:17}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:506,columnNumber:17}},"Refresh")),r==="products"&&e.createElement("button",{onClick:()=>{Ke(),q(null),I(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 flex items-center space-x-2",__self:this,__source:{fileName:d,lineNumber:509,columnNumber:17}},e.createElement($t,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:517,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:518,columnNumber:19}},"Add Product"))))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:d,lineNumber:526,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:d,lineNumber:527,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:d,lineNumber:528,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:d,lineNumber:529,columnNumber:15}},e.createElement(ge,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:d,lineNumber:530,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:d,lineNumber:532,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:533,columnNumber:17}},x.totalProducts),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:d,lineNumber:536,columnNumber:17}},"Total Products")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:d,lineNumber:541,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:d,lineNumber:542,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:d,lineNumber:543,columnNumber:15}},e.createElement(Fe,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:d,lineNumber:544,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:d,lineNumber:546,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:547,columnNumber:17}},x.activeProducts),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:d,lineNumber:550,columnNumber:17}},"Active Products")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:d,lineNumber:555,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:d,lineNumber:556,columnNumber:13}},e.createElement("div",{className:"p-3 bg-purple-100 rounded-lg",__self:this,__source:{fileName:d,lineNumber:557,columnNumber:15}},e.createElement(gt,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:d,lineNumber:558,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:d,lineNumber:560,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:561,columnNumber:17}},x.totalOrders),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:d,lineNumber:564,columnNumber:17}},"Total Orders")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:d,lineNumber:569,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:d,lineNumber:570,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:d,lineNumber:571,columnNumber:15}},e.createElement(Ye,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:d,lineNumber:572,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:d,lineNumber:574,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:575,columnNumber:17}},"KSh ",x.totalRevenue.toLocaleString()),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:d,lineNumber:578,columnNumber:17}},"Total Revenue"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8",__self:this,__source:{fileName:d,lineNumber:585,columnNumber:9}},e.createElement("div",{className:"border-b border-gray-200",__self:this,__source:{fileName:d,lineNumber:586,columnNumber:11}},e.createElement("nav",{className:"flex",__self:this,__source:{fileName:d,lineNumber:587,columnNumber:13}},[{id:"products",label:"Products",icon:ge},{id:"orders",label:"Orders",icon:gt}].map(U=>e.createElement("button",{key:U.id,onClick:()=>l(U.id),className:`flex items-center space-x-2 px-6 py-4 border-b-2 font-medium text-sm ${r===U.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,__self:this,__source:{fileName:d,lineNumber:592,columnNumber:17}},e.createElement(U.icon,{className:"w-5 h-5",__self:this,__source:{fileName:d,lineNumber:601,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:602,columnNumber:19}},U.label))))),e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:d,lineNumber:609,columnNumber:11}},e.createElement("div",{className:"flex flex-col sm:flex-row gap-4",__self:this,__source:{fileName:d,lineNumber:610,columnNumber:13}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:d,lineNumber:611,columnNumber:15}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:d,lineNumber:612,columnNumber:17}},e.createElement(nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4",__self:this,__source:{fileName:d,lineNumber:613,columnNumber:19}}),e.createElement("input",{type:"text",placeholder:r==="products"?"Search products...":"Search orders...",value:h,onChange:U=>w(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:d,lineNumber:614,columnNumber:19}}))),e.createElement("div",{className:"flex gap-4",__self:this,__source:{fileName:d,lineNumber:628,columnNumber:15}},e.createElement("select",{value:g,onChange:U=>p(U.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:d,lineNumber:629,columnNumber:17}},e.createElement("option",{value:"all",__self:this,__source:{fileName:d,lineNumber:634,columnNumber:19}},"All Status"),r==="products"?e.createElement(e.Fragment,null,e.createElement("option",{value:"active",__self:this,__source:{fileName:d,lineNumber:637,columnNumber:23}},"Active"),e.createElement("option",{value:"inactive",__self:this,__source:{fileName:d,lineNumber:638,columnNumber:23}},"Inactive")):e.createElement(e.Fragment,null,e.createElement("option",{value:"PENDING",__self:this,__source:{fileName:d,lineNumber:642,columnNumber:23}},"Pending"),e.createElement("option",{value:"COMPLETED",__self:this,__source:{fileName:d,lineNumber:643,columnNumber:23}},"Completed"),e.createElement("option",{value:"CANCELLED",__self:this,__source:{fileName:d,lineNumber:644,columnNumber:23}},"Cancelled"))),r==="products"&&e.createElement("select",{value:S,onChange:U=>E(U.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:d,lineNumber:650,columnNumber:19}},e.createElement("option",{value:"all",__self:this,__source:{fileName:d,lineNumber:655,columnNumber:21}},"All Categories"),Ct.map(U=>e.createElement("option",{key:U,value:U,__self:this,__source:{fileName:d,lineNumber:657,columnNumber:23}},U)))))),r==="products"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:d,lineNumber:669,columnNumber:13}},u.length===0?e.createElement("div",{className:"text-center py-12",__self:this,__source:{fileName:d,lineNumber:671,columnNumber:17}},e.createElement(ge,{className:"w-12 h-12 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:d,lineNumber:672,columnNumber:19}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:d,lineNumber:673,columnNumber:19}},"No products found"),e.createElement("p",{className:"text-gray-600 mb-4",__self:this,__source:{fileName:d,lineNumber:676,columnNumber:19}},h||g!=="all"||S!=="all"?"Try adjusting your search or filters":"Get started by adding your first product"),e.createElement("button",{onClick:()=>{Ke(),q(null),I(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700",__self:this,__source:{fileName:d,lineNumber:683,columnNumber:19}},"Add Product")):e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",__self:this,__source:{fileName:d,lineNumber:695,columnNumber:17}},u.map(U=>e.createElement("div",{key:U.id,className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",__self:this,__source:{fileName:d,lineNumber:697,columnNumber:21}},e.createElement("div",{className:"h-48 bg-gray-100 flex items-center justify-center",__self:this,__source:{fileName:d,lineNumber:701,columnNumber:23}},U.images&&U.images.length>0?e.createElement("img",{src:U.images[0],alt:U.name,className:"w-full h-full object-cover",__self:this,__source:{fileName:d,lineNumber:703,columnNumber:27}}):e.createElement("div",{className:"text-center",__self:this,__source:{fileName:d,lineNumber:709,columnNumber:27}},e.createElement(Yr,{className:"w-12 h-12 text-gray-400 mx-auto mb-2",__self:this,__source:{fileName:d,lineNumber:710,columnNumber:29}}),e.createElement("p",{className:"text-gray-500 text-sm",__self:this,__source:{fileName:d,lineNumber:711,columnNumber:29}},"No image"))),e.createElement("div",{className:"p-4",__self:this,__source:{fileName:d,lineNumber:716,columnNumber:23}},e.createElement("div",{className:"flex items-start justify-between mb-2",__self:this,__source:{fileName:d,lineNumber:717,columnNumber:25}},e.createElement("h3",{className:"font-semibold text-gray-900 line-clamp-2",__self:this,__source:{fileName:d,lineNumber:718,columnNumber:27}},U.name),U.is_featured&&e.createElement(mr,{className:"w-4 h-4 text-yellow-500 fill-current flex-shrink-0 ml-2",__self:this,__source:{fileName:d,lineNumber:722,columnNumber:29}})),e.createElement("p",{className:"text-sm text-gray-600 mb-2",__self:this,__source:{fileName:d,lineNumber:726,columnNumber:25}},U.category),e.createElement("p",{className:"text-sm text-gray-700 mb-3 line-clamp-2",__self:this,__source:{fileName:d,lineNumber:729,columnNumber:25}},U.description),e.createElement("div",{className:"flex items-center justify-between mb-3",__self:this,__source:{fileName:d,lineNumber:733,columnNumber:25}},e.createElement("span",{className:"text-lg font-semibold text-green-600",__self:this,__source:{fileName:d,lineNumber:734,columnNumber:27}},"KSh ",U.price_per_unit.toLocaleString(),"/",U.unit),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:d,lineNumber:738,columnNumber:27}},"Stock: ",U.stock_quantity)),e.createElement("div",{className:"flex items-center justify-between mb-4",__self:this,__source:{fileName:d,lineNumber:743,columnNumber:25}},e.createElement("span",{className:`px-2 py-1 rounded-full text-xs ${U.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,__self:this,__source:{fileName:d,lineNumber:744,columnNumber:27}},U.is_active?"Active":"Inactive"),e.createElement("span",{className:"text-xs text-gray-500",__self:this,__source:{fileName:d,lineNumber:753,columnNumber:27}},U.farmer_name)),e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:d,lineNumber:758,columnNumber:25}},e.createElement("button",{onClick:()=>qe(U),className:"flex-1 bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700 flex items-center justify-center space-x-1",__self:this,__source:{fileName:d,lineNumber:759,columnNumber:27}},e.createElement(tm,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:763,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:764,columnNumber:29}},"Edit")),e.createElement("button",{onClick:()=>Le(U.id),className:"flex-1 bg-red-600 text-white px-3 py-2 rounded text-sm hover:bg-red-700 flex items-center justify-center space-x-1",__self:this,__source:{fileName:d,lineNumber:766,columnNumber:27}},e.createElement(wl,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:770,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:771,columnNumber:29}},"Delete")))))))),r==="orders"&&e.createElement("div",{className:"p-6",__self:this,__source:{fileName:d,lineNumber:784,columnNumber:13}},o.length===0?e.createElement("div",{className:"text-center py-12",__self:this,__source:{fileName:d,lineNumber:786,columnNumber:17}},e.createElement(gt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:d,lineNumber:787,columnNumber:19}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:d,lineNumber:788,columnNumber:19}},"No orders found"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:d,lineNumber:791,columnNumber:19}},h||g!=="all"?"Try adjusting your search or filters":"Orders will appear here once customers start placing them")):e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:d,lineNumber:798,columnNumber:17}},o.map(U=>e.createElement("div",{key:U.id,className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",__self:this,__source:{fileName:d,lineNumber:800,columnNumber:21}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",__self:this,__source:{fileName:d,lineNumber:804,columnNumber:23}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:d,lineNumber:805,columnNumber:25}},e.createElement("div",{className:"flex items-center space-x-4 mb-2",__self:this,__source:{fileName:d,lineNumber:806,columnNumber:27}},e.createElement("h3",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:807,columnNumber:29}},"Order #",U.id),e.createElement("span",{className:`px-2 py-1 rounded-full text-xs ${U.status==="COMPLETED"?"bg-green-100 text-green-800":U.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,__self:this,__source:{fileName:d,lineNumber:810,columnNumber:29}},U.status),e.createElement("span",{className:`px-2 py-1 rounded-full text-xs ${U.payment_status==="PAID"?"bg-green-100 text-green-800":U.payment_status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,__self:this,__source:{fileName:d,lineNumber:821,columnNumber:29}},U.payment_status)),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",__self:this,__source:{fileName:d,lineNumber:834,columnNumber:27}},e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:835,columnNumber:29}},e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:836,columnNumber:31}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:837,columnNumber:33}},"Customer:")," ",U.first_name," ",U.last_name),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:840,columnNumber:31}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:841,columnNumber:33}},"Phone:")," ",U.customer_phone)),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:844,columnNumber:29}},e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:845,columnNumber:31}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:846,columnNumber:33}},"Email:")," ",U.customer_email),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:848,columnNumber:31}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:849,columnNumber:33}},"Amount:")," KSh"," ",U.total_amount.toLocaleString())),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:853,columnNumber:29}},e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:854,columnNumber:31}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:855,columnNumber:33}},"Date:")," ",new Date(U.created_at).toLocaleDateString()),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:860,columnNumber:31}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:861,columnNumber:33}},"Items:")," ",U.items?.length||0," products")))),e.createElement("div",{className:"flex flex-col sm:flex-row gap-2",__self:this,__source:{fileName:d,lineNumber:868,columnNumber:25}},e.createElement("button",{onClick:()=>F(U),className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 flex items-center space-x-1",__self:this,__source:{fileName:d,lineNumber:869,columnNumber:27}},e.createElement(xt,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:873,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:874,columnNumber:29}},"Details")),e.createElement("button",{onClick:()=>St(U),className:"bg-gray-600 text-white px-4 py-2 rounded text-sm hover:bg-gray-700 flex items-center space-x-1",__self:this,__source:{fileName:d,lineNumber:877,columnNumber:27}},e.createElement(Kl,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:881,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:882,columnNumber:29}},"Invoice")),U.payment_status==="UNPAID"&&e.createElement("button",{onClick:()=>at(U),className:"bg-green-600 text-white px-4 py-2 rounded text-sm hover:bg-green-700 flex items-center space-x-1",__self:this,__source:{fileName:d,lineNumber:886,columnNumber:29}},e.createElement(wr,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:890,columnNumber:31}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:891,columnNumber:31}},"STK Push")))))))))),M&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",__self:this,__source:{fileName:d,lineNumber:907,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",__self:this,__source:{fileName:d,lineNumber:908,columnNumber:11}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:d,lineNumber:909,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:d,lineNumber:910,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:911,columnNumber:17}},B?"Edit Product":"Add New Product"),e.createElement("button",{onClick:()=>{I(!1),q(null),Ke()},className:"text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:d,lineNumber:914,columnNumber:17}},e.createElement(Je,{className:"w-6 h-6",__self:this,__source:{fileName:d,lineNumber:922,columnNumber:19}})))),e.createElement("form",{onSubmit:Re,className:"p-6 space-y-6",__self:this,__source:{fileName:d,lineNumber:927,columnNumber:13}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:d,lineNumber:928,columnNumber:15}},e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:929,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:930,columnNumber:19}},"Product Name *"),e.createElement("input",{type:"text",required:!0,value:C.name,onChange:U=>c({...C,name:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter product name",__self:this,__source:{fileName:d,lineNumber:933,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:945,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:946,columnNumber:19}},"Category *"),e.createElement("select",{required:!0,value:C.category,onChange:U=>c({...C,category:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:d,lineNumber:949,columnNumber:19}},e.createElement("option",{value:"",__self:this,__source:{fileName:d,lineNumber:957,columnNumber:21}},"Select category"),Ct.map(U=>e.createElement("option",{key:U,value:U,__self:this,__source:{fileName:d,lineNumber:959,columnNumber:23}},U)))),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:966,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:967,columnNumber:19}},"Price per Unit *"),e.createElement("input",{type:"number",required:!0,min:"0",step:"0.01",value:C.price_per_unit,onChange:U=>c({...C,price_per_unit:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0.00",__self:this,__source:{fileName:d,lineNumber:970,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:987,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:988,columnNumber:19}},"Unit"),e.createElement("select",{value:C.unit,onChange:U=>c({...C,unit:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:d,lineNumber:991,columnNumber:19}},Ze.map(U=>e.createElement("option",{key:U,value:U,__self:this,__source:{fileName:d,lineNumber:999,columnNumber:23}},U)))),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1006,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:1007,columnNumber:19}},"Stock Quantity"),e.createElement("input",{type:"number",min:"0",value:C.stock_quantity,onChange:U=>c({...C,stock_quantity:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0",__self:this,__source:{fileName:d,lineNumber:1010,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1025,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:1026,columnNumber:19}},"Farmer County"),e.createElement("input",{type:"text",value:C.farmer_county,onChange:U=>c({...C,farmer_county:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"County",__self:this,__source:{fileName:d,lineNumber:1029,columnNumber:19}}))),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1044,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:1045,columnNumber:17}},"Description"),e.createElement("textarea",{rows:4,value:C.description,onChange:U=>c({...C,description:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter product description",__self:this,__source:{fileName:d,lineNumber:1048,columnNumber:17}})),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1060,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:d,lineNumber:1061,columnNumber:17}},"Product Images"),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:d,lineNumber:1064,columnNumber:17}},C.images.length>0&&e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",__self:this,__source:{fileName:d,lineNumber:1067,columnNumber:21}},C.images.map((U,be)=>e.createElement("div",{key:be,className:"relative group",__self:this,__source:{fileName:d,lineNumber:1069,columnNumber:25}},e.createElement("img",{src:U,alt:`Product ${be+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-200",__self:this,__source:{fileName:d,lineNumber:1070,columnNumber:27}}),e.createElement("button",{type:"button",onClick:()=>{const ve=C.images.filter((Me,je)=>je!==be);c({...C,images:ve})},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity",__self:this,__source:{fileName:d,lineNumber:1075,columnNumber:27}},"")))),e.createElement("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",__self:this,__source:{fileName:d,lineNumber:1091,columnNumber:19}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:d,lineNumber:1092,columnNumber:21}},e.createElement(Yr,{className:"mx-auto h-12 w-12 text-gray-400",__self:this,__source:{fileName:d,lineNumber:1093,columnNumber:23}}),e.createElement("div",{className:"mt-4",__self:this,__source:{fileName:d,lineNumber:1094,columnNumber:23}},e.createElement("button",{type:"button",onClick:()=>{const U=prompt("Enter image URL:");U&&U.trim()&&c({...C,images:[...C.images,U.trim()]})},className:"bg-white px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-500",__self:this,__source:{fileName:d,lineNumber:1095,columnNumber:25}},e.createElement($t,{className:"w-4 h-4 inline mr-2",__self:this,__source:{fileName:d,lineNumber:1108,columnNumber:27}}),"Add Image URL")),e.createElement("p",{className:"text-xs text-gray-500 mt-2",__self:this,__source:{fileName:d,lineNumber:1112,columnNumber:23}},"Enter the URL of the product image"))),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",__self:this,__source:{fileName:d,lineNumber:1119,columnNumber:19}},e.createElement("div",{className:"flex",__self:this,__source:{fileName:d,lineNumber:1120,columnNumber:21}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:d,lineNumber:1121,columnNumber:23}},e.createElement(Yr,{className:"h-5 w-5 text-blue-400",__self:this,__source:{fileName:d,lineNumber:1122,columnNumber:25}})),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:d,lineNumber:1124,columnNumber:23}},e.createElement("h3",{className:"text-sm font-medium text-blue-800",__self:this,__source:{fileName:d,lineNumber:1125,columnNumber:25}},"Image Guidelines"),e.createElement("div",{className:"mt-2 text-sm text-blue-700",__self:this,__source:{fileName:d,lineNumber:1128,columnNumber:25}},e.createElement("ul",{className:"list-disc pl-5 space-y-1",__self:this,__source:{fileName:d,lineNumber:1129,columnNumber:27}},e.createElement("li",{__self:this,__source:{fileName:d,lineNumber:1130,columnNumber:29}},"Use high-quality images (minimum 800x800 pixels)"),e.createElement("li",{__self:this,__source:{fileName:d,lineNumber:1131,columnNumber:29}},"Ensure images clearly show the product"),e.createElement("li",{__self:this,__source:{fileName:d,lineNumber:1132,columnNumber:29}},"First image will be used as the main product image"),e.createElement("li",{__self:this,__source:{fileName:d,lineNumber:1133,columnNumber:29}},"You can add multiple images to showcase different angles")))))))),e.createElement("div",{className:"flex items-center space-x-4",__self:this,__source:{fileName:d,lineNumber:1142,columnNumber:15}},e.createElement("label",{className:"flex items-center",__self:this,__source:{fileName:d,lineNumber:1143,columnNumber:17}},e.createElement("input",{type:"checkbox",checked:C.is_featured,onChange:U=>c({...C,is_featured:U.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500",__self:this,__source:{fileName:d,lineNumber:1144,columnNumber:19}}),e.createElement("span",{className:"ml-2 text-sm text-gray-700",__self:this,__source:{fileName:d,lineNumber:1155,columnNumber:19}},"Featured Product"))),e.createElement("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",__self:this,__source:{fileName:d,lineNumber:1161,columnNumber:15}},e.createElement("button",{type:"button",onClick:()=>{I(!1),q(null),Ke()},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",__self:this,__source:{fileName:d,lineNumber:1162,columnNumber:17}},"Cancel"),e.createElement("button",{type:"submit",className:"bg-green-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-green-700 flex items-center space-x-2",__self:this,__source:{fileName:d,lineNumber:1173,columnNumber:17}},e.createElement(vl,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:1177,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:1178,columnNumber:19}},B?"Update":"Create"," Product")))))),le&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",__self:this,__source:{fileName:d,lineNumber:1188,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",__self:this,__source:{fileName:d,lineNumber:1189,columnNumber:11}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:d,lineNumber:1190,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:d,lineNumber:1191,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:d,lineNumber:1192,columnNumber:17}},"Order #",le.id," Details"),e.createElement("button",{onClick:()=>F(null),className:"text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:d,lineNumber:1195,columnNumber:17}},e.createElement(Je,{className:"w-6 h-6",__self:this,__source:{fileName:d,lineNumber:1199,columnNumber:19}})))),e.createElement("div",{className:"p-6 space-y-6",__self:this,__source:{fileName:d,lineNumber:1204,columnNumber:13}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:d,lineNumber:1205,columnNumber:15}},e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1206,columnNumber:17}},e.createElement("h3",{className:"font-semibold text-gray-900 mb-3",__self:this,__source:{fileName:d,lineNumber:1207,columnNumber:19}},"Customer Information"),e.createElement("div",{className:"space-y-2 text-sm",__self:this,__source:{fileName:d,lineNumber:1210,columnNumber:19}},e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1211,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1212,columnNumber:23}},"Name:")," ",le.first_name," ",le.last_name),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1215,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1216,columnNumber:23}},"Phone:")," ",le.customer_phone),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1218,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1219,columnNumber:23}},"Email:")," ",le.customer_email))),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1224,columnNumber:17}},e.createElement("h3",{className:"font-semibold text-gray-900 mb-3",__self:this,__source:{fileName:d,lineNumber:1225,columnNumber:19}},"Order Information"),e.createElement("div",{className:"space-y-2 text-sm",__self:this,__source:{fileName:d,lineNumber:1228,columnNumber:19}},e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1229,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1230,columnNumber:23}},"Status:"),e.createElement("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${le.status==="COMPLETED"?"bg-green-100 text-green-800":le.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,__self:this,__source:{fileName:d,lineNumber:1231,columnNumber:23}},le.status)),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1243,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1244,columnNumber:23}},"Payment:"),e.createElement("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${le.payment_status==="PAID"?"bg-green-100 text-green-800":le.payment_status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,__self:this,__source:{fileName:d,lineNumber:1245,columnNumber:23}},le.payment_status)),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1257,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1258,columnNumber:23}},"Date:")," ",new Date(le.created_at).toLocaleDateString()),e.createElement("p",{__self:this,__source:{fileName:d,lineNumber:1263,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:d,lineNumber:1264,columnNumber:23}},"Total:")," KSh"," ",le.total_amount.toLocaleString())))),e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1271,columnNumber:15}},e.createElement("h3",{className:"font-semibold text-gray-900 mb-3",__self:this,__source:{fileName:d,lineNumber:1272,columnNumber:17}},"Order Items"),le.items&&le.items.length>0?e.createElement("div",{className:"space-y-2",__self:this,__source:{fileName:d,lineNumber:1276,columnNumber:19}},le.items.map((U,be)=>e.createElement("div",{key:be,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",__self:this,__source:{fileName:d,lineNumber:1278,columnNumber:23}},e.createElement("div",{__self:this,__source:{fileName:d,lineNumber:1282,columnNumber:25}},e.createElement("p",{className:"font-medium",__self:this,__source:{fileName:d,lineNumber:1283,columnNumber:27}},U.product_name),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:d,lineNumber:1284,columnNumber:27}},"Quantity: ",U.quantity)),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:d,lineNumber:1288,columnNumber:25}},e.createElement("p",{className:"font-medium",__self:this,__source:{fileName:d,lineNumber:1289,columnNumber:27}},"KSh"," ",(U.unit_price*U.quantity).toLocaleString()),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:d,lineNumber:1293,columnNumber:27}},"@ KSh ",U.unit_price,"/unit"))))):e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:d,lineNumber:1301,columnNumber:19}},"No items available")),e.createElement("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",__self:this,__source:{fileName:d,lineNumber:1305,columnNumber:15}},e.createElement("button",{onClick:()=>St(le),className:"bg-gray-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700 flex items-center space-x-2",__self:this,__source:{fileName:d,lineNumber:1306,columnNumber:17}},e.createElement(Kl,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:1310,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:1311,columnNumber:19}},"Generate Invoice")),le.payment_status==="UNPAID"&&e.createElement("button",{onClick:()=>{at(le),F(null)},className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 flex items-center space-x-2",__self:this,__source:{fileName:d,lineNumber:1315,columnNumber:19}},e.createElement(wr,{className:"w-4 h-4",__self:this,__source:{fileName:d,lineNumber:1322,columnNumber:21}}),e.createElement("span",{__self:this,__source:{fileName:d,lineNumber:1323,columnNumber:21}},"Send STK Push")))))))}var Z="/app/code/frontend/src/pages/admin/RegistrationFeesPage.tsx";function zu(){const{token:t}=Ae(),[r,l]=P.useState(!0),[s,a]=P.useState([]),[m,n]=P.useState([]),[i,b]=P.useState(""),[u,_]=P.useState("all"),[o,f]=P.useState({farmerRegistrationFee:300,registrationFeeEnabled:!0,gracePeriodDays:7}),[h,w]=P.useState({totalUnpaid:0,withinGracePeriod:0,overdue:0,totalOutstanding:0});P.useEffect(()=>{g()},[]),P.useEffect(()=>{p()},[i,u,s]);const g=async()=>{l(!0);try{console.log(" Fetching unpaid farmers data");const M=await me.get("/api/admin/settings",{headers:{Authorization:`Bearer ${t}`}});M.data.success&&M.data.settings.fees&&f(M.data.settings.fees);const I=await me.get("/api/admin/registration-fees/unpaid",{headers:{Authorization:`Bearer ${t}`}});if(I.data.success){const B=I.data.farmers;a(B);const q=B.length,le=B.filter(c=>c.gracePeriodRemaining>0).length,F=B.filter(c=>c.gracePeriodRemaining<=0).length,C=B.length*o.farmerRegistrationFee;w({totalUnpaid:q,withinGracePeriod:le,overdue:F,totalOutstanding:C}),console.log(" Unpaid farmers loaded:",B)}}catch(M){console.error(" Error fetching unpaid farmers:",M);const I=[{id:"farmer-001",firstName:"John",lastName:"Kimani",email:"john@example.com",phone:"+254712345678",county:"Nakuru",registrationFeePaid:!1,registeredAt:new Date(Date.now()-5*24*60*60*1e3).toISOString(),daysSinceRegistration:5,gracePeriodRemaining:2,consignmentCount:0},{id:"farmer-002",firstName:"Mary",lastName:"Wanjiku",email:"mary@example.com",phone:"+254723456789",county:"Meru",registrationFeePaid:!1,registeredAt:new Date(Date.now()-10*24*60*60*1e3).toISOString(),daysSinceRegistration:10,gracePeriodRemaining:-3,consignmentCount:2},{id:"farmer-003",firstName:"Peter",lastName:"Mwangi",email:"peter@example.com",phone:"+254734567890",county:"Kiambu",registrationFeePaid:!1,registeredAt:new Date(Date.now()-3*24*60*60*1e3).toISOString(),daysSinceRegistration:3,gracePeriodRemaining:4,consignmentCount:1}];a(I),w({totalUnpaid:3,withinGracePeriod:2,overdue:1,totalOutstanding:900}),L.error("Failed to fetch data, showing demo")}finally{l(!1)}},p=()=>{let M=s.filter(I=>{const B=I.firstName.toLowerCase().includes(i.toLowerCase())||I.lastName.toLowerCase().includes(i.toLowerCase())||I.phone.includes(i)||I.email.toLowerCase().includes(i.toLowerCase()),q=u==="all"||u==="grace"&&I.gracePeriodRemaining>0||u==="overdue"&&I.gracePeriodRemaining<=0;return B&&q});n(M)},S=async M=>{try{console.log(` Initiating STK push for farmer ${M.id}`);const I=await me.post("/api/admin/registration-fees/stk-push",{farmer_id:M.id,phone_number:M.phone,amount:o.farmerRegistrationFee},{headers:{Authorization:`Bearer ${t}`}});I.data.success?(L.success(`STK push sent to ${M.firstName} ${M.lastName}`),a(B=>B.map(q=>q.id===M.id?{...q,lastPaymentAttempt:new Date().toISOString()}:q))):L.error(I.data.message||"Failed to send STK push")}catch(I){console.error(" STK push error:",I),L.error(I.response?.data?.message||"Failed to send STK push")}},E=async()=>{if(confirm(`Send STK push to all ${m.length} farmers?`))try{const M=m.map(I=>S(I));await Promise.all(M),L.success(`STK push sent to ${m.length} farmers`)}catch{L.error("Some STK pushes failed")}};return r?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:Z,lineNumber:253,columnNumber:7}},e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:Z,lineNumber:254,columnNumber:9}},e.createElement(qt,{className:"w-5 h-5 animate-spin text-green-600",__self:this,__source:{fileName:Z,lineNumber:255,columnNumber:11}}),e.createElement("span",{__self:this,__source:{fileName:Z,lineNumber:256,columnNumber:11}},"Loading registration fees data..."))):e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:Z,lineNumber:263,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:Z,lineNumber:264,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:Z,lineNumber:266,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:Z,lineNumber:267,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:Z,lineNumber:268,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:Z,lineNumber:269,columnNumber:15}},"Registration Fees Management"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:Z,lineNumber:272,columnNumber:15}},"Manage farmer registration fees and payment collection")),e.createElement("div",{className:"flex items-center space-x-4",__self:this,__source:{fileName:Z,lineNumber:276,columnNumber:13}},e.createElement("button",{onClick:g,className:"bg-gray-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700 flex items-center space-x-2",__self:this,__source:{fileName:Z,lineNumber:277,columnNumber:15}},e.createElement(qt,{className:"w-4 h-4",__self:this,__source:{fileName:Z,lineNumber:281,columnNumber:17}}),e.createElement("span",{__self:this,__source:{fileName:Z,lineNumber:282,columnNumber:17}},"Refresh")),m.length>0&&e.createElement("button",{onClick:E,className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 flex items-center space-x-2",__self:this,__source:{fileName:Z,lineNumber:285,columnNumber:17}},e.createElement(wr,{className:"w-4 h-4",__self:this,__source:{fileName:Z,lineNumber:289,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:Z,lineNumber:290,columnNumber:19}},"Bulk STK Push"))))),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8",__self:this,__source:{fileName:Z,lineNumber:298,columnNumber:9}},e.createElement("div",{className:"flex items-start space-x-3",__self:this,__source:{fileName:Z,lineNumber:299,columnNumber:11}},e.createElement(st,{className:"w-5 h-5 text-blue-600 mt-1",__self:this,__source:{fileName:Z,lineNumber:300,columnNumber:13}}),e.createElement("div",{__self:this,__source:{fileName:Z,lineNumber:301,columnNumber:13}},e.createElement("h4",{className:"font-medium text-blue-800",__self:this,__source:{fileName:Z,lineNumber:302,columnNumber:15}},"Current Fee Settings"),e.createElement("p",{className:"text-sm text-blue-700 mt-1",__self:this,__source:{fileName:Z,lineNumber:305,columnNumber:15}},"Registration Fee:"," ",e.createElement("strong",{__self:this,__source:{fileName:Z,lineNumber:307,columnNumber:17}},"KSh ",o.farmerRegistrationFee.toLocaleString())," "," Grace Period:"," ",e.createElement("strong",{__self:this,__source:{fileName:Z,lineNumber:311,columnNumber:17}},o.gracePeriodDays," days"),"  Status:"," ",e.createElement("strong",{__self:this,__source:{fileName:Z,lineNumber:312,columnNumber:17}},o.registrationFeeEnabled?"Enabled":"Disabled"))))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:Z,lineNumber:321,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:Z,lineNumber:322,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Z,lineNumber:323,columnNumber:13}},e.createElement("div",{className:"p-3 bg-red-100 rounded-lg",__self:this,__source:{fileName:Z,lineNumber:324,columnNumber:15}},e.createElement(tt,{className:"w-6 h-6 text-red-600",__self:this,__source:{fileName:Z,lineNumber:325,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:Z,lineNumber:327,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:Z,lineNumber:328,columnNumber:17}},h.totalUnpaid),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:Z,lineNumber:331,columnNumber:17}},"Unpaid Farmers")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:Z,lineNumber:336,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Z,lineNumber:337,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:Z,lineNumber:338,columnNumber:15}},e.createElement(Ie,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:Z,lineNumber:339,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:Z,lineNumber:341,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:Z,lineNumber:342,columnNumber:17}},h.withinGracePeriod),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:Z,lineNumber:345,columnNumber:17}},"Within Grace Period")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:Z,lineNumber:350,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Z,lineNumber:351,columnNumber:13}},e.createElement("div",{className:"p-3 bg-red-100 rounded-lg",__self:this,__source:{fileName:Z,lineNumber:352,columnNumber:15}},e.createElement(wt,{className:"w-6 h-6 text-red-600",__self:this,__source:{fileName:Z,lineNumber:353,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:Z,lineNumber:355,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:Z,lineNumber:356,columnNumber:17}},h.overdue),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:Z,lineNumber:359,columnNumber:17}},"Overdue")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:Z,lineNumber:364,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Z,lineNumber:365,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:Z,lineNumber:366,columnNumber:15}},e.createElement(Ye,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:Z,lineNumber:367,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:Z,lineNumber:369,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:Z,lineNumber:370,columnNumber:17}},"KSh ",h.totalOutstanding.toLocaleString()),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:Z,lineNumber:373,columnNumber:17}},"Total Outstanding"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8",__self:this,__source:{fileName:Z,lineNumber:380,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:Z,lineNumber:381,columnNumber:11}},e.createElement("div",{className:"flex flex-col sm:flex-row gap-4",__self:this,__source:{fileName:Z,lineNumber:382,columnNumber:13}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:Z,lineNumber:383,columnNumber:15}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:Z,lineNumber:384,columnNumber:17}},e.createElement(nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4",__self:this,__source:{fileName:Z,lineNumber:385,columnNumber:19}}),e.createElement("input",{type:"text",placeholder:"Search farmers by name, phone, or email...",value:i,onChange:M=>b(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:Z,lineNumber:386,columnNumber:19}}))),e.createElement("div",{__self:this,__source:{fileName:Z,lineNumber:396,columnNumber:15}},e.createElement("select",{value:u,onChange:M=>_(M.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:Z,lineNumber:397,columnNumber:17}},e.createElement("option",{value:"all",__self:this,__source:{fileName:Z,lineNumber:402,columnNumber:19}},"All Farmers"),e.createElement("option",{value:"grace",__self:this,__source:{fileName:Z,lineNumber:403,columnNumber:19}},"Within Grace Period"),e.createElement("option",{value:"overdue",__self:this,__source:{fileName:Z,lineNumber:404,columnNumber:19}},"Overdue"))))),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:Z,lineNumber:411,columnNumber:11}},m.length===0?e.createElement("div",{className:"text-center py-12",__self:this,__source:{fileName:Z,lineNumber:413,columnNumber:15}},e.createElement(tt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:Z,lineNumber:414,columnNumber:17}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:Z,lineNumber:415,columnNumber:17}},"No unpaid farmers found"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:Z,lineNumber:418,columnNumber:17}},i||u!=="all"?"Try adjusting your search or filters":"All farmers have paid their registration fees")):e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:Z,lineNumber:425,columnNumber:15}},m.map(M=>e.createElement("div",{key:M.id,className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",__self:this,__source:{fileName:Z,lineNumber:427,columnNumber:19}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",__self:this,__source:{fileName:Z,lineNumber:431,columnNumber:21}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:Z,lineNumber:432,columnNumber:23}},e.createElement("div",{className:"flex items-center space-x-4 mb-2",__self:this,__source:{fileName:Z,lineNumber:433,columnNumber:25}},e.createElement("h3",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:Z,lineNumber:434,columnNumber:27}},M.firstName," ",M.lastName),e.createElement("span",{className:`px-2 py-1 rounded-full text-xs ${M.gracePeriodRemaining>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,__self:this,__source:{fileName:Z,lineNumber:437,columnNumber:27}},M.gracePeriodRemaining>0?`${M.gracePeriodRemaining} days remaining`:`${Math.abs(M.gracePeriodRemaining)} days overdue`),M.consignmentCount>0&&e.createElement("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",__self:this,__source:{fileName:Z,lineNumber:449,columnNumber:29}},M.consignmentCount," consignments")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",__self:this,__source:{fileName:Z,lineNumber:455,columnNumber:25}},e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:Z,lineNumber:456,columnNumber:27}},e.createElement(Et,{className:"w-4 h-4",__self:this,__source:{fileName:Z,lineNumber:457,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:Z,lineNumber:458,columnNumber:29}},M.phone)),e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:Z,lineNumber:460,columnNumber:27}},e.createElement(Or,{className:"w-4 h-4",__self:this,__source:{fileName:Z,lineNumber:461,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:Z,lineNumber:462,columnNumber:29}},M.email)),e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:Z,lineNumber:464,columnNumber:27}},e.createElement(yt,{className:"w-4 h-4",__self:this,__source:{fileName:Z,lineNumber:465,columnNumber:29}}),e.createElement("span",{__self:this,__source:{fileName:Z,lineNumber:466,columnNumber:29}},"Registered ",M.daysSinceRegistration," days ago"))),M.lastPaymentAttempt&&e.createElement("div",{className:"mt-2 text-sm text-gray-500",__self:this,__source:{fileName:Z,lineNumber:473,columnNumber:27}},"Last STK push:"," ",new Date(M.lastPaymentAttempt).toLocaleDateString())),e.createElement("div",{className:"flex flex-col sm:flex-row gap-2",__self:this,__source:{fileName:Z,lineNumber:482,columnNumber:23}},e.createElement("div",{className:"text-right mb-2 sm:mb-0 sm:mr-4",__self:this,__source:{fileName:Z,lineNumber:483,columnNumber:25}},e.createElement("p",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:Z,lineNumber:484,columnNumber:27}},"KSh"," ",o.farmerRegistrationFee.toLocaleString()),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:Z,lineNumber:488,columnNumber:27}},"Registration Fee")),e.createElement("button",{onClick:()=>S(M),className:"bg-green-600 text-white px-4 py-2 rounded text-sm hover:bg-green-700 flex items-center space-x-1",__self:this,__source:{fileName:Z,lineNumber:493,columnNumber:25}},e.createElement(wr,{className:"w-4 h-4",__self:this,__source:{fileName:Z,lineNumber:497,columnNumber:27}}),e.createElement("span",{__self:this,__source:{fileName:Z,lineNumber:498,columnNumber:27}},"Send STK Push")))))))))))}var ce="/app/code/frontend/src/pages/admin/FarmerCategoriesPage.tsx";function Hu(){const{token:t}=Ae(),[r,l]=P.useState([]),[s,a]=P.useState(!0),[m,n]=P.useState(!1),[i,b]=P.useState(null),[u,_]=P.useState({name:"",description:"",is_active:!0}),[o,f]=P.useState(""),[h,w]=P.useState(!1);P.useEffect(()=>{g()},[]);const g=async()=>{try{const I=await me.get("/api/admin/farmer-categories",{headers:{Authorization:`Bearer ${t}`}});l(I.data.categories||[])}catch(I){console.error("Error fetching categories:",I),L.error("Failed to fetch farmer categories")}finally{a(!1)}},p=async I=>{if(I.preventDefault(),!u.name.trim()){L.error("Category name is required");return}w(!0);try{i?(await me.put(`/api/admin/farmer-categories/${i.id}`,u,{headers:{Authorization:`Bearer ${t}`}}),L.success("Category updated successfully")):(await me.post("/api/admin/farmer-categories",u,{headers:{Authorization:`Bearer ${t}`}}),L.success("Category created successfully")),n(!1),b(null),_({name:"",description:"",is_active:!0}),g()}catch(B){console.error("Error saving category:",B);const q=B.response?.data?.message||"Failed to save category";L.error(q)}finally{w(!1)}},S=I=>{b(I),_({name:I.name,description:I.description,is_active:I.is_active}),n(!0)},E=async I=>{if(window.confirm("Are you sure you want to delete this category?"))try{await me.delete(`/api/admin/farmer-categories/${I}`,{headers:{Authorization:`Bearer ${t}`}}),L.success("Category deleted successfully"),g()}catch(B){console.error("Error deleting category:",B);const q=B.response?.data?.message||"Failed to delete category";L.error(q)}},M=r.filter(I=>I.name.toLowerCase().includes(o.toLowerCase())||I.description.toLowerCase().includes(o.toLowerCase()));return s?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:ce,lineNumber:140,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:ce,lineNumber:141,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:ce,lineNumber:142,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:ce,lineNumber:143,columnNumber:11}},"Loading farmer categories..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:ce,lineNumber:150,columnNumber:5}},e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:ce,lineNumber:151,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:ce,lineNumber:153,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:ce,lineNumber:154,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:ce,lineNumber:155,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:ce,lineNumber:156,columnNumber:15}},"Farmer Categories"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:ce,lineNumber:159,columnNumber:15}},"Manage categories that farmers can select during registration")),e.createElement("button",{onClick:()=>{b(null),_({name:"",description:"",is_active:!0}),n(!0)},className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2",__self:this,__source:{fileName:ce,lineNumber:163,columnNumber:13}},e.createElement($t,{className:"w-4 h-4",__self:this,__source:{fileName:ce,lineNumber:171,columnNumber:15}}),"Add Category"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:ce,lineNumber:178,columnNumber:9}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:ce,lineNumber:179,columnNumber:11}},e.createElement(nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5",__self:this,__source:{fileName:ce,lineNumber:180,columnNumber:13}}),e.createElement("input",{type:"text",placeholder:"Search categories...",value:o,onChange:I=>f(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:ce,lineNumber:181,columnNumber:13}}))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",__self:this,__source:{fileName:ce,lineNumber:192,columnNumber:9}},M.map(I=>e.createElement("div",{key:I.id,className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:ce,lineNumber:194,columnNumber:13}},e.createElement("div",{className:"flex items-start justify-between mb-4",__self:this,__source:{fileName:ce,lineNumber:198,columnNumber:15}},e.createElement("div",{className:"flex items-center gap-2",__self:this,__source:{fileName:ce,lineNumber:199,columnNumber:17}},e.createElement(lr,{className:"w-5 h-5 text-primary-600",__self:this,__source:{fileName:ce,lineNumber:200,columnNumber:19}}),e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:ce,lineNumber:201,columnNumber:19}},I.name)),e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:ce,lineNumber:205,columnNumber:17}},I.is_active?e.createElement(Fe,{className:"w-4 h-4 text-green-500",__self:this,__source:{fileName:ce,lineNumber:207,columnNumber:21}}):e.createElement(Rs,{className:"w-4 h-4 text-red-500",__self:this,__source:{fileName:ce,lineNumber:209,columnNumber:21}}))),I.description&&e.createElement("p",{className:"text-gray-600 text-sm mb-4",__self:this,__source:{fileName:ce,lineNumber:215,columnNumber:17}},I.description),e.createElement("div",{className:"flex items-center gap-2 mb-4 text-sm text-gray-500",__self:this,__source:{fileName:ce,lineNumber:220,columnNumber:15}},e.createElement(tt,{className:"w-4 h-4",__self:this,__source:{fileName:ce,lineNumber:221,columnNumber:17}}),e.createElement("span",{__self:this,__source:{fileName:ce,lineNumber:222,columnNumber:17}},I.farmer_count," farmers")),e.createElement("div",{className:"flex items-center gap-2",__self:this,__source:{fileName:ce,lineNumber:225,columnNumber:15}},e.createElement("button",{onClick:()=>S(I),className:"flex-1 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-2 text-sm",__self:this,__source:{fileName:ce,lineNumber:226,columnNumber:17}},e.createElement(rm,{className:"w-4 h-4",__self:this,__source:{fileName:ce,lineNumber:230,columnNumber:19}}),"Edit"),e.createElement("button",{onClick:()=>E(I.id),disabled:I.farmer_count>0,className:"flex-1 bg-red-100 text-red-700 px-3 py-2 rounded-lg hover:bg-red-200 transition-colors flex items-center justify-center gap-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed",title:I.farmer_count>0?"Cannot delete category with assigned farmers":"Delete category",__self:this,__source:{fileName:ce,lineNumber:233,columnNumber:17}},e.createElement(wl,{className:"w-4 h-4",__self:this,__source:{fileName:ce,lineNumber:239,columnNumber:19}}),"Delete"))))),M.length===0&&e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",__self:this,__source:{fileName:ce,lineNumber:248,columnNumber:11}},e.createElement(lr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:ce,lineNumber:249,columnNumber:13}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:ce,lineNumber:250,columnNumber:13}},o?"No categories found":"No categories yet"),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:ce,lineNumber:253,columnNumber:13}},o?"Try adjusting your search criteria":"Create your first farmer category to get started"),!o&&e.createElement("button",{onClick:()=>{b(null),_({name:"",description:"",is_active:!0}),n(!0)},className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:ce,lineNumber:260,columnNumber:15}},"Add First Category")),m&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:ce,lineNumber:276,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full",__self:this,__source:{fileName:ce,lineNumber:277,columnNumber:13}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:ce,lineNumber:278,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:ce,lineNumber:279,columnNumber:17}},i?"Edit Category":"Add New Category")),e.createElement("form",{onSubmit:p,className:"p-6",__self:this,__source:{fileName:ce,lineNumber:284,columnNumber:15}},e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:ce,lineNumber:285,columnNumber:17}},e.createElement("div",{__self:this,__source:{fileName:ce,lineNumber:286,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:ce,lineNumber:287,columnNumber:21}},"Category Name *"),e.createElement("input",{type:"text",value:u.name,onChange:I=>_({...u,name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Vegetables",required:!0,__self:this,__source:{fileName:ce,lineNumber:290,columnNumber:21}})),e.createElement("div",{__self:this,__source:{fileName:ce,lineNumber:302,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:ce,lineNumber:303,columnNumber:21}},"Description"),e.createElement("textarea",{value:u.description,onChange:I=>_({...u,description:I.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Brief description of this category",__self:this,__source:{fileName:ce,lineNumber:306,columnNumber:21}})),e.createElement("div",{__self:this,__source:{fileName:ce,lineNumber:317,columnNumber:19}},e.createElement("label",{className:"flex items-center gap-2",__self:this,__source:{fileName:ce,lineNumber:318,columnNumber:21}},e.createElement("input",{type:"checkbox",checked:u.is_active,onChange:I=>_({...u,is_active:I.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500",__self:this,__source:{fileName:ce,lineNumber:319,columnNumber:23}}),e.createElement("span",{className:"text-sm font-medium text-gray-700",__self:this,__source:{fileName:ce,lineNumber:327,columnNumber:23}},"Active (visible to farmers during registration)")))),e.createElement("div",{className:"flex gap-4 pt-6",__self:this,__source:{fileName:ce,lineNumber:334,columnNumber:17}},e.createElement("button",{type:"button",onClick:()=>n(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:h,__self:this,__source:{fileName:ce,lineNumber:335,columnNumber:19}},"Cancel"),e.createElement("button",{type:"submit",className:"flex-1 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:h,__self:this,__source:{fileName:ce,lineNumber:343,columnNumber:19}},h?"Saving...":i?"Update Category":"Add Category")))))))}var v="/app/code/frontend/src/pages/driver/DriverDashboard.tsx";function Wu(){const{user:t,token:r}=Ae(),l=_t(),[s,a]=P.useState([]),[m,n]=P.useState(!0),[i,b]=P.useState(!1),[u,_]=P.useState(!1),[o,f]=P.useState({type:"delivery_issue",description:"",deliveryId:"",severity:"medium"}),[h,w]=P.useState({today:0,week:0,month:0,total:0,recentPayments:[]});P.useEffect(()=>{g()},[]);const g=async()=>{try{const x=await me.get("/api/driver/assignments",{headers:{Authorization:`Bearer ${r}`}});a(x.data.assignments||x.data)}catch(x){console.error("Error fetching assignments:",x),x.response?.status===404?(console.log(" Using fallback demo assignments (endpoint not found)"),a([{id:"assign_1",consignmentId:"cons_1",title:"Organic Tomatoes Delivery",farmerName:"Jane Wanjiku",farmerPhone:"+254712345678",pickupLocation:"Nakuru, Rift Valley",deliveryLocation:"Nairobi Central Market",quantity:"100 kg",status:"DRIVER_ASSIGNED",estimatedValue:13e3,distance:"180 km",estimatedTime:"3 hours"},{id:"assign_2",consignmentId:"cons_2",title:"Fresh Spinach Delivery",farmerName:"Peter Kamau",farmerPhone:"+254723456789",pickupLocation:"Kiambu, Central Kenya",deliveryLocation:"Westlands Market",quantity:"50 bunches",status:"IN_TRANSIT",estimatedValue:2500,distance:"45 km",estimatedTime:"1.5 hours"}]),L("Using demo data - backend deployment needed",{icon:""})):L.error("Failed to fetch assignments")}finally{n(!1)}},p=async x=>{try{await me.put(`/api/driver/assignments/${x}/status`,{status:"IN_TRANSIT",notes:"Pickup started"},{headers:{Authorization:`Bearer ${r}`}}),L.success(`Started pickup for delivery ${x}`),g()}catch(Q){console.error("Error updating delivery status:",Q),Q.response?.status===404?(L("Demo mode: Status update simulated",{icon:""}),g()):L.error("Failed to start pickup")}},S=async x=>{try{await me.put(`/api/driver/assignments/${x}/status`,{status:"DELIVERED",notes:"Delivery completed"},{headers:{Authorization:`Bearer ${r}`}}),L.success(`Marked delivery ${x} as completed`),g()}catch(Q){console.error("Error updating delivery status:",Q),Q.response?.status===404?(L("Demo mode: Delivery marked as completed",{icon:""}),g()):L.error("Failed to mark as delivered")}},E=async()=>{try{if(!navigator.geolocation){L.error("Geolocation is not supported by this browser");return}L("Getting your location...",{icon:""}),navigator.geolocation.getCurrentPosition(async x=>{const{latitude:Q,longitude:re}=x.coords;try{await me.put("/api/driver/location",{latitude:Q,longitude:re,timestamp:new Date().toISOString()},{headers:{Authorization:`Bearer ${r}`}}),L.success(`Location updated: ${Q.toFixed(6)}, ${re.toFixed(6)}`)}catch(Ne){console.error("Error updating location on server:",Ne),L.success(`Location obtained: ${Q.toFixed(6)}, ${re.toFixed(6)}`),L("Could not sync with server - using local GPS",{icon:""})}},x=>{console.error("Geolocation error:",x),L.error("Failed to get location. Please enable GPS and try again.")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}catch(x){console.error("Location update error:",x),L.error("Failed to update location")}},M=async()=>{try{const x=await me.get("/api/driver/available-deliveries",{headers:{Authorization:`Bearer ${r}`}});x.data.success&&x.data.deliveries.length>0?(l("/driver/assignments"),L.success(`Found ${x.data.deliveries.length} available deliveries!`)):L("No deliveries available at the moment",{icon:""})}catch(x){console.error("Failed to fetch available deliveries:",x),L.error("Failed to check available deliveries")}},I=()=>{b(!0)},B=async()=>{try{const x=await me.get("/api/driver/earnings",{headers:{Authorization:`Bearer ${r}`}});x.data.success?(w(x.data.earnings),_(!0)):L.error("Failed to load earnings data")}catch(x){console.error("Failed to fetch earnings:",x),L.error("Failed to load earnings data")}},q=async()=>{if(!o.description.trim()){L.error("Please provide a description");return}try{const x=await me.post("/api/driver/report-issue",o,{headers:{Authorization:`Bearer ${r}`}});x.data.success?(L.success("Issue reported successfully!"),b(!1),f({type:"delivery_issue",description:"",deliveryId:"",severity:"medium"})):L.error(x.data.message||"Failed to report issue")}catch(x){console.error("Failed to submit issue:",x),L.error("Failed to report issue")}},le=[{title:"Deliveries Today",value:"8",icon:e.createElement(Te,{className:"w-6 h-6",__self:this,__source:{fileName:v,lineNumber:279,columnNumber:13}}),color:"bg-blue-500"},{title:"Total Earnings",value:"KES 12,500",icon:e.createElement(Ye,{className:"w-6 h-6",__self:this,__source:{fileName:v,lineNumber:285,columnNumber:13}}),color:"bg-green-500"},{title:"Average Rating",value:"4.8",icon:e.createElement(Fe,{className:"w-6 h-6",__self:this,__source:{fileName:v,lineNumber:291,columnNumber:13}}),color:"bg-yellow-500"},{title:"Pending Pickups",value:"3",icon:e.createElement(wt,{className:"w-6 h-6",__self:this,__source:{fileName:v,lineNumber:297,columnNumber:13}}),color:"bg-red-500"}],F=(Array.isArray(s)?s:[]).map(x=>({id:x.id,customer:`${x.farmer?.user?.firstName||"Unknown"} ${x.farmer?.user?.lastName||"Farmer"}`,location:x.location||"Unknown location",status:x.status==="DRIVER_ASSIGNED"?"pending":x.status==="IN_TRANSIT"?"in_transit":x.status==="DELIVERED"?"delivered":"unknown",time:new Date(x.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),value:`KES ${((x.finalPricePerUnit||x.bidPricePerUnit)*x.quantity).toLocaleString()}`})),C=x=>{switch(x){case"pending":return"bg-yellow-100 text-yellow-800";case"in_transit":return"bg-blue-100 text-blue-800";case"delivered":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},c=x=>{switch(x){case"pending":return"Pending Pickup";case"in_transit":return"In Transit";case"delivered":return"Delivered";default:return x}};return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:v,lineNumber:349,columnNumber:5}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:v,lineNumber:350,columnNumber:7}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:v,lineNumber:351,columnNumber:9}},"Welcome back, ",t?.firstName,"!"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:v,lineNumber:354,columnNumber:9}},"Here's your delivery schedule for today.")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:v,lineNumber:360,columnNumber:7}},le.map((x,Q)=>e.createElement("div",{key:Q,className:"bg-white rounded-lg shadow p-6",__self:this,__source:{fileName:v,lineNumber:362,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:v,lineNumber:363,columnNumber:13}},e.createElement("div",{className:`${x.color} text-white p-3 rounded-lg`,__self:this,__source:{fileName:v,lineNumber:364,columnNumber:15}},x.icon),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:v,lineNumber:367,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:v,lineNumber:368,columnNumber:17}},x.title),e.createElement("p",{className:"text-2xl font-semibold text-gray-900",__self:this,__source:{fileName:v,lineNumber:371,columnNumber:17}},x.value)))))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",__self:this,__source:{fileName:v,lineNumber:381,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow p-6",__self:this,__source:{fileName:v,lineNumber:382,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:v,lineNumber:383,columnNumber:11}},"Driver Status"),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:v,lineNumber:386,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:v,lineNumber:387,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:v,lineNumber:388,columnNumber:15}},"Status"),e.createElement("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",__self:this,__source:{fileName:v,lineNumber:389,columnNumber:15}},"Available")),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:v,lineNumber:393,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:v,lineNumber:394,columnNumber:15}},"Vehicle"),e.createElement("span",{className:"text-gray-900 font-medium",__self:this,__source:{fileName:v,lineNumber:395,columnNumber:15}},"Pickup Truck - KCA123X")),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:v,lineNumber:399,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:v,lineNumber:400,columnNumber:15}},"Current Location"),e.createElement("span",{className:"text-gray-900 font-medium",__self:this,__source:{fileName:v,lineNumber:401,columnNumber:15}},"Nairobi CBD")),e.createElement("button",{onClick:E,className:"w-full bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:v,lineNumber:403,columnNumber:13}},"Update Location"))),e.createElement("div",{className:"bg-white rounded-lg shadow p-6",__self:this,__source:{fileName:v,lineNumber:412,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:v,lineNumber:413,columnNumber:11}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 gap-3",__self:this,__source:{fileName:v,lineNumber:416,columnNumber:11}},e.createElement("button",{onClick:M,className:"flex items-center p-4 rounded-lg border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-colors group",__self:this,__source:{fileName:v,lineNumber:417,columnNumber:13}},e.createElement("div",{className:"p-2 bg-blue-600 rounded-lg text-white group-hover:bg-blue-700",__self:this,__source:{fileName:v,lineNumber:421,columnNumber:15}},e.createElement(Te,{className:"w-5 h-5",__self:this,__source:{fileName:v,lineNumber:422,columnNumber:17}})),e.createElement("div",{className:"ml-3 text-left",__self:this,__source:{fileName:v,lineNumber:424,columnNumber:15}},e.createElement("div",{className:"font-medium text-blue-900",__self:this,__source:{fileName:v,lineNumber:425,columnNumber:17}},"Find New Deliveries"),e.createElement("div",{className:"text-sm text-blue-700",__self:this,__source:{fileName:v,lineNumber:428,columnNumber:17}},"Browse available assignments"))),e.createElement("button",{onClick:I,className:"flex items-center p-4 rounded-lg border border-red-200 bg-red-50 hover:bg-red-100 transition-colors group",__self:this,__source:{fileName:v,lineNumber:434,columnNumber:13}},e.createElement("div",{className:"p-2 bg-red-600 rounded-lg text-white group-hover:bg-red-700",__self:this,__source:{fileName:v,lineNumber:438,columnNumber:15}},e.createElement(il,{className:"w-5 h-5",__self:this,__source:{fileName:v,lineNumber:439,columnNumber:17}})),e.createElement("div",{className:"ml-3 text-left",__self:this,__source:{fileName:v,lineNumber:441,columnNumber:15}},e.createElement("div",{className:"font-medium text-red-900",__self:this,__source:{fileName:v,lineNumber:442,columnNumber:17}},"Report Issue"),e.createElement("div",{className:"text-sm text-red-700",__self:this,__source:{fileName:v,lineNumber:443,columnNumber:17}},"Report delivery problems"))),e.createElement("button",{onClick:B,className:"flex items-center p-4 rounded-lg border border-green-200 bg-green-50 hover:bg-green-100 transition-colors group",__self:this,__source:{fileName:v,lineNumber:449,columnNumber:13}},e.createElement("div",{className:"p-2 bg-green-600 rounded-lg text-white group-hover:bg-green-700",__self:this,__source:{fileName:v,lineNumber:453,columnNumber:15}},e.createElement(Ye,{className:"w-5 h-5",__self:this,__source:{fileName:v,lineNumber:454,columnNumber:17}})),e.createElement("div",{className:"ml-3 text-left",__self:this,__source:{fileName:v,lineNumber:456,columnNumber:15}},e.createElement("div",{className:"font-medium text-green-900",__self:this,__source:{fileName:v,lineNumber:457,columnNumber:17}},"View Earnings"),e.createElement("div",{className:"text-sm text-green-700",__self:this,__source:{fileName:v,lineNumber:458,columnNumber:17}},"Check payment history"))),e.createElement("button",{onClick:()=>l("/driver/warehouse"),className:"flex items-center p-4 rounded-lg border border-purple-200 bg-purple-50 hover:bg-purple-100 transition-colors group",__self:this,__source:{fileName:v,lineNumber:462,columnNumber:13}},e.createElement("div",{className:"p-2 bg-purple-600 rounded-lg text-white group-hover:bg-purple-700",__self:this,__source:{fileName:v,lineNumber:466,columnNumber:15}},e.createElement(it,{className:"w-5 h-5",__self:this,__source:{fileName:v,lineNumber:467,columnNumber:17}})),e.createElement("div",{className:"ml-3 text-left",__self:this,__source:{fileName:v,lineNumber:469,columnNumber:15}},e.createElement("div",{className:"font-medium text-purple-900",__self:this,__source:{fileName:v,lineNumber:470,columnNumber:17}},"Warehouse Tasks"),e.createElement("div",{className:"text-sm text-purple-700",__self:this,__source:{fileName:v,lineNumber:471,columnNumber:17}},"Manage inventory & pickups"))),e.createElement("button",{onClick:()=>{L.success("Emergency contact: +254 700 000 000")},className:"flex items-center p-4 rounded-lg border border-orange-200 bg-orange-50 hover:bg-orange-100 transition-colors group",__self:this,__source:{fileName:v,lineNumber:477,columnNumber:13}},e.createElement("div",{className:"p-2 bg-orange-600 rounded-lg text-white group-hover:bg-orange-700",__self:this,__source:{fileName:v,lineNumber:483,columnNumber:15}},e.createElement(Et,{className:"w-5 h-5",__self:this,__source:{fileName:v,lineNumber:484,columnNumber:17}})),e.createElement("div",{className:"ml-3 text-left",__self:this,__source:{fileName:v,lineNumber:486,columnNumber:15}},e.createElement("div",{className:"font-medium text-orange-900",__self:this,__source:{fileName:v,lineNumber:487,columnNumber:17}},"Emergency Contact"),e.createElement("div",{className:"text-sm text-orange-700",__self:this,__source:{fileName:v,lineNumber:488,columnNumber:17}},"Get help when needed"))))),e.createElement("div",{className:"bg-white rounded-lg shadow p-6",__self:this,__source:{fileName:v,lineNumber:496,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:v,lineNumber:497,columnNumber:11}},"Today's Summary"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:v,lineNumber:500,columnNumber:11}},e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:v,lineNumber:501,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:v,lineNumber:502,columnNumber:15}},"Completed"),e.createElement("span",{className:"font-semibold text-green-600",__self:this,__source:{fileName:v,lineNumber:503,columnNumber:15}},"5 deliveries")),e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:v,lineNumber:505,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:v,lineNumber:506,columnNumber:15}},"In Progress"),e.createElement("span",{className:"font-semibold text-blue-600",__self:this,__source:{fileName:v,lineNumber:507,columnNumber:15}},"1 delivery")),e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:v,lineNumber:509,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:v,lineNumber:510,columnNumber:15}},"Pending"),e.createElement("span",{className:"font-semibold text-orange-600",__self:this,__source:{fileName:v,lineNumber:511,columnNumber:15}},"2 deliveries")),e.createElement("div",{className:"border-t pt-3 mt-3",__self:this,__source:{fileName:v,lineNumber:515,columnNumber:13}},e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:v,lineNumber:516,columnNumber:15}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:v,lineNumber:517,columnNumber:17}},"Total Earnings"),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:v,lineNumber:518,columnNumber:17}},"KES 2,400")))))),e.createElement("div",{className:"bg-white rounded-lg shadow",__self:this,__source:{fileName:v,lineNumber:526,columnNumber:7}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:v,lineNumber:527,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:v,lineNumber:528,columnNumber:11}},"Today's Deliveries")),e.createElement("div",{className:"overflow-x-auto",__self:this,__source:{fileName:v,lineNumber:532,columnNumber:9}},e.createElement("table",{className:"w-full",__self:this,__source:{fileName:v,lineNumber:533,columnNumber:11}},e.createElement("thead",{className:"bg-gray-50",__self:this,__source:{fileName:v,lineNumber:534,columnNumber:13}},e.createElement("tr",{__self:this,__source:{fileName:v,lineNumber:535,columnNumber:15}},e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:v,lineNumber:536,columnNumber:17}},"Order ID"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:v,lineNumber:539,columnNumber:17}},"Customer"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:v,lineNumber:542,columnNumber:17}},"Location"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:v,lineNumber:545,columnNumber:17}},"Time"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:v,lineNumber:548,columnNumber:17}},"Value"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:v,lineNumber:551,columnNumber:17}},"Status"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:v,lineNumber:554,columnNumber:17}},"Actions"))),e.createElement("tbody",{className:"bg-white divide-y divide-gray-200",__self:this,__source:{fileName:v,lineNumber:559,columnNumber:13}},m?e.createElement("tr",{__self:this,__source:{fileName:v,lineNumber:561,columnNumber:17}},e.createElement("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",__self:this,__source:{fileName:v,lineNumber:562,columnNumber:19}},"Loading deliveries...")):F.length===0?e.createElement("tr",{__self:this,__source:{fileName:v,lineNumber:570,columnNumber:17}},e.createElement("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",__self:this,__source:{fileName:v,lineNumber:571,columnNumber:19}},"No deliveries assigned")):(Array.isArray(F)?F:[]).map(x=>e.createElement("tr",{key:x.id,__self:this,__source:{fileName:v,lineNumber:580,columnNumber:19}},e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",__self:this,__source:{fileName:v,lineNumber:581,columnNumber:21}},x.id),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:v,lineNumber:584,columnNumber:21}},x.customer),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:v,lineNumber:587,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:v,lineNumber:588,columnNumber:23}},e.createElement(it,{className:"w-4 h-4 text-gray-400 mr-1",__self:this,__source:{fileName:v,lineNumber:589,columnNumber:25}}),x.location)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:v,lineNumber:593,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:v,lineNumber:594,columnNumber:23}},e.createElement(Ie,{className:"w-4 h-4 text-gray-400 mr-1",__self:this,__source:{fileName:v,lineNumber:595,columnNumber:25}}),x.time)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:v,lineNumber:599,columnNumber:21}},x.value),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:v,lineNumber:602,columnNumber:21}},e.createElement("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${C(x.status)}`,__self:this,__source:{fileName:v,lineNumber:603,columnNumber:23}},c(x.status))),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:v,lineNumber:609,columnNumber:21}},x.status==="pending"&&e.createElement("button",{onClick:()=>p(x.id),className:"text-primary-600 hover:text-primary-700 font-medium",__self:this,__source:{fileName:v,lineNumber:611,columnNumber:25}},"Start Pickup"),x.status==="in_transit"&&e.createElement("button",{onClick:()=>S(x.id),className:"text-green-600 hover:text-green-700 font-medium",__self:this,__source:{fileName:v,lineNumber:619,columnNumber:25}},"Mark Delivered"),x.status==="delivered"&&e.createElement("span",{className:"text-gray-400",__self:this,__source:{fileName:v,lineNumber:627,columnNumber:25}},"Completed")))))))),i&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",__self:this,__source:{fileName:v,lineNumber:640,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[80vh] overflow-y-auto",__self:this,__source:{fileName:v,lineNumber:641,columnNumber:11}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:v,lineNumber:642,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:v,lineNumber:643,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:v,lineNumber:644,columnNumber:17}},"Report Issue"),e.createElement("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:v,lineNumber:647,columnNumber:17}},e.createElement(Je,{className:"w-5 h-5",__self:this,__source:{fileName:v,lineNumber:651,columnNumber:19}})))),e.createElement("div",{className:"p-6 space-y-4",__self:this,__source:{fileName:v,lineNumber:656,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:657,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:v,lineNumber:658,columnNumber:17}},"Issue Type"),e.createElement("select",{value:o.type,onChange:x=>f(Q=>({...Q,type:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",__self:this,__source:{fileName:v,lineNumber:661,columnNumber:17}},e.createElement("option",{value:"delivery_issue",__self:this,__source:{fileName:v,lineNumber:668,columnNumber:19}},"Delivery Issue"),e.createElement("option",{value:"vehicle_problem",__self:this,__source:{fileName:v,lineNumber:669,columnNumber:19}},"Vehicle Problem"),e.createElement("option",{value:"customer_issue",__self:this,__source:{fileName:v,lineNumber:670,columnNumber:19}},"Customer Issue"),e.createElement("option",{value:"app_bug",__self:this,__source:{fileName:v,lineNumber:671,columnNumber:19}},"App Bug"),e.createElement("option",{value:"other",__self:this,__source:{fileName:v,lineNumber:672,columnNumber:19}},"Other"))),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:676,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:v,lineNumber:677,columnNumber:17}},"Severity"),e.createElement("select",{value:o.severity,onChange:x=>f(Q=>({...Q,severity:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",__self:this,__source:{fileName:v,lineNumber:680,columnNumber:17}},e.createElement("option",{value:"low",__self:this,__source:{fileName:v,lineNumber:687,columnNumber:19}},"Low - Minor inconvenience"),e.createElement("option",{value:"medium",__self:this,__source:{fileName:v,lineNumber:688,columnNumber:19}},"Medium - Affects work efficiency"),e.createElement("option",{value:"high",__self:this,__source:{fileName:v,lineNumber:689,columnNumber:19}},"High - Blocks completion"),e.createElement("option",{value:"critical",__self:this,__source:{fileName:v,lineNumber:690,columnNumber:19}},"Critical - Emergency"))),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:694,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:v,lineNumber:695,columnNumber:17}},"Related Delivery ID (Optional)"),e.createElement("input",{type:"text",value:o.deliveryId,onChange:x=>f(Q=>({...Q,deliveryId:x.target.value})),placeholder:"Enter delivery ID if applicable",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",__self:this,__source:{fileName:v,lineNumber:698,columnNumber:17}})),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:709,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:v,lineNumber:710,columnNumber:17}},"Description"),e.createElement("textarea",{value:o.description,onChange:x=>f(Q=>({...Q,description:x.target.value})),placeholder:"Please describe the issue in detail...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,__self:this,__source:{fileName:v,lineNumber:713,columnNumber:17}}))),e.createElement("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",__self:this,__source:{fileName:v,lineNumber:726,columnNumber:13}},e.createElement("button",{onClick:()=>b(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",__self:this,__source:{fileName:v,lineNumber:727,columnNumber:15}},"Cancel"),e.createElement("button",{onClick:q,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",__self:this,__source:{fileName:v,lineNumber:733,columnNumber:15}},e.createElement(il,{className:"w-4 h-4 mr-2 inline",__self:this,__source:{fileName:v,lineNumber:737,columnNumber:17}}),"Submit Report")))),u&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",__self:this,__source:{fileName:v,lineNumber:747,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",__self:this,__source:{fileName:v,lineNumber:748,columnNumber:11}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:v,lineNumber:749,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:v,lineNumber:750,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:v,lineNumber:751,columnNumber:17}},"Earnings Overview"),e.createElement("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:v,lineNumber:754,columnNumber:17}},e.createElement(Je,{className:"w-5 h-5",__self:this,__source:{fileName:v,lineNumber:758,columnNumber:19}})))),e.createElement("div",{className:"p-6 space-y-6",__self:this,__source:{fileName:v,lineNumber:763,columnNumber:13}},e.createElement("div",{className:"grid grid-cols-2 gap-4",__self:this,__source:{fileName:v,lineNumber:765,columnNumber:15}},e.createElement("div",{className:"bg-blue-50 p-4 rounded-lg",__self:this,__source:{fileName:v,lineNumber:766,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:v,lineNumber:767,columnNumber:19}},e.createElement(yt,{className:"w-5 h-5 text-blue-600 mr-2",__self:this,__source:{fileName:v,lineNumber:768,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-blue-900",__self:this,__source:{fileName:v,lineNumber:769,columnNumber:21}},"Today")),e.createElement("p",{className:"text-2xl font-bold text-blue-900 mt-1",__self:this,__source:{fileName:v,lineNumber:771,columnNumber:19}},"KES ",(h?.today||0).toLocaleString())),e.createElement("div",{className:"bg-green-50 p-4 rounded-lg",__self:this,__source:{fileName:v,lineNumber:775,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:v,lineNumber:776,columnNumber:19}},e.createElement(yt,{className:"w-5 h-5 text-green-600 mr-2",__self:this,__source:{fileName:v,lineNumber:777,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-green-900",__self:this,__source:{fileName:v,lineNumber:778,columnNumber:21}},"This Week")),e.createElement("p",{className:"text-2xl font-bold text-green-900 mt-1",__self:this,__source:{fileName:v,lineNumber:780,columnNumber:19}},"KES ",(h?.week||0).toLocaleString())),e.createElement("div",{className:"bg-purple-50 p-4 rounded-lg",__self:this,__source:{fileName:v,lineNumber:784,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:v,lineNumber:785,columnNumber:19}},e.createElement(yt,{className:"w-5 h-5 text-purple-600 mr-2",__self:this,__source:{fileName:v,lineNumber:786,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-purple-900",__self:this,__source:{fileName:v,lineNumber:787,columnNumber:21}},"This Month")),e.createElement("p",{className:"text-2xl font-bold text-purple-900 mt-1",__self:this,__source:{fileName:v,lineNumber:789,columnNumber:19}},"KES ",(h?.month||0).toLocaleString())),e.createElement("div",{className:"bg-gray-50 p-4 rounded-lg",__self:this,__source:{fileName:v,lineNumber:793,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:v,lineNumber:794,columnNumber:19}},e.createElement(Ye,{className:"w-5 h-5 text-gray-600 mr-2",__self:this,__source:{fileName:v,lineNumber:795,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:v,lineNumber:796,columnNumber:21}},"Total")),e.createElement("p",{className:"text-2xl font-bold text-gray-900 mt-1",__self:this,__source:{fileName:v,lineNumber:798,columnNumber:19}},"KES ",(h?.total||0).toLocaleString()))),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:805,columnNumber:15}},e.createElement("h4",{className:"text-md font-semibold text-gray-900 mb-3",__self:this,__source:{fileName:v,lineNumber:806,columnNumber:17}},"Recent Payments"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:v,lineNumber:809,columnNumber:17}},(Array.isArray(h?.recentPayments)?h.recentPayments:[]).map((x,Q)=>e.createElement("div",{key:Q,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",__self:this,__source:{fileName:v,lineNumber:811,columnNumber:21}},e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:812,columnNumber:23}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:v,lineNumber:813,columnNumber:25}},x.date?new Date(x.date).toLocaleDateString():"Unknown Date"),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:v,lineNumber:816,columnNumber:25}},x.deliveries||0," deliveries completed")),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:v,lineNumber:820,columnNumber:23}},e.createElement("p",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:v,lineNumber:821,columnNumber:25}},"KES ",(x.amount||0).toLocaleString()),e.createElement("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${x.status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,__self:this,__source:{fileName:v,lineNumber:824,columnNumber:25}},x.status==="paid"?"Paid":"Pending")))),(!h?.recentPayments||h.recentPayments.length===0)&&e.createElement("div",{className:"text-center py-4 text-gray-500",__self:this,__source:{fileName:v,lineNumber:837,columnNumber:21}},e.createElement("p",{__self:this,__source:{fileName:v,lineNumber:838,columnNumber:23}},"No recent payments found"),e.createElement("p",{className:"text-sm",__self:this,__source:{fileName:v,lineNumber:839,columnNumber:23}},"Complete deliveries to start earning!")))),e.createElement("div",{className:"bg-blue-50 p-4 rounded-lg",__self:this,__source:{fileName:v,lineNumber:846,columnNumber:15}},e.createElement("div",{className:"flex items-start",__self:this,__source:{fileName:v,lineNumber:847,columnNumber:17}},e.createElement(st,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3",__self:this,__source:{fileName:v,lineNumber:848,columnNumber:19}}),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:849,columnNumber:19}},e.createElement("h5",{className:"font-medium text-blue-900",__self:this,__source:{fileName:v,lineNumber:850,columnNumber:21}},"Payment Schedule"),e.createElement("p",{className:"text-sm text-blue-700 mt-1",__self:this,__source:{fileName:v,lineNumber:851,columnNumber:21}},"Payments are processed weekly every Friday via M-Pesa. You'll receive payment for all completed deliveries from the previous week."))))),e.createElement("div",{className:"px-6 py-4 border-t border-gray-200",__self:this,__source:{fileName:v,lineNumber:860,columnNumber:13}},e.createElement("button",{onClick:()=>_(!1),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",__self:this,__source:{fileName:v,lineNumber:861,columnNumber:15}},"Close")))))}var Y="/app/code/frontend/src/pages/driver/AssignmentsPage.tsx";const Qu={DRIVER_ASSIGNED:{color:"bg-yellow-100 text-yellow-800",icon:Ie,label:"Ready for Pickup",action:"Start Transport"},IN_TRANSIT:{color:"bg-blue-100 text-blue-800",icon:ul,label:"In Transit",action:"Mark as Delivered"},DELIVERED:{color:"bg-green-100 text-green-800",icon:Fe,label:"Delivered",action:null}};function Ju(){const{token:t}=Ae(),[r,l]=P.useState([]),[s,a]=P.useState(!0),[m,n]=P.useState(null);P.useEffect(()=>{i()},[]);const i=async()=>{try{const _=await me.get("/api/driver/assignments",{headers:{Authorization:`Bearer ${t}`}});l(_.data.assignments)}catch(_){console.error("Error fetching assignments:",_),L.error("Failed to fetch assignments")}finally{a(!1)}},b=async(_,o)=>{n(_);try{await me.patch(`/api/driver/assignments/${_}/status`,{status:o},{headers:{Authorization:`Bearer ${t}`}}),L.success("Assignment status updated successfully!"),i()}catch(f){console.error("Error updating assignment status:",f),L.error("Failed to update assignment status")}finally{n(null)}},u=_=>{_.status==="DRIVER_ASSIGNED"?b(_.id,"IN_TRANSIT"):_.status==="IN_TRANSIT"&&b(_.id,"DELIVERED")};return s?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:Y,lineNumber:122,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:Y,lineNumber:123,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:Y,lineNumber:124,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:Y,lineNumber:125,columnNumber:11}},"Loading assignments..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:Y,lineNumber:132,columnNumber:5}},e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:Y,lineNumber:133,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:Y,lineNumber:135,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:Y,lineNumber:136,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:Y,lineNumber:137,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:Y,lineNumber:138,columnNumber:15}},"My Assignments"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:Y,lineNumber:141,columnNumber:15}},"Manage your transport assignments and deliveries")),e.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600",__self:this,__source:{fileName:Y,lineNumber:145,columnNumber:13}},e.createElement(Te,{className:"w-4 h-4",__self:this,__source:{fileName:Y,lineNumber:146,columnNumber:15}}),e.createElement("span",{__self:this,__source:{fileName:Y,lineNumber:147,columnNumber:15}},"Driver Dashboard")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",__self:this,__source:{fileName:Y,lineNumber:153,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:Y,lineNumber:154,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Y,lineNumber:155,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:Y,lineNumber:156,columnNumber:15}},e.createElement(Ie,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:Y,lineNumber:157,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:Y,lineNumber:159,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:Y,lineNumber:160,columnNumber:17}},r.filter(_=>_.status==="DRIVER_ASSIGNED").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:Y,lineNumber:166,columnNumber:17}},"Ready for Pickup")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:Y,lineNumber:171,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Y,lineNumber:172,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:Y,lineNumber:173,columnNumber:15}},e.createElement(ul,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:Y,lineNumber:174,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:Y,lineNumber:176,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:Y,lineNumber:177,columnNumber:17}},r.filter(_=>_.status==="IN_TRANSIT").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:Y,lineNumber:180,columnNumber:17}},"In Transit")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:Y,lineNumber:185,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:Y,lineNumber:186,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:Y,lineNumber:187,columnNumber:15}},e.createElement(Fe,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:Y,lineNumber:188,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:Y,lineNumber:190,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:Y,lineNumber:191,columnNumber:17}},r.filter(_=>_.status==="DELIVERED").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:Y,lineNumber:194,columnNumber:17}},"Completed"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:Y,lineNumber:201,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:Y,lineNumber:202,columnNumber:11}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:Y,lineNumber:203,columnNumber:13}},"Active Assignments")),r.length===0?e.createElement("div",{className:"p-12 text-center",__self:this,__source:{fileName:Y,lineNumber:209,columnNumber:13}},e.createElement(Te,{className:"w-16 h-16 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:Y,lineNumber:210,columnNumber:15}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:Y,lineNumber:211,columnNumber:15}},"No assignments yet"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:Y,lineNumber:214,columnNumber:15}},"You'll see your transport assignments here when they are assigned to you")):e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:Y,lineNumber:220,columnNumber:13}},r.map(_=>{const o=Qu[_.status],f=o?.icon||ge,h=_.finalPricePerUnit*_.quantity;return e.createElement("div",{key:_.id,className:"p-6 hover:bg-gray-50",__self:this,__source:{fileName:Y,lineNumber:229,columnNumber:19}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",__self:this,__source:{fileName:Y,lineNumber:230,columnNumber:21}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:Y,lineNumber:231,columnNumber:23}},e.createElement("div",{className:"flex items-start gap-4",__self:this,__source:{fileName:Y,lineNumber:232,columnNumber:25}},e.createElement("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",__self:this,__source:{fileName:Y,lineNumber:233,columnNumber:27}},e.createElement(ge,{className:"w-8 h-8 text-gray-600",__self:this,__source:{fileName:Y,lineNumber:234,columnNumber:29}})),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:Y,lineNumber:237,columnNumber:27}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-1",__self:this,__source:{fileName:Y,lineNumber:238,columnNumber:29}},_.title),e.createElement("p",{className:"text-gray-600 text-sm mb-3",__self:this,__source:{fileName:Y,lineNumber:241,columnNumber:29}},_.description),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 mb-3",__self:this,__source:{fileName:Y,lineNumber:246,columnNumber:29}},e.createElement("span",{__self:this,__source:{fileName:Y,lineNumber:247,columnNumber:31}},_.quantity," ",_.unit),e.createElement("span",{__self:this,__source:{fileName:Y,lineNumber:250,columnNumber:31}},""),e.createElement("span",{__self:this,__source:{fileName:Y,lineNumber:251,columnNumber:31}},_.category),e.createElement("span",{__self:this,__source:{fileName:Y,lineNumber:252,columnNumber:31}},""),e.createElement("span",{__self:this,__source:{fileName:Y,lineNumber:253,columnNumber:31}},"Value: KSh ",h.toLocaleString())),_.farmer&&e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",__self:this,__source:{fileName:Y,lineNumber:260,columnNumber:31}},e.createElement("h4",{className:"text-sm font-medium text-blue-900 mb-2",__self:this,__source:{fileName:Y,lineNumber:261,columnNumber:33}},"Farmer Contact"),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-sm text-blue-700",__self:this,__source:{fileName:Y,lineNumber:264,columnNumber:33}},e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:Y,lineNumber:265,columnNumber:35}},e.createElement(nt,{className:"w-4 h-4",__self:this,__source:{fileName:Y,lineNumber:266,columnNumber:37}}),e.createElement("span",{__self:this,__source:{fileName:Y,lineNumber:267,columnNumber:37}},_.farmer.name)),e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:Y,lineNumber:269,columnNumber:35}},e.createElement(Et,{className:"w-4 h-4",__self:this,__source:{fileName:Y,lineNumber:270,columnNumber:37}}),e.createElement("a",{href:`tel:${_.farmer.phone}`,className:"hover:underline",__self:this,__source:{fileName:Y,lineNumber:271,columnNumber:37}},_.farmer.phone)),_.farmer.profile?.county&&e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:Y,lineNumber:279,columnNumber:37}},e.createElement(it,{className:"w-4 h-4",__self:this,__source:{fileName:Y,lineNumber:280,columnNumber:39}}),e.createElement("span",{__self:this,__source:{fileName:Y,lineNumber:281,columnNumber:39}},_.farmer.profile.county)))),e.createElement("div",{className:"flex items-center gap-4 text-sm text-gray-500",__self:this,__source:{fileName:Y,lineNumber:291,columnNumber:29}},e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:Y,lineNumber:292,columnNumber:31}},e.createElement(yt,{className:"w-4 h-4",__self:this,__source:{fileName:Y,lineNumber:293,columnNumber:33}}),e.createElement("span",{__self:this,__source:{fileName:Y,lineNumber:294,columnNumber:33}},"Expected:"," ",new Date(_.expectedDeliveryDate).toLocaleDateString())))))),e.createElement("div",{className:"flex flex-col lg:items-end gap-3",__self:this,__source:{fileName:Y,lineNumber:306,columnNumber:23}},e.createElement("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${o?.color||"bg-gray-100 text-gray-800"}`,__self:this,__source:{fileName:Y,lineNumber:307,columnNumber:25}},e.createElement(f,{className:"w-4 h-4",__self:this,__source:{fileName:Y,lineNumber:310,columnNumber:27}}),o?.label||_.status),e.createElement("div",{className:"flex items-center gap-2 text-xs text-gray-400",__self:this,__source:{fileName:Y,lineNumber:314,columnNumber:25}},e.createElement(yt,{className:"w-3 h-3",__self:this,__source:{fileName:Y,lineNumber:315,columnNumber:27}}),"Assigned:"," ",new Date(_.createdAt).toLocaleDateString()),o?.action&&e.createElement("button",{onClick:()=>u(_),disabled:m===_.id,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${_.status==="DRIVER_ASSIGNED"?"bg-blue-600 text-white hover:bg-blue-700":"bg-green-600 text-white hover:bg-green-700"} disabled:bg-gray-400 disabled:cursor-not-allowed`,__self:this,__source:{fileName:Y,lineNumber:322,columnNumber:27}},m===_.id?e.createElement(e.Fragment,null,e.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white",__self:this,__source:{fileName:Y,lineNumber:333,columnNumber:33}}),"Updating..."):e.createElement(e.Fragment,null,_.status==="DRIVER_ASSIGNED"?e.createElement(lm,{className:"w-4 h-4",__self:this,__source:{fileName:Y,lineNumber:339,columnNumber:35}}):e.createElement(sm,{className:"w-4 h-4",__self:this,__source:{fileName:Y,lineNumber:341,columnNumber:35}}),o.action)),_.status==="DELIVERED"&&e.createElement("div",{className:"text-xs text-green-600 font-medium",__self:this,__source:{fileName:Y,lineNumber:350,columnNumber:27}}," Ready for warehouse processing"))),_.status==="DRIVER_ASSIGNED"&&e.createElement("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",__self:this,__source:{fileName:Y,lineNumber:359,columnNumber:23}},e.createElement("div",{className:"flex items-start gap-2",__self:this,__source:{fileName:Y,lineNumber:360,columnNumber:25}},e.createElement(wt,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0",__self:this,__source:{fileName:Y,lineNumber:361,columnNumber:27}}),e.createElement("div",{className:"text-sm text-yellow-700",__self:this,__source:{fileName:Y,lineNumber:362,columnNumber:27}},e.createElement("p",{className:"font-medium mb-1",__self:this,__source:{fileName:Y,lineNumber:363,columnNumber:29}},"Transport Instructions:"),e.createElement("ul",{className:"text-xs space-y-1",__self:this,__source:{fileName:Y,lineNumber:366,columnNumber:29}},e.createElement("li",{__self:this,__source:{fileName:Y,lineNumber:367,columnNumber:31}}," Contact farmer to arrange pickup time"),e.createElement("li",{__self:this,__source:{fileName:Y,lineNumber:368,columnNumber:31}}," Verify produce quality and quantity"),e.createElement("li",{__self:this,__source:{fileName:Y,lineNumber:369,columnNumber:31}}," Handle with care during transport"),e.createElement("li",{__self:this,__source:{fileName:Y,lineNumber:370,columnNumber:31}}," Deliver to Main Warehouse, Nairobi Industrial Area"))))),_.status==="IN_TRANSIT"&&e.createElement("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",__self:this,__source:{fileName:Y,lineNumber:381,columnNumber:23}},e.createElement("div",{className:"flex items-start gap-2",__self:this,__source:{fileName:Y,lineNumber:382,columnNumber:25}},e.createElement(ul,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0",__self:this,__source:{fileName:Y,lineNumber:383,columnNumber:27}}),e.createElement("div",{className:"text-sm text-blue-700",__self:this,__source:{fileName:Y,lineNumber:384,columnNumber:27}},e.createElement("p",{className:"font-medium mb-1",__self:this,__source:{fileName:Y,lineNumber:385,columnNumber:29}},"En Route to Warehouse"),e.createElement("p",{className:"text-xs",__self:this,__source:{fileName:Y,lineNumber:388,columnNumber:29}},"Mark as delivered once you arrive at the warehouse and unload the produce.")))))})))))}var W="/app/code/frontend/src/pages/driver/WarehousePage.tsx";function Yu(){const{token:t}=Ae(),[r,l]=P.useState([]),[s,a]=P.useState(!0),[m,n]=P.useState(!1),[i,b]=P.useState(null),[u,_]=P.useState({marketPrice:"",description:"",images:[],isFeatured:!1,tags:[]}),[o,f]=P.useState(""),[h,w]=P.useState(!1);P.useEffect(()=>{g()},[]);const g=async()=>{try{const q=await me.get("/api/warehouse/inventory",{headers:{Authorization:`Bearer ${t}`}});l(Array.isArray(q.data?.inventory)?q.data.inventory:[])}catch(q){console.error("Error fetching inventory:",q),L.error("Failed to fetch warehouse inventory")}finally{a(!1)}},p=q=>{b(q),_({marketPrice:q.finalPricePerUnit.toString(),description:q.description,images:q.images,isFeatured:!1,tags:[]}),n(!0)},S=()=>{o.trim()&&Array.isArray(u.tags)&&!u.tags.includes(o.trim())&&(_({...u,tags:[...Array.isArray(u.tags)?u.tags:[],o.trim()]}),f(""))},E=q=>{_({...u,tags:Array.isArray(u.tags)?u.tags.filter(le=>le!==q):[]})},M=()=>{const q=prompt("Enter image URL:");q&&q.trim()&&_({...u,images:[...Array.isArray(u.images)?u.images:[],q.trim()]})},I=q=>{_({...u,images:Array.isArray(u.images)?u.images.filter((le,F)=>F!==q):[]})},B=async()=>{if(i){if(!u.marketPrice||Number(u.marketPrice)<=0){L.error("Please enter a valid market price");return}w(!0);try{await me.post("/api/warehouse/add-to-marketplace",{consignmentId:i.id,marketPrice:Number(u.marketPrice),description:u.description,images:u.images,isFeatured:u.isFeatured,tags:u.tags},{headers:{Authorization:`Bearer ${t}`}}),L.success("Product added to marketplace successfully!"),n(!1),g(),_({marketPrice:"",description:"",images:[],isFeatured:!1,tags:[]})}catch(q){console.error("Error adding to marketplace:",q),L.error("Failed to add product to marketplace")}finally{w(!1)}}};return s?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:W,lineNumber:171,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:W,lineNumber:172,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:W,lineNumber:173,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:W,lineNumber:174,columnNumber:11}},"Loading warehouse inventory..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:W,lineNumber:181,columnNumber:5}},e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:W,lineNumber:182,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:W,lineNumber:184,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:W,lineNumber:185,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:W,lineNumber:186,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:W,lineNumber:187,columnNumber:15}},"Warehouse Management"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:W,lineNumber:190,columnNumber:15}},"Manage delivered produce and add items to marketplace")),e.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600",__self:this,__source:{fileName:W,lineNumber:194,columnNumber:13}},e.createElement(ge,{className:"w-4 h-4",__self:this,__source:{fileName:W,lineNumber:195,columnNumber:15}}),e.createElement("span",{__self:this,__source:{fileName:W,lineNumber:196,columnNumber:15}},"Inventory Manager")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",__self:this,__source:{fileName:W,lineNumber:202,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:W,lineNumber:203,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:W,lineNumber:204,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:W,lineNumber:205,columnNumber:15}},e.createElement(ge,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:W,lineNumber:206,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:W,lineNumber:208,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:W,lineNumber:209,columnNumber:17}},Array.isArray(r)?r.length:0),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:W,lineNumber:212,columnNumber:17}},"Items in Warehouse")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:W,lineNumber:217,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:W,lineNumber:218,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:W,lineNumber:219,columnNumber:15}},e.createElement(Fe,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:W,lineNumber:220,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:W,lineNumber:222,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:W,lineNumber:223,columnNumber:17}},Array.isArray(r)?r.filter(q=>q.marketplaceProductId).length:0),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:W,lineNumber:226,columnNumber:17}},"Added to Marketplace")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:W,lineNumber:231,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:W,lineNumber:232,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:W,lineNumber:233,columnNumber:15}},e.createElement(Bl,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:W,lineNumber:234,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:W,lineNumber:236,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:W,lineNumber:237,columnNumber:17}},Array.isArray(r)?r.filter(q=>!q.marketplaceProductId).length:0),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:W,lineNumber:243,columnNumber:17}},"Pending Upload"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:W,lineNumber:250,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:W,lineNumber:251,columnNumber:11}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:W,lineNumber:252,columnNumber:13}},"Warehouse Inventory")),!Array.isArray(r)||r.length===0?e.createElement("div",{className:"p-12 text-center",__self:this,__source:{fileName:W,lineNumber:258,columnNumber:13}},e.createElement(ge,{className:"w-16 h-16 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:W,lineNumber:259,columnNumber:15}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:W,lineNumber:260,columnNumber:15}},"No inventory items"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:W,lineNumber:263,columnNumber:15}},"Delivered produce will appear here for marketplace processing")):e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:W,lineNumber:268,columnNumber:13}},Array.isArray(r)&&r.map(q=>e.createElement("div",{key:q.id,className:"p-6 hover:bg-gray-50",__self:this,__source:{fileName:W,lineNumber:270,columnNumber:17}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",__self:this,__source:{fileName:W,lineNumber:271,columnNumber:19}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:W,lineNumber:272,columnNumber:21}},e.createElement("div",{className:"flex items-start gap-4",__self:this,__source:{fileName:W,lineNumber:273,columnNumber:23}},e.createElement("div",{className:"w-20 h-20 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",__self:this,__source:{fileName:W,lineNumber:274,columnNumber:25}},Array.isArray(q.images)&&q.images.length>0?e.createElement("img",{src:q.images[0],alt:q.title,className:"w-full h-full object-cover rounded-lg",__self:this,__source:{fileName:W,lineNumber:276,columnNumber:29}}):e.createElement(ge,{className:"w-8 h-8 text-gray-600",__self:this,__source:{fileName:W,lineNumber:282,columnNumber:29}})),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:W,lineNumber:286,columnNumber:25}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-1",__self:this,__source:{fileName:W,lineNumber:287,columnNumber:27}},q.title),e.createElement("p",{className:"text-gray-600 text-sm mb-3",__self:this,__source:{fileName:W,lineNumber:290,columnNumber:27}},q.description),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 mb-2",__self:this,__source:{fileName:W,lineNumber:294,columnNumber:27}},e.createElement("span",{__self:this,__source:{fileName:W,lineNumber:295,columnNumber:29}},q.quantity," ",q.unit),e.createElement("span",{__self:this,__source:{fileName:W,lineNumber:298,columnNumber:29}},""),e.createElement("span",{__self:this,__source:{fileName:W,lineNumber:299,columnNumber:29}},"KSh ",q.finalPricePerUnit," per ",q.unit),e.createElement("span",{__self:this,__source:{fileName:W,lineNumber:302,columnNumber:29}},""),e.createElement("span",{__self:this,__source:{fileName:W,lineNumber:303,columnNumber:29}},q.category)),e.createElement("div",{className:"text-sm",__self:this,__source:{fileName:W,lineNumber:306,columnNumber:27}},e.createElement("span",{className:"text-gray-500",__self:this,__source:{fileName:W,lineNumber:307,columnNumber:29}},"Total Value: "),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:W,lineNumber:308,columnNumber:29}},"KSh"," ",(q.finalPricePerUnit*q.quantity).toLocaleString()))))),e.createElement("div",{className:"flex flex-col lg:items-end gap-3",__self:this,__source:{fileName:W,lineNumber:319,columnNumber:21}},q.marketplaceProductId?e.createElement("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",__self:this,__source:{fileName:W,lineNumber:321,columnNumber:25}},e.createElement(Fe,{className:"w-4 h-4",__self:this,__source:{fileName:W,lineNumber:322,columnNumber:27}}),"On Marketplace"):e.createElement("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",__self:this,__source:{fileName:W,lineNumber:326,columnNumber:25}},e.createElement(Bl,{className:"w-4 h-4",__self:this,__source:{fileName:W,lineNumber:327,columnNumber:27}}),"Ready to Upload"),q.marketplaceProductId?e.createElement("button",{className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors flex items-center gap-2",disabled:!0,__self:this,__source:{fileName:W,lineNumber:341,columnNumber:25}},e.createElement(xt,{className:"w-4 h-4",__self:this,__source:{fileName:W,lineNumber:345,columnNumber:27}}),"View on Marketplace"):e.createElement("button",{onClick:()=>p(q),className:"bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-700 transition-colors flex items-center gap-2",__self:this,__source:{fileName:W,lineNumber:333,columnNumber:25}},e.createElement($t,{className:"w-4 h-4",__self:this,__source:{fileName:W,lineNumber:337,columnNumber:27}}),"Add to Marketplace"))))))),m&&i&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:W,lineNumber:359,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",__self:this,__source:{fileName:W,lineNumber:360,columnNumber:13}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:W,lineNumber:361,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:W,lineNumber:362,columnNumber:17}},"Add to Marketplace"),e.createElement("p",{className:"text-gray-600 text-sm mt-1",__self:this,__source:{fileName:W,lineNumber:365,columnNumber:17}},i.title)),e.createElement("div",{className:"p-6 space-y-6",__self:this,__source:{fileName:W,lineNumber:370,columnNumber:15}},e.createElement("div",{__self:this,__source:{fileName:W,lineNumber:372,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:W,lineNumber:373,columnNumber:19}},"Market Price (KSh per ",i.unit,") *"),e.createElement("input",{type:"number",value:u.marketPrice,onChange:q=>_({...u,marketPrice:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter market price",min:"1",required:!0,__self:this,__source:{fileName:W,lineNumber:376,columnNumber:19}}),e.createElement("p",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:W,lineNumber:390,columnNumber:19}},"Farmer price: KSh ",i.finalPricePerUnit," per"," ",i.unit)),e.createElement("div",{__self:this,__source:{fileName:W,lineNumber:397,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:W,lineNumber:398,columnNumber:19}},"Market Description"),e.createElement("textarea",{value:u.description,onChange:q=>_({...u,description:q.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enhance the product description for customers",__self:this,__source:{fileName:W,lineNumber:401,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:W,lineNumber:416,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:W,lineNumber:417,columnNumber:19}},"Product Images"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:W,lineNumber:420,columnNumber:19}},Array.isArray(u.images)&&u.images.length>0&&e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",__self:this,__source:{fileName:W,lineNumber:422,columnNumber:23}},Array.isArray(u.images)&&u.images.map((q,le)=>e.createElement("div",{key:le,className:"relative",__self:this,__source:{fileName:W,lineNumber:424,columnNumber:27}},e.createElement("img",{src:q,alt:`Product ${le+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-200",__self:this,__source:{fileName:W,lineNumber:425,columnNumber:29}}),e.createElement("button",{onClick:()=>I(le),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",__self:this,__source:{fileName:W,lineNumber:430,columnNumber:29}},"")))),e.createElement("button",{onClick:M,className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",__self:this,__source:{fileName:W,lineNumber:440,columnNumber:21}},e.createElement(Ds,{className:"w-6 h-6 text-gray-400 mx-auto mb-2",__self:this,__source:{fileName:W,lineNumber:444,columnNumber:23}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:W,lineNumber:445,columnNumber:23}},"Add Image URL")))),e.createElement("div",{__self:this,__source:{fileName:W,lineNumber:453,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:W,lineNumber:454,columnNumber:19}},"Product Tags"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:W,lineNumber:457,columnNumber:19}},Array.isArray(u.tags)&&u.tags.length>0&&e.createElement("div",{className:"flex flex-wrap gap-2",__self:this,__source:{fileName:W,lineNumber:459,columnNumber:23}},Array.isArray(u.tags)&&u.tags.map((q,le)=>e.createElement("span",{key:le,className:"inline-flex items-center gap-1 bg-primary-100 text-primary-800 px-2 py-1 rounded text-sm",__self:this,__source:{fileName:W,lineNumber:461,columnNumber:27}},q,e.createElement("button",{onClick:()=>E(q),className:"text-primary-600 hover:text-primary-800",__self:this,__source:{fileName:W,lineNumber:466,columnNumber:29}},"")))),e.createElement("div",{className:"flex gap-2",__self:this,__source:{fileName:W,lineNumber:476,columnNumber:21}},e.createElement("input",{type:"text",value:o,onChange:q=>f(q.target.value),onKeyPress:q=>q.key==="Enter"&&S(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Add a tag (e.g., organic, fresh)",__self:this,__source:{fileName:W,lineNumber:477,columnNumber:23}}),e.createElement("button",{onClick:S,className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors",__self:this,__source:{fileName:W,lineNumber:485,columnNumber:23}},e.createElement(lr,{className:"w-4 h-4",__self:this,__source:{fileName:W,lineNumber:489,columnNumber:25}}))))),e.createElement("div",{__self:this,__source:{fileName:W,lineNumber:496,columnNumber:17}},e.createElement("label",{className:"flex items-center gap-2",__self:this,__source:{fileName:W,lineNumber:497,columnNumber:19}},e.createElement("input",{type:"checkbox",checked:u.isFeatured,onChange:q=>_({...u,isFeatured:q.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500",__self:this,__source:{fileName:W,lineNumber:498,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-gray-700",__self:this,__source:{fileName:W,lineNumber:509,columnNumber:21}},"Mark as Featured Product")),e.createElement("p",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:W,lineNumber:513,columnNumber:19}},"Featured products appear prominently on the marketplace")),e.createElement("div",{className:"flex gap-4 pt-4",__self:this,__source:{fileName:W,lineNumber:519,columnNumber:17}},e.createElement("button",{type:"button",onClick:()=>n(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:h,__self:this,__source:{fileName:W,lineNumber:520,columnNumber:19}},"Cancel"),e.createElement("button",{onClick:B,className:"flex-1 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:h,__self:this,__source:{fileName:W,lineNumber:528,columnNumber:19}},h?"Adding...":"Add to Marketplace")))))))}var Pe="/app/code/frontend/src/pages/ComingSoonPage.tsx";function Zu({title:t="Coming Soon",description:r="This feature is currently under development and will be available soon.",features:l=[]}){const s=_t();return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center py-12 px-4",__self:this,__source:{fileName:Pe,lineNumber:19,columnNumber:5}},e.createElement("div",{className:"max-w-md w-full",__self:this,__source:{fileName:Pe,lineNumber:20,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",__self:this,__source:{fileName:Pe,lineNumber:21,columnNumber:9}},e.createElement("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6",__self:this,__source:{fileName:Pe,lineNumber:23,columnNumber:11}},e.createElement(am,{className:"w-10 h-10 text-primary-600",__self:this,__source:{fileName:Pe,lineNumber:24,columnNumber:13}})),e.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:Pe,lineNumber:28,columnNumber:11}},t),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:Pe,lineNumber:31,columnNumber:11}},r),l.length>0&&e.createElement("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",__self:this,__source:{fileName:Pe,lineNumber:35,columnNumber:13}},e.createElement("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",__self:this,__source:{fileName:Pe,lineNumber:36,columnNumber:15}},e.createElement(mr,{className:"w-4 h-4 text-yellow-500 mr-2",__self:this,__source:{fileName:Pe,lineNumber:37,columnNumber:17}}),"Coming Features:"),e.createElement("ul",{className:"space-y-2",__self:this,__source:{fileName:Pe,lineNumber:40,columnNumber:15}},l.map((a,m)=>e.createElement("li",{key:m,className:"text-sm text-gray-600 flex items-center",__self:this,__source:{fileName:Pe,lineNumber:42,columnNumber:19}},e.createElement("div",{className:"w-1.5 h-1.5 bg-primary-600 rounded-full mr-2",__self:this,__source:{fileName:Pe,lineNumber:46,columnNumber:21}}),a)))),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",__self:this,__source:{fileName:Pe,lineNumber:55,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-center text-blue-700",__self:this,__source:{fileName:Pe,lineNumber:56,columnNumber:13}},e.createElement(Ie,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:Pe,lineNumber:57,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium",__self:this,__source:{fileName:Pe,lineNumber:58,columnNumber:15}},"Expected Launch: Coming Soon"))),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:Pe,lineNumber:65,columnNumber:11}},e.createElement("button",{onClick:()=>s(-1),className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 transition-colors flex items-center justify-center",__self:this,__source:{fileName:Pe,lineNumber:66,columnNumber:13}},e.createElement(rr,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:Pe,lineNumber:70,columnNumber:15}}),"Go Back"),e.createElement(xe,{to:"/",className:"block w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors",__self:this,__source:{fileName:Pe,lineNumber:74,columnNumber:13}},"Return to Homepage")),e.createElement("div",{className:"mt-6 pt-6 border-t border-gray-200",__self:this,__source:{fileName:Pe,lineNumber:83,columnNumber:11}},e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:Pe,lineNumber:84,columnNumber:13}},"We're working hard to bring you the best experience.",e.createElement("br",{__self:this,__source:{fileName:Pe,lineNumber:86,columnNumber:15}}),"Thank you for your patience!")))))}var pe="/app/code/frontend/src/pages/TestMpesaPage.tsx";function Xu(){const[t,r]=P.useState("0712345678"),[l,s]=P.useState(100),[a,m]=P.useState(!1),n=()=>localStorage.getItem("token"),i=async()=>{m(!0);try{const o=n();if(!o){L.error("Please login first");return}const f=await me.post("/api/payments/registration-fee",{phoneNumber:t},{headers:{Authorization:`Bearer ${o}`}});L.success("Registration fee payment initiated!"),console.log("Registration fee response:",f.data)}catch(o){L.error(o.response?.data?.error||"Payment failed"),console.error("Registration fee error:",o)}finally{m(!1)}},b=async()=>{m(!0);try{const o=n();if(!o){L.error("Please login first");return}const f=await me.post("/api/wallet/withdraw",{amount:l,phoneNumber:t},{headers:{Authorization:`Bearer ${o}`}});L.success("Wallet withdrawal initiated!"),console.log("Withdrawal response:",f.data)}catch(o){L.error(o.response?.data?.error||"Withdrawal failed"),console.error("Withdrawal error:",o)}finally{m(!1)}},u=async()=>{m(!0);try{const o=Tr(t);if(!yl(o)){L.error("Please enter a valid Kenyan phone number");return}const f=await me.post("/api/payments/stk-push",{phone:o,amount:l,orderId:"test-order-"+Date.now(),accountReference:"Test Payment",transactionDesc:"Test STK Push"});f.data.success?(L.success("M-Pesa payment request sent!"),console.log("STK Push response:",f.data)):L.error("Failed to initiate payment")}catch(o){L.error(o.response?.data?.error||"STK Push failed"),console.error("STK Push error:",o)}finally{m(!1)}},_=()=>{const o=Tr(t),f=yl(t);L(`Phone: ${t}  ${o} (Valid: ${f})`,{icon:""}),console.log("Phone validation:",{original:t,formatted:o,isValid:f})};return e.createElement("div",{className:"max-w-4xl mx-auto p-6",__self:this,__source:{fileName:pe,lineNumber:112,columnNumber:5}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-8",__self:this,__source:{fileName:pe,lineNumber:113,columnNumber:7}},"M-Pesa Integration Test"),e.createElement("div",{className:"bg-white rounded-lg shadow p-6 mb-6",__self:this,__source:{fileName:pe,lineNumber:117,columnNumber:7}},e.createElement("h2",{className:"text-xl font-semibold mb-4",__self:this,__source:{fileName:pe,lineNumber:118,columnNumber:9}},"Test Configuration"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",__self:this,__source:{fileName:pe,lineNumber:120,columnNumber:9}},e.createElement("div",{__self:this,__source:{fileName:pe,lineNumber:121,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:pe,lineNumber:122,columnNumber:13}},"Phone Number"),e.createElement("input",{type:"tel",value:t,onChange:o=>r(o.target.value),placeholder:"0712345678",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",__self:this,__source:{fileName:pe,lineNumber:125,columnNumber:13}})),e.createElement("div",{__self:this,__source:{fileName:pe,lineNumber:134,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:pe,lineNumber:135,columnNumber:13}},"Amount (KES)"),e.createElement("input",{type:"number",value:l,onChange:o=>s(Number(o.target.value)),min:"1",max:"150000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",__self:this,__source:{fileName:pe,lineNumber:138,columnNumber:13}}))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",__self:this,__source:{fileName:pe,lineNumber:149,columnNumber:9}},e.createElement("button",{onClick:_,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",__self:this,__source:{fileName:pe,lineNumber:150,columnNumber:11}},"Validate Phone"),e.createElement("button",{onClick:i,disabled:a,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",__self:this,__source:{fileName:pe,lineNumber:157,columnNumber:11}},"Test Registration Fee"),e.createElement("button",{onClick:b,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",__self:this,__source:{fileName:pe,lineNumber:165,columnNumber:11}},"Test Withdrawal"),e.createElement("button",{onClick:u,disabled:a,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",__self:this,__source:{fileName:pe,lineNumber:173,columnNumber:11}},"Test STK Push"))),e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",__self:this,__source:{fileName:pe,lineNumber:183,columnNumber:7}},e.createElement("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",__self:this,__source:{fileName:pe,lineNumber:184,columnNumber:9}},"Demo Configuration"),e.createElement("div",{className:"text-sm text-yellow-700 space-y-1",__self:this,__source:{fileName:pe,lineNumber:187,columnNumber:9}},e.createElement("p",{__self:this,__source:{fileName:pe,lineNumber:188,columnNumber:11}},e.createElement("strong",{__self:this,__source:{fileName:pe,lineNumber:189,columnNumber:13}},"Environment:")," Sandbox"),e.createElement("p",{__self:this,__source:{fileName:pe,lineNumber:191,columnNumber:11}},e.createElement("strong",{__self:this,__source:{fileName:pe,lineNumber:192,columnNumber:13}},"Business Short Code:")," 174379"),e.createElement("p",{__self:this,__source:{fileName:pe,lineNumber:194,columnNumber:11}},e.createElement("strong",{__self:this,__source:{fileName:pe,lineNumber:195,columnNumber:13}},"Test Phone:")," 0712345678 (or any valid Kenyan number)"),e.createElement("p",{__self:this,__source:{fileName:pe,lineNumber:197,columnNumber:11}},e.createElement("strong",{__self:this,__source:{fileName:pe,lineNumber:198,columnNumber:13}},"Demo Credentials:")," Configured for development"))),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",__self:this,__source:{fileName:pe,lineNumber:203,columnNumber:7}},e.createElement("h3",{className:"text-lg font-semibold text-blue-800 mb-2",__self:this,__source:{fileName:pe,lineNumber:204,columnNumber:9}},"How to Test"),e.createElement("div",{className:"text-sm text-blue-700 space-y-2",__self:this,__source:{fileName:pe,lineNumber:207,columnNumber:9}},e.createElement("p",{__self:this,__source:{fileName:pe,lineNumber:208,columnNumber:11}},"1. ",e.createElement("strong",{__self:this,__source:{fileName:pe,lineNumber:209,columnNumber:16}},"Login:")," Use demo credentials to login as farmer/customer"),e.createElement("p",{__self:this,__source:{fileName:pe,lineNumber:212,columnNumber:11}},"2. ",e.createElement("strong",{__self:this,__source:{fileName:pe,lineNumber:213,columnNumber:16}},"Registration Fee:")," Test farmer activation payment (KES 300)"),e.createElement("p",{__self:this,__source:{fileName:pe,lineNumber:216,columnNumber:11}},"3. ",e.createElement("strong",{__self:this,__source:{fileName:pe,lineNumber:217,columnNumber:16}},"Wallet Withdrawal:")," Test farmer wallet withdrawal"),e.createElement("p",{__self:this,__source:{fileName:pe,lineNumber:219,columnNumber:11}},"4. ",e.createElement("strong",{__self:this,__source:{fileName:pe,lineNumber:220,columnNumber:16}},"STK Push:")," Test direct M-Pesa payment request"),e.createElement("p",{__self:this,__source:{fileName:pe,lineNumber:222,columnNumber:11}},"5. ",e.createElement("strong",{__self:this,__source:{fileName:pe,lineNumber:223,columnNumber:16}},"Checkout:")," Go to marketplace, add items, and checkout with M-Pesa"))))}var ee="/app/code/frontend/src/App.tsx";const He=({children:t,allowedRoles:r})=>{const{user:l,isAuthenticated:s}=Ae();return s?r&&l&&!r.includes(l.role)?e.createElement(dt,{to:"/",replace:!0,__self:void 0,__source:{fileName:ee,lineNumber:66,columnNumber:12}}):e.createElement(e.Fragment,null,t):e.createElement(dt,{to:"/login",replace:!0,__self:void 0,__source:{fileName:ee,lineNumber:62,columnNumber:12}})},eo=()=>{const{user:t}=Ae();if(!t)return e.createElement(dt,{to:"/login",replace:!0,__self:void 0,__source:{fileName:ee,lineNumber:77,columnNumber:12}});switch(t.role){case"FARMER":return e.createElement(dt,{to:"/farmer/dashboard",replace:!0,__self:void 0,__source:{fileName:ee,lineNumber:82,columnNumber:14}});case"CUSTOMER":return e.createElement(dt,{to:"/customer/profile",replace:!0,__self:void 0,__source:{fileName:ee,lineNumber:84,columnNumber:14}});case"ADMIN":return e.createElement(dt,{to:"/admin/dashboard",replace:!0,__self:void 0,__source:{fileName:ee,lineNumber:86,columnNumber:14}});case"DRIVER":return e.createElement(dt,{to:"/driver/dashboard",replace:!0,__self:void 0,__source:{fileName:ee,lineNumber:88,columnNumber:14}});default:return e.createElement(dt,{to:"/",replace:!0,__self:void 0,__source:{fileName:ee,lineNumber:90,columnNumber:14}})}};function to(){const{isAuthenticated:t,user:r}=Ae();return P.useEffect(()=>{Vi()},[]),e.createElement(qi,{__self:this,__source:{fileName:ee,lineNumber:102,columnNumber:5}},e.createElement(ja,{__self:this,__source:{fileName:ee,lineNumber:103,columnNumber:7}},e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:ee,lineNumber:104,columnNumber:9}},e.createElement(Bi,{__self:this,__source:{fileName:ee,lineNumber:105,columnNumber:11}}),e.createElement("main",{className:"pb-16 lg:pb-0",__self:this,__source:{fileName:ee,lineNumber:107,columnNumber:11}},e.createElement(Ua,{__self:this,__source:{fileName:ee,lineNumber:108,columnNumber:13}},e.createElement(Ce,{path:"/",element:e.createElement(Qi,{__self:this,__source:{fileName:ee,lineNumber:110,columnNumber:40}}),__self:this,__source:{fileName:ee,lineNumber:110,columnNumber:15}}),e.createElement(Ce,{path:"/marketplace",element:e.createElement(Yi,{__self:this,__source:{fileName:ee,lineNumber:111,columnNumber:51}}),__self:this,__source:{fileName:ee,lineNumber:111,columnNumber:15}}),e.createElement(Ce,{path:"/marketplace/product/:id",element:e.createElement(Zi,{__self:this,__source:{fileName:ee,lineNumber:114,columnNumber:26}}),__self:this,__source:{fileName:ee,lineNumber:112,columnNumber:15}}),e.createElement(Ce,{path:"/login",element:e.createElement(Xi,{__self:this,__source:{fileName:ee,lineNumber:116,columnNumber:45}}),__self:this,__source:{fileName:ee,lineNumber:116,columnNumber:15}}),e.createElement(Ce,{path:"/register",element:e.createElement(wu,{__self:this,__source:{fileName:ee,lineNumber:117,columnNumber:48}}),__self:this,__source:{fileName:ee,lineNumber:117,columnNumber:15}}),e.createElement(Ce,{path:"/dashboard",element:e.createElement(eo,{__self:this,__source:{fileName:ee,lineNumber:120,columnNumber:49}}),__self:this,__source:{fileName:ee,lineNumber:120,columnNumber:15}}),e.createElement(Ce,{path:"/farmer/dashboard",element:e.createElement(He,{allowedRoles:["FARMER"],__self:this,__source:{fileName:ee,lineNumber:126,columnNumber:19}},e.createElement(Su,{__self:this,__source:{fileName:ee,lineNumber:127,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:123,columnNumber:15}}),e.createElement(Ce,{path:"/customer/dashboard",element:e.createElement(He,{allowedRoles:["CUSTOMER"],__self:this,__source:{fileName:ee,lineNumber:136,columnNumber:19}},e.createElement(Du,{__self:this,__source:{fileName:ee,lineNumber:137,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:133,columnNumber:15}}),e.createElement(Ce,{path:"/customer/profile",element:e.createElement(He,{allowedRoles:["CUSTOMER"],__self:this,__source:{fileName:ee,lineNumber:144,columnNumber:19}},e.createElement(Ru,{__self:this,__source:{fileName:ee,lineNumber:145,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:141,columnNumber:15}}),e.createElement(Ce,{path:"/customer/orders",element:e.createElement(He,{allowedRoles:["CUSTOMER"],__self:this,__source:{fileName:ee,lineNumber:152,columnNumber:19}},e.createElement(Fu,{__self:this,__source:{fileName:ee,lineNumber:153,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:149,columnNumber:15}}),e.createElement(Ce,{path:"/cart",element:e.createElement(Tu,{__self:this,__source:{fileName:ee,lineNumber:157,columnNumber:44}}),__self:this,__source:{fileName:ee,lineNumber:157,columnNumber:15}}),e.createElement(Ce,{path:"/checkout",element:e.createElement(Lu,{__self:this,__source:{fileName:ee,lineNumber:158,columnNumber:48}}),__self:this,__source:{fileName:ee,lineNumber:158,columnNumber:15}}),e.createElement(Ce,{path:"/admin/dashboard",element:e.createElement(He,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:ee,lineNumber:164,columnNumber:19}},e.createElement(Mu,{__self:this,__source:{fileName:ee,lineNumber:165,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:161,columnNumber:15}}),e.createElement(Ce,{path:"/admin/users",element:e.createElement(He,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:ee,lineNumber:172,columnNumber:19}},e.createElement($u,{__self:this,__source:{fileName:ee,lineNumber:173,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:169,columnNumber:15}}),e.createElement(Ce,{path:"/admin/consignments",element:e.createElement(He,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:ee,lineNumber:180,columnNumber:19}},e.createElement(Vu,{__self:this,__source:{fileName:ee,lineNumber:181,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:177,columnNumber:15}}),e.createElement(Ce,{path:"/admin/analytics",element:e.createElement(He,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:ee,lineNumber:188,columnNumber:19}},e.createElement(Ku,{__self:this,__source:{fileName:ee,lineNumber:189,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:185,columnNumber:15}}),e.createElement(Ce,{path:"/admin/settings",element:e.createElement(He,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:ee,lineNumber:196,columnNumber:19}},e.createElement(Bu,{__self:this,__source:{fileName:ee,lineNumber:197,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:193,columnNumber:15}}),e.createElement(Ce,{path:"/admin/marketplace",element:e.createElement(He,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:ee,lineNumber:204,columnNumber:19}},e.createElement(Gu,{__self:this,__source:{fileName:ee,lineNumber:205,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:201,columnNumber:15}}),e.createElement(Ce,{path:"/admin/registration-fees",element:e.createElement(He,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:ee,lineNumber:212,columnNumber:19}},e.createElement(zu,{__self:this,__source:{fileName:ee,lineNumber:213,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:209,columnNumber:15}}),e.createElement(Ce,{path:"/admin/farmer-categories",element:e.createElement(He,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:ee,lineNumber:220,columnNumber:19}},e.createElement(Hu,{__self:this,__source:{fileName:ee,lineNumber:221,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:217,columnNumber:15}}),e.createElement(Ce,{path:"/driver/dashboard",element:e.createElement(He,{allowedRoles:["DRIVER"],__self:this,__source:{fileName:ee,lineNumber:230,columnNumber:19}},e.createElement(Wu,{__self:this,__source:{fileName:ee,lineNumber:231,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:227,columnNumber:15}}),e.createElement(Ce,{path:"/driver/assignments",element:e.createElement(He,{allowedRoles:["DRIVER"],__self:this,__source:{fileName:ee,lineNumber:238,columnNumber:19}},e.createElement(Ju,{__self:this,__source:{fileName:ee,lineNumber:239,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:235,columnNumber:15}}),e.createElement(Ce,{path:"/driver/warehouse",element:e.createElement(He,{allowedRoles:["DRIVER"],__self:this,__source:{fileName:ee,lineNumber:246,columnNumber:19}},e.createElement(Yu,{__self:this,__source:{fileName:ee,lineNumber:247,columnNumber:21}})),__self:this,__source:{fileName:ee,lineNumber:243,columnNumber:15}}),e.createElement(Ce,{path:"/farmer/consignments",element:e.createElement(dt,{to:"/farmer/dashboard",replace:!0,__self:this,__source:{fileName:ee,lineNumber:255,columnNumber:26}}),__self:this,__source:{fileName:ee,lineNumber:253,columnNumber:15}}),e.createElement(Ce,{path:"/farmer/wallet",element:e.createElement(dt,{to:"/farmer/dashboard",replace:!0,__self:this,__source:{fileName:ee,lineNumber:259,columnNumber:26}}),__self:this,__source:{fileName:ee,lineNumber:257,columnNumber:15}}),e.createElement(Ce,{path:"/test-mpesa",element:e.createElement(Xu,{__self:this,__source:{fileName:ee,lineNumber:263,columnNumber:50}}),__self:this,__source:{fileName:ee,lineNumber:263,columnNumber:15}}),e.createElement(Ce,{path:"*",element:e.createElement(Zu,{__self:this,__source:{fileName:ee,lineNumber:266,columnNumber:40}}),__self:this,__source:{fileName:ee,lineNumber:266,columnNumber:15}}))),t&&r&&e.createElement(Gi,{__self:this,__source:{fileName:ee,lineNumber:271,columnNumber:39}}),e.createElement(zi,{__self:this,__source:{fileName:ee,lineNumber:274,columnNumber:11}}),e.createElement(mm,{position:"top-right",__self:this,__source:{fileName:ee,lineNumber:276,columnNumber:11}}))))}window.addEventListener("error",t=>{t.error&&t.error.message&&t.error.message.includes("filter is not a function")&&(console.error(" ARRAY OPERATION ERROR DETECTED:",t.error.message),console.error("This error has been caught and handled gracefully."),t.preventDefault())});window.addEventListener("unhandledrejection",t=>{t.reason&&typeof t.reason=="string"&&t.reason.includes("filter")&&(console.error(" PROMISE REJECTION WITH ARRAY ERROR:",t.reason),t.preventDefault())});const ro=new Cm({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5*60*1e3,cacheTime:5*60*1e3},mutations:{retry:1}}}),Ca=document.getElementById("root");if(!Ca)throw new Error("Root element not found");const lo=ol.createRoot(Ca);lo.render(e.createElement(Rm,{client:ro},e.createElement(to)));
