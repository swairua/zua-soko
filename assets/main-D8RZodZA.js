import{a as ha,b as ga,c as e,r as T,g as pa}from"./vendor-9bZoipD1.js";import{u as et,L as _e,a as ml,b as ya,B as Ea,R as xa,c as pe,N as Ye}from"./router-BAAhKjlc.js";import{S as ht,L as ys,X as st,M as nl,H as il,a as ul,C as va,U as Ke,b as Qt,B as Yr,T as ve,D as Cr,W as Es,c as wa,K as Sa,d as Ca,e as Aa,f as vt,g as Lr,h as Ze,i as Xr,j as ol,F as Pa,E as ot,k as Zr,l as Nt,V,A as It,m as ka,n as De,P as Ct,o as es,p as Mr,q as Jt,r as ts,s as nt,t as Ne,u as Ar,v as cl,w as ct,x as Pe,y as nr,z as _t,G as ut,I as Lt,J as Da,N as Ra,O as wt,Q as Fa,R as Ta,Y as _l,Z as Oa,_ as Yt,$ as Ur,a0 as Ia,a1 as La,a2 as xs,a3 as Ma,a4 as jr,a5 as Ua,a6 as ja,a7 as vs,a8 as qa,a9 as $a,aa as Va}from"./ui-B3BJiFNf.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const m of a)if(m.type==="childList")for(const n of m.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function s(a){const m={};return a.integrity&&(m.integrity=a.integrity),a.referrerPolicy&&(m.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?m.credentials="include":a.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function l(a){if(a.ep)return;a.ep=!0;const m=s(a);fetch(a.href,m)}})();var qr={},ws=ha;qr.createRoot=ws.createRoot,qr.hydrateRoot=ws.hydrateRoot;function $r(t,r){return $r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,l){return s.__proto__=l,s},$r(t,r)}function ir(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,$r(t,r)}var ur=function(){function t(){this.listeners=[]}var r=t.prototype;return r.subscribe=function(l){var a=this,m=l||function(){};return this.listeners.push(m),this.onSubscribe(),function(){a.listeners=a.listeners.filter(function(n){return n!==m}),a.onUnsubscribe()}},r.hasListeners=function(){return this.listeners.length>0},r.onSubscribe=function(){},r.onUnsubscribe=function(){},t}();function de(){return de=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var l in s)({}).hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},de.apply(null,arguments)}var Nl=typeof window>"u";function Oe(){}function Ba(t,r){return typeof t=="function"?t(r):t}function Ka(t){return typeof t=="number"&&t>=0&&t!==1/0}function Xt(t){return Array.isArray(t)?t:[t]}function Ga(t,r){return Math.max(t+(r||0)-Date.now(),0)}function Pr(t,r,s){return or(t)?typeof r=="function"?de({},s,{queryKey:t,queryFn:r}):de({},r,{queryKey:t}):t}function mt(t,r,s){return or(t)?[de({},r,{queryKey:t}),s]:[t||{},r]}function Ha(t,r){if(t===!0&&r===!0||t==null&&r==null)return"all";if(t===!1&&r===!1)return"none";var s=t??!r;return s?"active":"inactive"}function Ss(t,r){var s=t.active,l=t.exact,a=t.fetching,m=t.inactive,n=t.predicate,i=t.queryKey,_=t.stale;if(or(i)){if(l){if(r.queryHash!==rs(i,r.options))return!1}else if(!Zt(r.queryKey,i))return!1}var u=Ha(s,m);if(u==="none")return!1;if(u!=="all"){var c=r.isActive();if(u==="active"&&!c||u==="inactive"&&c)return!1}return!(typeof _=="boolean"&&r.isStale()!==_||typeof a=="boolean"&&r.isFetching()!==a||n&&!n(r))}function Cs(t,r){var s=t.exact,l=t.fetching,a=t.predicate,m=t.mutationKey;if(or(m)){if(!r.options.mutationKey)return!1;if(s){if(ft(r.options.mutationKey)!==ft(m))return!1}else if(!Zt(r.options.mutationKey,m))return!1}return!(typeof l=="boolean"&&r.state.status==="loading"!==l||a&&!a(r))}function rs(t,r){var s=r?.queryKeyHashFn||ft;return s(t)}function ft(t){var r=Xt(t);return Wa(r)}function Wa(t){return JSON.stringify(t,function(r,s){return Vr(s)?Object.keys(s).sort().reduce(function(l,a){return l[a]=s[a],l},{}):s})}function Zt(t,r){return fl(Xt(t),Xt(r))}function fl(t,r){return t===r?!0:typeof t!=typeof r?!1:t&&r&&typeof t=="object"&&typeof r=="object"?!Object.keys(r).some(function(s){return!fl(t[s],r[s])}):!1}function bl(t,r){if(t===r)return t;var s=Array.isArray(t)&&Array.isArray(r);if(s||Vr(t)&&Vr(r)){for(var l=s?t.length:Object.keys(t).length,a=s?r:Object.keys(r),m=a.length,n=s?[]:{},i=0,_=0;_<m;_++){var u=s?_:a[_];n[u]=bl(t[u],r[u]),n[u]===t[u]&&i++}return l===m&&i===l?t:n}return r}function Vr(t){if(!As(t))return!1;var r=t.constructor;if(typeof r>"u")return!0;var s=r.prototype;return!(!As(s)||!s.hasOwnProperty("isPrototypeOf"))}function As(t){return Object.prototype.toString.call(t)==="[object Object]"}function or(t){return typeof t=="string"||Array.isArray(t)}function za(t){return new Promise(function(r){setTimeout(r,t)})}function Ps(t){Promise.resolve().then(t).catch(function(r){return setTimeout(function(){throw r})})}function dl(){if(typeof AbortController=="function")return new AbortController}var Qa=function(t){ir(r,t);function r(){var l;return l=t.call(this)||this,l.setup=function(a){var m;if(!Nl&&((m=window)!=null&&m.addEventListener)){var n=function(){return a()};return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),function(){window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}},l}var s=r.prototype;return s.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},s.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},s.setEventListener=function(a){var m,n=this;this.setup=a,(m=this.cleanup)==null||m.call(this),this.cleanup=a(function(i){typeof i=="boolean"?n.setFocused(i):n.onFocus()})},s.setFocused=function(a){this.focused=a,a&&this.onFocus()},s.onFocus=function(){this.listeners.forEach(function(a){a()})},s.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},r}(ur),Bt=new Qa,Ja=function(t){ir(r,t);function r(){var l;return l=t.call(this)||this,l.setup=function(a){var m;if(!Nl&&((m=window)!=null&&m.addEventListener)){var n=function(){return a()};return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),function(){window.removeEventListener("online",n),window.removeEventListener("offline",n)}}},l}var s=r.prototype;return s.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},s.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},s.setEventListener=function(a){var m,n=this;this.setup=a,(m=this.cleanup)==null||m.call(this),this.cleanup=a(function(i){typeof i=="boolean"?n.setOnline(i):n.onOnline()})},s.setOnline=function(a){this.online=a,a&&this.onOnline()},s.onOnline=function(){this.listeners.forEach(function(a){a()})},s.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},r}(ur),Kt=new Ja;function Ya(t){return Math.min(1e3*Math.pow(2,t),3e4)}function er(t){return typeof t?.cancel=="function"}var hl=function(r){this.revert=r?.revert,this.silent=r?.silent};function kr(t){return t instanceof hl}var gl=function(r){var s=this,l=!1,a,m,n,i;this.abort=r.abort,this.cancel=function(b){return a?.(b)},this.cancelRetry=function(){l=!0},this.continueRetry=function(){l=!1},this.continue=function(){return m?.()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(b,g){n=b,i=g});var _=function(g){s.isResolved||(s.isResolved=!0,r.onSuccess==null||r.onSuccess(g),m?.(),n(g))},u=function(g){s.isResolved||(s.isResolved=!0,r.onError==null||r.onError(g),m?.(),i(g))},c=function(){return new Promise(function(g){m=g,s.isPaused=!0,r.onPause==null||r.onPause()}).then(function(){m=void 0,s.isPaused=!1,r.onContinue==null||r.onContinue()})},o=function b(){if(!s.isResolved){var g;try{g=r.fn()}catch(h){g=Promise.reject(h)}a=function(x){if(!s.isResolved&&(u(new hl(x)),s.abort==null||s.abort(),er(g)))try{g.cancel()}catch{}},s.isTransportCancelable=er(g),Promise.resolve(g).then(_).catch(function(h){var x,w;if(!s.isResolved){var p=(x=r.retry)!=null?x:3,y=(w=r.retryDelay)!=null?w:Ya,B=typeof y=="function"?y(s.failureCount,h):y,P=p===!0||typeof p=="number"&&s.failureCount<p||typeof p=="function"&&p(s.failureCount,h);if(l||!P){u(h);return}s.failureCount++,r.onFail==null||r.onFail(s.failureCount,h),za(B).then(function(){if(!Bt.isFocused()||!Kt.isOnline())return c()}).then(function(){l?u(h):b()})}})}};o()},Xa=function(){function t(){this.queue=[],this.transactions=0,this.notifyFn=function(s){s()},this.batchNotifyFn=function(s){s()}}var r=t.prototype;return r.batch=function(l){var a;this.transactions++;try{a=l()}finally{this.transactions--,this.transactions||this.flush()}return a},r.schedule=function(l){var a=this;this.transactions?this.queue.push(l):Ps(function(){a.notifyFn(l)})},r.batchCalls=function(l){var a=this;return function(){for(var m=arguments.length,n=new Array(m),i=0;i<m;i++)n[i]=arguments[i];a.schedule(function(){l.apply(void 0,n)})}},r.flush=function(){var l=this,a=this.queue;this.queue=[],a.length&&Ps(function(){l.batchNotifyFn(function(){a.forEach(function(m){l.notifyFn(m)})})})},r.setNotifyFunction=function(l){this.notifyFn=l},r.setBatchNotifyFunction=function(l){this.batchNotifyFn=l},t}(),Re=new Xa,pl=console;function yl(){return pl}function Za(t){pl=t}var em=function(){function t(s){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.cache=s.cache,this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.initialState=s.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=s.meta,this.scheduleGc()}var r=t.prototype;return r.setOptions=function(l){var a;this.options=de({},this.defaultOptions,l),this.meta=l?.meta,this.cacheTime=Math.max(this.cacheTime||0,(a=this.options.cacheTime)!=null?a:5*60*1e3)},r.setDefaultOptions=function(l){this.defaultOptions=l},r.scheduleGc=function(){var l=this;this.clearGcTimeout(),Ka(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){l.optionalRemove()},this.cacheTime))},r.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},r.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},r.setData=function(l,a){var m,n,i=this.state.data,_=Ba(l,i);return(m=(n=this.options).isDataEqual)!=null&&m.call(n,i,_)?_=i:this.options.structuralSharing!==!1&&(_=bl(i,_)),this.dispatch({data:_,type:"success",dataUpdatedAt:a?.updatedAt}),_},r.setState=function(l,a){this.dispatch({type:"setState",state:l,setStateOptions:a})},r.cancel=function(l){var a,m=this.promise;return(a=this.retryer)==null||a.cancel(l),m?m.then(Oe).catch(Oe):Promise.resolve()},r.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},r.reset=function(){this.destroy(),this.setState(this.initialState)},r.isActive=function(){return this.observers.some(function(l){return l.options.enabled!==!1})},r.isFetching=function(){return this.state.isFetching},r.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(l){return l.getCurrentResult().isStale})},r.isStaleByTime=function(l){return l===void 0&&(l=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!Ga(this.state.dataUpdatedAt,l)},r.onFocus=function(){var l,a=this.observers.find(function(m){return m.shouldFetchOnWindowFocus()});a&&a.refetch(),(l=this.retryer)==null||l.continue()},r.onOnline=function(){var l,a=this.observers.find(function(m){return m.shouldFetchOnReconnect()});a&&a.refetch(),(l=this.retryer)==null||l.continue()},r.addObserver=function(l){this.observers.indexOf(l)===-1&&(this.observers.push(l),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:l}))},r.removeObserver=function(l){this.observers.indexOf(l)!==-1&&(this.observers=this.observers.filter(function(a){return a!==l}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:l}))},r.getObserversCount=function(){return this.observers.length},r.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},r.fetch=function(l,a){var m=this,n,i,_;if(this.state.isFetching){if(this.state.dataUpdatedAt&&a?.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var u;return(u=this.retryer)==null||u.continueRetry(),this.promise}}if(l&&this.setOptions(l),!this.options.queryFn){var c=this.observers.find(function(y){return y.options.queryFn});c&&this.setOptions(c.options)}var o=Xt(this.queryKey),b=dl(),g={queryKey:o,pageParam:void 0,meta:this.meta};Object.defineProperty(g,"signal",{enumerable:!0,get:function(){if(b)return m.abortSignalConsumed=!0,b.signal}});var h=function(){return m.options.queryFn?(m.abortSignalConsumed=!1,m.options.queryFn(g)):Promise.reject("Missing queryFn")},x={fetchOptions:a,options:this.options,queryKey:o,state:this.state,fetchFn:h,meta:this.meta};if((n=this.options.behavior)!=null&&n.onFetch){var w;(w=this.options.behavior)==null||w.onFetch(x)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((i=x.fetchOptions)==null?void 0:i.meta)){var p;this.dispatch({type:"fetch",meta:(p=x.fetchOptions)==null?void 0:p.meta})}return this.retryer=new gl({fn:x.fetchFn,abort:b==null||(_=b.abort)==null?void 0:_.bind(b),onSuccess:function(B){m.setData(B),m.cache.config.onSuccess==null||m.cache.config.onSuccess(B,m),m.cacheTime===0&&m.optionalRemove()},onError:function(B){kr(B)&&B.silent||m.dispatch({type:"error",error:B}),kr(B)||(m.cache.config.onError==null||m.cache.config.onError(B,m),yl().error(B)),m.cacheTime===0&&m.optionalRemove()},onFail:function(){m.dispatch({type:"failed"})},onPause:function(){m.dispatch({type:"pause"})},onContinue:function(){m.dispatch({type:"continue"})},retry:x.options.retry,retryDelay:x.options.retryDelay}),this.promise=this.retryer.promise,this.promise},r.dispatch=function(l){var a=this;this.state=this.reducer(this.state,l),Re.batch(function(){a.observers.forEach(function(m){m.onQueryUpdate(l)}),a.cache.notify({query:a,type:"queryUpdated",action:l})})},r.getDefaultState=function(l){var a=typeof l.initialData=="function"?l.initialData():l.initialData,m=typeof l.initialData<"u",n=m?typeof l.initialDataUpdatedAt=="function"?l.initialDataUpdatedAt():l.initialDataUpdatedAt:0,i=typeof a<"u";return{data:a,dataUpdateCount:0,dataUpdatedAt:i?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:i?"success":"idle"}},r.reducer=function(l,a){var m,n;switch(a.type){case"failed":return de({},l,{fetchFailureCount:l.fetchFailureCount+1});case"pause":return de({},l,{isPaused:!0});case"continue":return de({},l,{isPaused:!1});case"fetch":return de({},l,{fetchFailureCount:0,fetchMeta:(m=a.meta)!=null?m:null,isFetching:!0,isPaused:!1},!l.dataUpdatedAt&&{error:null,status:"loading"});case"success":return de({},l,{data:a.data,dataUpdateCount:l.dataUpdateCount+1,dataUpdatedAt:(n=a.dataUpdatedAt)!=null?n:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var i=a.error;return kr(i)&&i.revert&&this.revertState?de({},this.revertState):de({},l,{error:i,errorUpdateCount:l.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:l.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return de({},l,{isInvalidated:!0});case"setState":return de({},l,a.state);default:return l}},t}(),tm=function(t){ir(r,t);function r(l){var a;return a=t.call(this)||this,a.config=l||{},a.queries=[],a.queriesMap={},a}var s=r.prototype;return s.build=function(a,m,n){var i,_=m.queryKey,u=(i=m.queryHash)!=null?i:rs(_,m),c=this.get(u);return c||(c=new em({cache:this,queryKey:_,queryHash:u,options:a.defaultQueryOptions(m),state:n,defaultOptions:a.getQueryDefaults(_),meta:m.meta}),this.add(c)),c},s.add=function(a){this.queriesMap[a.queryHash]||(this.queriesMap[a.queryHash]=a,this.queries.push(a),this.notify({type:"queryAdded",query:a}))},s.remove=function(a){var m=this.queriesMap[a.queryHash];m&&(a.destroy(),this.queries=this.queries.filter(function(n){return n!==a}),m===a&&delete this.queriesMap[a.queryHash],this.notify({type:"queryRemoved",query:a}))},s.clear=function(){var a=this;Re.batch(function(){a.queries.forEach(function(m){a.remove(m)})})},s.get=function(a){return this.queriesMap[a]},s.getAll=function(){return this.queries},s.find=function(a,m){var n=mt(a,m),i=n[0];return typeof i.exact>"u"&&(i.exact=!0),this.queries.find(function(_){return Ss(i,_)})},s.findAll=function(a,m){var n=mt(a,m),i=n[0];return Object.keys(i).length>0?this.queries.filter(function(_){return Ss(i,_)}):this.queries},s.notify=function(a){var m=this;Re.batch(function(){m.listeners.forEach(function(n){n(a)})})},s.onFocus=function(){var a=this;Re.batch(function(){a.queries.forEach(function(m){m.onFocus()})})},s.onOnline=function(){var a=this;Re.batch(function(){a.queries.forEach(function(m){m.onOnline()})})},r}(ur),rm=function(){function t(s){this.options=de({},s.defaultOptions,s.options),this.mutationId=s.mutationId,this.mutationCache=s.mutationCache,this.observers=[],this.state=s.state||sm(),this.meta=s.meta}var r=t.prototype;return r.setState=function(l){this.dispatch({type:"setState",state:l})},r.addObserver=function(l){this.observers.indexOf(l)===-1&&this.observers.push(l)},r.removeObserver=function(l){this.observers=this.observers.filter(function(a){return a!==l})},r.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Oe).catch(Oe)):Promise.resolve()},r.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},r.execute=function(){var l=this,a,m=this.state.status==="loading",n=Promise.resolve();return m||(this.dispatch({type:"loading",variables:this.options.variables}),n=n.then(function(){l.mutationCache.config.onMutate==null||l.mutationCache.config.onMutate(l.state.variables,l)}).then(function(){return l.options.onMutate==null?void 0:l.options.onMutate(l.state.variables)}).then(function(i){i!==l.state.context&&l.dispatch({type:"loading",context:i,variables:l.state.variables})})),n.then(function(){return l.executeMutation()}).then(function(i){a=i,l.mutationCache.config.onSuccess==null||l.mutationCache.config.onSuccess(a,l.state.variables,l.state.context,l)}).then(function(){return l.options.onSuccess==null?void 0:l.options.onSuccess(a,l.state.variables,l.state.context)}).then(function(){return l.options.onSettled==null?void 0:l.options.onSettled(a,null,l.state.variables,l.state.context)}).then(function(){return l.dispatch({type:"success",data:a}),a}).catch(function(i){return l.mutationCache.config.onError==null||l.mutationCache.config.onError(i,l.state.variables,l.state.context,l),yl().error(i),Promise.resolve().then(function(){return l.options.onError==null?void 0:l.options.onError(i,l.state.variables,l.state.context)}).then(function(){return l.options.onSettled==null?void 0:l.options.onSettled(void 0,i,l.state.variables,l.state.context)}).then(function(){throw l.dispatch({type:"error",error:i}),i})})},r.executeMutation=function(){var l=this,a;return this.retryer=new gl({fn:function(){return l.options.mutationFn?l.options.mutationFn(l.state.variables):Promise.reject("No mutationFn found")},onFail:function(){l.dispatch({type:"failed"})},onPause:function(){l.dispatch({type:"pause"})},onContinue:function(){l.dispatch({type:"continue"})},retry:(a=this.options.retry)!=null?a:0,retryDelay:this.options.retryDelay}),this.retryer.promise},r.dispatch=function(l){var a=this;this.state=lm(this.state,l),Re.batch(function(){a.observers.forEach(function(m){m.onMutationUpdate(l)}),a.mutationCache.notify(a)})},t}();function sm(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function lm(t,r){switch(r.type){case"failed":return de({},t,{failureCount:t.failureCount+1});case"pause":return de({},t,{isPaused:!0});case"continue":return de({},t,{isPaused:!1});case"loading":return de({},t,{context:r.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:r.variables});case"success":return de({},t,{data:r.data,error:null,status:"success",isPaused:!1});case"error":return de({},t,{data:void 0,error:r.error,failureCount:t.failureCount+1,isPaused:!1,status:"error"});case"setState":return de({},t,r.state);default:return t}}var am=function(t){ir(r,t);function r(l){var a;return a=t.call(this)||this,a.config=l||{},a.mutations=[],a.mutationId=0,a}var s=r.prototype;return s.build=function(a,m,n){var i=new rm({mutationCache:this,mutationId:++this.mutationId,options:a.defaultMutationOptions(m),state:n,defaultOptions:m.mutationKey?a.getMutationDefaults(m.mutationKey):void 0,meta:m.meta});return this.add(i),i},s.add=function(a){this.mutations.push(a),this.notify(a)},s.remove=function(a){this.mutations=this.mutations.filter(function(m){return m!==a}),a.cancel(),this.notify(a)},s.clear=function(){var a=this;Re.batch(function(){a.mutations.forEach(function(m){a.remove(m)})})},s.getAll=function(){return this.mutations},s.find=function(a){return typeof a.exact>"u"&&(a.exact=!0),this.mutations.find(function(m){return Cs(a,m)})},s.findAll=function(a){return this.mutations.filter(function(m){return Cs(a,m)})},s.notify=function(a){var m=this;Re.batch(function(){m.listeners.forEach(function(n){n(a)})})},s.onFocus=function(){this.resumePausedMutations()},s.onOnline=function(){this.resumePausedMutations()},s.resumePausedMutations=function(){var a=this.mutations.filter(function(m){return m.state.isPaused});return Re.batch(function(){return a.reduce(function(m,n){return m.then(function(){return n.continue().catch(Oe)})},Promise.resolve())})},r}(ur);function mm(){return{onFetch:function(r){r.fetchFn=function(){var s,l,a,m,n,i,_=(s=r.fetchOptions)==null||(l=s.meta)==null?void 0:l.refetchPage,u=(a=r.fetchOptions)==null||(m=a.meta)==null?void 0:m.fetchMore,c=u?.pageParam,o=u?.direction==="forward",b=u?.direction==="backward",g=((n=r.state.data)==null?void 0:n.pages)||[],h=((i=r.state.data)==null?void 0:i.pageParams)||[],x=dl(),w=x?.signal,p=h,y=!1,B=r.options.queryFn||function(){return Promise.reject("Missing queryFn")},P=function(ue,fe,he,Fe){return p=Fe?[fe].concat(p):[].concat(p,[fe]),Fe?[he].concat(ue):[].concat(ue,[he])},L=function(ue,fe,he,Fe){if(y)return Promise.reject("Cancelled");if(typeof he>"u"&&!fe&&ue.length)return Promise.resolve(ue);var Le={queryKey:r.queryKey,signal:w,pageParam:he,meta:r.meta},Me=B(Le),tt=Promise.resolve(Me).then(function(yr){return P(ue,he,yr,Fe)});if(er(Me)){var yt=tt;yt.cancel=Me.cancel}return tt},O;if(!g.length)O=L([]);else if(o){var Y=typeof c<"u",S=Y?c:ks(r.options,g);O=L(g,Y,S)}else if(b){var Z=typeof c<"u",N=Z?c:nm(r.options,g);O=L(g,Z,N,!0)}else(function(){p=[];var se=typeof r.options.getNextPageParam>"u",ue=_&&g[0]?_(g[0],0,g):!0;O=ue?L([],se,h[0]):Promise.resolve(P([],h[0],g[0]));for(var fe=function(Le){O=O.then(function(Me){var tt=_&&g[Le]?_(g[Le],Le,g):!0;if(tt){var yt=se?h[Le]:ks(r.options,Me);return L(Me,se,yt)}return Promise.resolve(P(Me,h[Le],g[Le]))})},he=1;he<g.length;he++)fe(he)})();var J=O.then(function(se){return{pages:se,pageParams:p}}),re=J;return re.cancel=function(){y=!0,x?.abort(),er(O)&&O.cancel()},J}}}}function ks(t,r){return t.getNextPageParam==null?void 0:t.getNextPageParam(r[r.length-1],r)}function nm(t,r){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(r[0],r)}var im=function(){function t(s){s===void 0&&(s={}),this.queryCache=s.queryCache||new tm,this.mutationCache=s.mutationCache||new am,this.defaultOptions=s.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var r=t.prototype;return r.mount=function(){var l=this;this.unsubscribeFocus=Bt.subscribe(function(){Bt.isFocused()&&Kt.isOnline()&&(l.mutationCache.onFocus(),l.queryCache.onFocus())}),this.unsubscribeOnline=Kt.subscribe(function(){Bt.isFocused()&&Kt.isOnline()&&(l.mutationCache.onOnline(),l.queryCache.onOnline())})},r.unmount=function(){var l,a;(l=this.unsubscribeFocus)==null||l.call(this),(a=this.unsubscribeOnline)==null||a.call(this)},r.isFetching=function(l,a){var m=mt(l,a),n=m[0];return n.fetching=!0,this.queryCache.findAll(n).length},r.isMutating=function(l){return this.mutationCache.findAll(de({},l,{fetching:!0})).length},r.getQueryData=function(l,a){var m;return(m=this.queryCache.find(l,a))==null?void 0:m.state.data},r.getQueriesData=function(l){return this.getQueryCache().findAll(l).map(function(a){var m=a.queryKey,n=a.state,i=n.data;return[m,i]})},r.setQueryData=function(l,a,m){var n=Pr(l),i=this.defaultQueryOptions(n);return this.queryCache.build(this,i).setData(a,m)},r.setQueriesData=function(l,a,m){var n=this;return Re.batch(function(){return n.getQueryCache().findAll(l).map(function(i){var _=i.queryKey;return[_,n.setQueryData(_,a,m)]})})},r.getQueryState=function(l,a){var m;return(m=this.queryCache.find(l,a))==null?void 0:m.state},r.removeQueries=function(l,a){var m=mt(l,a),n=m[0],i=this.queryCache;Re.batch(function(){i.findAll(n).forEach(function(_){i.remove(_)})})},r.resetQueries=function(l,a,m){var n=this,i=mt(l,a,m),_=i[0],u=i[1],c=this.queryCache,o=de({},_,{active:!0});return Re.batch(function(){return c.findAll(_).forEach(function(b){b.reset()}),n.refetchQueries(o,u)})},r.cancelQueries=function(l,a,m){var n=this,i=mt(l,a,m),_=i[0],u=i[1],c=u===void 0?{}:u;typeof c.revert>"u"&&(c.revert=!0);var o=Re.batch(function(){return n.queryCache.findAll(_).map(function(b){return b.cancel(c)})});return Promise.all(o).then(Oe).catch(Oe)},r.invalidateQueries=function(l,a,m){var n,i,_,u=this,c=mt(l,a,m),o=c[0],b=c[1],g=de({},o,{active:(n=(i=o.refetchActive)!=null?i:o.active)!=null?n:!0,inactive:(_=o.refetchInactive)!=null?_:!1});return Re.batch(function(){return u.queryCache.findAll(o).forEach(function(h){h.invalidate()}),u.refetchQueries(g,b)})},r.refetchQueries=function(l,a,m){var n=this,i=mt(l,a,m),_=i[0],u=i[1],c=Re.batch(function(){return n.queryCache.findAll(_).map(function(b){return b.fetch(void 0,de({},u,{meta:{refetchPage:_?.refetchPage}}))})}),o=Promise.all(c).then(Oe);return u?.throwOnError||(o=o.catch(Oe)),o},r.fetchQuery=function(l,a,m){var n=Pr(l,a,m),i=this.defaultQueryOptions(n);typeof i.retry>"u"&&(i.retry=!1);var _=this.queryCache.build(this,i);return _.isStaleByTime(i.staleTime)?_.fetch(i):Promise.resolve(_.state.data)},r.prefetchQuery=function(l,a,m){return this.fetchQuery(l,a,m).then(Oe).catch(Oe)},r.fetchInfiniteQuery=function(l,a,m){var n=Pr(l,a,m);return n.behavior=mm(),this.fetchQuery(n)},r.prefetchInfiniteQuery=function(l,a,m){return this.fetchInfiniteQuery(l,a,m).then(Oe).catch(Oe)},r.cancelMutations=function(){var l=this,a=Re.batch(function(){return l.mutationCache.getAll().map(function(m){return m.cancel()})});return Promise.all(a).then(Oe).catch(Oe)},r.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},r.executeMutation=function(l){return this.mutationCache.build(this,l).execute()},r.getQueryCache=function(){return this.queryCache},r.getMutationCache=function(){return this.mutationCache},r.getDefaultOptions=function(){return this.defaultOptions},r.setDefaultOptions=function(l){this.defaultOptions=l},r.setQueryDefaults=function(l,a){var m=this.queryDefaults.find(function(n){return ft(l)===ft(n.queryKey)});m?m.defaultOptions=a:this.queryDefaults.push({queryKey:l,defaultOptions:a})},r.getQueryDefaults=function(l){var a;return l?(a=this.queryDefaults.find(function(m){return Zt(l,m.queryKey)}))==null?void 0:a.defaultOptions:void 0},r.setMutationDefaults=function(l,a){var m=this.mutationDefaults.find(function(n){return ft(l)===ft(n.mutationKey)});m?m.defaultOptions=a:this.mutationDefaults.push({mutationKey:l,defaultOptions:a})},r.getMutationDefaults=function(l){var a;return l?(a=this.mutationDefaults.find(function(m){return Zt(l,m.mutationKey)}))==null?void 0:a.defaultOptions:void 0},r.defaultQueryOptions=function(l){if(l?._defaulted)return l;var a=de({},this.defaultOptions.queries,this.getQueryDefaults(l?.queryKey),l,{_defaulted:!0});return!a.queryHash&&a.queryKey&&(a.queryHash=rs(a.queryKey,a)),a},r.defaultQueryObserverOptions=function(l){return this.defaultQueryOptions(l)},r.defaultMutationOptions=function(l){return l?._defaulted?l:de({},this.defaultOptions.mutations,this.getMutationDefaults(l?.mutationKey),l,{_defaulted:!0})},r.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},t}(),um=ga.unstable_batchedUpdates;Re.setBatchNotifyFunction(um);var om=console;Za(om);var Ds=e.createContext(void 0),cm=e.createContext(!1);function _m(t){return t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Ds),window.ReactQueryClientContext):Ds}var Nm=function(r){var s=r.client,l=r.contextSharing,a=l===void 0?!1:l,m=r.children;e.useEffect(function(){return s.mount(),function(){s.unmount()}},[s]);var n=_m(a);return e.createElement(cm.Provider,{value:a},e.createElement(n.Provider,{value:s},m))};const fm={},Rs=t=>{let r;const s=new Set,l=(c,o)=>{const b=typeof c=="function"?c(r):c;if(!Object.is(b,r)){const g=r;r=o??(typeof b!="object"||b===null)?b:Object.assign({},r,b),s.forEach(h=>h(r,g))}},a=()=>r,_={setState:l,getState:a,getInitialState:()=>u,subscribe:c=>(s.add(c),()=>s.delete(c)),destroy:()=>{(fm?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},u=r=t(l,a,_);return _},bm=t=>t?Rs(t):Rs;var El={exports:{}},xl={},vl={exports:{}},wl={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var St=T;function dm(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var hm=typeof Object.is=="function"?Object.is:dm,gm=St.useState,pm=St.useEffect,ym=St.useLayoutEffect,Em=St.useDebugValue;function xm(t,r){var s=r(),l=gm({inst:{value:s,getSnapshot:r}}),a=l[0].inst,m=l[1];return ym(function(){a.value=s,a.getSnapshot=r,Dr(a)&&m({inst:a})},[t,s,r]),pm(function(){return Dr(a)&&m({inst:a}),t(function(){Dr(a)&&m({inst:a})})},[t]),Em(s),s}function Dr(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!hm(t,s)}catch{return!0}}function vm(t,r){return r()}var wm=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?vm:xm;wl.useSyncExternalStore=St.useSyncExternalStore!==void 0?St.useSyncExternalStore:wm;vl.exports=wl;var Sm=vl.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cr=T,Cm=Sm;function Am(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Pm=typeof Object.is=="function"?Object.is:Am,km=Cm.useSyncExternalStore,Dm=cr.useRef,Rm=cr.useEffect,Fm=cr.useMemo,Tm=cr.useDebugValue;xl.useSyncExternalStoreWithSelector=function(t,r,s,l,a){var m=Dm(null);if(m.current===null){var n={hasValue:!1,value:null};m.current=n}else n=m.current;m=Fm(function(){function _(g){if(!u){if(u=!0,c=g,g=l(g),a!==void 0&&n.hasValue){var h=n.value;if(a(h,g))return o=h}return o=g}if(h=o,Pm(c,g))return h;var x=l(g);return a!==void 0&&a(h,x)?(c=g,h):(c=g,o=x)}var u=!1,c,o,b=s===void 0?null:s;return[function(){return _(r())},b===null?void 0:function(){return _(b())}]},[r,s,l,a]);var i=km(t,m[0],m[1]);return Rm(function(){n.hasValue=!0,n.value=i},[i]),Tm(i),i};El.exports=xl;var Om=El.exports;const Im=pa(Om),Sl={},{useDebugValue:Lm}=e,{useSyncExternalStoreWithSelector:Mm}=Im;let Fs=!1;const Um=t=>t;function jm(t,r=Um,s){(Sl?"production":void 0)!=="production"&&s&&!Fs&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Fs=!0);const l=Mm(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,s);return Lm(l),l}const qm=t=>{(Sl?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const r=typeof t=="function"?bm(t):t,s=(l,a)=>jm(r,l,a);return Object.assign(s,r),s},Cl=t=>qm,$m={};function Vm(t,r){let s;try{s=t()}catch{return}return{getItem:a=>{var m;const n=_=>_===null?null:JSON.parse(_,void 0),i=(m=s.getItem(a))!=null?m:null;return i instanceof Promise?i.then(n):n(i)},setItem:(a,m)=>s.setItem(a,JSON.stringify(m,void 0)),removeItem:a=>s.removeItem(a)}}const Mt=t=>r=>{try{const s=t(r);return s instanceof Promise?s:{then(l){return Mt(l)(s)},catch(l){return this}}}catch(s){return{then(l){return this},catch(l){return Mt(l)(s)}}}},Bm=(t,r)=>(s,l,a)=>{let m={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,p)=>({...p,...w}),...r},n=!1;const i=new Set,_=new Set;let u;try{u=m.getStorage()}catch{}if(!u)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${m.name}', the given storage is currently unavailable.`),s(...w)},l,a);const c=Mt(m.serialize),o=()=>{const w=m.partialize({...l()});let p;const y=c({state:w,version:m.version}).then(B=>u.setItem(m.name,B)).catch(B=>{p=B});if(p)throw p;return y},b=a.setState;a.setState=(w,p)=>{b(w,p),o()};const g=t((...w)=>{s(...w),o()},l,a);let h;const x=()=>{var w;if(!u)return;n=!1,i.forEach(y=>y(l()));const p=((w=m.onRehydrateStorage)==null?void 0:w.call(m,l()))||void 0;return Mt(u.getItem.bind(u))(m.name).then(y=>{if(y)return m.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==m.version){if(m.migrate)return m.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var B;return h=m.merge(y,(B=l())!=null?B:g),s(h,!0),o()}).then(()=>{p?.(h,void 0),n=!0,_.forEach(y=>y(h))}).catch(y=>{p?.(void 0,y)})};return a.persist={setOptions:w=>{m={...m,...w},w.getStorage&&(u=w.getStorage())},clearStorage:()=>{u?.removeItem(m.name)},getOptions:()=>m,rehydrate:()=>x(),hasHydrated:()=>n,onHydrate:w=>(i.add(w),()=>{i.delete(w)}),onFinishHydration:w=>(_.add(w),()=>{_.delete(w)})},x(),h||g},Km=(t,r)=>(s,l,a)=>{let m={storage:Vm(()=>localStorage),partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...r},n=!1;const i=new Set,_=new Set;let u=m.storage;if(!u)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${m.name}', the given storage is currently unavailable.`),s(...x)},l,a);const c=()=>{const x=m.partialize({...l()});return u.setItem(m.name,{state:x,version:m.version})},o=a.setState;a.setState=(x,w)=>{o(x,w),c()};const b=t((...x)=>{s(...x),c()},l,a);a.getInitialState=()=>b;let g;const h=()=>{var x,w;if(!u)return;n=!1,i.forEach(y=>{var B;return y((B=l())!=null?B:b)});const p=((w=m.onRehydrateStorage)==null?void 0:w.call(m,(x=l())!=null?x:b))||void 0;return Mt(u.getItem.bind(u))(m.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==m.version){if(m.migrate)return[!0,m.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var B;const[P,L]=y;if(g=m.merge(L,(B=l())!=null?B:b),s(g,!0),P)return c()}).then(()=>{p?.(g,void 0),g=l(),n=!0,_.forEach(y=>y(g))}).catch(y=>{p?.(void 0,y)})};return a.persist={setOptions:x=>{m={...m,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u?.removeItem(m.name)},getOptions:()=>m,rehydrate:()=>h(),hasHydrated:()=>n,onHydrate:x=>(i.add(x),()=>{i.delete(x)}),onFinishHydration:x=>(_.add(x),()=>{_.delete(x)})},m.skipHydration||h(),g||b},Gm=(t,r)=>"getStorage"in r||"serialize"in r||"deserialize"in r?(($m?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Bm(t,r)):Km(t,r),Al=Gm;function Pl(t,r){return function(){return t.apply(r,arguments)}}const{toString:Hm}=Object.prototype,{getPrototypeOf:ss}=Object,{iterator:_r,toStringTag:kl}=Symbol,Nr=(t=>r=>{const s=Hm.call(r);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),ze=t=>(t=t.toLowerCase(),r=>Nr(r)===t),fr=t=>r=>typeof r===t,{isArray:At}=Array,Ut=fr("undefined");function Wm(t){return t!==null&&!Ut(t)&&t.constructor!==null&&!Ut(t.constructor)&&je(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Dl=ze("ArrayBuffer");function zm(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&Dl(t.buffer),r}const Qm=fr("string"),je=fr("function"),Rl=fr("number"),br=t=>t!==null&&typeof t=="object",Jm=t=>t===!0||t===!1,Gt=t=>{if(Nr(t)!=="object")return!1;const r=ss(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(kl in t)&&!(_r in t)},Ym=ze("Date"),Xm=ze("File"),Zm=ze("Blob"),en=ze("FileList"),tn=t=>br(t)&&je(t.pipe),rn=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||je(t.append)&&((r=Nr(t))==="formdata"||r==="object"&&je(t.toString)&&t.toString()==="[object FormData]"))},sn=ze("URLSearchParams"),[ln,an,mn,nn]=["ReadableStream","Request","Response","Headers"].map(ze),un=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jt(t,r,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let l,a;if(typeof t!="object"&&(t=[t]),At(t))for(l=0,a=t.length;l<a;l++)r.call(null,t[l],l,t);else{const m=s?Object.getOwnPropertyNames(t):Object.keys(t),n=m.length;let i;for(l=0;l<n;l++)i=m[l],r.call(null,t[i],i,t)}}function Fl(t,r){r=r.toLowerCase();const s=Object.keys(t);let l=s.length,a;for(;l-- >0;)if(a=s[l],r===a.toLowerCase())return a;return null}const bt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Tl=t=>!Ut(t)&&t!==bt;function Br(){const{caseless:t}=Tl(this)&&this||{},r={},s=(l,a)=>{const m=t&&Fl(r,a)||a;Gt(r[m])&&Gt(l)?r[m]=Br(r[m],l):Gt(l)?r[m]=Br({},l):At(l)?r[m]=l.slice():r[m]=l};for(let l=0,a=arguments.length;l<a;l++)arguments[l]&&jt(arguments[l],s);return r}const on=(t,r,s,{allOwnKeys:l}={})=>(jt(r,(a,m)=>{s&&je(a)?t[m]=Pl(a,s):t[m]=a},{allOwnKeys:l}),t),cn=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),_n=(t,r,s,l)=>{t.prototype=Object.create(r.prototype,l),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),s&&Object.assign(t.prototype,s)},Nn=(t,r,s,l)=>{let a,m,n;const i={};if(r=r||{},t==null)return r;do{for(a=Object.getOwnPropertyNames(t),m=a.length;m-- >0;)n=a[m],(!l||l(n,t,r))&&!i[n]&&(r[n]=t[n],i[n]=!0);t=s!==!1&&ss(t)}while(t&&(!s||s(t,r))&&t!==Object.prototype);return r},fn=(t,r,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=r.length;const l=t.indexOf(r,s);return l!==-1&&l===s},bn=t=>{if(!t)return null;if(At(t))return t;let r=t.length;if(!Rl(r))return null;const s=new Array(r);for(;r-- >0;)s[r]=t[r];return s},dn=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&ss(Uint8Array)),hn=(t,r)=>{const l=(t&&t[_r]).call(t);let a;for(;(a=l.next())&&!a.done;){const m=a.value;r.call(t,m[0],m[1])}},gn=(t,r)=>{let s;const l=[];for(;(s=t.exec(r))!==null;)l.push(s);return l},pn=ze("HTMLFormElement"),yn=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,l,a){return l.toUpperCase()+a}),Ts=(({hasOwnProperty:t})=>(r,s)=>t.call(r,s))(Object.prototype),En=ze("RegExp"),Ol=(t,r)=>{const s=Object.getOwnPropertyDescriptors(t),l={};jt(s,(a,m)=>{let n;(n=r(a,m,t))!==!1&&(l[m]=n||a)}),Object.defineProperties(t,l)},xn=t=>{Ol(t,(r,s)=>{if(je(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const l=t[s];if(je(l)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},vn=(t,r)=>{const s={},l=a=>{a.forEach(m=>{s[m]=!0})};return At(t)?l(t):l(String(t).split(r)),s},wn=()=>{},Sn=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function Cn(t){return!!(t&&je(t.append)&&t[kl]==="FormData"&&t[_r])}const An=t=>{const r=new Array(10),s=(l,a)=>{if(br(l)){if(r.indexOf(l)>=0)return;if(!("toJSON"in l)){r[a]=l;const m=At(l)?[]:{};return jt(l,(n,i)=>{const _=s(n,a+1);!Ut(_)&&(m[i]=_)}),r[a]=void 0,m}}return l};return s(t,0)},Pn=ze("AsyncFunction"),kn=t=>t&&(br(t)||je(t))&&je(t.then)&&je(t.catch),Il=((t,r)=>t?setImmediate:r?((s,l)=>(bt.addEventListener("message",({source:a,data:m})=>{a===bt&&m===s&&l.length&&l.shift()()},!1),a=>{l.push(a),bt.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",je(bt.postMessage)),Dn=typeof queueMicrotask<"u"?queueMicrotask.bind(bt):typeof process<"u"&&process.nextTick||Il,Rn=t=>t!=null&&je(t[_r]),A={isArray:At,isArrayBuffer:Dl,isBuffer:Wm,isFormData:rn,isArrayBufferView:zm,isString:Qm,isNumber:Rl,isBoolean:Jm,isObject:br,isPlainObject:Gt,isReadableStream:ln,isRequest:an,isResponse:mn,isHeaders:nn,isUndefined:Ut,isDate:Ym,isFile:Xm,isBlob:Zm,isRegExp:En,isFunction:je,isStream:tn,isURLSearchParams:sn,isTypedArray:dn,isFileList:en,forEach:jt,merge:Br,extend:on,trim:un,stripBOM:cn,inherits:_n,toFlatObject:Nn,kindOf:Nr,kindOfTest:ze,endsWith:fn,toArray:bn,forEachEntry:hn,matchAll:gn,isHTMLForm:pn,hasOwnProperty:Ts,hasOwnProp:Ts,reduceDescriptors:Ol,freezeMethods:xn,toObjectSet:vn,toCamelCase:yn,noop:wn,toFiniteNumber:Sn,findKey:Fl,global:bt,isContextDefined:Tl,isSpecCompliantForm:Cn,toJSONObject:An,isAsyncFn:Pn,isThenable:kn,setImmediate:Il,asap:Dn,isIterable:Rn};function ie(t,r,s,l,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),s&&(this.config=s),l&&(this.request=l),a&&(this.response=a,this.status=a.status?a.status:null)}A.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.status}}});const Ll=ie.prototype,Ml={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ml[t]={value:t}});Object.defineProperties(ie,Ml);Object.defineProperty(Ll,"isAxiosError",{value:!0});ie.from=(t,r,s,l,a,m)=>{const n=Object.create(Ll);return A.toFlatObject(t,n,function(_){return _!==Error.prototype},i=>i!=="isAxiosError"),ie.call(n,t.message,r,s,l,a),n.cause=t,n.name=t.name,m&&Object.assign(n,m),n};const Fn=null;function Kr(t){return A.isPlainObject(t)||A.isArray(t)}function Ul(t){return A.endsWith(t,"[]")?t.slice(0,-2):t}function Os(t,r,s){return t?t.concat(r).map(function(a,m){return a=Ul(a),!s&&m?"["+a+"]":a}).join(s?".":""):r}function Tn(t){return A.isArray(t)&&!t.some(Kr)}const On=A.toFlatObject(A,{},null,function(r){return/^is[A-Z]/.test(r)});function dr(t,r,s){if(!A.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,s=A.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,w){return!A.isUndefined(w[x])});const l=s.metaTokens,a=s.visitor||c,m=s.dots,n=s.indexes,_=(s.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(r);if(!A.isFunction(a))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(A.isDate(h))return h.toISOString();if(A.isBoolean(h))return h.toString();if(!_&&A.isBlob(h))throw new ie("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(h)||A.isTypedArray(h)?_&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function c(h,x,w){let p=h;if(h&&!w&&typeof h=="object"){if(A.endsWith(x,"{}"))x=l?x:x.slice(0,-2),h=JSON.stringify(h);else if(A.isArray(h)&&Tn(h)||(A.isFileList(h)||A.endsWith(x,"[]"))&&(p=A.toArray(h)))return x=Ul(x),p.forEach(function(B,P){!(A.isUndefined(B)||B===null)&&r.append(n===!0?Os([x],P,m):n===null?x:x+"[]",u(B))}),!1}return Kr(h)?!0:(r.append(Os(w,x,m),u(h)),!1)}const o=[],b=Object.assign(On,{defaultVisitor:c,convertValue:u,isVisitable:Kr});function g(h,x){if(!A.isUndefined(h)){if(o.indexOf(h)!==-1)throw Error("Circular reference detected in "+x.join("."));o.push(h),A.forEach(h,function(p,y){(!(A.isUndefined(p)||p===null)&&a.call(r,p,A.isString(y)?y.trim():y,x,b))===!0&&g(p,x?x.concat(y):[y])}),o.pop()}}if(!A.isObject(t))throw new TypeError("data must be an object");return g(t),r}function Is(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(l){return r[l]})}function ls(t,r){this._pairs=[],t&&dr(t,this,r)}const jl=ls.prototype;jl.append=function(r,s){this._pairs.push([r,s])};jl.toString=function(r){const s=r?function(l){return r.call(this,l,Is)}:Is;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function In(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ql(t,r,s){if(!r)return t;const l=s&&s.encode||In;A.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let m;if(a?m=a(r,s):m=A.isURLSearchParams(r)?r.toString():new ls(r,s).toString(l),m){const n=t.indexOf("#");n!==-1&&(t=t.slice(0,n)),t+=(t.indexOf("?")===-1?"?":"&")+m}return t}class Ls{constructor(){this.handlers=[]}use(r,s,l){return this.handlers.push({fulfilled:r,rejected:s,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){A.forEach(this.handlers,function(l){l!==null&&r(l)})}}const $l={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ln=typeof URLSearchParams<"u"?URLSearchParams:ls,Mn=typeof FormData<"u"?FormData:null,Un=typeof Blob<"u"?Blob:null,jn={isBrowser:!0,classes:{URLSearchParams:Ln,FormData:Mn,Blob:Un},protocols:["http","https","file","blob","url","data"]},as=typeof window<"u"&&typeof document<"u",Gr=typeof navigator=="object"&&navigator||void 0,qn=as&&(!Gr||["ReactNative","NativeScript","NS"].indexOf(Gr.product)<0),$n=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Vn=as&&window.location.href||"http://localhost",Bn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:as,hasStandardBrowserEnv:qn,hasStandardBrowserWebWorkerEnv:$n,navigator:Gr,origin:Vn},Symbol.toStringTag,{value:"Module"})),Te={...Bn,...jn};function Kn(t,r){return dr(t,new Te.classes.URLSearchParams,Object.assign({visitor:function(s,l,a,m){return Te.isNode&&A.isBuffer(s)?(this.append(l,s.toString("base64")),!1):m.defaultVisitor.apply(this,arguments)}},r))}function Gn(t){return A.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function Hn(t){const r={},s=Object.keys(t);let l;const a=s.length;let m;for(l=0;l<a;l++)m=s[l],r[m]=t[m];return r}function Vl(t){function r(s,l,a,m){let n=s[m++];if(n==="__proto__")return!0;const i=Number.isFinite(+n),_=m>=s.length;return n=!n&&A.isArray(a)?a.length:n,_?(A.hasOwnProp(a,n)?a[n]=[a[n],l]:a[n]=l,!i):((!a[n]||!A.isObject(a[n]))&&(a[n]=[]),r(s,l,a[n],m)&&A.isArray(a[n])&&(a[n]=Hn(a[n])),!i)}if(A.isFormData(t)&&A.isFunction(t.entries)){const s={};return A.forEachEntry(t,(l,a)=>{r(Gn(l),a,s,0)}),s}return null}function Wn(t,r,s){if(A.isString(t))try{return(r||JSON.parse)(t),A.trim(t)}catch(l){if(l.name!=="SyntaxError")throw l}return(s||JSON.stringify)(t)}const qt={transitional:$l,adapter:["xhr","http","fetch"],transformRequest:[function(r,s){const l=s.getContentType()||"",a=l.indexOf("application/json")>-1,m=A.isObject(r);if(m&&A.isHTMLForm(r)&&(r=new FormData(r)),A.isFormData(r))return a?JSON.stringify(Vl(r)):r;if(A.isArrayBuffer(r)||A.isBuffer(r)||A.isStream(r)||A.isFile(r)||A.isBlob(r)||A.isReadableStream(r))return r;if(A.isArrayBufferView(r))return r.buffer;if(A.isURLSearchParams(r))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let i;if(m){if(l.indexOf("application/x-www-form-urlencoded")>-1)return Kn(r,this.formSerializer).toString();if((i=A.isFileList(r))||l.indexOf("multipart/form-data")>-1){const _=this.env&&this.env.FormData;return dr(i?{"files[]":r}:r,_&&new _,this.formSerializer)}}return m||a?(s.setContentType("application/json",!1),Wn(r)):r}],transformResponse:[function(r){const s=this.transitional||qt.transitional,l=s&&s.forcedJSONParsing,a=this.responseType==="json";if(A.isResponse(r)||A.isReadableStream(r))return r;if(r&&A.isString(r)&&(l&&!this.responseType||a)){const n=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(r)}catch(i){if(n)throw i.name==="SyntaxError"?ie.from(i,ie.ERR_BAD_RESPONSE,this,null,this.response):i}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Te.classes.FormData,Blob:Te.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],t=>{qt.headers[t]={}});const zn=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qn=t=>{const r={};let s,l,a;return t&&t.split(`
`).forEach(function(n){a=n.indexOf(":"),s=n.substring(0,a).trim().toLowerCase(),l=n.substring(a+1).trim(),!(!s||r[s]&&zn[s])&&(s==="set-cookie"?r[s]?r[s].push(l):r[s]=[l]:r[s]=r[s]?r[s]+", "+l:l)}),r},Ms=Symbol("internals");function Dt(t){return t&&String(t).trim().toLowerCase()}function Ht(t){return t===!1||t==null?t:A.isArray(t)?t.map(Ht):String(t)}function Jn(t){const r=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=s.exec(t);)r[l[1]]=l[2];return r}const Yn=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Rr(t,r,s,l,a){if(A.isFunction(l))return l.call(this,r,s);if(a&&(r=s),!!A.isString(r)){if(A.isString(l))return r.indexOf(l)!==-1;if(A.isRegExp(l))return l.test(r)}}function Xn(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,s,l)=>s.toUpperCase()+l)}function Zn(t,r){const s=A.toCamelCase(" "+r);["get","set","has"].forEach(l=>{Object.defineProperty(t,l+s,{value:function(a,m,n){return this[l].call(this,r,a,m,n)},configurable:!0})})}let qe=class{constructor(r){r&&this.set(r)}set(r,s,l){const a=this;function m(i,_,u){const c=Dt(_);if(!c)throw new Error("header name must be a non-empty string");const o=A.findKey(a,c);(!o||a[o]===void 0||u===!0||u===void 0&&a[o]!==!1)&&(a[o||_]=Ht(i))}const n=(i,_)=>A.forEach(i,(u,c)=>m(u,c,_));if(A.isPlainObject(r)||r instanceof this.constructor)n(r,s);else if(A.isString(r)&&(r=r.trim())&&!Yn(r))n(Qn(r),s);else if(A.isObject(r)&&A.isIterable(r)){let i={},_,u;for(const c of r){if(!A.isArray(c))throw TypeError("Object iterator must return a key-value pair");i[u=c[0]]=(_=i[u])?A.isArray(_)?[..._,c[1]]:[_,c[1]]:c[1]}n(i,s)}else r!=null&&m(s,r,l);return this}get(r,s){if(r=Dt(r),r){const l=A.findKey(this,r);if(l){const a=this[l];if(!s)return a;if(s===!0)return Jn(a);if(A.isFunction(s))return s.call(this,a,l);if(A.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,s){if(r=Dt(r),r){const l=A.findKey(this,r);return!!(l&&this[l]!==void 0&&(!s||Rr(this,this[l],l,s)))}return!1}delete(r,s){const l=this;let a=!1;function m(n){if(n=Dt(n),n){const i=A.findKey(l,n);i&&(!s||Rr(l,l[i],i,s))&&(delete l[i],a=!0)}}return A.isArray(r)?r.forEach(m):m(r),a}clear(r){const s=Object.keys(this);let l=s.length,a=!1;for(;l--;){const m=s[l];(!r||Rr(this,this[m],m,r,!0))&&(delete this[m],a=!0)}return a}normalize(r){const s=this,l={};return A.forEach(this,(a,m)=>{const n=A.findKey(l,m);if(n){s[n]=Ht(a),delete s[m];return}const i=r?Xn(m):String(m).trim();i!==m&&delete s[m],s[i]=Ht(a),l[i]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const s=Object.create(null);return A.forEach(this,(l,a)=>{l!=null&&l!==!1&&(s[a]=r&&A.isArray(l)?l.join(", "):l)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,s])=>r+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...s){const l=new this(r);return s.forEach(a=>l.set(a)),l}static accessor(r){const l=(this[Ms]=this[Ms]={accessors:{}}).accessors,a=this.prototype;function m(n){const i=Dt(n);l[i]||(Zn(a,n),l[i]=!0)}return A.isArray(r)?r.forEach(m):m(r),this}};qe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(qe.prototype,({value:t},r)=>{let s=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(l){this[s]=l}}});A.freezeMethods(qe);function Fr(t,r){const s=this||qt,l=r||s,a=qe.from(l.headers);let m=l.data;return A.forEach(t,function(i){m=i.call(s,m,a.normalize(),r?r.status:void 0)}),a.normalize(),m}function Bl(t){return!!(t&&t.__CANCEL__)}function Pt(t,r,s){ie.call(this,t??"canceled",ie.ERR_CANCELED,r,s),this.name="CanceledError"}A.inherits(Pt,ie,{__CANCEL__:!0});function Kl(t,r,s){const l=s.config.validateStatus;!s.status||!l||l(s.status)?t(s):r(new ie("Request failed with status code "+s.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function ei(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function ti(t,r){t=t||10;const s=new Array(t),l=new Array(t);let a=0,m=0,n;return r=r!==void 0?r:1e3,function(_){const u=Date.now(),c=l[m];n||(n=u),s[a]=_,l[a]=u;let o=m,b=0;for(;o!==a;)b+=s[o++],o=o%t;if(a=(a+1)%t,a===m&&(m=(m+1)%t),u-n<r)return;const g=c&&u-c;return g?Math.round(b*1e3/g):void 0}}function ri(t,r){let s=0,l=1e3/r,a,m;const n=(u,c=Date.now())=>{s=c,a=null,m&&(clearTimeout(m),m=null),t.apply(null,u)};return[(...u)=>{const c=Date.now(),o=c-s;o>=l?n(u,c):(a=u,m||(m=setTimeout(()=>{m=null,n(a)},l-o)))},()=>a&&n(a)]}const tr=(t,r,s=3)=>{let l=0;const a=ti(50,250);return ri(m=>{const n=m.loaded,i=m.lengthComputable?m.total:void 0,_=n-l,u=a(_),c=n<=i;l=n;const o={loaded:n,total:i,progress:i?n/i:void 0,bytes:_,rate:u||void 0,estimated:u&&i&&c?(i-n)/u:void 0,event:m,lengthComputable:i!=null,[r?"download":"upload"]:!0};t(o)},s)},Us=(t,r)=>{const s=t!=null;return[l=>r[0]({lengthComputable:s,total:t,loaded:l}),r[1]]},js=t=>(...r)=>A.asap(()=>t(...r)),si=Te.hasStandardBrowserEnv?((t,r)=>s=>(s=new URL(s,Te.origin),t.protocol===s.protocol&&t.host===s.host&&(r||t.port===s.port)))(new URL(Te.origin),Te.navigator&&/(msie|trident)/i.test(Te.navigator.userAgent)):()=>!0,li=Te.hasStandardBrowserEnv?{write(t,r,s,l,a,m){const n=[t+"="+encodeURIComponent(r)];A.isNumber(s)&&n.push("expires="+new Date(s).toGMTString()),A.isString(l)&&n.push("path="+l),A.isString(a)&&n.push("domain="+a),m===!0&&n.push("secure"),document.cookie=n.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ai(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function mi(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function Gl(t,r,s){let l=!ai(r);return t&&(l||s==!1)?mi(t,r):r}const qs=t=>t instanceof qe?{...t}:t;function pt(t,r){r=r||{};const s={};function l(u,c,o,b){return A.isPlainObject(u)&&A.isPlainObject(c)?A.merge.call({caseless:b},u,c):A.isPlainObject(c)?A.merge({},c):A.isArray(c)?c.slice():c}function a(u,c,o,b){if(A.isUndefined(c)){if(!A.isUndefined(u))return l(void 0,u,o,b)}else return l(u,c,o,b)}function m(u,c){if(!A.isUndefined(c))return l(void 0,c)}function n(u,c){if(A.isUndefined(c)){if(!A.isUndefined(u))return l(void 0,u)}else return l(void 0,c)}function i(u,c,o){if(o in r)return l(u,c);if(o in t)return l(void 0,u)}const _={url:m,method:m,data:m,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:i,headers:(u,c,o)=>a(qs(u),qs(c),o,!0)};return A.forEach(Object.keys(Object.assign({},t,r)),function(c){const o=_[c]||a,b=o(t[c],r[c],c);A.isUndefined(b)&&o!==i||(s[c]=b)}),s}const Hl=t=>{const r=pt({},t);let{data:s,withXSRFToken:l,xsrfHeaderName:a,xsrfCookieName:m,headers:n,auth:i}=r;r.headers=n=qe.from(n),r.url=ql(Gl(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),i&&n.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let _;if(A.isFormData(s)){if(Te.hasStandardBrowserEnv||Te.hasStandardBrowserWebWorkerEnv)n.setContentType(void 0);else if((_=n.getContentType())!==!1){const[u,...c]=_?_.split(";").map(o=>o.trim()).filter(Boolean):[];n.setContentType([u||"multipart/form-data",...c].join("; "))}}if(Te.hasStandardBrowserEnv&&(l&&A.isFunction(l)&&(l=l(r)),l||l!==!1&&si(r.url))){const u=a&&m&&li.read(m);u&&n.set(a,u)}return r},ni=typeof XMLHttpRequest<"u",ii=ni&&function(t){return new Promise(function(s,l){const a=Hl(t);let m=a.data;const n=qe.from(a.headers).normalize();let{responseType:i,onUploadProgress:_,onDownloadProgress:u}=a,c,o,b,g,h;function x(){g&&g(),h&&h(),a.cancelToken&&a.cancelToken.unsubscribe(c),a.signal&&a.signal.removeEventListener("abort",c)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function p(){if(!w)return;const B=qe.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),L={data:!i||i==="text"||i==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:B,config:t,request:w};Kl(function(Y){s(Y),x()},function(Y){l(Y),x()},L),w=null}"onloadend"in w?w.onloadend=p:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(p)},w.onabort=function(){w&&(l(new ie("Request aborted",ie.ECONNABORTED,t,w)),w=null)},w.onerror=function(){l(new ie("Network Error",ie.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let P=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const L=a.transitional||$l;a.timeoutErrorMessage&&(P=a.timeoutErrorMessage),l(new ie(P,L.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,t,w)),w=null},m===void 0&&n.setContentType(null),"setRequestHeader"in w&&A.forEach(n.toJSON(),function(P,L){w.setRequestHeader(L,P)}),A.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),i&&i!=="json"&&(w.responseType=a.responseType),u&&([b,h]=tr(u,!0),w.addEventListener("progress",b)),_&&w.upload&&([o,g]=tr(_),w.upload.addEventListener("progress",o),w.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(c=B=>{w&&(l(!B||B.type?new Pt(null,t,w):B),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(c),a.signal&&(a.signal.aborted?c():a.signal.addEventListener("abort",c)));const y=ei(a.url);if(y&&Te.protocols.indexOf(y)===-1){l(new ie("Unsupported protocol "+y+":",ie.ERR_BAD_REQUEST,t));return}w.send(m||null)})},ui=(t,r)=>{const{length:s}=t=t?t.filter(Boolean):[];if(r||s){let l=new AbortController,a;const m=function(u){if(!a){a=!0,i();const c=u instanceof Error?u:this.reason;l.abort(c instanceof ie?c:new Pt(c instanceof Error?c.message:c))}};let n=r&&setTimeout(()=>{n=null,m(new ie(`timeout ${r} of ms exceeded`,ie.ETIMEDOUT))},r);const i=()=>{t&&(n&&clearTimeout(n),n=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(m):u.removeEventListener("abort",m)}),t=null)};t.forEach(u=>u.addEventListener("abort",m));const{signal:_}=l;return _.unsubscribe=()=>A.asap(i),_}},oi=function*(t,r){let s=t.byteLength;if(s<r){yield t;return}let l=0,a;for(;l<s;)a=l+r,yield t.slice(l,a),l=a},ci=async function*(t,r){for await(const s of _i(t))yield*oi(s,r)},_i=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:s,value:l}=await r.read();if(s)break;yield l}}finally{await r.cancel()}},$s=(t,r,s,l)=>{const a=ci(t,r);let m=0,n,i=_=>{n||(n=!0,l&&l(_))};return new ReadableStream({async pull(_){try{const{done:u,value:c}=await a.next();if(u){i(),_.close();return}let o=c.byteLength;if(s){let b=m+=o;s(b)}_.enqueue(new Uint8Array(c))}catch(u){throw i(u),u}},cancel(_){return i(_),a.return()}},{highWaterMark:2})},hr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Wl=hr&&typeof ReadableStream=="function",Ni=hr&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),zl=(t,...r)=>{try{return!!t(...r)}catch{return!1}},fi=Wl&&zl(()=>{let t=!1;const r=new Request(Te.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),Vs=64*1024,Hr=Wl&&zl(()=>A.isReadableStream(new Response("").body)),rr={stream:Hr&&(t=>t.body)};hr&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!rr[r]&&(rr[r]=A.isFunction(t[r])?s=>s[r]():(s,l)=>{throw new ie(`Response type '${r}' is not supported`,ie.ERR_NOT_SUPPORT,l)})})})(new Response);const bi=async t=>{if(t==null)return 0;if(A.isBlob(t))return t.size;if(A.isSpecCompliantForm(t))return(await new Request(Te.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(A.isArrayBufferView(t)||A.isArrayBuffer(t))return t.byteLength;if(A.isURLSearchParams(t)&&(t=t+""),A.isString(t))return(await Ni(t)).byteLength},di=async(t,r)=>{const s=A.toFiniteNumber(t.getContentLength());return s??bi(r)},hi=hr&&(async t=>{let{url:r,method:s,data:l,signal:a,cancelToken:m,timeout:n,onDownloadProgress:i,onUploadProgress:_,responseType:u,headers:c,withCredentials:o="same-origin",fetchOptions:b}=Hl(t);u=u?(u+"").toLowerCase():"text";let g=ui([a,m&&m.toAbortSignal()],n),h;const x=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let w;try{if(_&&fi&&s!=="get"&&s!=="head"&&(w=await di(c,l))!==0){let L=new Request(r,{method:"POST",body:l,duplex:"half"}),O;if(A.isFormData(l)&&(O=L.headers.get("content-type"))&&c.setContentType(O),L.body){const[Y,S]=Us(w,tr(js(_)));l=$s(L.body,Vs,Y,S)}}A.isString(o)||(o=o?"include":"omit");const p="credentials"in Request.prototype;h=new Request(r,{...b,signal:g,method:s.toUpperCase(),headers:c.normalize().toJSON(),body:l,duplex:"half",credentials:p?o:void 0});let y=await fetch(h,b);const B=Hr&&(u==="stream"||u==="response");if(Hr&&(i||B&&x)){const L={};["status","statusText","headers"].forEach(Z=>{L[Z]=y[Z]});const O=A.toFiniteNumber(y.headers.get("content-length")),[Y,S]=i&&Us(O,tr(js(i),!0))||[];y=new Response($s(y.body,Vs,Y,()=>{S&&S(),x&&x()}),L)}u=u||"text";let P=await rr[A.findKey(rr,u)||"text"](y,t);return!B&&x&&x(),await new Promise((L,O)=>{Kl(L,O,{data:P,headers:qe.from(y.headers),status:y.status,statusText:y.statusText,config:t,request:h})})}catch(p){throw x&&x(),p&&p.name==="TypeError"&&/Load failed|fetch/i.test(p.message)?Object.assign(new ie("Network Error",ie.ERR_NETWORK,t,h),{cause:p.cause||p}):ie.from(p,p&&p.code,t,h)}}),Wr={http:Fn,xhr:ii,fetch:hi};A.forEach(Wr,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const Bs=t=>`- ${t}`,gi=t=>A.isFunction(t)||t===null||t===!1,Ql={getAdapter:t=>{t=A.isArray(t)?t:[t];const{length:r}=t;let s,l;const a={};for(let m=0;m<r;m++){s=t[m];let n;if(l=s,!gi(s)&&(l=Wr[(n=String(s)).toLowerCase()],l===void 0))throw new ie(`Unknown adapter '${n}'`);if(l)break;a[n||"#"+m]=l}if(!l){const m=Object.entries(a).map(([i,_])=>`adapter ${i} `+(_===!1?"is not supported by the environment":"is not available in the build"));let n=r?m.length>1?`since :
`+m.map(Bs).join(`
`):" "+Bs(m[0]):"as no adapter specified";throw new ie("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return l},adapters:Wr};function Tr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Pt(null,t)}function Ks(t){return Tr(t),t.headers=qe.from(t.headers),t.data=Fr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ql.getAdapter(t.adapter||qt.adapter)(t).then(function(l){return Tr(t),l.data=Fr.call(t,t.transformResponse,l),l.headers=qe.from(l.headers),l},function(l){return Bl(l)||(Tr(t),l&&l.response&&(l.response.data=Fr.call(t,t.transformResponse,l.response),l.response.headers=qe.from(l.response.headers))),Promise.reject(l)})}const Jl="1.10.0",gr={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{gr[t]=function(l){return typeof l===t||"a"+(r<1?"n ":" ")+t}});const Gs={};gr.transitional=function(r,s,l){function a(m,n){return"[Axios v"+Jl+"] Transitional option '"+m+"'"+n+(l?". "+l:"")}return(m,n,i)=>{if(r===!1)throw new ie(a(n," has been removed"+(s?" in "+s:"")),ie.ERR_DEPRECATED);return s&&!Gs[n]&&(Gs[n]=!0,console.warn(a(n," has been deprecated since v"+s+" and will be removed in the near future"))),r?r(m,n,i):!0}};gr.spelling=function(r){return(s,l)=>(console.warn(`${l} is likely a misspelling of ${r}`),!0)};function pi(t,r,s){if(typeof t!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const l=Object.keys(t);let a=l.length;for(;a-- >0;){const m=l[a],n=r[m];if(n){const i=t[m],_=i===void 0||n(i,m,t);if(_!==!0)throw new ie("option "+m+" must be "+_,ie.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new ie("Unknown option "+m,ie.ERR_BAD_OPTION)}}const Wt={assertOptions:pi,validators:gr},Qe=Wt.validators;let gt=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Ls,response:new Ls}}async request(r,s){try{return await this._request(r,s)}catch(l){if(l instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const m=a.stack?a.stack.replace(/^.+\n/,""):"";try{l.stack?m&&!String(l.stack).endsWith(m.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+m):l.stack=m}catch{}}throw l}}_request(r,s){typeof r=="string"?(s=s||{},s.url=r):s=r||{},s=pt(this.defaults,s);const{transitional:l,paramsSerializer:a,headers:m}=s;l!==void 0&&Wt.assertOptions(l,{silentJSONParsing:Qe.transitional(Qe.boolean),forcedJSONParsing:Qe.transitional(Qe.boolean),clarifyTimeoutError:Qe.transitional(Qe.boolean)},!1),a!=null&&(A.isFunction(a)?s.paramsSerializer={serialize:a}:Wt.assertOptions(a,{encode:Qe.function,serialize:Qe.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Wt.assertOptions(s,{baseUrl:Qe.spelling("baseURL"),withXsrfToken:Qe.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let n=m&&A.merge(m.common,m[s.method]);m&&A.forEach(["delete","get","head","post","put","patch","common"],h=>{delete m[h]}),s.headers=qe.concat(n,m);const i=[];let _=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(s)===!1||(_=_&&x.synchronous,i.unshift(x.fulfilled,x.rejected))});const u=[];this.interceptors.response.forEach(function(x){u.push(x.fulfilled,x.rejected)});let c,o=0,b;if(!_){const h=[Ks.bind(this),void 0];for(h.unshift.apply(h,i),h.push.apply(h,u),b=h.length,c=Promise.resolve(s);o<b;)c=c.then(h[o++],h[o++]);return c}b=i.length;let g=s;for(o=0;o<b;){const h=i[o++],x=i[o++];try{g=h(g)}catch(w){x.call(this,w);break}}try{c=Ks.call(this,g)}catch(h){return Promise.reject(h)}for(o=0,b=u.length;o<b;)c=c.then(u[o++],u[o++]);return c}getUri(r){r=pt(this.defaults,r);const s=Gl(r.baseURL,r.url,r.allowAbsoluteUrls);return ql(s,r.params,r.paramsSerializer)}};A.forEach(["delete","get","head","options"],function(r){gt.prototype[r]=function(s,l){return this.request(pt(l||{},{method:r,url:s,data:(l||{}).data}))}});A.forEach(["post","put","patch"],function(r){function s(l){return function(m,n,i){return this.request(pt(i||{},{method:r,headers:l?{"Content-Type":"multipart/form-data"}:{},url:m,data:n}))}}gt.prototype[r]=s(),gt.prototype[r+"Form"]=s(!0)});let yi=class Yl{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(m){s=m});const l=this;this.promise.then(a=>{if(!l._listeners)return;let m=l._listeners.length;for(;m-- >0;)l._listeners[m](a);l._listeners=null}),this.promise.then=a=>{let m;const n=new Promise(i=>{l.subscribe(i),m=i}).then(a);return n.cancel=function(){l.unsubscribe(m)},n},r(function(m,n,i){l.reason||(l.reason=new Pt(m,n,i),s(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const s=this._listeners.indexOf(r);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const r=new AbortController,s=l=>{r.abort(l)};return this.subscribe(s),r.signal.unsubscribe=()=>this.unsubscribe(s),r.signal}static source(){let r;return{token:new Yl(function(a){r=a}),cancel:r}}};function Ei(t){return function(s){return t.apply(null,s)}}function xi(t){return A.isObject(t)&&t.isAxiosError===!0}const zr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zr).forEach(([t,r])=>{zr[r]=t});function Xl(t){const r=new gt(t),s=Pl(gt.prototype.request,r);return A.extend(s,gt.prototype,r,{allOwnKeys:!0}),A.extend(s,r,null,{allOwnKeys:!0}),s.create=function(a){return Xl(pt(t,a))},s}const ae=Xl(qt);ae.Axios=gt;ae.CanceledError=Pt;ae.CancelToken=yi;ae.isCancel=Bl;ae.VERSION=Jl;ae.toFormData=dr;ae.AxiosError=ie;ae.Cancel=ae.CanceledError;ae.all=function(r){return Promise.all(r)};ae.spread=Ei;ae.isAxiosError=xi;ae.mergeConfig=pt;ae.AxiosHeaders=qe;ae.formToJSON=t=>Vl(A.isHTMLForm(t)?new FormData(t):t);ae.getAdapter=Ql.getAdapter;ae.HttpStatusCode=zr;ae.default=ae;const{Axios:$u,AxiosError:Vu,CanceledError:Bu,isCancel:Ku,CancelToken:Gu,VERSION:Hu,all:Wu,Cancel:zu,isAxiosError:Qu,spread:Ju,toFormData:Yu,AxiosHeaders:Xu,HttpStatusCode:Zu,formToJSON:eo,getAdapter:to,mergeConfig:ro}=ae;ae.interceptors.request.use(t=>(console.log("🌐 Axios Request:",{url:t.url,method:t.method,headers:t.headers,data:t.data,baseURL:t.baseURL}),t),t=>(console.error("🌐 Axios Request Error:",t),Promise.reject(t)));ae.interceptors.response.use(t=>(console.log("🌐 Axios Response:",{status:t.status,statusText:t.statusText,headers:t.headers,data:t.data}),t),t=>(console.error("🌐 Axios Response Error:"),console.error("  Status:",t.response?.status),console.error("  Status Text:",t.response?.statusText),console.error("  Headers:",t.response?.headers),console.error("  Data:",t.response?.data),console.error("  Message:",t.message),console.error("  Config URL:",t.config?.url),console.error("  Full Error:",t),Promise.reject(t)));const xe=Cl()(Al((t,r)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,login:async(s,l)=>{try{t({isLoading:!0}),console.log("🔑 Login attempt:",{phone:s,apiUrl:"/api",fullUrl:"/api/auth/login"}),console.log("📤 Request payload:",JSON.stringify({phone:s,password:l})),console.log("🔥 FORCING REAL DATABASE CALLS - All bypasses disabled");const a=await ae.post("/api/auth/login",{phone:s,password:l},{headers:{"Content-Type":"application/json"},timeout:1e4});console.log("📥 Response status:",a.status),console.log("📥 Response headers:",a.headers),console.log("✅ Login success:",a.data);const{user:m,token:n}=a.data;localStorage.setItem("token",n),t({user:m,token:n,isAuthenticated:!0,isLoading:!1})}catch(a){console.error("❌ Login error:",a),console.error("❌ Error message:",a.message),console.error("❌ Error response data:",a.response?.data),console.error("❌ Error status:",a.response?.status),console.error("❌ Error status text:",a.response?.statusText),console.error("❌ Error URL:",a.config?.url),console.error("❌ Error code:",a.code),console.error("❌ Error name:",a.name),console.error("❌ Full error object:",JSON.stringify(a,null,2)),t({isLoading:!1});let m="Login failed";throw a.code==="ERR_NETWORK"||a.name==="AxiosError"&&!a.response?m="Cannot connect to server. Please check if the backend is running.":a.code==="ECONNREFUSED"?m="Connection refused. Server may be down.":a.response?.status===401?m="Invalid phone number or password":a.response?.status===400?m=a.response.data?.error||"Invalid request":a.response?.data?.error?m=a.response.data.error:a.response?.data?.message?m=a.response.data.message:a.message&&a.message!=="[object Object]"&&(m=a.message),console.error("❌ Final error message:",m),new Error(m)}},loginWithData:(s,l)=>{localStorage.setItem("token",l),t({user:s,token:l,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("token"),t({user:null,token:null,isAuthenticated:!1})},updateUser:s=>{t({user:s})}}),{name:"auth-storage",partialize:t=>({user:t.user,token:t.token,isAuthenticated:t.isAuthenticated})}));var Et="/app/code/frontend/src/components/ErrorBoundary.tsx";class vi extends T.Component{state={hasError:!1};static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){console.error("Error caught by boundary:",r,s)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",__self:this,__source:{fileName:Et,lineNumber:33,columnNumber:9}},e.createElement("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6 text-center",__self:this,__source:{fileName:Et,lineNumber:34,columnNumber:11}},e.createElement("div",{className:"text-red-500 text-6xl mb-4",__self:this,__source:{fileName:Et,lineNumber:35,columnNumber:13}},"⚠️"),e.createElement("h1",{className:"text-xl font-semibold text-gray-900 mb-2",__self:this,__source:{fileName:Et,lineNumber:36,columnNumber:13}},"Something went wrong"),e.createElement("p",{className:"text-gray-600 mb-4",__self:this,__source:{fileName:Et,lineNumber:39,columnNumber:13}},this.state.error?.message||"An unexpected error occurred"),e.createElement("button",{onClick:()=>{this.setState({hasError:!1,error:void 0}),window.location.reload()},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",__self:this,__source:{fileName:Et,lineNumber:42,columnNumber:13}},"Reload Page"))):this.props.children}}const wi=()=>{window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason)}),window.addEventListener("error",t=>{console.error("Global error:",t.error)})},Ae=t=>{const r=Number(t);return isNaN(r)||!isFinite(r)?0:r},Si=Cl()(Al((t,r)=>({items:[],totalItems:0,totalAmount:0,addToCart:(s,l)=>{const a=r(),m=Ae(l),n=Ae(s.pricePerUnit);if(m<=0)return;if(a.items.find(_=>_.productId===s.id)){const _=a.items.map(o=>o.productId===s.id?{...o,quantity:Ae(o.quantity)+m}:o),u=_.reduce((o,b)=>o+Ae(b.quantity),0),c=_.reduce((o,b)=>o+Ae(b.pricePerUnit)*Ae(b.quantity),0);t({items:_,totalItems:u,totalAmount:c})}else{const _={id:`cart-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,productId:s.id||`product-${Date.now()}`,name:s.name||"Unknown Product",pricePerUnit:n,quantity:m,images:Array.isArray(s.images)?s.images:[],unit:s.unit||"kg"},u=[...a.items,_],c=u.reduce((b,g)=>b+Ae(g.quantity),0),o=u.reduce((b,g)=>b+Ae(g.pricePerUnit)*Ae(g.quantity),0);t({items:u,totalItems:c,totalAmount:o})}},removeFromCart:s=>{const a=r().items.filter(i=>i.id!==s),m=a.reduce((i,_)=>i+Ae(_.quantity),0),n=a.reduce((i,_)=>i+Ae(_.pricePerUnit)*Ae(_.quantity),0);t({items:a,totalItems:m,totalAmount:n})},updateQuantity:(s,l)=>{const a=r(),m=Ae(l);if(m<=0){r().removeFromCart(s);return}const n=a.items.map(u=>u.id===s?{...u,quantity:m}:u),i=n.reduce((u,c)=>u+Ae(c.quantity),0),_=n.reduce((u,c)=>u+Ae(c.pricePerUnit)*Ae(c.quantity),0);t({items:n,totalItems:i,totalAmount:_})},clearCart:()=>{t({items:[],totalItems:0,totalAmount:0})},refreshCart:()=>{const s=r(),l=s.items.reduce((m,n)=>m+Ae(n.quantity),0),a=s.items.reduce((m,n)=>m+Ae(n.pricePerUnit)*Ae(n.quantity),0);t({totalItems:l,totalAmount:a})}}),{name:"cart-storage",partialize:t=>({items:t.items,totalItems:t.totalItems,totalAmount:t.totalAmount})})),kt=()=>{const t=Si();return{cart:{items:t.items,totalItems:t.totalItems,totalAmount:t.totalAmount},addToCart:t.addToCart,removeFromCart:t.removeFromCart,updateQuantity:t.updateQuantity,clearCart:t.clearCart,refreshCart:t.refreshCart,isLoading:!1}};var ne="/app/code/frontend/src/components/layout/Navbar.tsx";function Ci(){const{isAuthenticated:t,user:r,logout:s}=xe(),{cart:l}=kt(),a=et(),[m,n]=T.useState(!1),i=()=>{s(),a("/"),n(!1)},_=()=>{switch(r?.role){case"FARMER":return"/farmer/dashboard";case"CUSTOMER":return"/customer/dashboard";case"ADMIN":return"/admin/dashboard";case"DRIVER":return"/driver/dashboard";default:return"/"}},u=()=>{n(!1)};return e.createElement("nav",{className:"bg-white shadow-sm border-b sticky top-0 z-50",__self:this,__source:{fileName:ne,lineNumber:48,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:ne,lineNumber:49,columnNumber:7}},e.createElement("div",{className:"flex justify-between h-16",__self:this,__source:{fileName:ne,lineNumber:50,columnNumber:9}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:ne,lineNumber:52,columnNumber:11}},e.createElement(_e,{to:"/",className:"flex items-center space-x-2",onClick:u,__self:this,__source:{fileName:ne,lineNumber:53,columnNumber:13}},e.createElement("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:ne,lineNumber:58,columnNumber:15}},e.createElement("span",{className:"text-white font-bold text-sm",__self:this,__source:{fileName:ne,lineNumber:59,columnNumber:17}},"Z")),e.createElement("span",{className:"text-lg sm:text-xl font-bold text-gray-900",__self:this,__source:{fileName:ne,lineNumber:61,columnNumber:15}},"Zuasoko"))),e.createElement("div",{className:"hidden md:flex items-center space-x-6",__self:this,__source:{fileName:ne,lineNumber:68,columnNumber:11}},e.createElement(_e,{to:"/marketplace",className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",__self:this,__source:{fileName:ne,lineNumber:69,columnNumber:13}},"Marketplace"),t?e.createElement(e.Fragment,null,e.createElement(_e,{to:_(),className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",__self:this,__source:{fileName:ne,lineNumber:78,columnNumber:17}},"Dashboard"),e.createElement(_e,{to:"/cart",className:"relative text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",__self:this,__source:{fileName:ne,lineNumber:86,columnNumber:17}},e.createElement(ht,{className:"w-5 h-5",__self:this,__source:{fileName:ne,lineNumber:90,columnNumber:19}}),l?.totalItems>0&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",__self:this,__source:{fileName:ne,lineNumber:92,columnNumber:21}},l.totalItems)),e.createElement("div",{className:"flex items-center space-x-2",__self:this,__source:{fileName:ne,lineNumber:98,columnNumber:17}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:ne,lineNumber:99,columnNumber:19}},r?.firstName),e.createElement("button",{onClick:i,className:"text-gray-700 hover:text-red-600 p-2 rounded-md transition-colors",__self:this,__source:{fileName:ne,lineNumber:102,columnNumber:19}},e.createElement(ys,{className:"w-4 h-4",__self:this,__source:{fileName:ne,lineNumber:106,columnNumber:21}})))):e.createElement("div",{className:"flex items-center space-x-3",__self:this,__source:{fileName:ne,lineNumber:111,columnNumber:15}},e.createElement(_e,{to:"/cart",className:"relative text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",__self:this,__source:{fileName:ne,lineNumber:113,columnNumber:17}},e.createElement(ht,{className:"w-5 h-5",__self:this,__source:{fileName:ne,lineNumber:117,columnNumber:19}}),l?.totalItems>0&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",__self:this,__source:{fileName:ne,lineNumber:119,columnNumber:21}},l.totalItems)),e.createElement(_e,{to:"/login",className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",__self:this,__source:{fileName:ne,lineNumber:125,columnNumber:17}},"Login"),e.createElement(_e,{to:"/register",className:"bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:ne,lineNumber:131,columnNumber:17}},"Register"))),e.createElement("div",{className:"md:hidden flex items-center space-x-3",__self:this,__source:{fileName:ne,lineNumber:142,columnNumber:11}},e.createElement(_e,{to:"/cart",className:"relative text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",onClick:u,__self:this,__source:{fileName:ne,lineNumber:144,columnNumber:13}},e.createElement(ht,{className:"w-5 h-5",__self:this,__source:{fileName:ne,lineNumber:149,columnNumber:15}}),l?.totalItems>0&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",__self:this,__source:{fileName:ne,lineNumber:151,columnNumber:17}},l.totalItems)),e.createElement("button",{onClick:()=>n(!m),className:"text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",__self:this,__source:{fileName:ne,lineNumber:158,columnNumber:13}},m?e.createElement(st,{className:"w-5 h-5",__self:this,__source:{fileName:ne,lineNumber:163,columnNumber:17}}):e.createElement(nl,{className:"w-5 h-5",__self:this,__source:{fileName:ne,lineNumber:165,columnNumber:17}}))))),m&&e.createElement("div",{className:"md:hidden bg-white border-t border-gray-200",__self:this,__source:{fileName:ne,lineNumber:174,columnNumber:9}},e.createElement("div",{className:"px-2 pt-2 pb-3 space-y-1",__self:this,__source:{fileName:ne,lineNumber:175,columnNumber:11}},e.createElement(_e,{to:"/",className:"flex items-center gap-3 px-3 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 rounded-md transition-colors",onClick:u,__self:this,__source:{fileName:ne,lineNumber:176,columnNumber:13}},e.createElement(il,{className:"w-5 h-5",__self:this,__source:{fileName:ne,lineNumber:181,columnNumber:15}}),"Home"),e.createElement(_e,{to:"/marketplace",className:"flex items-center gap-3 px-3 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 rounded-md transition-colors",onClick:u,__self:this,__source:{fileName:ne,lineNumber:185,columnNumber:13}},e.createElement(ul,{className:"w-5 h-5",__self:this,__source:{fileName:ne,lineNumber:190,columnNumber:15}}),"Marketplace"),t?e.createElement(e.Fragment,null,e.createElement(_e,{to:_(),className:"flex items-center gap-3 px-3 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 rounded-md transition-colors",onClick:u,__self:this,__source:{fileName:ne,lineNumber:196,columnNumber:17}},e.createElement(va,{className:"w-5 h-5",__self:this,__source:{fileName:ne,lineNumber:201,columnNumber:19}}),"Dashboard"),e.createElement("div",{className:"px-3 py-3 border-t border-gray-200 mt-2",__self:this,__source:{fileName:ne,lineNumber:206,columnNumber:17}},e.createElement("div",{className:"flex items-center gap-3 mb-3",__self:this,__source:{fileName:ne,lineNumber:207,columnNumber:19}},e.createElement("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",__self:this,__source:{fileName:ne,lineNumber:208,columnNumber:21}},e.createElement(Ke,{className:"w-4 h-4 text-primary-600",__self:this,__source:{fileName:ne,lineNumber:209,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:ne,lineNumber:211,columnNumber:21}},e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:ne,lineNumber:212,columnNumber:23}},r?.firstName," ",r?.lastName),e.createElement("div",{className:"text-xs text-gray-500 capitalize",__self:this,__source:{fileName:ne,lineNumber:215,columnNumber:23}},r?.role?.toLowerCase()))),e.createElement("button",{onClick:i,className:"flex items-center gap-3 w-full px-3 py-2 text-base font-medium text-red-600 hover:bg-red-50 rounded-md transition-colors",__self:this,__source:{fileName:ne,lineNumber:221,columnNumber:19}},e.createElement(ys,{className:"w-5 h-5",__self:this,__source:{fileName:ne,lineNumber:225,columnNumber:21}}),"Logout"))):e.createElement("div",{className:"px-3 py-3 border-t border-gray-200 mt-2 space-y-2",__self:this,__source:{fileName:ne,lineNumber:231,columnNumber:15}},e.createElement(_e,{to:"/login",className:"block w-full text-center px-4 py-3 text-base font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",onClick:u,__self:this,__source:{fileName:ne,lineNumber:232,columnNumber:17}},"Login"),e.createElement(_e,{to:"/register",className:"block w-full text-center px-4 py-3 text-base font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-lg transition-colors",onClick:u,__self:this,__source:{fileName:ne,lineNumber:239,columnNumber:17}},"Register")))))}var at="/app/code/frontend/src/components/layout/MobileBottomNav.tsx";function Ai(){const{isAuthenticated:t,user:r}=xe(),{cart:s}=kt(),l=ml(),m=(()=>{const i=[{path:"/",icon:il,label:"Home",show:!0},{path:"/marketplace",icon:ul,label:"Shop",show:!0}];if(!t)return[...i,{path:"/cart",icon:ht,label:"Cart",badge:s?.totalItems||0,show:!0},{path:"/login",icon:Ke,label:"Login",show:!0}];switch(r?.role){case"CUSTOMER":return[...i,{path:"/cart",icon:ht,label:"Cart",badge:s?.totalItems||0,show:!0},{path:"/customer/dashboard",icon:Ke,label:"Account",show:!0}];case"FARMER":return[...i,{path:"/farmer/consignments",icon:Qt,label:"Consign",show:!0},{path:"/farmer/wallet",icon:Ke,label:"Wallet",show:!0}];case"DRIVER":return[...i,{path:"/driver/assignments",icon:ve,label:"Transport",show:!0},{path:"/driver/warehouse",icon:Ke,label:"Warehouse",show:!0}];case"ADMIN":return[...i,{path:"/admin/consignments",icon:Qt,label:"Consign",show:!0},{path:"/admin/analytics",icon:Yr,label:"Analytics",show:!0}];default:return i}})().filter(i=>i.show),n=i=>!!(i==="/"&&l.pathname==="/"||i!=="/"&&l.pathname.startsWith(i));return e.createElement("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",__self:this,__source:{fileName:at,lineNumber:147,columnNumber:5}},e.createElement("div",{className:"grid grid-cols-4 py-1",__self:this,__source:{fileName:at,lineNumber:148,columnNumber:7}},m.map(i=>{const _=i.icon,u=n(i.path);return e.createElement(_e,{key:i.path,to:i.path,className:`flex flex-col items-center justify-center py-2 px-1 text-xs font-medium transition-colors ${u?"text-primary-600":"text-gray-500 hover:text-gray-700"}`,__self:this,__source:{fileName:at,lineNumber:154,columnNumber:13}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:at,lineNumber:163,columnNumber:15}},e.createElement(_,{className:`w-5 h-5 ${u?"text-primary-600":"text-gray-500"}`,__self:this,__source:{fileName:at,lineNumber:164,columnNumber:17}}),"badge"in i&&i.badge&&i.badge>0&&e.createElement("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center min-w-[16px]",__self:this,__source:{fileName:at,lineNumber:168,columnNumber:19}},i.badge>99?"99+":i.badge)),e.createElement("span",{className:`mt-1 ${u?"text-primary-600":"text-gray-500"}`,__self:this,__source:{fileName:at,lineNumber:173,columnNumber:15}},i.label))})),e.createElement("div",{className:"h-safe-bottom bg-white",__self:this,__source:{fileName:at,lineNumber:184,columnNumber:7}}))}var Ge="/app/code/frontend/src/components/DatabaseStatus.tsx";function Pi(){const[t,r]=T.useState({connected:!1,database:"checking...",loading:!0});if(T.useEffect(()=>{r({connected:!0,database:"connected",loading:!1})},[]),t.loading)return null;const s=t.database==="connected",l=t.database==="demo";return e.createElement("div",{className:"fixed bottom-4 right-4 z-50",__self:this,__source:{fileName:Ge,lineNumber:33,columnNumber:5}},e.createElement("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium shadow-lg ${s?"bg-green-100 text-green-800 border border-green-200":l?"bg-blue-100 text-blue-800 border border-blue-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"}`,__self:this,__source:{fileName:Ge,lineNumber:34,columnNumber:7}},s?e.createElement(e.Fragment,null,e.createElement(Cr,{className:"w-4 h-4",__self:this,__source:{fileName:Ge,lineNumber:45,columnNumber:13}}),e.createElement("span",{__self:this,__source:{fileName:Ge,lineNumber:46,columnNumber:13}},"Render.com DB"),e.createElement(Es,{className:"w-4 h-4",__self:this,__source:{fileName:Ge,lineNumber:47,columnNumber:13}})):l?e.createElement(e.Fragment,null,e.createElement(Cr,{className:"w-4 h-4",__self:this,__source:{fileName:Ge,lineNumber:51,columnNumber:13}}),e.createElement("span",{__self:this,__source:{fileName:Ge,lineNumber:52,columnNumber:13}},"Demo Mode"),e.createElement(Es,{className:"w-4 h-4",__self:this,__source:{fileName:Ge,lineNumber:53,columnNumber:13}})):e.createElement(e.Fragment,null,e.createElement(Cr,{className:"w-4 h-4",__self:this,__source:{fileName:Ge,lineNumber:57,columnNumber:13}}),e.createElement("span",{__self:this,__source:{fileName:Ge,lineNumber:58,columnNumber:13}},"Disconnected"),e.createElement(wa,{className:"w-4 h-4",__self:this,__source:{fileName:Ge,lineNumber:59,columnNumber:13}}))))}var ee="/app/code/frontend/src/pages/HomePage.tsx";function ki(){const{isAuthenticated:t,user:r}=xe(),[s,l]=T.useState(!1),a=[{icon:e.createElement(Lr,{className:"w-8 h-8 text-primary-600",__self:this,__source:{fileName:ee,lineNumber:21,columnNumber:13}}),title:"Fresh Produce",description:"Direct from farmers to your table, ensuring maximum freshness and quality."},{icon:e.createElement(Ze,{className:"w-8 h-8 text-primary-600",__self:this,__source:{fileName:ee,lineNumber:27,columnNumber:13}}),title:"Support Farmers",description:"Help local farmers get fair prices for their hard work and dedication."},{icon:e.createElement(ve,{className:"w-8 h-8 text-primary-600",__self:this,__source:{fileName:ee,lineNumber:33,columnNumber:13}}),title:"Fast Delivery",description:"Quick and reliable delivery service to get your orders to you fresh."},{icon:e.createElement(Xr,{className:"w-8 h-8 text-primary-600",__self:this,__source:{fileName:ee,lineNumber:39,columnNumber:13}}),title:"Quality Assured",description:"All produce is quality-checked before delivery to ensure satisfaction."}],m=[{role:"Admin",phone:"+254712345678",description:"Manage users, approve farmers, view analytics",icon:e.createElement(vt,{className:"w-5 h-5",__self:this,__source:{fileName:ee,lineNumber:51,columnNumber:13}}),color:"bg-red-100 text-red-800 border-red-200"},{role:"Farmer",phone:"+254734567890",description:"Create consignments, manage produce listings",icon:e.createElement(Lr,{className:"w-5 h-5",__self:this,__source:{fileName:ee,lineNumber:58,columnNumber:13}}),color:"bg-green-100 text-green-800 border-green-200"},{role:"Customer",phone:"+254756789012",description:"Browse marketplace, place orders, track deliveries",icon:e.createElement(Ze,{className:"w-5 h-5",__self:this,__source:{fileName:ee,lineNumber:65,columnNumber:13}}),color:"bg-blue-100 text-blue-800 border-blue-200"},{role:"Driver",phone:"+254778901234",description:"Manage deliveries, update delivery status",icon:e.createElement(ve,{className:"w-5 h-5",__self:this,__source:{fileName:ee,lineNumber:72,columnNumber:13}}),color:"bg-purple-100 text-purple-800 border-purple-200"}],n=()=>{switch(r?.role){case"FARMER":return"/farmer/dashboard";case"CUSTOMER":return"/customer/dashboard";case"ADMIN":return"/admin/dashboard";case"DRIVER":return"/driver/dashboard";default:return"/marketplace"}};return e.createElement("div",{className:"min-h-screen bg-white",__self:this,__source:{fileName:ee,lineNumber:93,columnNumber:5}},e.createElement("section",{className:"bg-gradient-to-br from-primary-50 to-primary-100 py-20",__self:this,__source:{fileName:ee,lineNumber:95,columnNumber:7}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:ee,lineNumber:96,columnNumber:9}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:ee,lineNumber:97,columnNumber:11}},e.createElement("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",__self:this,__source:{fileName:ee,lineNumber:98,columnNumber:13}},"Welcome to ",e.createElement("span",{className:"text-primary-600",__self:this,__source:{fileName:ee,lineNumber:99,columnNumber:26}},"Zuasoko")),e.createElement("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 max-w-3xl mx-auto",__self:this,__source:{fileName:ee,lineNumber:101,columnNumber:13}},"Connecting farmers and customers across Kenya. Fresh produce, fair prices, and sustainable agriculture for everyone."),e.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",__self:this,__source:{fileName:ee,lineNumber:106,columnNumber:13}},t?e.createElement(_e,{to:n(),className:"bg-primary-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:ee,lineNumber:108,columnNumber:17}},"Go to Dashboard"):e.createElement(e.Fragment,null,e.createElement(_e,{to:"/marketplace",className:"bg-primary-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:ee,lineNumber:116,columnNumber:19}},"Browse Marketplace"),e.createElement(_e,{to:"/register",className:"bg-white text-primary-600 px-8 py-3 rounded-lg text-lg font-semibold border-2 border-primary-600 hover:bg-primary-50 transition-colors",__self:this,__source:{fileName:ee,lineNumber:122,columnNumber:19}},"Join Now"))),!t&&e.createElement("div",{className:"max-w-2xl mx-auto",__self:this,__source:{fileName:ee,lineNumber:134,columnNumber:15}},e.createElement("button",{onClick:()=>l(!s),className:"flex items-center justify-center gap-2 mx-auto text-sm text-gray-600 hover:text-gray-800 transition-colors",__self:this,__source:{fileName:ee,lineNumber:135,columnNumber:17}},e.createElement(Sa,{className:"w-4 h-4",__self:this,__source:{fileName:ee,lineNumber:139,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:ee,lineNumber:140,columnNumber:19}},"View Demo Credentials"),s?e.createElement(Ca,{className:"w-4 h-4",__self:this,__source:{fileName:ee,lineNumber:142,columnNumber:21}}):e.createElement(Aa,{className:"w-4 h-4",__self:this,__source:{fileName:ee,lineNumber:144,columnNumber:21}})),s&&e.createElement("div",{className:"mt-4 p-4 bg-white rounded-lg border border-gray-200 shadow-sm",__self:this,__source:{fileName:ee,lineNumber:149,columnNumber:19}},e.createElement("h3",{className:"text-sm font-semibold text-gray-900 mb-3 text-center",__self:this,__source:{fileName:ee,lineNumber:150,columnNumber:21}},"Demo Account Access"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",__self:this,__source:{fileName:ee,lineNumber:153,columnNumber:21}},m.map((i,_)=>e.createElement("div",{key:_,className:`p-3 rounded-lg border ${i.color} text-xs`,__self:this,__source:{fileName:ee,lineNumber:155,columnNumber:25}},e.createElement("div",{className:"flex items-center gap-2 mb-1",__self:this,__source:{fileName:ee,lineNumber:159,columnNumber:27}},i.icon,e.createElement("span",{className:"font-semibold",__self:this,__source:{fileName:ee,lineNumber:161,columnNumber:29}},i.role)),e.createElement("div",{className:"font-mono text-xs mb-1",__self:this,__source:{fileName:ee,lineNumber:165,columnNumber:27}},i.phone),e.createElement("div",{className:"text-xs opacity-80",__self:this,__source:{fileName:ee,lineNumber:168,columnNumber:27}},i.description)))),e.createElement("div",{className:"text-center mt-3 text-xs text-gray-600",__self:this,__source:{fileName:ee,lineNumber:174,columnNumber:21}},"Password for all accounts:"," ",e.createElement("span",{className:"font-mono font-semibold",__self:this,__source:{fileName:ee,lineNumber:176,columnNumber:23}},"password123")),e.createElement("div",{className:"text-center mt-2",__self:this,__source:{fileName:ee,lineNumber:180,columnNumber:21}},e.createElement(_e,{to:"/login",className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 font-medium",__self:this,__source:{fileName:ee,lineNumber:181,columnNumber:23}},e.createElement(vt,{className:"w-3 h-3",__self:this,__source:{fileName:ee,lineNumber:185,columnNumber:25}}),"Login to any demo account"))))))),e.createElement("section",{className:"py-20",__self:this,__source:{fileName:ee,lineNumber:198,columnNumber:7}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:ee,lineNumber:199,columnNumber:9}},e.createElement("div",{className:"text-center mb-16",__self:this,__source:{fileName:ee,lineNumber:200,columnNumber:11}},e.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:ee,lineNumber:201,columnNumber:13}},"Why Choose Zuasoko?"),e.createElement("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",__self:this,__source:{fileName:ee,lineNumber:204,columnNumber:13}},"We're revolutionizing agriculture in Kenya by creating direct connections between farmers and customers.")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",__self:this,__source:{fileName:ee,lineNumber:210,columnNumber:11}},a.map((i,_)=>e.createElement("div",{key:_,className:"text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow",__self:this,__source:{fileName:ee,lineNumber:212,columnNumber:15}},e.createElement("div",{className:"flex justify-center mb-4",__self:this,__source:{fileName:ee,lineNumber:216,columnNumber:17}},i.icon),e.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-2",__self:this,__source:{fileName:ee,lineNumber:217,columnNumber:17}},i.title),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:ee,lineNumber:220,columnNumber:17}},i.description)))))),t&&r?.role==="ADMIN"&&e.createElement("section",{className:"bg-red-50 py-12",__self:this,__source:{fileName:ee,lineNumber:229,columnNumber:9}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:ee,lineNumber:230,columnNumber:11}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:ee,lineNumber:231,columnNumber:13}},e.createElement("div",{className:"inline-flex items-center gap-2 mb-4",__self:this,__source:{fileName:ee,lineNumber:232,columnNumber:15}},e.createElement(vt,{className:"w-6 h-6 text-red-600",__self:this,__source:{fileName:ee,lineNumber:233,columnNumber:17}}),e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:ee,lineNumber:234,columnNumber:17}},"Admin Dashboard")),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:ee,lineNumber:238,columnNumber:15}},"Welcome back, Administrator. Manage your platform efficiently."),e.createElement("div",{className:"flex flex-wrap justify-center gap-4",__self:this,__source:{fileName:ee,lineNumber:241,columnNumber:15}},e.createElement(_e,{to:"/admin/dashboard",className:"bg-red-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-red-700 transition-colors",__self:this,__source:{fileName:ee,lineNumber:242,columnNumber:17}},"View Dashboard"),e.createElement(_e,{to:"/admin/users",className:"bg-white text-red-600 px-6 py-2 rounded-lg font-medium border border-red-600 hover:bg-red-50 transition-colors",__self:this,__source:{fileName:ee,lineNumber:248,columnNumber:17}},"Manage Users"),e.createElement(_e,{to:"/admin/analytics",className:"bg-white text-red-600 px-6 py-2 rounded-lg font-medium border border-red-600 hover:bg-red-50 transition-colors",__self:this,__source:{fileName:ee,lineNumber:254,columnNumber:17}},"View Analytics"))))),e.createElement("section",{className:"bg-primary-600 py-16",__self:this,__source:{fileName:ee,lineNumber:267,columnNumber:7}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",__self:this,__source:{fileName:ee,lineNumber:268,columnNumber:9}},e.createElement("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",__self:this,__source:{fileName:ee,lineNumber:269,columnNumber:11}},"Ready to Get Started?"),e.createElement("p",{className:"text-xl text-primary-100 mb-8 max-w-2xl mx-auto",__self:this,__source:{fileName:ee,lineNumber:272,columnNumber:11}},"Join thousands of farmers and customers who are already part of the Zuasoko community."),!t&&e.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",__self:this,__source:{fileName:ee,lineNumber:278,columnNumber:13}},e.createElement(_e,{to:"/register",className:"bg-white text-primary-600 px-8 py-3 rounded-lg text-lg font-semibold hover:bg-gray-100 transition-colors",__self:this,__source:{fileName:ee,lineNumber:279,columnNumber:15}},"Register Now"),e.createElement(_e,{to:"/login",className:"bg-transparent text-white px-8 py-3 rounded-lg text-lg font-semibold border-2 border-white hover:bg-white hover:text-primary-600 transition-colors",__self:this,__source:{fileName:ee,lineNumber:285,columnNumber:15}},"Login")))))}const Di="/api",$e=ae.create({baseURL:Di,timeout:3e4,headers:{"Content-Type":"application/json"}});$e.interceptors.request.use(t=>{console.log("🚀 API REQUEST:",t.method?.toUpperCase(),t.url,"Data:",t.data);const r=localStorage.getItem("authToken");return r&&(t.headers.Authorization=`Bearer ${r}`),t});$e.interceptors.response.use(t=>(console.log("✅ API SUCCESS:",t.config.url,"Status:",t.status,"Data sample:",t.data),t),t=>(console.error("❌ API ERROR:",{url:t.config?.url,method:t.config?.method,status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,message:t.message,hostname:window.location.hostname,timestamp:new Date().toISOString()}),Promise.reject(t)));const Or={login:async t=>{console.log("🔐 ATTEMPTING LOGIN with real database:",t.phone);const r=await $e.post("/auth/login",t);return console.log("🔐 LOGIN SUCCESS:",r.data),r.data},register:async t=>{console.log("📝 ATTEMPTING REGISTRATION with real database");const r=await $e.post("/auth/register",t);return console.log("📝 REGISTRATION SUCCESS:",r.data),r.data},getProducts:async t=>{const r=t?`/marketplace/products?${t}`:"/marketplace/products";console.log("🛍️ FETCHING PRODUCTS from real database:",r);const s=await $e.get(r);return console.log("🛍️ PRODUCTS SUCCESS:",s.data.products?.length||s.data.length,"products"),s.data},getProduct:async t=>{console.log("🛍️ FETCHING SINGLE PRODUCT from real database:",t);const r=await $e.get(`/marketplace/products/${t}`);return console.log("🛍️ SINGLE PRODUCT SUCCESS:",r.data),r.data},getCategories:async()=>{console.log("📁 FETCHING CATEGORIES from real database");const t=await $e.get("/marketplace/categories");return console.log("📁 CATEGORIES SUCCESS:",t.data),t.data},getCounties:async()=>{console.log("🗺️ FETCHING COUNTIES from real database");const t=await $e.get("/marketplace/counties");return console.log("🗺️ COUNTIES SUCCESS:",t.data),t.data},getWalletBalance:async()=>{console.log("💰 FETCHING WALLET BALANCE from real database");const t=await $e.get("/wallet/balance");return console.log("💰 WALLET SUCCESS:",t.data),t.data},createOrder:async t=>{console.log("📦 CREATING ORDER in real database");const r=await $e.post("/orders",t);return console.log("📦 ORDER SUCCESS:",r.data),r.data},getOrders:async()=>{console.log("📦 FETCHING ORDERS from real database");const t=await $e.get("/orders");return console.log("📦 ORDERS SUCCESS:",t.data),t.data},getUsers:async()=>{console.log("👥 FETCHING USERS from real database");const t=await $e.get("/admin/users");return console.log("👥 USERS SUCCESS:",t.data),t.data},approveUser:async t=>{console.log("✅ APPROVING USER in real database:",t);const r=await $e.post(`/admin/users/${t}/approve`);return console.log("✅ USER APPROVAL SUCCESS:",r.data),r.data}};var K="/app/code/frontend/src/pages/marketplace/MarketplacePage.tsx";function Ri(){const[t,r]=T.useState([]),[s,l]=T.useState([]),[a,m]=T.useState([]),[n,i]=T.useState(!0),[_,u]=T.useState({category:"",county:"",search:"",minPrice:"",maxPrice:"",featured:!1}),[c,o]=T.useState(!1),[b,g]=T.useState({page:1,limit:12,total:0,totalPages:0}),{addToCart:h,isLoading:x}=kt(),{user:w,isAuthenticated:p}=xe(),y=async(S=1)=>{try{i(!0),console.log("🔍 FETCHING PRODUCTS - Page:",S,"Filters:",_);const Z=new URLSearchParams({page:S.toString(),limit:b.limit.toString(),..._.category&&{category:_.category},..._.county&&{county:_.county},..._.search&&{search:_.search},..._.minPrice&&{minPrice:_.minPrice},..._.maxPrice&&{maxPrice:_.maxPrice},..._.featured&&{featured:"true"}}),N=await Or.getProducts(Z);console.log("🔍 PRODUCTS RESPONSE:",N),r(N.products||N),N.pagination?g(J=>({...J,...N.pagination,page:S})):g(J=>({...J,page:S,total:N.products?.length||N.length||0,totalPages:1}))}catch(Z){console.error("❌ FAILED TO FETCH PRODUCTS:",Z),V.error("Failed to load products from database")}finally{i(!1)}},B=async()=>{try{console.log("🔍 FETCHING METADATA from real database");const[S,Z]=await Promise.all([Or.getCategories(),Or.getCounties()]);console.log("🔍 CATEGORIES RESPONSE:",S),console.log("🔍 COUNTIES RESPONSE:",Z),l(S.categories||S||[]),m(Z.counties||Z||[])}catch(S){console.error("❌ FAILED TO FETCH METADATA:",S),V.error("Failed to load categories and counties from database")}};T.useEffect(()=>{B()},[]),T.useEffect(()=>{y(1)},[_]);const P=(S,Z)=>{u(N=>({...N,[S]:Z}))},L=S=>{try{h(S,1),V.success(`Added ${S.name} to cart`)}catch(Z){console.error("Failed to add to cart:",Z),V.error("Failed to add item to cart")}},O=()=>{u({category:"",county:"",search:"",minPrice:"",maxPrice:"",featured:!1})},Y=S=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(S);return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:K,lineNumber:194,columnNumber:5}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:K,lineNumber:196,columnNumber:7}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2",__self:this,__source:{fileName:K,lineNumber:197,columnNumber:9}},"Fresh Marketplace"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:K,lineNumber:200,columnNumber:9}},"Discover fresh produce directly from local farmers")),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-8",__self:this,__source:{fileName:K,lineNumber:206,columnNumber:7}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-center lg:space-x-4 space-y-4 lg:space-y-0",__self:this,__source:{fileName:K,lineNumber:207,columnNumber:9}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:K,lineNumber:209,columnNumber:11}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:K,lineNumber:210,columnNumber:13}},e.createElement(ol,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400",__self:this,__source:{fileName:K,lineNumber:211,columnNumber:15}}),e.createElement("input",{type:"text",placeholder:"Search products...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:_.search,onChange:S=>P("search",S.target.value),__self:this,__source:{fileName:K,lineNumber:212,columnNumber:15}}))),e.createElement("div",{className:"flex flex-wrap gap-2",__self:this,__source:{fileName:K,lineNumber:223,columnNumber:11}},e.createElement("button",{onClick:()=>P("featured",!_.featured),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${_.featured?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,__self:this,__source:{fileName:K,lineNumber:224,columnNumber:13}},e.createElement(Xr,{className:`w-4 h-4 inline mr-1 ${_.featured?"fill-current":""}`,__self:this,__source:{fileName:K,lineNumber:232,columnNumber:15}}),"Featured"),e.createElement("button",{onClick:()=>o(!c),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-medium transition-colors",__self:this,__source:{fileName:K,lineNumber:238,columnNumber:13}},e.createElement(Pa,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:K,lineNumber:242,columnNumber:15}}),"Filters"))),c&&e.createElement("div",{className:"mt-6 pt-6 border-t border-gray-200",__self:this,__source:{fileName:K,lineNumber:250,columnNumber:11}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",__self:this,__source:{fileName:K,lineNumber:251,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:K,lineNumber:253,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:K,lineNumber:254,columnNumber:17}},"Category"),e.createElement("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:_.category,onChange:S=>P("category",S.target.value),__self:this,__source:{fileName:K,lineNumber:257,columnNumber:17}},e.createElement("option",{value:"",__self:this,__source:{fileName:K,lineNumber:264,columnNumber:19}},"All Categories"),s.map(S=>e.createElement("option",{key:S,value:S,__self:this,__source:{fileName:K,lineNumber:266,columnNumber:21}},S)))),e.createElement("div",{__self:this,__source:{fileName:K,lineNumber:274,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:K,lineNumber:275,columnNumber:17}},"County"),e.createElement("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:_.county,onChange:S=>P("county",S.target.value),__self:this,__source:{fileName:K,lineNumber:278,columnNumber:17}},e.createElement("option",{value:"",__self:this,__source:{fileName:K,lineNumber:283,columnNumber:19}},"All Counties"),a.map(S=>e.createElement("option",{key:S,value:S,__self:this,__source:{fileName:K,lineNumber:285,columnNumber:21}},S)))),e.createElement("div",{__self:this,__source:{fileName:K,lineNumber:293,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:K,lineNumber:294,columnNumber:17}},"Min Price (KES)"),e.createElement("input",{type:"number",placeholder:"0",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:_.minPrice,onChange:S=>P("minPrice",S.target.value),__self:this,__source:{fileName:K,lineNumber:297,columnNumber:17}})),e.createElement("div",{__self:this,__source:{fileName:K,lineNumber:308,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:K,lineNumber:309,columnNumber:17}},"Max Price (KES)"),e.createElement("input",{type:"number",placeholder:"1000",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:_.maxPrice,onChange:S=>P("maxPrice",S.target.value),__self:this,__source:{fileName:K,lineNumber:312,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex justify-end",__self:this,__source:{fileName:K,lineNumber:324,columnNumber:13}},e.createElement("button",{onClick:O,className:"text-gray-600 hover:text-gray-900 text-sm font-medium",__self:this,__source:{fileName:K,lineNumber:325,columnNumber:15}},"Clear All Filters")))),e.createElement("div",{className:"flex justify-between items-center mb-6",__self:this,__source:{fileName:K,lineNumber:337,columnNumber:7}},e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:K,lineNumber:338,columnNumber:9}},n?"Loading...":`Showing ${t.length} of ${b.total} products`),b.totalPages>1&&e.createElement("div",{className:"text-sm text-gray-600",__self:this,__source:{fileName:K,lineNumber:345,columnNumber:11}},"Page ",b.page," of ",b.totalPages)),n?e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",__self:this,__source:{fileName:K,lineNumber:353,columnNumber:9}},[...Array(8)].map((S,Z)=>e.createElement("div",{key:Z,className:"bg-white rounded-lg shadow-sm border overflow-hidden animate-pulse",__self:this,__source:{fileName:K,lineNumber:355,columnNumber:13}},e.createElement("div",{className:"h-48 bg-gray-200",__self:this,__source:{fileName:K,lineNumber:359,columnNumber:15}}),e.createElement("div",{className:"p-4",__self:this,__source:{fileName:K,lineNumber:360,columnNumber:15}},e.createElement("div",{className:"h-4 bg-gray-200 rounded mb-2",__self:this,__source:{fileName:K,lineNumber:361,columnNumber:17}}),e.createElement("div",{className:"h-3 bg-gray-200 rounded mb-2",__self:this,__source:{fileName:K,lineNumber:362,columnNumber:17}}),e.createElement("div",{className:"h-6 bg-gray-200 rounded",__self:this,__source:{fileName:K,lineNumber:363,columnNumber:17}}))))):t.length===0?e.createElement("div",{className:"text-center py-16",__self:this,__source:{fileName:K,lineNumber:369,columnNumber:9}},e.createElement("div",{className:"text-gray-400 text-6xl mb-4",__self:this,__source:{fileName:K,lineNumber:370,columnNumber:11}},"🛒"),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:K,lineNumber:371,columnNumber:11}},"No products found"),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:K,lineNumber:374,columnNumber:11}},"Try adjusting your search or filter criteria"),e.createElement("button",{onClick:O,className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:K,lineNumber:377,columnNumber:11}},"Clear Filters")):e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",__self:this,__source:{fileName:K,lineNumber:385,columnNumber:9}},t.map(S=>e.createElement("div",{key:S.id,className:"bg-white rounded-lg shadow-sm border overflow-hidden hover:shadow-md transition-shadow",__self:this,__source:{fileName:K,lineNumber:387,columnNumber:13}},e.createElement("div",{className:"relative h-48 bg-gray-200",__self:this,__source:{fileName:K,lineNumber:392,columnNumber:15}},S.images&&S.images.length>0?e.createElement("img",{src:S.images[0],alt:S.name,className:"w-full h-full object-cover",onError:Z=>{Z.currentTarget.src="/api/placeholder/300/200?text="+encodeURIComponent(S.name)},__self:this,__source:{fileName:K,lineNumber:394,columnNumber:19}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400",__self:this,__source:{fileName:K,lineNumber:405,columnNumber:19}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:K,lineNumber:406,columnNumber:21}},e.createElement(ot,{className:"w-8 h-8 mx-auto mb-2",__self:this,__source:{fileName:K,lineNumber:407,columnNumber:23}}),e.createElement("span",{className:"text-sm",__self:this,__source:{fileName:K,lineNumber:408,columnNumber:23}},S.name))),(S.isFeatured||S.is_featured)&&e.createElement("div",{className:"absolute top-2 left-2 bg-yellow-400 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium",__self:this,__source:{fileName:K,lineNumber:415,columnNumber:19}},"⭐ Featured"),(S.stockQuantity||S.stock_quantity)<10&&(S.stockQuantity||S.stock_quantity)>0&&e.createElement("div",{className:"absolute top-2 right-2 bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",__self:this,__source:{fileName:K,lineNumber:423,columnNumber:21}},"Low Stock"),(S.stockQuantity||S.stock_quantity)===0&&e.createElement("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",__self:this,__source:{fileName:K,lineNumber:429,columnNumber:19}},e.createElement("span",{className:"text-white font-medium",__self:this,__source:{fileName:K,lineNumber:430,columnNumber:21}},"Out of Stock"))),e.createElement("div",{className:"p-4",__self:this,__source:{fileName:K,lineNumber:436,columnNumber:15}},e.createElement("div",{className:"flex items-start justify-between mb-2",__self:this,__source:{fileName:K,lineNumber:437,columnNumber:17}},e.createElement("h3",{className:"font-semibold text-gray-900 text-sm line-clamp-2",__self:this,__source:{fileName:K,lineNumber:438,columnNumber:19}},S.name),e.createElement("button",{className:"text-gray-400 hover:text-red-500 transition-colors ml-2",__self:this,__source:{fileName:K,lineNumber:441,columnNumber:19}},e.createElement(Zr,{className:"w-4 h-4",__self:this,__source:{fileName:K,lineNumber:442,columnNumber:21}}))),e.createElement("p",{className:"text-gray-600 text-xs mb-2 line-clamp-2",__self:this,__source:{fileName:K,lineNumber:446,columnNumber:17}},S.description),e.createElement("div",{className:"flex items-center text-xs text-gray-500 mb-3",__self:this,__source:{fileName:K,lineNumber:450,columnNumber:17}},e.createElement(Nt,{className:"w-3 h-3 mr-1",__self:this,__source:{fileName:K,lineNumber:451,columnNumber:19}}),e.createElement("span",{__self:this,__source:{fileName:K,lineNumber:452,columnNumber:19}},S.farmer?.county||S.farmer_county||"Unknown"),e.createElement("span",{className:"mx-2",__self:this,__source:{fileName:K,lineNumber:457,columnNumber:19}},"•"),e.createElement("span",{__self:this,__source:{fileName:K,lineNumber:458,columnNumber:19}},S.farmer?.user?.firstName||S.farmer_name||"Farmer"," ",S.farmer?.user?.lastName||"")),S.tags&&S.tags.length>0&&e.createElement("div",{className:"flex flex-wrap gap-1 mb-3",__self:this,__source:{fileName:K,lineNumber:468,columnNumber:19}},S.tags.slice(0,3).map(Z=>e.createElement("span",{key:Z,className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",__self:this,__source:{fileName:K,lineNumber:470,columnNumber:23}},Z))),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:K,lineNumber:480,columnNumber:17}},e.createElement("div",{__self:this,__source:{fileName:K,lineNumber:481,columnNumber:19}},e.createElement("div",{className:"text-lg font-bold text-gray-900",__self:this,__source:{fileName:K,lineNumber:482,columnNumber:21}},Y(S.pricePerUnit||S.price_per_unit)),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:K,lineNumber:487,columnNumber:21}},"per ",S.unit)),e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:K,lineNumber:492,columnNumber:19}},e.createElement(_e,{to:`/marketplace/product/${S.id}`,className:"bg-gray-100 text-gray-700 px-2 py-2 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium flex items-center",__self:this,__source:{fileName:K,lineNumber:493,columnNumber:21}},e.createElement(ot,{className:"w-4 h-4",__self:this,__source:{fileName:K,lineNumber:497,columnNumber:23}})),(S.stockQuantity||S.stock_quantity)>0?e.createElement("button",{onClick:()=>L(S),disabled:x,className:"bg-primary-600 text-white px-3 py-2 rounded-lg hover:bg-primary-700 disabled:opacity-50 transition-colors text-sm font-medium flex items-center space-x-1",__self:this,__source:{fileName:K,lineNumber:501,columnNumber:23}},e.createElement(ht,{className:"w-4 h-4",__self:this,__source:{fileName:K,lineNumber:506,columnNumber:25}}),e.createElement("span",{__self:this,__source:{fileName:K,lineNumber:507,columnNumber:25}},"Add to Cart")):e.createElement("button",{disabled:!0,className:"bg-gray-300 text-gray-500 px-3 py-2 rounded-lg text-sm font-medium flex items-center space-x-1 cursor-not-allowed",__self:this,__source:{fileName:K,lineNumber:510,columnNumber:23}},e.createElement("span",{__self:this,__source:{fileName:K,lineNumber:514,columnNumber:25}},"Out of Stock")))))))),b.totalPages>1&&e.createElement("div",{className:"mt-8 flex justify-center",__self:this,__source:{fileName:K,lineNumber:527,columnNumber:9}},e.createElement("div",{className:"flex space-x-1",__self:this,__source:{fileName:K,lineNumber:528,columnNumber:11}},e.createElement("button",{onClick:()=>y(b.page-1),disabled:b.page===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:K,lineNumber:529,columnNumber:13}},"Previous"),[...Array(Math.min(5,b.totalPages))].map((S,Z)=>{const N=Math.max(1,b.page-2)+Z;return N>b.totalPages?null:e.createElement("button",{key:N,onClick:()=>y(N),className:`px-3 py-2 text-sm font-medium border rounded-md ${N===b.page?"bg-primary-600 text-white border-primary-600":"text-gray-500 bg-white border-gray-300 hover:bg-gray-50"}`,__self:this,__source:{fileName:K,lineNumber:542,columnNumber:17}},N)}),e.createElement("button",{onClick:()=>y(b.page+1),disabled:b.page===b.totalPages,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:K,lineNumber:556,columnNumber:13}},"Next"))))}var k="/app/code/frontend/src/pages/marketplace/ProductPage.tsx";function Fi(){const{id:t}=ya(),r=et(),[s,l]=T.useState(null),[a,m]=T.useState([]),[n,i]=T.useState(!0),[_,u]=T.useState(0),[c,o]=T.useState(1),[b,g]=T.useState(!1),{addToCart:h,isLoading:x}=kt(),{user:w,isAuthenticated:p}=xe();T.useEffect(()=>{t&&y()},[t]);const y=async()=>{try{i(!0);const N=await ae.get(`/api/marketplace/products/${t}`),J=N.data.product||N.data;l(J),J&&B(J.category,J.farmer.county)}catch(N){console.error("Failed to fetch product:",N),N.response?.status===404?(V.error("Product not found"),r("/marketplace")):V.error("Failed to load product details")}finally{i(!1)}},B=async(N,J)=>{try{const re=await ae.get(`/api/marketplace/products?category=${N}&county=${J}&limit=4`),se=re.data.products||re.data;m(se.filter(ue=>ue.id!==t))}catch(re){console.error("Failed to fetch related products:",re)}},P=async()=>{if(!p){V.error("Please login to add items to cart");return}if(w?.role!=="CUSTOMER"){V.error("Only customers can add items to cart");return}if(s)try{await h(s.id,c),o(1)}catch{}},L=async()=>{if(navigator.share)try{await navigator.share({title:s?.name,text:s?.description,url:window.location.href})}catch(N){console.log("Error sharing:",N)}else navigator.clipboard.writeText(window.location.href),V.success("Link copied to clipboard!")},O=N=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(N),Y=N=>new Date(N).toLocaleDateString("en-KE",{year:"numeric",month:"long",day:"numeric"}),S=()=>s?s.stockQuantity===0?{text:"Out of Stock",color:"text-red-600",bgColor:"bg-red-100"}:s.stockQuantity<=(s.minStockLevel||5)?{text:"Low Stock",color:"text-orange-600",bgColor:"bg-orange-100"}:{text:"In Stock",color:"text-green-600",bgColor:"bg-green-100"}:null;if(n)return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:k,lineNumber:206,columnNumber:7}},e.createElement("div",{className:"animate-pulse",__self:this,__source:{fileName:k,lineNumber:207,columnNumber:9}},e.createElement("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8",__self:this,__source:{fileName:k,lineNumber:208,columnNumber:11}}),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",__self:this,__source:{fileName:k,lineNumber:209,columnNumber:11}},e.createElement("div",{className:"h-96 bg-gray-200 rounded-lg",__self:this,__source:{fileName:k,lineNumber:210,columnNumber:13}}),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:k,lineNumber:211,columnNumber:13}},e.createElement("div",{className:"h-8 bg-gray-200 rounded w-3/4",__self:this,__source:{fileName:k,lineNumber:212,columnNumber:15}}),e.createElement("div",{className:"h-4 bg-gray-200 rounded w-1/2",__self:this,__source:{fileName:k,lineNumber:213,columnNumber:15}}),e.createElement("div",{className:"h-12 bg-gray-200 rounded w-1/3",__self:this,__source:{fileName:k,lineNumber:214,columnNumber:15}}),e.createElement("div",{className:"h-32 bg-gray-200 rounded",__self:this,__source:{fileName:k,lineNumber:215,columnNumber:15}})))));if(!s)return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:k,lineNumber:225,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:k,lineNumber:226,columnNumber:9}},e.createElement("h1",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:k,lineNumber:227,columnNumber:11}},"Product not found"),e.createElement(_e,{to:"/marketplace",className:"text-primary-600 hover:text-primary-700 mt-4 inline-block",__self:this,__source:{fileName:k,lineNumber:230,columnNumber:11}},"Back to Marketplace")));const Z=S();return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:k,lineNumber:244,columnNumber:5}},e.createElement("nav",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-8",__self:this,__source:{fileName:k,lineNumber:246,columnNumber:7}},e.createElement(_e,{to:"/marketplace",className:"hover:text-gray-900",__self:this,__source:{fileName:k,lineNumber:247,columnNumber:9}},"Marketplace"),e.createElement("span",{__self:this,__source:{fileName:k,lineNumber:250,columnNumber:9}},"/"),e.createElement("span",{className:"text-gray-900",__self:this,__source:{fileName:k,lineNumber:251,columnNumber:9}},s.name)),e.createElement("button",{onClick:()=>r(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",__self:this,__source:{fileName:k,lineNumber:255,columnNumber:7}},e.createElement(It,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:k,lineNumber:259,columnNumber:9}}),"Back"),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",__self:this,__source:{fileName:k,lineNumber:263,columnNumber:7}},e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:265,columnNumber:9}},e.createElement("div",{className:"aspect-square bg-gray-200 rounded-lg overflow-hidden mb-4",__self:this,__source:{fileName:k,lineNumber:266,columnNumber:11}},s.images&&s.images.length>0?e.createElement("img",{src:s.images[_]||s.images[0],alt:s.name,className:"w-full h-full object-cover",onError:N=>{N.currentTarget.src="/api/placeholder/400/400?text="+encodeURIComponent(s.name)},__self:this,__source:{fileName:k,lineNumber:268,columnNumber:15}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400",__self:this,__source:{fileName:k,lineNumber:279,columnNumber:15}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:k,lineNumber:280,columnNumber:17}},e.createElement("div",{className:"text-4xl mb-2",__self:this,__source:{fileName:k,lineNumber:281,columnNumber:19}},"📦"),e.createElement("span",{__self:this,__source:{fileName:k,lineNumber:282,columnNumber:19}},s.name)))),s.images&&s.images.length>1&&e.createElement("div",{className:"grid grid-cols-4 gap-2",__self:this,__source:{fileName:k,lineNumber:290,columnNumber:13}},s.images.slice(0,4).map((N,J)=>e.createElement("button",{key:J,onClick:()=>u(J),className:`aspect-square bg-gray-200 rounded-lg overflow-hidden border-2 ${_===J?"border-primary-600":"border-transparent"}`,__self:this,__source:{fileName:k,lineNumber:292,columnNumber:17}},e.createElement("img",{src:N,alt:`${s.name} ${J+1}`,className:"w-full h-full object-cover",onError:re=>{re.currentTarget.src="/api/placeholder/100/100?text="+(J+1)},__self:this,__source:{fileName:k,lineNumber:301,columnNumber:19}}))))),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:317,columnNumber:9}},e.createElement("div",{className:"flex items-start justify-between mb-4",__self:this,__source:{fileName:k,lineNumber:318,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:319,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2",__self:this,__source:{fileName:k,lineNumber:320,columnNumber:15}},s.name),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:k,lineNumber:323,columnNumber:15}},s.category)),e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:k,lineNumber:326,columnNumber:13}},e.createElement("button",{onClick:L,className:"p-2 text-gray-400 hover:text-gray-600 border border-gray-300 rounded-lg",__self:this,__source:{fileName:k,lineNumber:327,columnNumber:15}},e.createElement(ka,{className:"w-5 h-5",__self:this,__source:{fileName:k,lineNumber:331,columnNumber:17}})),e.createElement("button",{className:"p-2 text-gray-400 hover:text-red-500 border border-gray-300 rounded-lg",__self:this,__source:{fileName:k,lineNumber:333,columnNumber:15}},e.createElement(Zr,{className:"w-5 h-5",__self:this,__source:{fileName:k,lineNumber:334,columnNumber:17}})))),e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:k,lineNumber:340,columnNumber:11}},e.createElement("div",{className:"text-3xl font-bold text-gray-900 mb-2",__self:this,__source:{fileName:k,lineNumber:341,columnNumber:13}},O(s.pricePerUnit),e.createElement("span",{className:"text-lg font-normal text-gray-600 ml-2",__self:this,__source:{fileName:k,lineNumber:343,columnNumber:15}},"per ",s.unit)),Z&&e.createElement("div",{className:"flex items-center space-x-4",__self:this,__source:{fileName:k,lineNumber:349,columnNumber:15}},e.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Z.bgColor} ${Z.color}`,__self:this,__source:{fileName:k,lineNumber:350,columnNumber:17}},Z.text),e.createElement("span",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:k,lineNumber:355,columnNumber:17}},s.stockQuantity," ",s.unit," available"))),e.createElement("div",{className:"flex flex-wrap gap-2 mb-6",__self:this,__source:{fileName:k,lineNumber:363,columnNumber:11}},s.isFeatured&&e.createElement("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium",__self:this,__source:{fileName:k,lineNumber:365,columnNumber:15}},"⭐ Featured"),s.tags.map(N=>e.createElement("span",{key:N,className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm",__self:this,__source:{fileName:k,lineNumber:370,columnNumber:15}},N))),e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:k,lineNumber:380,columnNumber:11}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2",__self:this,__source:{fileName:k,lineNumber:381,columnNumber:13}},"Description"),e.createElement("p",{className:"text-gray-700 leading-relaxed",__self:this,__source:{fileName:k,lineNumber:384,columnNumber:13}},s.description)),e.createElement("div",{className:"grid grid-cols-2 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",__self:this,__source:{fileName:k,lineNumber:390,columnNumber:11}},s.harvestDate&&e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:392,columnNumber:15}},e.createElement("span",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:k,lineNumber:393,columnNumber:17}},"Harvest Date"),e.createElement("p",{className:"text-gray-900",__self:this,__source:{fileName:k,lineNumber:396,columnNumber:17}},Y(s.harvestDate))),s.expiryDate&&e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:402,columnNumber:15}},e.createElement("span",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:k,lineNumber:403,columnNumber:17}},"Best Before"),e.createElement("p",{className:"text-gray-900",__self:this,__source:{fileName:k,lineNumber:406,columnNumber:17}},Y(s.expiryDate))),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:411,columnNumber:13}},e.createElement("span",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:k,lineNumber:412,columnNumber:15}},"Category"),e.createElement("p",{className:"text-gray-900",__self:this,__source:{fileName:k,lineNumber:415,columnNumber:15}},s.category)),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:417,columnNumber:13}},e.createElement("span",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:k,lineNumber:418,columnNumber:15}},"Unit"),e.createElement("p",{className:"text-gray-900",__self:this,__source:{fileName:k,lineNumber:419,columnNumber:15}},s.unit))),p&&w?.role==="CUSTOMER"&&s.stockQuantity>0&&e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:k,lineNumber:427,columnNumber:15}},e.createElement("div",{className:"flex items-center space-x-4 mb-4",__self:this,__source:{fileName:k,lineNumber:428,columnNumber:17}},e.createElement("label",{className:"text-sm font-medium text-gray-700",__self:this,__source:{fileName:k,lineNumber:429,columnNumber:19}},"Quantity:"),e.createElement("div",{className:"flex items-center border border-gray-300 rounded-lg",__self:this,__source:{fileName:k,lineNumber:432,columnNumber:19}},e.createElement("button",{onClick:()=>o(Math.max(1,c-1)),className:"px-3 py-2 text-gray-600 hover:text-gray-900",__self:this,__source:{fileName:k,lineNumber:433,columnNumber:21}},"-"),e.createElement("input",{type:"number",min:"1",max:s.stockQuantity,value:c,onChange:N=>o(Math.max(1,parseInt(N.target.value)||1)),className:"w-16 px-2 py-2 text-center border-0 focus:ring-0",__self:this,__source:{fileName:k,lineNumber:439,columnNumber:21}}),e.createElement("button",{onClick:()=>o(Math.min(s.stockQuantity,c+1)),className:"px-3 py-2 text-gray-600 hover:text-gray-900",__self:this,__source:{fileName:k,lineNumber:449,columnNumber:21}},"+")),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:k,lineNumber:460,columnNumber:19}},"Total: ",O(s.pricePerUnit*c))),e.createElement("button",{onClick:P,disabled:x,className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg hover:bg-primary-700 disabled:opacity-50 transition-colors font-medium flex items-center justify-center",__self:this,__source:{fileName:k,lineNumber:465,columnNumber:17}},e.createElement(ht,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:k,lineNumber:470,columnNumber:19}}),"Add to Cart")),e.createElement("div",{className:"border-t border-gray-200 pt-6",__self:this,__source:{fileName:k,lineNumber:477,columnNumber:11}},e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",__self:this,__source:{fileName:k,lineNumber:478,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:k,lineNumber:479,columnNumber:15}},e.createElement(ve,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:k,lineNumber:480,columnNumber:17}}),e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:k,lineNumber:481,columnNumber:17}},"Free delivery over KES 1000")),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:k,lineNumber:485,columnNumber:15}},e.createElement(De,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:k,lineNumber:486,columnNumber:17}}),e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:k,lineNumber:487,columnNumber:17}},"Delivered within 24h")),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:k,lineNumber:489,columnNumber:15}},e.createElement(vt,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:k,lineNumber:490,columnNumber:17}}),e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:k,lineNumber:491,columnNumber:17}},"Quality guaranteed")))))),e.createElement("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-8",__self:this,__source:{fileName:k,lineNumber:499,columnNumber:7}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:k,lineNumber:500,columnNumber:9}},"About the Farmer"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:k,lineNumber:504,columnNumber:9}},e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:505,columnNumber:11}},e.createElement("div",{className:"flex items-center mb-3",__self:this,__source:{fileName:k,lineNumber:506,columnNumber:13}},e.createElement("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mr-4",__self:this,__source:{fileName:k,lineNumber:507,columnNumber:15}},e.createElement("span",{className:"text-primary-600 font-semibold text-lg",__self:this,__source:{fileName:k,lineNumber:508,columnNumber:17}},s.farmer.user.firstName[0],s.farmer.user.lastName[0])),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:513,columnNumber:15}},e.createElement("h4",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:k,lineNumber:514,columnNumber:17}},s.farmer.user.firstName," ",s.farmer.user.lastName),s.farmer.farmName&&e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:k,lineNumber:518,columnNumber:19}},s.farmer.farmName))),e.createElement("div",{className:"space-y-2 text-sm",__self:this,__source:{fileName:k,lineNumber:525,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:k,lineNumber:526,columnNumber:15}},e.createElement(Nt,{className:"w-4 h-4 text-gray-400 mr-2",__self:this,__source:{fileName:k,lineNumber:527,columnNumber:17}}),e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:k,lineNumber:528,columnNumber:17}},s.farmer.subCounty?`${s.farmer.subCounty}, `:"",s.farmer.county)),s.farmer.farmSize&&e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:537,columnNumber:17}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:k,lineNumber:538,columnNumber:19}},"Farm Size: ",s.farmer.farmSize," acres")))),e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:546,columnNumber:11}},e.createElement("button",{onClick:()=>g(!b),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors text-sm font-medium mb-4",__self:this,__source:{fileName:k,lineNumber:547,columnNumber:13}},"Contact Farmer"),b&&e.createElement("div",{className:"space-y-2 text-sm",__self:this,__source:{fileName:k,lineNumber:555,columnNumber:15}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:k,lineNumber:556,columnNumber:17}},e.createElement(Ct,{className:"w-4 h-4 text-gray-400 mr-2",__self:this,__source:{fileName:k,lineNumber:557,columnNumber:19}}),e.createElement("a",{href:`tel:${s.farmer.user.phone}`,className:"text-primary-600 hover:text-primary-700",__self:this,__source:{fileName:k,lineNumber:558,columnNumber:19}},s.farmer.user.phone)),s.farmer.user.email&&e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:k,lineNumber:566,columnNumber:19}},e.createElement(es,{className:"w-4 h-4 text-gray-400 mr-2",__self:this,__source:{fileName:k,lineNumber:567,columnNumber:21}}),e.createElement("a",{href:`mailto:${s.farmer.user.email}`,className:"text-primary-600 hover:text-primary-700",__self:this,__source:{fileName:k,lineNumber:568,columnNumber:21}},s.farmer.user.email)))))),a.length>0&&e.createElement("div",{__self:this,__source:{fileName:k,lineNumber:584,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-6",__self:this,__source:{fileName:k,lineNumber:585,columnNumber:11}},"Related Products"),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",__self:this,__source:{fileName:k,lineNumber:589,columnNumber:11}},a.map(N=>e.createElement(_e,{key:N.id,to:`/marketplace/product/${N.id}`,className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",__self:this,__source:{fileName:k,lineNumber:591,columnNumber:15}},e.createElement("div",{className:"aspect-square bg-gray-200",__self:this,__source:{fileName:k,lineNumber:596,columnNumber:17}},N.images&&N.images.length>0?e.createElement("img",{src:N.images[0],alt:N.name,className:"w-full h-full object-cover",onError:J=>{J.currentTarget.src="/api/placeholder/200/200?text="+encodeURIComponent(N.name)},__self:this,__source:{fileName:k,lineNumber:598,columnNumber:21}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400",__self:this,__source:{fileName:k,lineNumber:609,columnNumber:21}},"📦")),e.createElement("div",{className:"p-4",__self:this,__source:{fileName:k,lineNumber:615,columnNumber:17}},e.createElement("h4",{className:"font-semibold text-gray-900 text-sm mb-1 line-clamp-2",__self:this,__source:{fileName:k,lineNumber:616,columnNumber:19}},N.name),e.createElement("p",{className:"text-xs text-gray-600 mb-2",__self:this,__source:{fileName:k,lineNumber:619,columnNumber:19}},N.farmer.county," •"," ",N.farmer.user.firstName," ",N.farmer.user.lastName),e.createElement("div",{className:"text-lg font-bold text-gray-900",__self:this,__source:{fileName:k,lineNumber:624,columnNumber:19}},O(N.pricePerUnit),e.createElement("span",{className:"text-xs font-normal text-gray-600 ml-1",__self:this,__source:{fileName:k,lineNumber:626,columnNumber:21}},"/",N.unit))))))))}var ce="/app/code/frontend/src/pages/auth/LoginPage.tsx";function Ti(){const[t,r]=T.useState({phone:"",password:""}),[s,l]=T.useState(!1),{login:a,isLoading:m}=xe(),n=et(),_=ml().state?.from?.pathname||"/",u=async o=>{o.preventDefault();try{const b=t.phone.trim(),g=t.password.trim();console.log("🔍 LoginPage - About to call login with:",{phone:b,password:g,formData:t}),await a(b,g),V.success("Login successful!");const{user:h}=xe.getState();h?.role==="ADMIN"?n("/admin/dashboard",{replace:!0}):h?.role==="FARMER"?n("/farmer/dashboard",{replace:!0}):h?.role==="CUSTOMER"?n("/customer/dashboard",{replace:!0}):h?.role==="DRIVER"?n("/driver/dashboard",{replace:!0}):n(_,{replace:!0})}catch(b){V.error(b.message||"Login failed")}},c=o=>{r({...t,[o.target.name]:o.target.value})};return e.createElement("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",__self:this,__source:{fileName:ce,lineNumber:62,columnNumber:5}},e.createElement("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",__self:this,__source:{fileName:ce,lineNumber:63,columnNumber:7}},e.createElement("div",{className:"flex justify-center",__self:this,__source:{fileName:ce,lineNumber:64,columnNumber:9}},e.createElement("div",{className:"w-12 h-12 bg-primary-600 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:ce,lineNumber:65,columnNumber:11}},e.createElement("span",{className:"text-white font-bold text-lg",__self:this,__source:{fileName:ce,lineNumber:66,columnNumber:13}},"Z"))),e.createElement("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",__self:this,__source:{fileName:ce,lineNumber:69,columnNumber:9}},"Sign in to your account"),e.createElement("p",{className:"mt-2 text-center text-sm text-gray-600",__self:this,__source:{fileName:ce,lineNumber:72,columnNumber:9}},"Or"," ",e.createElement(_e,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",__self:this,__source:{fileName:ce,lineNumber:74,columnNumber:11}},"create a new account"))),e.createElement("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",__self:this,__source:{fileName:ce,lineNumber:83,columnNumber:7}},e.createElement("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",__self:this,__source:{fileName:ce,lineNumber:84,columnNumber:9}},e.createElement("form",{className:"space-y-6",onSubmit:u,__self:this,__source:{fileName:ce,lineNumber:85,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:ce,lineNumber:86,columnNumber:13}},e.createElement("label",{htmlFor:"phone",className:"form-label",__self:this,__source:{fileName:ce,lineNumber:87,columnNumber:15}},"Phone Number"),e.createElement("input",{id:"phone",name:"phone",type:"tel",required:!0,placeholder:"e.g., +254712345678 or 0712345678",className:"form-input",value:t.phone,onChange:c,__self:this,__source:{fileName:ce,lineNumber:90,columnNumber:15}})),e.createElement("div",{__self:this,__source:{fileName:ce,lineNumber:102,columnNumber:13}},e.createElement("label",{htmlFor:"password",className:"form-label",__self:this,__source:{fileName:ce,lineNumber:103,columnNumber:15}},"Password"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:ce,lineNumber:106,columnNumber:15}},e.createElement("input",{id:"password",name:"password",type:s?"text":"password",required:!0,className:"form-input pr-10",value:t.password,onChange:c,__self:this,__source:{fileName:ce,lineNumber:107,columnNumber:17}}),e.createElement("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!s),__self:this,__source:{fileName:ce,lineNumber:116,columnNumber:17}},s?e.createElement(Mr,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:ce,lineNumber:122,columnNumber:21}}):e.createElement(ot,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:ce,lineNumber:124,columnNumber:21}})))),e.createElement("div",{__self:this,__source:{fileName:ce,lineNumber:130,columnNumber:13}},e.createElement("button",{type:"submit",disabled:m,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:ce,lineNumber:131,columnNumber:15}},m?"Signing in...":"Sign in"))),e.createElement("div",{className:"mt-6",__self:this,__source:{fileName:ce,lineNumber:141,columnNumber:11}},e.createElement("button",{type:"button",onClick:()=>{r({phone:"+254712345678",password:"password123"}),u({preventDefault:()=>{}})},className:"w-full mb-4 bg-green-600 text-white py-2 px-4 rounded-md text-sm font-medium hover:bg-green-700",__self:this,__source:{fileName:ce,lineNumber:142,columnNumber:13}},"🧪 Test Admin Login (+254712345678 / password123)"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:ce,lineNumber:156,columnNumber:13}},e.createElement("div",{className:"absolute inset-0 flex items-center",__self:this,__source:{fileName:ce,lineNumber:157,columnNumber:15}},e.createElement("div",{className:"w-full border-t border-gray-300",__self:this,__source:{fileName:ce,lineNumber:158,columnNumber:17}})),e.createElement("div",{className:"relative flex justify-center text-sm",__self:this,__source:{fileName:ce,lineNumber:160,columnNumber:15}},e.createElement("span",{className:"px-2 bg-white text-gray-500",__self:this,__source:{fileName:ce,lineNumber:161,columnNumber:17}},"Demo Accounts"))),e.createElement("div",{className:"mt-4 space-y-2 text-xs text-gray-600",__self:this,__source:{fileName:ce,lineNumber:167,columnNumber:13}},e.createElement("p",{__self:this,__source:{fileName:ce,lineNumber:168,columnNumber:15}},e.createElement("strong",{__self:this,__source:{fileName:ce,lineNumber:169,columnNumber:17}},"Admin:")," +254712345678 / password123"),e.createElement("p",{__self:this,__source:{fileName:ce,lineNumber:171,columnNumber:15}},e.createElement("strong",{__self:this,__source:{fileName:ce,lineNumber:172,columnNumber:17}},"Farmer:")," +254734567890 / password123"),e.createElement("p",{__self:this,__source:{fileName:ce,lineNumber:174,columnNumber:15}},e.createElement("strong",{__self:this,__source:{fileName:ce,lineNumber:175,columnNumber:17}},"Customer:")," +254756789012 / password123"),e.createElement("p",{__self:this,__source:{fileName:ce,lineNumber:177,columnNumber:15}},e.createElement("strong",{__self:this,__source:{fileName:ce,lineNumber:178,columnNumber:17}},"Driver:")," +254778901234 / password123"))))))}var $t=t=>t.type==="checkbox",dt=t=>t instanceof Date,Ie=t=>t==null;const Zl=t=>typeof t=="object";var we=t=>!Ie(t)&&!Array.isArray(t)&&Zl(t)&&!dt(t),Oi=t=>we(t)&&t.target?$t(t.target)?t.target.checked:t.target.value:t,Ii=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Li=(t,r)=>t.has(Ii(r)),Mi=t=>{const r=t.constructor&&t.constructor.prototype;return we(r)&&r.hasOwnProperty("isPrototypeOf")},ms=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ke(t){let r;const s=Array.isArray(t),l=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)r=new Date(t);else if(!(ms&&(t instanceof Blob||l))&&(s||we(t)))if(r=s?[]:{},!s&&!Mi(t))r=t;else for(const a in t)t.hasOwnProperty(a)&&(r[a]=ke(t[a]));else return t;return r}var pr=t=>/^\w*$/.test(t),Ce=t=>t===void 0,ns=t=>Array.isArray(t)?t.filter(Boolean):[],is=t=>ns(t.replace(/["|']|\]/g,"").split(/\.|\[/)),le=(t,r,s)=>{if(!r||!we(t))return s;const l=(pr(r)?[r]:is(r)).reduce((a,m)=>Ie(a)?a:a[m],t);return Ce(l)||l===t?Ce(t[r])?s:t[r]:l},Je=t=>typeof t=="boolean",Ee=(t,r,s)=>{let l=-1;const a=pr(r)?[r]:is(r),m=a.length,n=m-1;for(;++l<m;){const i=a[l];let _=s;if(l!==n){const u=t[i];_=we(u)||Array.isArray(u)?u:isNaN(+a[l+1])?{}:[]}if(i==="__proto__"||i==="constructor"||i==="prototype")return;t[i]=_,t=t[i]}};const Hs={BLUR:"blur",FOCUS_OUT:"focusout"},He={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},rt={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ui=e.createContext(null);Ui.displayName="HookFormContext";var ji=(t,r,s,l=!0)=>{const a={defaultValues:r._defaultValues};for(const m in t)Object.defineProperty(a,m,{get:()=>{const n=m;return r._proxyFormState[n]!==He.all&&(r._proxyFormState[n]=!l||He.all),t[n]}});return a};const qi=typeof window<"u"?T.useLayoutEffect:T.useEffect;var Xe=t=>typeof t=="string",$i=(t,r,s,l,a)=>Xe(t)?(l&&r.watch.add(t),le(s,t,a)):Array.isArray(t)?t.map(m=>(l&&r.watch.add(m),le(s,m))):(l&&(r.watchAll=!0),s),Vi=(t,r,s,l,a)=>r?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[l]:a||!0}}:{},Tt=t=>Array.isArray(t)?t:[t],Ws=()=>{let t=[];return{get observers(){return t},next:a=>{for(const m of t)m.next&&m.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(m=>m!==a)}}),unsubscribe:()=>{t=[]}}},Qr=t=>Ie(t)||!Zl(t);function it(t,r,s=new WeakSet){if(Qr(t)||Qr(r))return t===r;if(dt(t)&&dt(r))return t.getTime()===r.getTime();const l=Object.keys(t),a=Object.keys(r);if(l.length!==a.length)return!1;if(s.has(t)||s.has(r))return!0;s.add(t),s.add(r);for(const m of l){const n=t[m];if(!a.includes(m))return!1;if(m!=="ref"){const i=r[m];if(dt(n)&&dt(i)||we(n)&&we(i)||Array.isArray(n)&&Array.isArray(i)?!it(n,i,s):n!==i)return!1}}return!0}var Ue=t=>we(t)&&!Object.keys(t).length,us=t=>t.type==="file",We=t=>typeof t=="function",sr=t=>{if(!ms)return!1;const r=t?t.ownerDocument:0;return t instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},ea=t=>t.type==="select-multiple",os=t=>t.type==="radio",Bi=t=>os(t)||$t(t),Ir=t=>sr(t)&&t.isConnected;function Ki(t,r){const s=r.slice(0,-1).length;let l=0;for(;l<s;)t=Ce(t)?l++:t[r[l++]];return t}function Gi(t){for(const r in t)if(t.hasOwnProperty(r)&&!Ce(t[r]))return!1;return!0}function Se(t,r){const s=Array.isArray(r)?r:pr(r)?[r]:is(r),l=s.length===1?t:Ki(t,s),a=s.length-1,m=s[a];return l&&delete l[m],a!==0&&(we(l)&&Ue(l)||Array.isArray(l)&&Gi(l))&&Se(t,s.slice(0,-1)),t}var ta=t=>{for(const r in t)if(We(t[r]))return!0;return!1};function lr(t,r={}){const s=Array.isArray(t);if(we(t)||s)for(const l in t)Array.isArray(t[l])||we(t[l])&&!ta(t[l])?(r[l]=Array.isArray(t[l])?[]:{},lr(t[l],r[l])):Ie(t[l])||(r[l]=!0);return r}function ra(t,r,s){const l=Array.isArray(t);if(we(t)||l)for(const a in t)Array.isArray(t[a])||we(t[a])&&!ta(t[a])?Ce(r)||Qr(s[a])?s[a]=Array.isArray(t[a])?lr(t[a],[]):{...lr(t[a])}:ra(t[a],Ie(r)?{}:r[a],s[a]):s[a]=!it(t[a],r[a]);return s}var Rt=(t,r)=>ra(t,r,lr(r));const zs={value:!1,isValid:!1},Qs={value:!0,isValid:!0};var sa=t=>{if(Array.isArray(t)){if(t.length>1){const r=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:r,isValid:!!r.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ce(t[0].attributes.value)?Ce(t[0].value)||t[0].value===""?Qs:{value:t[0].value,isValid:!0}:Qs:zs}return zs},la=(t,{valueAsNumber:r,valueAsDate:s,setValueAs:l})=>Ce(t)?t:r?t===""?NaN:t&&+t:s&&Xe(t)?new Date(t):l?l(t):t;const Js={isValid:!1,value:null};var aa=t=>Array.isArray(t)?t.reduce((r,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:r,Js):Js;function Ys(t){const r=t.ref;return us(r)?r.files:os(r)?aa(t.refs).value:ea(r)?[...r.selectedOptions].map(({value:s})=>s):$t(r)?sa(t.refs).value:la(Ce(r.value)?t.ref.value:r.value,t)}var Hi=(t,r,s,l)=>{const a={};for(const m of t){const n=le(r,m);n&&Ee(a,m,n._f)}return{criteriaMode:s,names:[...t],fields:a,shouldUseNativeValidation:l}},ar=t=>t instanceof RegExp,Ft=t=>Ce(t)?t:ar(t)?t.source:we(t)?ar(t.value)?t.value.source:t.value:t,Xs=t=>({isOnSubmit:!t||t===He.onSubmit,isOnBlur:t===He.onBlur,isOnChange:t===He.onChange,isOnAll:t===He.all,isOnTouch:t===He.onTouched});const Zs="AsyncFunction";var Wi=t=>!!t&&!!t.validate&&!!(We(t.validate)&&t.validate.constructor.name===Zs||we(t.validate)&&Object.values(t.validate).find(r=>r.constructor.name===Zs)),zi=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),el=(t,r,s)=>!s&&(r.watchAll||r.watch.has(t)||[...r.watch].some(l=>t.startsWith(l)&&/^\.\w+/.test(t.slice(l.length))));const Ot=(t,r,s,l)=>{for(const a of s||Object.keys(t)){const m=le(t,a);if(m){const{_f:n,...i}=m;if(n){if(n.refs&&n.refs[0]&&r(n.refs[0],a)&&!l)return!0;if(n.ref&&r(n.ref,n.name)&&!l)return!0;if(Ot(i,r))break}else if(we(i)&&Ot(i,r))break}}};function tl(t,r,s){const l=le(t,s);if(l||pr(s))return{error:l,name:s};const a=s.split(".");for(;a.length;){const m=a.join("."),n=le(r,m),i=le(t,m);if(n&&!Array.isArray(n)&&s!==m)return{name:s};if(i&&i.type)return{name:m,error:i};if(i&&i.root&&i.root.type)return{name:`${m}.root`,error:i.root};a.pop()}return{name:s}}var Qi=(t,r,s,l)=>{s(t);const{name:a,...m}=t;return Ue(m)||Object.keys(m).length>=Object.keys(r).length||Object.keys(m).find(n=>r[n]===(!l||He.all))},Ji=(t,r,s)=>!t||!r||t===r||Tt(t).some(l=>l&&(s?l===r:l.startsWith(r)||r.startsWith(l))),Yi=(t,r,s,l,a)=>a.isOnAll?!1:!s&&a.isOnTouch?!(r||t):(s?l.isOnBlur:a.isOnBlur)?!t:(s?l.isOnChange:a.isOnChange)?t:!0,Xi=(t,r)=>!ns(le(t,r)).length&&Se(t,r),Zi=(t,r,s)=>{const l=Tt(le(t,s));return Ee(l,"root",r[s]),Ee(t,s,l),t},zt=t=>Xe(t);function rl(t,r,s="validate"){if(zt(t)||Array.isArray(t)&&t.every(zt)||Je(t)&&!t)return{type:s,message:zt(t)?t:"",ref:r}}var xt=t=>we(t)&&!ar(t)?t:{value:t,message:""},sl=async(t,r,s,l,a,m)=>{const{ref:n,refs:i,required:_,maxLength:u,minLength:c,min:o,max:b,pattern:g,validate:h,name:x,valueAsNumber:w,mount:p}=t._f,y=le(s,x);if(!p||r.has(x))return{};const B=i?i[0]:n,P=re=>{a&&B.reportValidity&&(B.setCustomValidity(Je(re)?"":re||""),B.reportValidity())},L={},O=os(n),Y=$t(n),S=O||Y,Z=(w||us(n))&&Ce(n.value)&&Ce(y)||sr(n)&&n.value===""||y===""||Array.isArray(y)&&!y.length,N=Vi.bind(null,x,l,L),J=(re,se,ue,fe=rt.maxLength,he=rt.minLength)=>{const Fe=re?se:ue;L[x]={type:re?fe:he,message:Fe,ref:n,...N(re?fe:he,Fe)}};if(m?!Array.isArray(y)||!y.length:_&&(!S&&(Z||Ie(y))||Je(y)&&!y||Y&&!sa(i).isValid||O&&!aa(i).isValid)){const{value:re,message:se}=zt(_)?{value:!!_,message:_}:xt(_);if(re&&(L[x]={type:rt.required,message:se,ref:B,...N(rt.required,se)},!l))return P(se),L}if(!Z&&(!Ie(o)||!Ie(b))){let re,se;const ue=xt(b),fe=xt(o);if(!Ie(y)&&!isNaN(y)){const he=n.valueAsNumber||y&&+y;Ie(ue.value)||(re=he>ue.value),Ie(fe.value)||(se=he<fe.value)}else{const he=n.valueAsDate||new Date(y),Fe=tt=>new Date(new Date().toDateString()+" "+tt),Le=n.type=="time",Me=n.type=="week";Xe(ue.value)&&y&&(re=Le?Fe(y)>Fe(ue.value):Me?y>ue.value:he>new Date(ue.value)),Xe(fe.value)&&y&&(se=Le?Fe(y)<Fe(fe.value):Me?y<fe.value:he<new Date(fe.value))}if((re||se)&&(J(!!re,ue.message,fe.message,rt.max,rt.min),!l))return P(L[x].message),L}if((u||c)&&!Z&&(Xe(y)||m&&Array.isArray(y))){const re=xt(u),se=xt(c),ue=!Ie(re.value)&&y.length>+re.value,fe=!Ie(se.value)&&y.length<+se.value;if((ue||fe)&&(J(ue,re.message,se.message),!l))return P(L[x].message),L}if(g&&!Z&&Xe(y)){const{value:re,message:se}=xt(g);if(ar(re)&&!y.match(re)&&(L[x]={type:rt.pattern,message:se,ref:n,...N(rt.pattern,se)},!l))return P(se),L}if(h){if(We(h)){const re=await h(y,s),se=rl(re,B);if(se&&(L[x]={...se,...N(rt.validate,se.message)},!l))return P(se.message),L}else if(we(h)){let re={};for(const se in h){if(!Ue(re)&&!l)break;const ue=rl(await h[se](y,s),B,se);ue&&(re={...ue,...N(se,ue.message)},P(ue.message),l&&(L[x]=re))}if(!Ue(re)&&(L[x]={ref:B,...re},!l))return L}}return P(!0),L};const eu={mode:He.onSubmit,reValidateMode:He.onChange,shouldFocusError:!0};function tu(t={}){let r={...eu,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:We(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},l={},a=we(r.defaultValues)||we(r.values)?ke(r.defaultValues||r.values)||{}:{},m=r.shouldUnregister?{}:ke(a),n={action:!1,mount:!1,watch:!1},i={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},_,u=0;const c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let o={...c};const b={array:Ws(),state:Ws()},g=r.criteriaMode===He.all,h=d=>C=>{clearTimeout(u),u=setTimeout(d,C)},x=async d=>{if(!r.disabled&&(c.isValid||o.isValid||d)){const C=r.resolver?Ue((await Y()).errors):await Z(l,!0);C!==s.isValid&&b.state.next({isValid:C})}},w=(d,C)=>{!r.disabled&&(c.isValidating||c.validatingFields||o.isValidating||o.validatingFields)&&((d||Array.from(i.mount)).forEach(R=>{R&&(C?Ee(s.validatingFields,R,C):Se(s.validatingFields,R))}),b.state.next({validatingFields:s.validatingFields,isValidating:!Ue(s.validatingFields)}))},p=(d,C=[],R,X,Q=!0,W=!0)=>{if(X&&R&&!r.disabled){if(n.action=!0,W&&Array.isArray(le(l,d))){const me=R(le(l,d),X.argA,X.argB);Q&&Ee(l,d,me)}if(W&&Array.isArray(le(s.errors,d))){const me=R(le(s.errors,d),X.argA,X.argB);Q&&Ee(s.errors,d,me),Xi(s.errors,d)}if((c.touchedFields||o.touchedFields)&&W&&Array.isArray(le(s.touchedFields,d))){const me=R(le(s.touchedFields,d),X.argA,X.argB);Q&&Ee(s.touchedFields,d,me)}(c.dirtyFields||o.dirtyFields)&&(s.dirtyFields=Rt(a,m)),b.state.next({name:d,isDirty:J(d,C),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Ee(m,d,C)},y=(d,C)=>{Ee(s.errors,d,C),b.state.next({errors:s.errors})},B=d=>{s.errors=d,b.state.next({errors:s.errors,isValid:!1})},P=(d,C,R,X)=>{const Q=le(l,d);if(Q){const W=le(m,d,Ce(R)?le(a,d):R);Ce(W)||X&&X.defaultChecked||C?Ee(m,d,C?W:Ys(Q._f)):ue(d,W),n.mount&&x()}},L=(d,C,R,X,Q)=>{let W=!1,me=!1;const be={name:d};if(!r.disabled){if(!R||X){(c.isDirty||o.isDirty)&&(me=s.isDirty,s.isDirty=be.isDirty=J(),W=me!==be.isDirty);const ge=it(le(a,d),C);me=!!le(s.dirtyFields,d),ge?Se(s.dirtyFields,d):Ee(s.dirtyFields,d,!0),be.dirtyFields=s.dirtyFields,W=W||(c.dirtyFields||o.dirtyFields)&&me!==!ge}if(R){const ge=le(s.touchedFields,d);ge||(Ee(s.touchedFields,d,R),be.touchedFields=s.touchedFields,W=W||(c.touchedFields||o.touchedFields)&&ge!==R)}W&&Q&&b.state.next(be)}return W?be:{}},O=(d,C,R,X)=>{const Q=le(s.errors,d),W=(c.isValid||o.isValid)&&Je(C)&&s.isValid!==C;if(r.delayError&&R?(_=h(()=>y(d,R)),_(r.delayError)):(clearTimeout(u),_=null,R?Ee(s.errors,d,R):Se(s.errors,d)),(R?!it(Q,R):Q)||!Ue(X)||W){const me={...X,...W&&Je(C)?{isValid:C}:{},errors:s.errors,name:d};s={...s,...me},b.state.next(me)}},Y=async d=>{w(d,!0);const C=await r.resolver(m,r.context,Hi(d||i.mount,l,r.criteriaMode,r.shouldUseNativeValidation));return w(d),C},S=async d=>{const{errors:C}=await Y(d);if(d)for(const R of d){const X=le(C,R);X?Ee(s.errors,R,X):Se(s.errors,R)}else s.errors=C;return C},Z=async(d,C,R={valid:!0})=>{for(const X in d){const Q=d[X];if(Q){const{_f:W,...me}=Q;if(W){const be=i.array.has(W.name),ge=Q._f&&Wi(Q._f);ge&&c.validatingFields&&w([X],!0);const Ve=await sl(Q,i.disabled,m,g,r.shouldUseNativeValidation&&!C,be);if(ge&&c.validatingFields&&w([X]),Ve[W.name]&&(R.valid=!1,C))break;!C&&(le(Ve,W.name)?be?Zi(s.errors,Ve,W.name):Ee(s.errors,W.name,Ve[W.name]):Se(s.errors,W.name))}!Ue(me)&&await Z(me,C,R)}}return R.valid},N=()=>{for(const d of i.unMount){const C=le(l,d);C&&(C._f.refs?C._f.refs.every(R=>!Ir(R)):!Ir(C._f.ref))&&Er(d)}i.unMount=new Set},J=(d,C)=>!r.disabled&&(d&&C&&Ee(m,d,C),!it(tt(),a)),re=(d,C,R)=>$i(d,i,{...n.mount?m:Ce(C)?a:Xe(d)?{[d]:C}:C},R,C),se=d=>ns(le(n.mount?m:a,d,r.shouldUnregister?le(a,d,[]):[])),ue=(d,C,R={})=>{const X=le(l,d);let Q=C;if(X){const W=X._f;W&&(!W.disabled&&Ee(m,d,la(C,W)),Q=sr(W.ref)&&Ie(C)?"":C,ea(W.ref)?[...W.ref.options].forEach(me=>me.selected=Q.includes(me.value)):W.refs?$t(W.ref)?W.refs.forEach(me=>{(!me.defaultChecked||!me.disabled)&&(Array.isArray(Q)?me.checked=!!Q.find(be=>be===me.value):me.checked=Q===me.value||!!Q)}):W.refs.forEach(me=>me.checked=me.value===Q):us(W.ref)?W.ref.value="":(W.ref.value=Q,W.ref.type||b.state.next({name:d,values:ke(m)})))}(R.shouldDirty||R.shouldTouch)&&L(d,Q,R.shouldTouch,R.shouldDirty,!0),R.shouldValidate&&Me(d)},fe=(d,C,R)=>{for(const X in C){if(!C.hasOwnProperty(X))return;const Q=C[X],W=d+"."+X,me=le(l,W);(i.array.has(d)||we(Q)||me&&!me._f)&&!dt(Q)?fe(W,Q,R):ue(W,Q,R)}},he=(d,C,R={})=>{const X=le(l,d),Q=i.array.has(d),W=ke(C);Ee(m,d,W),Q?(b.array.next({name:d,values:ke(m)}),(c.isDirty||c.dirtyFields||o.isDirty||o.dirtyFields)&&R.shouldDirty&&b.state.next({name:d,dirtyFields:Rt(a,m),isDirty:J(d,W)})):X&&!X._f&&!Ie(W)?fe(d,W,R):ue(d,W,R),el(d,i)&&b.state.next({...s}),b.state.next({name:n.mount?d:void 0,values:ke(m)})},Fe=async d=>{n.mount=!0;const C=d.target;let R=C.name,X=!0;const Q=le(l,R),W=ge=>{X=Number.isNaN(ge)||dt(ge)&&isNaN(ge.getTime())||it(ge,le(m,R,ge))},me=Xs(r.mode),be=Xs(r.reValidateMode);if(Q){let ge,Ve;const Vt=C.type?Ys(Q._f):Oi(d),lt=d.type===Hs.BLUR||d.type===Hs.FOCUS_OUT,fa=!zi(Q._f)&&!r.resolver&&!le(s.errors,R)&&!Q._f.deps||Yi(lt,le(s.touchedFields,R),s.isSubmitted,be,me),wr=el(R,i,lt);Ee(m,R,Vt),lt?(Q._f.onBlur&&Q._f.onBlur(d),_&&_(0)):Q._f.onChange&&Q._f.onChange(d);const Sr=L(R,Vt,lt),ba=!Ue(Sr)||wr;if(!lt&&b.state.next({name:R,type:d.type,values:ke(m)}),fa)return(c.isValid||o.isValid)&&(r.mode==="onBlur"?lt&&x():lt||x()),ba&&b.state.next({name:R,...wr?{}:Sr});if(!lt&&wr&&b.state.next({...s}),r.resolver){const{errors:gs}=await Y([R]);if(W(Vt),X){const da=tl(s.errors,l,R),ps=tl(gs,l,da.name||R);ge=ps.error,R=ps.name,Ve=Ue(gs)}}else w([R],!0),ge=(await sl(Q,i.disabled,m,g,r.shouldUseNativeValidation))[R],w([R]),W(Vt),X&&(ge?Ve=!1:(c.isValid||o.isValid)&&(Ve=await Z(l,!0)));X&&(Q._f.deps&&Me(Q._f.deps),O(R,Ve,ge,Sr))}},Le=(d,C)=>{if(le(s.errors,C)&&d.focus)return d.focus(),1},Me=async(d,C={})=>{let R,X;const Q=Tt(d);if(r.resolver){const W=await S(Ce(d)?d:Q);R=Ue(W),X=d?!Q.some(me=>le(W,me)):R}else d?(X=(await Promise.all(Q.map(async W=>{const me=le(l,W);return await Z(me&&me._f?{[W]:me}:me)}))).every(Boolean),!(!X&&!s.isValid)&&x()):X=R=await Z(l);return b.state.next({...!Xe(d)||(c.isValid||o.isValid)&&R!==s.isValid?{}:{name:d},...r.resolver||!d?{isValid:R}:{},errors:s.errors}),C.shouldFocus&&!X&&Ot(l,Le,d?Q:i.mount),X},tt=d=>{const C={...n.mount?m:a};return Ce(d)?C:Xe(d)?le(C,d):d.map(R=>le(C,R))},yt=(d,C)=>({invalid:!!le((C||s).errors,d),isDirty:!!le((C||s).dirtyFields,d),error:le((C||s).errors,d),isValidating:!!le(s.validatingFields,d),isTouched:!!le((C||s).touchedFields,d)}),yr=d=>{d&&Tt(d).forEach(C=>Se(s.errors,C)),b.state.next({errors:d?s.errors:{}})},cs=(d,C,R)=>{const X=(le(l,d,{_f:{}})._f||{}).ref,Q=le(s.errors,d)||{},{ref:W,message:me,type:be,...ge}=Q;Ee(s.errors,d,{...ge,...C,ref:X}),b.state.next({name:d,errors:s.errors,isValid:!1}),R&&R.shouldFocus&&X&&X.focus&&X.focus()},ia=(d,C)=>We(d)?b.state.subscribe({next:R=>d(re(void 0,C),R)}):re(d,C,!0),_s=d=>b.state.subscribe({next:C=>{Ji(d.name,C.name,d.exact)&&Qi(C,d.formState||c,Na,d.reRenderRoot)&&d.callback({values:{...m},...s,...C})}}).unsubscribe,ua=d=>(n.mount=!0,o={...o,...d.formState},_s({...d,formState:o})),Er=(d,C={})=>{for(const R of d?Tt(d):i.mount)i.mount.delete(R),i.array.delete(R),C.keepValue||(Se(l,R),Se(m,R)),!C.keepError&&Se(s.errors,R),!C.keepDirty&&Se(s.dirtyFields,R),!C.keepTouched&&Se(s.touchedFields,R),!C.keepIsValidating&&Se(s.validatingFields,R),!r.shouldUnregister&&!C.keepDefaultValue&&Se(a,R);b.state.next({values:ke(m)}),b.state.next({...s,...C.keepDirty?{isDirty:J()}:{}}),!C.keepIsValid&&x()},Ns=({disabled:d,name:C})=>{(Je(d)&&n.mount||d||i.disabled.has(C))&&(d?i.disabled.add(C):i.disabled.delete(C))},xr=(d,C={})=>{let R=le(l,d);const X=Je(C.disabled)||Je(r.disabled);return Ee(l,d,{...R||{},_f:{...R&&R._f?R._f:{ref:{name:d}},name:d,mount:!0,...C}}),i.mount.add(d),R?Ns({disabled:Je(C.disabled)?C.disabled:r.disabled,name:d}):P(d,!0,C.value),{...X?{disabled:C.disabled||r.disabled}:{},...r.progressive?{required:!!C.required,min:Ft(C.min),max:Ft(C.max),minLength:Ft(C.minLength),maxLength:Ft(C.maxLength),pattern:Ft(C.pattern)}:{},name:d,onChange:Fe,onBlur:Fe,ref:Q=>{if(Q){xr(d,C),R=le(l,d);const W=Ce(Q.value)&&Q.querySelectorAll&&Q.querySelectorAll("input,select,textarea")[0]||Q,me=Bi(W),be=R._f.refs||[];if(me?be.find(ge=>ge===W):W===R._f.ref)return;Ee(l,d,{_f:{...R._f,...me?{refs:[...be.filter(Ir),W,...Array.isArray(le(a,d))?[{}]:[]],ref:{type:W.type,name:d}}:{ref:W}}}),P(d,!1,void 0,W)}else R=le(l,d,{}),R._f&&(R._f.mount=!1),(r.shouldUnregister||C.shouldUnregister)&&!(Li(i.array,d)&&n.action)&&i.unMount.add(d)}}},vr=()=>r.shouldFocusError&&Ot(l,Le,i.mount),oa=d=>{Je(d)&&(b.state.next({disabled:d}),Ot(l,(C,R)=>{const X=le(l,R);X&&(C.disabled=X._f.disabled||d,Array.isArray(X._f.refs)&&X._f.refs.forEach(Q=>{Q.disabled=X._f.disabled||d}))},0,!1))},fs=(d,C)=>async R=>{let X;R&&(R.preventDefault&&R.preventDefault(),R.persist&&R.persist());let Q=ke(m);if(b.state.next({isSubmitting:!0}),r.resolver){const{errors:W,values:me}=await Y();s.errors=W,Q=ke(me)}else await Z(l);if(i.disabled.size)for(const W of i.disabled)Se(Q,W);if(Se(s.errors,"root"),Ue(s.errors)){b.state.next({errors:{}});try{await d(Q,R)}catch(W){X=W}}else C&&await C({...s.errors},R),vr(),setTimeout(vr);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ue(s.errors)&&!X,submitCount:s.submitCount+1,errors:s.errors}),X)throw X},ca=(d,C={})=>{le(l,d)&&(Ce(C.defaultValue)?he(d,ke(le(a,d))):(he(d,C.defaultValue),Ee(a,d,ke(C.defaultValue))),C.keepTouched||Se(s.touchedFields,d),C.keepDirty||(Se(s.dirtyFields,d),s.isDirty=C.defaultValue?J(d,ke(le(a,d))):J()),C.keepError||(Se(s.errors,d),c.isValid&&x()),b.state.next({...s}))},bs=(d,C={})=>{const R=d?ke(d):a,X=ke(R),Q=Ue(d),W=Q?a:X;if(C.keepDefaultValues||(a=R),!C.keepValues){if(C.keepDirtyValues){const me=new Set([...i.mount,...Object.keys(Rt(a,m))]);for(const be of Array.from(me))le(s.dirtyFields,be)?Ee(W,be,le(m,be)):he(be,le(W,be))}else{if(ms&&Ce(d))for(const me of i.mount){const be=le(l,me);if(be&&be._f){const ge=Array.isArray(be._f.refs)?be._f.refs[0]:be._f.ref;if(sr(ge)){const Ve=ge.closest("form");if(Ve){Ve.reset();break}}}}if(C.keepFieldsRef)for(const me of i.mount)he(me,le(W,me));else l={}}m=r.shouldUnregister?C.keepDefaultValues?ke(a):{}:ke(W),b.array.next({values:{...W}}),b.state.next({values:{...W}})}i={mount:C.keepDirtyValues?i.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},n.mount=!c.isValid||!!C.keepIsValid||!!C.keepDirtyValues,n.watch=!!r.shouldUnregister,b.state.next({submitCount:C.keepSubmitCount?s.submitCount:0,isDirty:Q?!1:C.keepDirty?s.isDirty:!!(C.keepDefaultValues&&!it(d,a)),isSubmitted:C.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Q?{}:C.keepDirtyValues?C.keepDefaultValues&&m?Rt(a,m):s.dirtyFields:C.keepDefaultValues&&d?Rt(a,d):C.keepDirty?s.dirtyFields:{},touchedFields:C.keepTouched?s.touchedFields:{},errors:C.keepErrors?s.errors:{},isSubmitSuccessful:C.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},ds=(d,C)=>bs(We(d)?d(m):d,C),_a=(d,C={})=>{const R=le(l,d),X=R&&R._f;if(X){const Q=X.refs?X.refs[0]:X.ref;Q.focus&&(Q.focus(),C.shouldSelect&&We(Q.select)&&Q.select())}},Na=d=>{s={...s,...d}},hs={control:{register:xr,unregister:Er,getFieldState:yt,handleSubmit:fs,setError:cs,_subscribe:_s,_runSchema:Y,_focusError:vr,_getWatch:re,_getDirty:J,_setValid:x,_setFieldArray:p,_setDisabledField:Ns,_setErrors:B,_getFieldArray:se,_reset:bs,_resetDefaultValues:()=>We(r.defaultValues)&&r.defaultValues().then(d=>{ds(d,r.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:N,_disableForm:oa,_subjects:b,_proxyFormState:c,get _fields(){return l},get _formValues(){return m},get _state(){return n},set _state(d){n=d},get _defaultValues(){return a},get _names(){return i},set _names(d){i=d},get _formState(){return s},get _options(){return r},set _options(d){r={...r,...d}}},subscribe:ua,trigger:Me,register:xr,handleSubmit:fs,watch:ia,setValue:he,getValues:tt,reset:ds,resetField:ca,clearErrors:yr,unregister:Er,setError:cs,setFocus:_a,getFieldState:yt};return{...hs,formControl:hs}}function ma(t={}){const r=e.useRef(void 0),s=e.useRef(void 0),[l,a]=e.useState({isDirty:!1,isValidating:!1,isLoading:We(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:We(t.defaultValues)?void 0:t.defaultValues});if(!r.current)if(t.formControl)r.current={...t.formControl,formState:l},t.defaultValues&&!We(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:n,...i}=tu(t);r.current={...i,formState:l}}const m=r.current.control;return m._options=t,qi(()=>{const n=m._subscribe({formState:m._proxyFormState,callback:()=>a({...m._formState}),reRenderRoot:!0});return a(i=>({...i,isReady:!0})),m._formState.isReady=!0,n},[m]),e.useEffect(()=>m._disableForm(t.disabled),[m,t.disabled]),e.useEffect(()=>{t.mode&&(m._options.mode=t.mode),t.reValidateMode&&(m._options.reValidateMode=t.reValidateMode)},[m,t.mode,t.reValidateMode]),e.useEffect(()=>{t.errors&&(m._setErrors(t.errors),m._focusError())},[m,t.errors]),e.useEffect(()=>{t.shouldUnregister&&m._subjects.state.next({values:m._getWatch()})},[m,t.shouldUnregister]),e.useEffect(()=>{if(m._proxyFormState.isDirty){const n=m._getDirty();n!==l.isDirty&&m._subjects.state.next({isDirty:n})}},[m,l.isDirty]),e.useEffect(()=>{t.values&&!it(t.values,s.current)?(m._reset(t.values,{keepFieldsRef:!0,...m._options.resetOptions}),s.current=t.values,a(n=>({...n}))):m._resetDefaultValues()},[m,t.values]),e.useEffect(()=>{m._state.mount||(m._setValid(),m._state.mount=!0),m._state.watch&&(m._state.watch=!1,m._subjects.state.next({...m._formState})),m._removeUnmounted()}),r.current.formState=ji(l,m),r.current}var v="/app/code/frontend/src/pages/auth/RegisterPage.tsx";const ll=["Nairobi","Mombasa","Kiambu","Nakuru","Machakos","Kajiado","Murang'a","Nyeri","Meru","Embu","Tharaka-Nithi","Kirinyaga","Nyandarua","Laikipia","Samburu","Trans-Nzoia","Uasin-Gishu","Elgeyo-Marakwet","Nandi","Baringo","Kericho","Bomet","Kakamega","Vihiga","Bungoma","Busia","Siaya","Kisumu","Homa Bay","Migori","Kisii","Nyamira","Narok","Turkana","West Pokot","Isiolo","Marsabit","Mandera","Wajir","Garissa","Tana River","Lamu","Taita-Taveta","Kwale","Kilifi"],ru=["Motorcycle","Three-wheeler","Pickup Truck","Van","Small Truck","Large Truck"],su=[{value:"CUSTOMER",label:"Customer",description:"Shop for fresh produce from local farmers",icon:e.createElement(Ke,{className:"w-8 h-8",__self:void 0,__source:{fileName:v,lineNumber:113,columnNumber:11}}),color:"bg-blue-500"},{value:"FARMER",label:"Farmer",description:"Sell your produce directly to customers",icon:e.createElement(Lr,{className:"w-8 h-8",__self:void 0,__source:{fileName:v,lineNumber:120,columnNumber:11}}),color:"bg-green-500"},{value:"DRIVER",label:"Driver",description:"Deliver products and earn money",icon:e.createElement(ve,{className:"w-8 h-8",__self:void 0,__source:{fileName:v,lineNumber:127,columnNumber:11}}),color:"bg-orange-500"},{value:"FARMER_AGENT",label:"Farmer Agent",description:"Help farmers join the platform",icon:e.createElement(Ze,{className:"w-8 h-8",__self:void 0,__source:{fileName:v,lineNumber:134,columnNumber:11}}),color:"bg-purple-500"}];function lu(){const t=et(),[r,s]=T.useState(1),[l,a]=T.useState(!1),[m,n]=T.useState(!1),[i,_]=T.useState(!1),{register:u,handleSubmit:c,watch:o,setValue:b,formState:{errors:g}}=ma(),h=o("role"),x=o("password"),w=async P=>{if(P.password!==P.confirmPassword){V.error("Passwords do not match");return}_(!0);try{const L={firstName:P.firstName,lastName:P.lastName,phone:P.phone,email:P.email,password:P.password,role:P.role,county:P.county};P.role==="FARMER"?(P.farmName&&(L.farmName=P.farmName),P.farmSize&&(L.farmSize=P.farmSize),P.kraPin&&(L.kraPin=P.kraPin),P.subCounty&&(L.subCounty=P.subCounty)):P.role==="DRIVER"?(L.licenseNumber=P.licenseNumber,L.vehicleType=P.vehicleType,L.vehicleRegNo=P.vehicleRegNo,L.idNumber=P.idNumber):P.role==="FARMER_AGENT"&&(L.assignedCounty=P.assignedCounty);const O=await ae.post("/api/auth/register",L);V.success("Registration successful! Please login to continue."),O.data.requiresPayment&&V("You will need to pay the activation fee after login",{icon:"ℹ️"}),O.data.requiresApproval&&V("Your application will be reviewed by our team",{icon:"ℹ️"}),t("/login")}catch(L){console.error("Registration error:",L);const O=L.response?.data?.error||"Registration failed";V.error(O)}finally{_(!1)}},p=()=>{r<3&&s(r+1)},y=()=>{r>1&&s(r-1)},B=P=>{b("role",P),p()};return e.createElement("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",__self:this,__source:{fileName:v,lineNumber:228,columnNumber:5}},e.createElement("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",__self:this,__source:{fileName:v,lineNumber:229,columnNumber:7}},e.createElement("div",{className:"flex justify-center",__self:this,__source:{fileName:v,lineNumber:230,columnNumber:9}},e.createElement("div",{className:"w-12 h-12 bg-primary-600 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:v,lineNumber:231,columnNumber:11}},e.createElement("span",{className:"text-white font-bold text-lg",__self:this,__source:{fileName:v,lineNumber:232,columnNumber:13}},"Z"))),e.createElement("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",__self:this,__source:{fileName:v,lineNumber:235,columnNumber:9}},"Create your account"),e.createElement("p",{className:"mt-2 text-center text-sm text-gray-600",__self:this,__source:{fileName:v,lineNumber:238,columnNumber:9}},"Or"," ",e.createElement(_e,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",__self:this,__source:{fileName:v,lineNumber:240,columnNumber:11}},"sign in to your existing account"))),e.createElement("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",__self:this,__source:{fileName:v,lineNumber:249,columnNumber:7}},e.createElement("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",__self:this,__source:{fileName:v,lineNumber:250,columnNumber:9}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:v,lineNumber:252,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:v,lineNumber:253,columnNumber:13}},[1,2,3].map(P=>e.createElement("div",{key:P,className:`flex items-center ${r>=P?"text-primary-600":"text-gray-400"}`,__self:this,__source:{fileName:v,lineNumber:255,columnNumber:17}},e.createElement("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${r>=P?"border-primary-600 bg-primary-600 text-white":"border-gray-300"}`,__self:this,__source:{fileName:v,lineNumber:261,columnNumber:19}},r>P?e.createElement(Jt,{className:"w-4 h-4",__self:this,__source:{fileName:v,lineNumber:268,columnNumber:39}}):P),P<3&&e.createElement("div",{className:`w-16 h-0.5 mx-2 ${r>P?"bg-primary-600":"bg-gray-200"}`,__self:this,__source:{fileName:v,lineNumber:271,columnNumber:21}})))),e.createElement("div",{className:"flex justify-between mt-2 text-xs text-gray-600",__self:this,__source:{fileName:v,lineNumber:280,columnNumber:13}},e.createElement("span",{__self:this,__source:{fileName:v,lineNumber:281,columnNumber:15}},"Role"),e.createElement("span",{__self:this,__source:{fileName:v,lineNumber:282,columnNumber:15}},"Info"),e.createElement("span",{__self:this,__source:{fileName:v,lineNumber:283,columnNumber:15}},"Details"))),e.createElement("form",{onSubmit:c(w),__self:this,__source:{fileName:v,lineNumber:287,columnNumber:11}},r===1&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:v,lineNumber:290,columnNumber:15}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4",__self:this,__source:{fileName:v,lineNumber:291,columnNumber:17}},"Choose your role"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:v,lineNumber:295,columnNumber:17}},su.map(P=>e.createElement("button",{key:P.value,type:"button",onClick:()=>B(P.value),className:"w-full p-4 border border-gray-300 rounded-lg hover:border-primary-500 hover:bg-primary-50 transition-colors text-left",__self:this,__source:{fileName:v,lineNumber:297,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:v,lineNumber:303,columnNumber:23}},e.createElement("div",{className:`${P.color} text-white p-2 rounded-lg mr-4`,__self:this,__source:{fileName:v,lineNumber:304,columnNumber:25}},P.icon),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:309,columnNumber:25}},e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:v,lineNumber:310,columnNumber:27}},P.label),e.createElement("p",{className:"text-sm text-gray-600",__self:this,__source:{fileName:v,lineNumber:313,columnNumber:27}},P.description))))))),r===2&&e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:v,lineNumber:326,columnNumber:15}},e.createElement("div",{className:"flex items-center mb-4",__self:this,__source:{fileName:v,lineNumber:327,columnNumber:17}},e.createElement("button",{type:"button",onClick:y,className:"mr-4 text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:v,lineNumber:328,columnNumber:19}},e.createElement(It,{className:"w-5 h-5",__self:this,__source:{fileName:v,lineNumber:333,columnNumber:21}})),e.createElement("h3",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:v,lineNumber:335,columnNumber:19}},"Basic Information")),e.createElement("div",{className:"grid grid-cols-2 gap-4",__self:this,__source:{fileName:v,lineNumber:340,columnNumber:17}},e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:341,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:342,columnNumber:21}},"First Name *"),e.createElement("input",{...u("firstName",{required:"First name is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:345,columnNumber:21}}),g.firstName&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:v,lineNumber:352,columnNumber:23}},g.firstName.message)),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:358,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:359,columnNumber:21}},"Last Name *"),e.createElement("input",{...u("lastName",{required:"Last name is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:362,columnNumber:21}}),g.lastName&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:v,lineNumber:369,columnNumber:23}},g.lastName.message))),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:376,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:377,columnNumber:19}},"Phone Number *"),e.createElement("input",{...u("phone",{required:"Phone number is required",pattern:{value:/^(\+254|0)[7-9]\d{8}$/,message:"Please enter a valid Kenyan phone number"}}),placeholder:"+254712345678 or 0712345678",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:380,columnNumber:19}}),g.phone&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:v,lineNumber:392,columnNumber:21}},g.phone.message)),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:398,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:399,columnNumber:19}},"Email Address"),e.createElement("input",{...u("email",{pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"}}),type:"email",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:402,columnNumber:19}}),g.email&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:v,lineNumber:413,columnNumber:21}},g.email.message)),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:419,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:420,columnNumber:19}},"County *"),e.createElement("select",{...u("county",{required:"County is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:423,columnNumber:19}},e.createElement("option",{value:"",__self:this,__source:{fileName:v,lineNumber:427,columnNumber:21}},"Select County"),ll.map(P=>e.createElement("option",{key:P,value:P,__self:this,__source:{fileName:v,lineNumber:429,columnNumber:23}},P))),g.county&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:v,lineNumber:435,columnNumber:21}},g.county.message)),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:441,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:442,columnNumber:19}},"Password *"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:v,lineNumber:445,columnNumber:19}},e.createElement("input",{...u("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:l?"text":"password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:446,columnNumber:21}}),e.createElement("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!l),__self:this,__source:{fileName:v,lineNumber:457,columnNumber:21}},l?e.createElement(Mr,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:v,lineNumber:463,columnNumber:25}}):e.createElement(ot,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:v,lineNumber:465,columnNumber:25}}))),g.password&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:v,lineNumber:470,columnNumber:21}},g.password.message)),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:476,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:477,columnNumber:19}},"Confirm Password *"),e.createElement("div",{className:"relative",__self:this,__source:{fileName:v,lineNumber:480,columnNumber:19}},e.createElement("input",{...u("confirmPassword",{required:"Please confirm your password",validate:P=>P===x||"Passwords do not match"}),type:m?"text":"password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:481,columnNumber:21}}),e.createElement("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>n(!m),__self:this,__source:{fileName:v,lineNumber:490,columnNumber:21}},m?e.createElement(Mr,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:v,lineNumber:498,columnNumber:25}}):e.createElement(ot,{className:"h-5 w-5 text-gray-400",__self:this,__source:{fileName:v,lineNumber:500,columnNumber:25}}))),g.confirmPassword&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:v,lineNumber:505,columnNumber:21}},g.confirmPassword.message)),e.createElement("button",{type:"button",onClick:p,className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 transition-colors font-medium flex items-center justify-center",__self:this,__source:{fileName:v,lineNumber:511,columnNumber:17}},"Next",e.createElement(ts,{className:"w-5 h-5 ml-2",__self:this,__source:{fileName:v,lineNumber:517,columnNumber:19}}))),r===3&&e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:v,lineNumber:524,columnNumber:15}},e.createElement("div",{className:"flex items-center mb-4",__self:this,__source:{fileName:v,lineNumber:525,columnNumber:17}},e.createElement("button",{type:"button",onClick:y,className:"mr-4 text-gray-400 hover:text-gray-600",__self:this,__source:{fileName:v,lineNumber:526,columnNumber:19}},e.createElement(It,{className:"w-5 h-5",__self:this,__source:{fileName:v,lineNumber:531,columnNumber:21}})),e.createElement("h3",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:v,lineNumber:533,columnNumber:19}},h==="FARMER"&&"Farm Details",h==="DRIVER"&&"Driver Information",h==="FARMER_AGENT"&&"Agent Information",h==="CUSTOMER"&&"Almost Done!")),h==="FARMER"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:v,lineNumber:543,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:544,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:545,columnNumber:23}},"Farm Name"),e.createElement("input",{...u("farmName"),placeholder:"e.g., Green Valley Farm",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:548,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:555,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:556,columnNumber:23}},"Sub-County"),e.createElement("input",{...u("subCounty"),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:559,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:565,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:566,columnNumber:23}},"Farm Size (acres)"),e.createElement("input",{...u("farmSize"),type:"number",step:"0.1",placeholder:"e.g., 5.5",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:569,columnNumber:23}})),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:578,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:579,columnNumber:23}},"KRA PIN"),e.createElement("input",{...u("kraPin"),placeholder:"e.g., A123456789K",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:582,columnNumber:23}})),e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",__self:this,__source:{fileName:v,lineNumber:589,columnNumber:21}},e.createElement("div",{className:"flex",__self:this,__source:{fileName:v,lineNumber:590,columnNumber:23}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:v,lineNumber:591,columnNumber:25}},e.createElement("svg",{className:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",__self:this,__source:{fileName:v,lineNumber:592,columnNumber:27}},e.createElement("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd",__self:this,__source:{fileName:v,lineNumber:597,columnNumber:29}}))),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:v,lineNumber:604,columnNumber:25}},e.createElement("h3",{className:"text-sm font-medium text-yellow-800",__self:this,__source:{fileName:v,lineNumber:605,columnNumber:27}},"Activation Fee Required"),e.createElement("div",{className:"mt-2 text-sm text-yellow-700",__self:this,__source:{fileName:v,lineNumber:608,columnNumber:27}},e.createElement("p",{__self:this,__source:{fileName:v,lineNumber:609,columnNumber:29}},"Farmers need to pay a one-time activation fee of KES 300 after registration.")))))),h==="DRIVER"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:v,lineNumber:622,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:623,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:624,columnNumber:23}},"Driving License Number *"),e.createElement("input",{...u("licenseNumber",{required:"License number is required for drivers"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:627,columnNumber:23}}),g.licenseNumber&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:v,lineNumber:634,columnNumber:25}},g.licenseNumber.message)),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:640,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:641,columnNumber:23}},"Vehicle Type *"),e.createElement("select",{...u("vehicleType",{required:"Vehicle type is required for drivers"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:644,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:v,lineNumber:650,columnNumber:25}},"Select Vehicle Type"),ru.map(P=>e.createElement("option",{key:P,value:P,__self:this,__source:{fileName:v,lineNumber:652,columnNumber:27}},P))),g.vehicleType&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:v,lineNumber:658,columnNumber:25}},g.vehicleType.message)),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:664,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:665,columnNumber:23}},"Vehicle Registration Number *"),e.createElement("input",{...u("vehicleRegNo",{required:"Vehicle registration number is required for drivers"}),placeholder:"e.g., KCA 123X",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:668,columnNumber:23}}),g.vehicleRegNo&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:v,lineNumber:677,columnNumber:25}},g.vehicleRegNo.message)),e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:683,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:684,columnNumber:23}},"National ID Number *"),e.createElement("input",{...u("idNumber",{required:"ID number is required for drivers"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:687,columnNumber:23}}),g.idNumber&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:v,lineNumber:694,columnNumber:25}},g.idNumber.message)),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",__self:this,__source:{fileName:v,lineNumber:700,columnNumber:21}},e.createElement("div",{className:"flex",__self:this,__source:{fileName:v,lineNumber:701,columnNumber:23}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:v,lineNumber:702,columnNumber:25}},e.createElement("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",__self:this,__source:{fileName:v,lineNumber:703,columnNumber:27}},e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd",__self:this,__source:{fileName:v,lineNumber:708,columnNumber:29}}))),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:v,lineNumber:715,columnNumber:25}},e.createElement("h3",{className:"text-sm font-medium text-blue-800",__self:this,__source:{fileName:v,lineNumber:716,columnNumber:27}},"Approval Required"),e.createElement("div",{className:"mt-2 text-sm text-blue-700",__self:this,__source:{fileName:v,lineNumber:719,columnNumber:27}},e.createElement("p",{__self:this,__source:{fileName:v,lineNumber:720,columnNumber:29}},"Driver applications require verification and approval by our team.")))))),h==="FARMER_AGENT"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:v,lineNumber:733,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:v,lineNumber:734,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:v,lineNumber:735,columnNumber:23}},"Assigned County *"),e.createElement("select",{...u("assignedCounty",{required:"Assigned county is required for agents"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:v,lineNumber:738,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:v,lineNumber:744,columnNumber:25}},"Select County"),ll.map(P=>e.createElement("option",{key:P,value:P,__self:this,__source:{fileName:v,lineNumber:746,columnNumber:27}},P))),g.assignedCounty&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:v,lineNumber:752,columnNumber:25}},g.assignedCounty.message)),e.createElement("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",__self:this,__source:{fileName:v,lineNumber:758,columnNumber:21}},e.createElement("div",{className:"flex",__self:this,__source:{fileName:v,lineNumber:759,columnNumber:23}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:v,lineNumber:760,columnNumber:25}},e.createElement("svg",{className:"h-5 w-5 text-purple-400",fill:"currentColor",viewBox:"0 0 20 20",__self:this,__source:{fileName:v,lineNumber:761,columnNumber:27}},e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd",__self:this,__source:{fileName:v,lineNumber:766,columnNumber:29}}))),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:v,lineNumber:773,columnNumber:25}},e.createElement("h3",{className:"text-sm font-medium text-purple-800",__self:this,__source:{fileName:v,lineNumber:774,columnNumber:27}},"Agent Responsibilities"),e.createElement("div",{className:"mt-2 text-sm text-purple-700",__self:this,__source:{fileName:v,lineNumber:777,columnNumber:27}},e.createElement("p",{__self:this,__source:{fileName:v,lineNumber:778,columnNumber:29}},"As an agent, you'll help onboard farmers in your assigned county and earn commissions.")))))),h==="CUSTOMER"&&e.createElement("div",{className:"text-center py-8",__self:this,__source:{fileName:v,lineNumber:791,columnNumber:19}},e.createElement("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",__self:this,__source:{fileName:v,lineNumber:792,columnNumber:21}},e.createElement(Jt,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:v,lineNumber:793,columnNumber:23}})),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:v,lineNumber:795,columnNumber:21}},"You're all set!"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:v,lineNumber:798,columnNumber:21}},"Complete your registration to start shopping for fresh produce.")),e.createElement("button",{type:"submit",disabled:i,className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",__self:this,__source:{fileName:v,lineNumber:805,columnNumber:17}},i?"Creating Account...":"Create Account"))))))}var f="/app/code/frontend/src/pages/farmer/FarmerDashboard.tsx";function au(){const{user:t}=xe(),[r,s]=T.useState(!1),[l,a]=T.useState("overview"),[m,n]=T.useState([]),[i,_]=T.useState(null),[u,c]=T.useState([]),[o,b]=T.useState(!0),[g,h]=T.useState({totalConsignments:0,pendingConsignments:0,completedConsignments:0,totalEarnings:0});T.useEffect(()=>{x()},[]);const x=async()=>{try{b(!0);const L=localStorage.getItem("token"),[O,Y,S]=await Promise.all([ae.get("/api/consignments",{headers:{Authorization:`Bearer ${L}`}}),ae.get("/api/wallet",{headers:{Authorization:`Bearer ${L}`}}),ae.get("/api/notifications",{headers:{Authorization:`Bearer ${L}`}})]);n(O.data),_(Y.data),c(S.data);const Z=O.data.length,N=O.data.filter(se=>se.status==="PENDING").length,J=O.data.filter(se=>se.status==="COMPLETED").length,re=Y.data.balance+Y.data.transactions.filter(se=>se.type==="DEBIT").reduce((se,ue)=>se+ue.amount,0);h({totalConsignments:Z,pendingConsignments:N,completedConsignments:J,totalEarnings:re})}catch(L){console.error("Failed to fetch dashboard data:",L),V.error("Failed to load dashboard data")}finally{b(!1)}},w=async(L,O)=>{try{const Y=localStorage.getItem("token"),S=await ae.post("/api/wallet/withdraw",{amount:L,phoneNumber:O},{headers:{Authorization:`Bearer ${Y}`}});V.success("Withdrawal initiated! Check your phone for M-Pesa prompt."),x()}catch(Y){V.error(Y.response?.data?.error||"Withdrawal failed")}},p=async L=>{try{const O=localStorage.getItem("token"),Y=await ae.post("/api/payments/registration-fee",{phoneNumber:L},{headers:{Authorization:`Bearer ${O}`}});V.success("Registration fee payment initiated! Check your phone for M-Pesa prompt.")}catch(O){V.error(O.response?.data?.error||"Payment failed")}},y=[{id:"overview",label:"Overview",icon:nt},{id:"consignments",label:"Consignments",icon:Ne},{id:"wallet",label:"Wallet",icon:Ar},{id:"notifications",label:"Notifications",icon:cl},{id:"profile",label:"Profile",icon:Qt}],B=L=>({PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",PRICE_SUGGESTED:"bg-blue-100 text-blue-800",DRIVER_ASSIGNED:"bg-indigo-100 text-indigo-800",IN_TRANSIT:"bg-purple-100 text-purple-800",DELIVERED:"bg-cyan-100 text-cyan-800",COMPLETED:"bg-green-100 text-green-800"})[L]||"bg-gray-100 text-gray-800",P=L=>{const Y={PENDING:De,APPROVED:Pe,REJECTED:st,PRICE_SUGGESTED:_t,DRIVER_ASSIGNED:ve,IN_TRANSIT:ve,DELIVERED:Pe,COMPLETED:Pe}[L]||ct;return e.createElement(Y,{className:"w-4 h-4",__self:this,__source:{fileName:f,lineNumber:201,columnNumber:12}})};return o?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:f,lineNumber:206,columnNumber:7}},e.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600",__self:this,__source:{fileName:f,lineNumber:207,columnNumber:9}})):e.createElement("div",{className:"min-h-screen bg-gray-50 flex",__self:this,__source:{fileName:f,lineNumber:213,columnNumber:5}},e.createElement("div",{className:`${r?"translate-x-0":"-translate-x-full"} fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0`,__self:this,__source:{fileName:f,lineNumber:215,columnNumber:7}},e.createElement("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",__self:this,__source:{fileName:f,lineNumber:218,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-800",__self:this,__source:{fileName:f,lineNumber:219,columnNumber:11}},"Farmer Dashboard"),e.createElement("button",{onClick:()=>s(!1),className:"lg:hidden text-gray-500 hover:text-gray-700",__self:this,__source:{fileName:f,lineNumber:222,columnNumber:11}},e.createElement(st,{className:"w-6 h-6",__self:this,__source:{fileName:f,lineNumber:226,columnNumber:13}}))),e.createElement("nav",{className:"mt-6",__self:this,__source:{fileName:f,lineNumber:230,columnNumber:9}},y.map(L=>{const O=L.icon;return e.createElement("button",{key:L.id,onClick:()=>{a(L.id),s(!1)},className:`w-full flex items-center px-6 py-3 text-left hover:bg-gray-50 transition-colors ${l===L.id?"bg-green-50 text-green-600 border-r-2 border-green-600":"text-gray-600"}`,__self:this,__source:{fileName:f,lineNumber:234,columnNumber:15}},e.createElement(O,{className:"w-5 h-5 mr-3",__self:this,__source:{fileName:f,lineNumber:246,columnNumber:17}}),L.label)})),e.createElement("div",{className:"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-200",__self:this,__source:{fileName:f,lineNumber:254,columnNumber:9}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:255,columnNumber:11}},e.createElement("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white font-semibold",__self:this,__source:{fileName:f,lineNumber:256,columnNumber:13}},t?.firstName?.[0],t?.lastName?.[0]),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:f,lineNumber:260,columnNumber:13}},e.createElement("p",{className:"text-sm font-medium text-gray-800",__self:this,__source:{fileName:f,lineNumber:261,columnNumber:15}},t?.firstName," ",t?.lastName),e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:f,lineNumber:264,columnNumber:15}},t?.county))))),e.createElement("div",{className:"flex-1 flex flex-col overflow-hidden",__self:this,__source:{fileName:f,lineNumber:271,columnNumber:7}},e.createElement("div",{className:"bg-white shadow-sm border-b border-gray-200",__self:this,__source:{fileName:f,lineNumber:273,columnNumber:9}},e.createElement("div",{className:"flex items-center justify-between h-16 px-6",__self:this,__source:{fileName:f,lineNumber:274,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:275,columnNumber:13}},e.createElement("button",{onClick:()=>s(!0),className:"lg:hidden text-gray-500 hover:text-gray-700 mr-3",__self:this,__source:{fileName:f,lineNumber:276,columnNumber:15}},e.createElement(nl,{className:"w-6 h-6",__self:this,__source:{fileName:f,lineNumber:280,columnNumber:17}})),e.createElement("h1",{className:"text-xl font-semibold text-gray-800 capitalize",__self:this,__source:{fileName:f,lineNumber:282,columnNumber:15}},l)),!t?.registrationFeePaid&&e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg px-4 py-2",__self:this,__source:{fileName:f,lineNumber:288,columnNumber:15}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:289,columnNumber:17}},e.createElement(ct,{className:"w-4 h-4 text-red-600 mr-2",__self:this,__source:{fileName:f,lineNumber:290,columnNumber:19}}),e.createElement("span",{className:"text-sm text-red-800",__self:this,__source:{fileName:f,lineNumber:291,columnNumber:19}},"Registration fee required"),e.createElement("button",{onClick:()=>{const L=prompt("Enter your M-Pesa phone number:");L&&p(L)},className:"ml-3 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",__self:this,__source:{fileName:f,lineNumber:294,columnNumber:19}},"Pay KES 300"))))),e.createElement("div",{className:"flex-1 overflow-auto p-6",__self:this,__source:{fileName:f,lineNumber:310,columnNumber:9}},l==="overview"&&e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:f,lineNumber:312,columnNumber:13}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",__self:this,__source:{fileName:f,lineNumber:314,columnNumber:15}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:f,lineNumber:315,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:316,columnNumber:19}},e.createElement(Ne,{className:"w-8 h-8 text-blue-600",__self:this,__source:{fileName:f,lineNumber:317,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:f,lineNumber:318,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:f,lineNumber:319,columnNumber:23}},"Total Consignments"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:f,lineNumber:322,columnNumber:23}},g.totalConsignments)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:f,lineNumber:329,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:330,columnNumber:19}},e.createElement(De,{className:"w-8 h-8 text-yellow-600",__self:this,__source:{fileName:f,lineNumber:331,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:f,lineNumber:332,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:f,lineNumber:333,columnNumber:23}},"Pending"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:f,lineNumber:336,columnNumber:23}},g.pendingConsignments)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:f,lineNumber:343,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:344,columnNumber:19}},e.createElement(Pe,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:f,lineNumber:345,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:f,lineNumber:346,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:f,lineNumber:347,columnNumber:23}},"Completed"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:f,lineNumber:350,columnNumber:23}},g.completedConsignments)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:f,lineNumber:357,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:358,columnNumber:19}},e.createElement(Ar,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:f,lineNumber:359,columnNumber:21}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:f,lineNumber:360,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:f,lineNumber:361,columnNumber:23}},"Wallet Balance"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:f,lineNumber:364,columnNumber:23}},"KES ",i?.balance?.toLocaleString()||0))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:f,lineNumber:373,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:f,lineNumber:374,columnNumber:17}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",__self:this,__source:{fileName:f,lineNumber:377,columnNumber:17}},e.createElement("button",{onClick:()=>a("consignments"),className:"flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",disabled:!t?.registrationFeePaid,__self:this,__source:{fileName:f,lineNumber:378,columnNumber:19}},e.createElement(nr,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:f,lineNumber:383,columnNumber:21}}),"Submit Consignment"),e.createElement("button",{onClick:()=>a("wallet"),className:"flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",__self:this,__source:{fileName:f,lineNumber:387,columnNumber:19}},e.createElement(Ar,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:f,lineNumber:391,columnNumber:21}}),"Manage Wallet"),e.createElement("button",{onClick:()=>a("consignments"),className:"flex items-center justify-center px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",__self:this,__source:{fileName:f,lineNumber:395,columnNumber:19}},e.createElement(ot,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:f,lineNumber:399,columnNumber:21}}),"View Consignments"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:f,lineNumber:406,columnNumber:15}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:f,lineNumber:407,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:f,lineNumber:408,columnNumber:19}},"Recent Consignments")),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:f,lineNumber:412,columnNumber:17}},m.slice(0,5).map(L=>e.createElement("div",{key:L.id,className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0",__self:this,__source:{fileName:f,lineNumber:414,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:418,columnNumber:23}},e.createElement("img",{src:L.images[0]||"/placeholder.jpg",alt:L.title,className:"w-12 h-12 rounded-lg object-cover",__self:this,__source:{fileName:f,lineNumber:419,columnNumber:25}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:f,lineNumber:424,columnNumber:25}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:f,lineNumber:425,columnNumber:27}},L.title),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:f,lineNumber:428,columnNumber:27}},L.quantity," ",L.unit))),e.createElement("div",{className:"flex items-center space-x-3",__self:this,__source:{fileName:f,lineNumber:433,columnNumber:23}},e.createElement("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${B(L.status)}`,__self:this,__source:{fileName:f,lineNumber:434,columnNumber:25}},P(L.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:f,lineNumber:438,columnNumber:27}},L.status.replace("_"," "))),e.createElement("span",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:f,lineNumber:442,columnNumber:25}},"KES"," ",L.finalPricePerUnit||L.bidPricePerUnit,"/kg"))))))),l==="consignments"&&e.createElement(mu,{consignments:m,onRefresh:x,canSubmit:t?.registrationFeePaid||!1,__self:this,__source:{fileName:f,lineNumber:457,columnNumber:13}}),l==="wallet"&&e.createElement(nu,{wallet:i,onWithdraw:w,onRefresh:x,__self:this,__source:{fileName:f,lineNumber:465,columnNumber:13}}),l==="notifications"&&e.createElement(iu,{notifications:u,onRefresh:x,__self:this,__source:{fileName:f,lineNumber:473,columnNumber:13}}),l==="profile"&&e.createElement(uu,{user:t,__self:this,__source:{fileName:f,lineNumber:479,columnNumber:43}}))))}function mu({consignments:t,onRefresh:r,canSubmit:s}){const[l,a]=T.useState(!1),[m,n]=T.useState({title:"",description:"",category:"Vegetables",quantity:"",unit:"kg",bidPricePerUnit:"",location:"",harvestDate:"",expiryDate:"",images:[""]}),i=async _=>{if(_.preventDefault(),!s){V.error("Please pay the registration fee first");return}try{const u=localStorage.getItem("token");await ae.post("/api/consignments",{...m,quantity:parseFloat(m.quantity),bidPricePerUnit:parseFloat(m.bidPricePerUnit)},{headers:{Authorization:`Bearer ${u}`}}),V.success("Consignment submitted successfully!"),a(!1),n({title:"",description:"",category:"Vegetables",quantity:"",unit:"kg",bidPricePerUnit:"",location:"",harvestDate:"",expiryDate:"",images:[""]}),r()}catch(u){V.error(u.response?.data?.error||"Failed to submit consignment")}};return e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:f,lineNumber:544,columnNumber:5}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:f,lineNumber:545,columnNumber:7}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:f,lineNumber:546,columnNumber:9}},"My Consignments"),e.createElement("button",{onClick:()=>a(!0),disabled:!s,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",__self:this,__source:{fileName:f,lineNumber:547,columnNumber:9}},e.createElement(nr,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:f,lineNumber:552,columnNumber:11}}),"Submit New Consignment")),!s&&e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",__self:this,__source:{fileName:f,lineNumber:558,columnNumber:9}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:559,columnNumber:11}},e.createElement(ct,{className:"w-5 h-5 text-yellow-600 mr-2",__self:this,__source:{fileName:f,lineNumber:560,columnNumber:13}}),e.createElement("span",{className:"text-yellow-800",__self:this,__source:{fileName:f,lineNumber:561,columnNumber:13}},"You must pay the KES 300 registration fee before submitting consignments."))),l&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:f,lineNumber:570,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",__self:this,__source:{fileName:f,lineNumber:571,columnNumber:11}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:f,lineNumber:572,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:f,lineNumber:573,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:f,lineNumber:574,columnNumber:17}},"Submit New Consignment"),e.createElement("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700",__self:this,__source:{fileName:f,lineNumber:577,columnNumber:17}},e.createElement(st,{className:"w-6 h-6",__self:this,__source:{fileName:f,lineNumber:581,columnNumber:19}})))),e.createElement("form",{onSubmit:i,className:"p-6 space-y-4",__self:this,__source:{fileName:f,lineNumber:586,columnNumber:13}},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",__self:this,__source:{fileName:f,lineNumber:587,columnNumber:15}},e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:588,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:589,columnNumber:19}},"Title"),e.createElement("input",{type:"text",required:!0,value:m.title,onChange:_=>n(u=>({...u,title:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Fresh Tomatoes",__self:this,__source:{fileName:f,lineNumber:592,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:607,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:608,columnNumber:19}},"Category"),e.createElement("select",{value:m.category,onChange:_=>n(u=>({...u,category:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:f,lineNumber:611,columnNumber:19}},e.createElement("option",{value:"Vegetables",__self:this,__source:{fileName:f,lineNumber:621,columnNumber:21}},"Vegetables"),e.createElement("option",{value:"Fruits",__self:this,__source:{fileName:f,lineNumber:622,columnNumber:21}},"Fruits"),e.createElement("option",{value:"Grains",__self:this,__source:{fileName:f,lineNumber:623,columnNumber:21}},"Grains"),e.createElement("option",{value:"Legumes",__self:this,__source:{fileName:f,lineNumber:624,columnNumber:21}},"Legumes"))),e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:628,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:629,columnNumber:19}},"Quantity"),e.createElement("input",{type:"number",required:!0,value:m.quantity,onChange:_=>n(u=>({...u,quantity:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 500",__self:this,__source:{fileName:f,lineNumber:632,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:647,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:648,columnNumber:19}},"Unit"),e.createElement("select",{value:m.unit,onChange:_=>n(u=>({...u,unit:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:f,lineNumber:651,columnNumber:19}},e.createElement("option",{value:"kg",__self:this,__source:{fileName:f,lineNumber:658,columnNumber:21}},"Kilograms (kg)"),e.createElement("option",{value:"tonnes",__self:this,__source:{fileName:f,lineNumber:659,columnNumber:21}},"Tonnes"),e.createElement("option",{value:"bags",__self:this,__source:{fileName:f,lineNumber:660,columnNumber:21}},"Bags"),e.createElement("option",{value:"pieces",__self:this,__source:{fileName:f,lineNumber:661,columnNumber:21}},"Pieces"))),e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:665,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:666,columnNumber:19}},"Bid Price per Unit (KES)"),e.createElement("input",{type:"number",required:!0,value:m.bidPricePerUnit,onChange:_=>n(u=>({...u,bidPricePerUnit:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 80",__self:this,__source:{fileName:f,lineNumber:669,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:684,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:685,columnNumber:19}},"Location"),e.createElement("input",{type:"text",required:!0,value:m.location,onChange:_=>n(u=>({...u,location:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Nakuru",__self:this,__source:{fileName:f,lineNumber:688,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:703,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:704,columnNumber:19}},"Harvest Date"),e.createElement("input",{type:"date",required:!0,value:m.harvestDate,onChange:_=>n(u=>({...u,harvestDate:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:f,lineNumber:707,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:721,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:722,columnNumber:19}},"Expiry Date"),e.createElement("input",{type:"date",required:!0,value:m.expiryDate,onChange:_=>n(u=>({...u,expiryDate:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:f,lineNumber:725,columnNumber:19}}))),e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:740,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:741,columnNumber:17}},"Description"),e.createElement("textarea",{required:!0,value:m.description,onChange:_=>n(u=>({...u,description:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:3,placeholder:"Describe your produce quality, farming methods, etc.",__self:this,__source:{fileName:f,lineNumber:744,columnNumber:17}})),e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:759,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:760,columnNumber:17}},"Image URL"),e.createElement("input",{type:"url",value:m.images[0],onChange:_=>n(u=>({...u,images:[_.target.value]})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"https://example.com/image.jpg",__self:this,__source:{fileName:f,lineNumber:763,columnNumber:17}})),e.createElement("div",{className:"flex justify-end space-x-3 pt-4",__self:this,__source:{fileName:f,lineNumber:777,columnNumber:15}},e.createElement("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",__self:this,__source:{fileName:f,lineNumber:778,columnNumber:17}},"Cancel"),e.createElement("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",__self:this,__source:{fileName:f,lineNumber:785,columnNumber:17}},"Submit Consignment"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:f,lineNumber:798,columnNumber:7}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:f,lineNumber:799,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:f,lineNumber:800,columnNumber:11}},"All Consignments (",t.length,")")),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:f,lineNumber:804,columnNumber:9}},t.map(_=>e.createElement("div",{key:_.id,className:"p-6",__self:this,__source:{fileName:f,lineNumber:806,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:f,lineNumber:807,columnNumber:15}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:808,columnNumber:17}},e.createElement("img",{src:_.images[0]||"/placeholder.jpg",alt:_.title,className:"w-16 h-16 rounded-lg object-cover",__self:this,__source:{fileName:f,lineNumber:809,columnNumber:19}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:f,lineNumber:814,columnNumber:19}},e.createElement("h4",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:f,lineNumber:815,columnNumber:21}},_.title),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:f,lineNumber:818,columnNumber:21}},_.description),e.createElement("div",{className:"flex items-center space-x-4 mt-2",__self:this,__source:{fileName:f,lineNumber:821,columnNumber:21}},e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:f,lineNumber:822,columnNumber:23}},_.quantity," ",_.unit),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:f,lineNumber:825,columnNumber:23}},"KES ",_.bidPricePerUnit,"/",_.unit),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:f,lineNumber:828,columnNumber:23}},_.location)))),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:f,lineNumber:834,columnNumber:17}},e.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${ou(_.status)}`,__self:this,__source:{fileName:f,lineNumber:835,columnNumber:19}},cu(_.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:f,lineNumber:839,columnNumber:21}},_.status.replace("_"," "))),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:f,lineNumber:843,columnNumber:19}},new Date(_.createdAt).toLocaleDateString()))),_.adminNotes&&e.createElement("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",__self:this,__source:{fileName:f,lineNumber:849,columnNumber:17}},e.createElement("p",{className:"text-sm text-gray-700",__self:this,__source:{fileName:f,lineNumber:850,columnNumber:19}},e.createElement("strong",{__self:this,__source:{fileName:f,lineNumber:851,columnNumber:21}},"Admin Notes:")," ",_.adminNotes)))))))}function nu({wallet:t,onWithdraw:r,onRefresh:s}){const[l,a]=T.useState(!1),[m,n]=T.useState(""),[i,_]=T.useState(""),u=async c=>{c.preventDefault();const o=parseFloat(m);if(o<10){V.error("Minimum withdrawal amount is KES 10");return}if(o>t.balance){V.error("Insufficient balance");return}await r(o,i),a(!1),n(""),_("")};return e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:f,lineNumber:890,columnNumber:5}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:f,lineNumber:891,columnNumber:7}},e.createElement("div",{className:"flex items-center justify-between mb-6",__self:this,__source:{fileName:f,lineNumber:892,columnNumber:9}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:f,lineNumber:893,columnNumber:11}},"Wallet"),e.createElement("button",{onClick:()=>a(!0),disabled:!t?.balance||t.balance<10,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed",__self:this,__source:{fileName:f,lineNumber:894,columnNumber:11}},"Withdraw Funds")),e.createElement("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-6 text-white",__self:this,__source:{fileName:f,lineNumber:903,columnNumber:9}},e.createElement("h3",{className:"text-lg font-medium mb-2",__self:this,__source:{fileName:f,lineNumber:904,columnNumber:11}},"Available Balance"),e.createElement("p",{className:"text-3xl font-bold",__self:this,__source:{fileName:f,lineNumber:905,columnNumber:11}},"KES ",t?.balance?.toLocaleString()||0))),l&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:f,lineNumber:912,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full",__self:this,__source:{fileName:f,lineNumber:913,columnNumber:11}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:f,lineNumber:914,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:f,lineNumber:915,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:f,lineNumber:916,columnNumber:17}},"Withdraw Funds"),e.createElement("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700",__self:this,__source:{fileName:f,lineNumber:919,columnNumber:17}},e.createElement(st,{className:"w-6 h-6",__self:this,__source:{fileName:f,lineNumber:923,columnNumber:19}})))),e.createElement("form",{onSubmit:u,className:"p-6 space-y-4",__self:this,__source:{fileName:f,lineNumber:928,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:929,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:930,columnNumber:17}},"Amount (KES)"),e.createElement("input",{type:"number",min:"10",max:t?.balance||0,required:!0,value:m,onChange:c=>n(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter amount",__self:this,__source:{fileName:f,lineNumber:933,columnNumber:17}}),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:f,lineNumber:943,columnNumber:17}},"Minimum: KES 10 | Available: KES"," ",t?.balance?.toLocaleString()||0)),e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:949,columnNumber:15}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:950,columnNumber:17}},"M-Pesa Phone Number"),e.createElement("input",{type:"tel",required:!0,value:i,onChange:c=>_(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"+254712345678",__self:this,__source:{fileName:f,lineNumber:953,columnNumber:17}})),e.createElement("div",{className:"flex justify-end space-x-3 pt-4",__self:this,__source:{fileName:f,lineNumber:963,columnNumber:15}},e.createElement("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",__self:this,__source:{fileName:f,lineNumber:964,columnNumber:17}},"Cancel"),e.createElement("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",__self:this,__source:{fileName:f,lineNumber:971,columnNumber:17}},"Withdraw"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:f,lineNumber:984,columnNumber:7}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:f,lineNumber:985,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:f,lineNumber:986,columnNumber:11}},"Transaction History")),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:f,lineNumber:990,columnNumber:9}},t?.transactions?.map(c=>e.createElement("div",{key:c.id,className:"p-6 flex items-center justify-between",__self:this,__source:{fileName:f,lineNumber:992,columnNumber:13}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:996,columnNumber:15}},e.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${c.type==="CREDIT"?"bg-green-100":"bg-red-100"}`,__self:this,__source:{fileName:f,lineNumber:997,columnNumber:17}},c.type==="CREDIT"?e.createElement(nt,{className:"w-5 h-5 text-green-600",__self:this,__source:{fileName:f,lineNumber:1005,columnNumber:21}}):e.createElement(nt,{className:"w-5 h-5 text-red-600 transform rotate-180",__self:this,__source:{fileName:f,lineNumber:1007,columnNumber:21}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:f,lineNumber:1012,columnNumber:17}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:f,lineNumber:1013,columnNumber:19}},c.description),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:f,lineNumber:1016,columnNumber:19}},new Date(c.createdAt).toLocaleDateString()," at"," ",new Date(c.createdAt).toLocaleTimeString()))),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:f,lineNumber:1022,columnNumber:15}},e.createElement("p",{className:`font-semibold ${c.type==="CREDIT"?"text-green-600":"text-red-600"}`,__self:this,__source:{fileName:f,lineNumber:1023,columnNumber:17}},c.type==="CREDIT"?"+":"-","KES"," ",c.amount.toLocaleString())))))))}function iu({notifications:t,onRefresh:r}){const s=async l=>{try{const a=localStorage.getItem("token");await ae.put(`/api/notifications/${l}/read`,{},{headers:{Authorization:`Bearer ${a}`}}),r()}catch(a){console.error("Failed to mark notification as read:",a)}};return e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:f,lineNumber:1059,columnNumber:5}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:f,lineNumber:1060,columnNumber:7}},"Notifications"),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:f,lineNumber:1062,columnNumber:7}},e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:f,lineNumber:1063,columnNumber:9}},t.map(l=>e.createElement("div",{key:l.id,className:`p-6 ${l.isRead?"bg-white":"bg-blue-50"}`,__self:this,__source:{fileName:f,lineNumber:1065,columnNumber:13}},e.createElement("div",{className:"flex items-start justify-between",__self:this,__source:{fileName:f,lineNumber:1069,columnNumber:15}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:f,lineNumber:1070,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:1071,columnNumber:19}},e.createElement("h4",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:f,lineNumber:1072,columnNumber:21}},l.title),!l.isRead&&e.createElement("span",{className:"ml-2 w-2 h-2 bg-blue-600 rounded-full",__self:this,__source:{fileName:f,lineNumber:1076,columnNumber:23}})),e.createElement("p",{className:"text-gray-700 mt-1",__self:this,__source:{fileName:f,lineNumber:1079,columnNumber:19}},l.message),e.createElement("p",{className:"text-sm text-gray-500 mt-2",__self:this,__source:{fileName:f,lineNumber:1080,columnNumber:19}},new Date(l.createdAt).toLocaleDateString()," at"," ",new Date(l.createdAt).toLocaleTimeString())),!l.isRead&&e.createElement("button",{onClick:()=>s(l.id),className:"ml-4 text-blue-600 hover:text-blue-800 text-sm font-medium",__self:this,__source:{fileName:f,lineNumber:1086,columnNumber:19}},"Mark as read")))),t.length===0&&e.createElement("div",{className:"p-6 text-center text-gray-500",__self:this,__source:{fileName:f,lineNumber:1097,columnNumber:13}},"No notifications yet"))))}function uu({user:t}){return e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:f,lineNumber:1110,columnNumber:5}},e.createElement("h2",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:f,lineNumber:1111,columnNumber:7}},"Profile"),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:f,lineNumber:1113,columnNumber:7}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:f,lineNumber:1114,columnNumber:9}},e.createElement("div",{className:"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",__self:this,__source:{fileName:f,lineNumber:1115,columnNumber:11}},t?.firstName?.[0],t?.lastName?.[0]),e.createElement("div",{className:"ml-6",__self:this,__source:{fileName:f,lineNumber:1119,columnNumber:11}},e.createElement("h3",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:f,lineNumber:1120,columnNumber:13}},t?.firstName," ",t?.lastName),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:f,lineNumber:1123,columnNumber:13}},t?.email),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:f,lineNumber:1124,columnNumber:13}},t?.phone))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:f,lineNumber:1128,columnNumber:9}},e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:1129,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:1130,columnNumber:13}},"Role"),e.createElement("p",{className:"text-gray-900 capitalize",__self:this,__source:{fileName:f,lineNumber:1133,columnNumber:13}},t?.role)),e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:1135,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:1136,columnNumber:13}},"County"),e.createElement("p",{className:"text-gray-900",__self:this,__source:{fileName:f,lineNumber:1139,columnNumber:13}},t?.county)),e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:1141,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:1142,columnNumber:13}},"Registration Status"),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:1145,columnNumber:13}},t?.registrationFeePaid?e.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",__self:this,__source:{fileName:f,lineNumber:1147,columnNumber:17}},e.createElement(Pe,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:f,lineNumber:1148,columnNumber:19}}),"Paid"):e.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",__self:this,__source:{fileName:f,lineNumber:1152,columnNumber:17}},e.createElement(ct,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:f,lineNumber:1153,columnNumber:19}}),"Fee Required"))),e.createElement("div",{__self:this,__source:{fileName:f,lineNumber:1159,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1",__self:this,__source:{fileName:f,lineNumber:1160,columnNumber:13}},"Verification Status"),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:f,lineNumber:1163,columnNumber:13}},t?.verified?e.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",__self:this,__source:{fileName:f,lineNumber:1165,columnNumber:17}},e.createElement(Pe,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:f,lineNumber:1166,columnNumber:19}}),"Verified"):e.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",__self:this,__source:{fileName:f,lineNumber:1170,columnNumber:17}},e.createElement(De,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:f,lineNumber:1171,columnNumber:19}}),"Pending"))))))}function ou(t){return{PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",PRICE_SUGGESTED:"bg-blue-100 text-blue-800",DRIVER_ASSIGNED:"bg-indigo-100 text-indigo-800",IN_TRANSIT:"bg-purple-100 text-purple-800",DELIVERED:"bg-cyan-100 text-cyan-800",COMPLETED:"bg-green-100 text-green-800"}[t]||"bg-gray-100 text-gray-800"}function cu(t){const s={PENDING:De,APPROVED:Pe,REJECTED:st,PRICE_SUGGESTED:_t,DRIVER_ASSIGNED:ve,IN_TRANSIT:ve,DELIVERED:Pe,COMPLETED:Pe}[t]||ct;return e.createElement(s,{className:"w-4 h-4",__self:this,__source:{fileName:f,lineNumber:1210,columnNumber:10}})}var te="/app/code/frontend/src/pages/customer/CustomerDashboard.tsx";function _u(){const{user:t}=xe(),r=et(),[s,l]=T.useState([]),[a,m]=T.useState(!0),[n,i]=T.useState({totalOrders:0,completedOrders:0,totalSpent:0,pendingOrders:0});T.useEffect(()=>{r("/customer/profile",{replace:!0})},[r]),T.useEffect(()=>{_()},[]);const _=async()=>{try{m(!0);const o=localStorage.getItem("token"),b=await ae.get("/api/orders",{headers:{Authorization:`Bearer ${o}`}});l(b.data);const g=b.data.length,h=b.data.filter(p=>p.status==="DELIVERED").length,x=b.data.filter(p=>p.paymentStatus==="COMPLETED").reduce((p,y)=>p+y.totalAmount,0),w=b.data.filter(p=>p.status==="PENDING").length;i({totalOrders:g,completedOrders:h,totalSpent:x,pendingOrders:w})}catch(o){console.error("Failed to fetch orders:",o),V.error("Failed to load orders")}finally{m(!1)}},u=o=>({PENDING:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",PROCESSING:"bg-indigo-100 text-indigo-800",SHIPPED:"bg-purple-100 text-purple-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",c=o=>{const g={PENDING:De,CONFIRMED:Ne,PROCESSING:Ne,SHIPPED:ve,DELIVERED:Ne,CANCELLED:Ne}[o]||Ne;return e.createElement(g,{className:"w-4 h-4",__self:this,__source:{fileName:te,lineNumber:126,columnNumber:12}})};return a?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:te,lineNumber:131,columnNumber:7}},e.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600",__self:this,__source:{fileName:te,lineNumber:132,columnNumber:9}})):e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:te,lineNumber:138,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:te,lineNumber:139,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:te,lineNumber:141,columnNumber:9}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:te,lineNumber:142,columnNumber:11}},"Welcome back, ",t?.firstName,"!"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:te,lineNumber:145,columnNumber:11}},"Manage your profile and view your order history")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:te,lineNumber:151,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:te,lineNumber:152,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:te,lineNumber:153,columnNumber:13}},e.createElement(ut,{className:"w-8 h-8 text-blue-600",__self:this,__source:{fileName:te,lineNumber:154,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:te,lineNumber:155,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:te,lineNumber:156,columnNumber:17}},"Total Orders"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:te,lineNumber:159,columnNumber:17}},n.totalOrders)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:te,lineNumber:166,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:te,lineNumber:167,columnNumber:13}},e.createElement(De,{className:"w-8 h-8 text-yellow-600",__self:this,__source:{fileName:te,lineNumber:168,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:te,lineNumber:169,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:te,lineNumber:170,columnNumber:17}},"Pending Orders"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:te,lineNumber:173,columnNumber:17}},n.pendingOrders)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:te,lineNumber:180,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:te,lineNumber:181,columnNumber:13}},e.createElement(Ne,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:te,lineNumber:182,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:te,lineNumber:183,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:te,lineNumber:184,columnNumber:17}},"Completed"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:te,lineNumber:185,columnNumber:17}},n.completedOrders)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:te,lineNumber:192,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:te,lineNumber:193,columnNumber:13}},e.createElement(Lt,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:te,lineNumber:194,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:te,lineNumber:195,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:te,lineNumber:196,columnNumber:17}},"Total Spent"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:te,lineNumber:197,columnNumber:17}},"KES ",n.totalSpent.toLocaleString()))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 mb-8",__self:this,__source:{fileName:te,lineNumber:206,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:te,lineNumber:207,columnNumber:11}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",__self:this,__source:{fileName:te,lineNumber:210,columnNumber:11}},e.createElement("button",{onClick:()=>r("/marketplace"),className:"flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",__self:this,__source:{fileName:te,lineNumber:211,columnNumber:13}},e.createElement(ut,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:te,lineNumber:215,columnNumber:15}}),"Browse Marketplace"),e.createElement("button",{onClick:()=>r("/customer/orders"),className:"flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",__self:this,__source:{fileName:te,lineNumber:219,columnNumber:13}},e.createElement(Ne,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:te,lineNumber:223,columnNumber:15}}),"View Orders"),e.createElement("button",{onClick:()=>r("/customer/profile"),className:"flex items-center justify-center px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",__self:this,__source:{fileName:te,lineNumber:227,columnNumber:13}},e.createElement(Ke,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:te,lineNumber:231,columnNumber:15}}),"Edit Profile"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:te,lineNumber:238,columnNumber:9}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:te,lineNumber:239,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:te,lineNumber:240,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:te,lineNumber:241,columnNumber:15}},"Recent Orders"),e.createElement("button",{onClick:()=>r("/customer/orders"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",__self:this,__source:{fileName:te,lineNumber:244,columnNumber:15}},"View All"))),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:te,lineNumber:252,columnNumber:11}},s.slice(0,3).map(o=>e.createElement("div",{key:o.id,className:"flex items-center justify-between py-4 border-b border-gray-100 last:border-b-0",__self:this,__source:{fileName:te,lineNumber:254,columnNumber:15}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:te,lineNumber:258,columnNumber:17}},e.createElement("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:te,lineNumber:259,columnNumber:19}},o.items[0]?.product?.images?.[0]?e.createElement("img",{src:o.items[0].product.images[0],alt:o.items[0].product.name,className:"w-12 h-12 rounded-lg object-cover",__self:this,__source:{fileName:te,lineNumber:261,columnNumber:23}}):e.createElement(Ne,{className:"w-6 h-6 text-gray-400",__self:this,__source:{fileName:te,lineNumber:267,columnNumber:23}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:te,lineNumber:270,columnNumber:19}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:te,lineNumber:271,columnNumber:21}},"Order #",o.id.slice(-8)),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:te,lineNumber:274,columnNumber:21}},o.items.length," item",o.items.length>1?"s":""," • KES"," ",o.totalAmount.toLocaleString()),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:te,lineNumber:279,columnNumber:21}},new Date(o.orderDate).toLocaleDateString()))),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:te,lineNumber:284,columnNumber:17}},e.createElement("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u(o.status)}`,__self:this,__source:{fileName:te,lineNumber:285,columnNumber:19}},c(o.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:te,lineNumber:289,columnNumber:21}},o.status)),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:te,lineNumber:291,columnNumber:19}},o.paymentMethod)))),s.length===0&&e.createElement("div",{className:"text-center py-8",__self:this,__source:{fileName:te,lineNumber:298,columnNumber:15}},e.createElement(Ne,{className:"w-12 h-12 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:te,lineNumber:299,columnNumber:17}}),e.createElement("p",{className:"text-gray-500",__self:this,__source:{fileName:te,lineNumber:300,columnNumber:17}},"No orders yet"),e.createElement("button",{onClick:()=>r("/marketplace"),className:"mt-3 text-blue-600 hover:text-blue-800 font-medium",__self:this,__source:{fileName:te,lineNumber:301,columnNumber:17}},"Start Shopping"))))))}var I="/app/code/frontend/src/pages/customer/ProfilePage.tsx";function Nu(){const{user:t,updateUser:r}=xe(),s=et(),[l,a]=T.useState(!1),[m,n]=T.useState(!1),[i,_]=T.useState([]),[u,c]=T.useState({totalOrders:0,completedOrders:0,totalSpent:0,pendingOrders:0}),[o,b]=T.useState({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",county:t?.county||""});T.useEffect(()=>{g()},[]);const g=async()=>{try{const p=localStorage.getItem("token"),y=await ae.get("/api/orders",{headers:{Authorization:`Bearer ${p}`}});_(y.data);const B=y.data.length,P=y.data.filter(Y=>Y.status==="DELIVERED").length,L=y.data.filter(Y=>Y.paymentStatus==="COMPLETED").reduce((Y,S)=>Y+S.totalAmount,0),O=y.data.filter(Y=>Y.status==="PENDING").length;c({totalOrders:B,completedOrders:P,totalSpent:L,pendingOrders:O})}catch(p){console.error("Failed to fetch orders:",p)}},h=async()=>{try{n(!0);const p=localStorage.getItem("token"),y=await ae.put("/api/profile",o,{headers:{Authorization:`Bearer ${p}`}});r(y.data.user),a(!1),V.success("Profile updated successfully!")}catch(p){V.error(p.response?.data?.error||"Failed to update profile")}finally{n(!1)}},x=()=>{b({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",county:t?.county||""}),a(!1)},w=p=>({PENDING:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",PROCESSING:"bg-indigo-100 text-indigo-800",SHIPPED:"bg-purple-100 text-purple-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[p]||"bg-gray-100 text-gray-800";return e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:I,lineNumber:141,columnNumber:5}},e.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:I,lineNumber:142,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:I,lineNumber:144,columnNumber:9}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:I,lineNumber:145,columnNumber:11}},"My Profile"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:I,lineNumber:146,columnNumber:11}},"Manage your personal information and preferences")),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",__self:this,__source:{fileName:I,lineNumber:151,columnNumber:9}},e.createElement("div",{className:"lg:col-span-2",__self:this,__source:{fileName:I,lineNumber:153,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:I,lineNumber:154,columnNumber:13}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:I,lineNumber:155,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:I,lineNumber:156,columnNumber:17}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:I,lineNumber:157,columnNumber:19}},"Personal Information"),l?e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:I,lineNumber:169,columnNumber:21}},e.createElement("button",{onClick:h,disabled:m,className:"flex items-center text-green-600 hover:text-green-800 disabled:opacity-50",__self:this,__source:{fileName:I,lineNumber:170,columnNumber:23}},e.createElement(Ra,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:I,lineNumber:175,columnNumber:25}}),"Save"),e.createElement("button",{onClick:x,className:"flex items-center text-red-600 hover:text-red-800",__self:this,__source:{fileName:I,lineNumber:178,columnNumber:23}},e.createElement(st,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:I,lineNumber:182,columnNumber:25}}),"Cancel")):e.createElement("button",{onClick:()=>a(!0),className:"flex items-center text-blue-600 hover:text-blue-800",__self:this,__source:{fileName:I,lineNumber:161,columnNumber:21}},e.createElement(Da,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:I,lineNumber:165,columnNumber:23}}),"Edit"))),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:I,lineNumber:190,columnNumber:15}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:I,lineNumber:192,columnNumber:17}},e.createElement("div",{className:"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",__self:this,__source:{fileName:I,lineNumber:193,columnNumber:19}},t?.firstName?.[0],t?.lastName?.[0]),e.createElement("div",{className:"ml-6",__self:this,__source:{fileName:I,lineNumber:197,columnNumber:19}},e.createElement("h3",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:I,lineNumber:198,columnNumber:21}},t?.firstName," ",t?.lastName),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:I,lineNumber:201,columnNumber:21}},t?.role),e.createElement("div",{className:"flex items-center mt-1",__self:this,__source:{fileName:I,lineNumber:202,columnNumber:21}},e.createElement(vt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:I,lineNumber:203,columnNumber:23}}),e.createElement("span",{className:"text-sm text-green-600",__self:this,__source:{fileName:I,lineNumber:204,columnNumber:23}},"Verified Account")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",__self:this,__source:{fileName:I,lineNumber:212,columnNumber:17}},e.createElement("div",{__self:this,__source:{fileName:I,lineNumber:213,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:I,lineNumber:214,columnNumber:21}},e.createElement(Ke,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:I,lineNumber:215,columnNumber:23}}),"First Name"),l?e.createElement("input",{type:"text",value:o.firstName,onChange:p=>b(y=>({...y,firstName:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:I,lineNumber:219,columnNumber:23}}):e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:I,lineNumber:231,columnNumber:23}},t?.firstName)),e.createElement("div",{__self:this,__source:{fileName:I,lineNumber:235,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:I,lineNumber:236,columnNumber:21}},e.createElement(Ke,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:I,lineNumber:237,columnNumber:23}}),"Last Name"),l?e.createElement("input",{type:"text",value:o.lastName,onChange:p=>b(y=>({...y,lastName:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:I,lineNumber:241,columnNumber:23}}):e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:I,lineNumber:253,columnNumber:23}},t?.lastName)),e.createElement("div",{__self:this,__source:{fileName:I,lineNumber:257,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:I,lineNumber:258,columnNumber:21}},e.createElement(es,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:I,lineNumber:259,columnNumber:23}}),"Email Address"),l?e.createElement("input",{type:"email",value:o.email,onChange:p=>b(y=>({...y,email:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:I,lineNumber:263,columnNumber:23}}):e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:I,lineNumber:275,columnNumber:23}},t?.email)),e.createElement("div",{__self:this,__source:{fileName:I,lineNumber:279,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:I,lineNumber:280,columnNumber:21}},e.createElement(Ct,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:I,lineNumber:281,columnNumber:23}}),"Phone Number"),e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:I,lineNumber:284,columnNumber:21}},t?.phone),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:I,lineNumber:285,columnNumber:21}},"Phone number cannot be changed")),e.createElement("div",{__self:this,__source:{fileName:I,lineNumber:290,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:I,lineNumber:291,columnNumber:21}},e.createElement(Nt,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:I,lineNumber:292,columnNumber:23}}),"County"),l?e.createElement("select",{value:o.county,onChange:p=>b(y=>({...y,county:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",__self:this,__source:{fileName:I,lineNumber:296,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:I,lineNumber:306,columnNumber:25}},"Select County"),e.createElement("option",{value:"Nairobi",__self:this,__source:{fileName:I,lineNumber:307,columnNumber:25}},"Nairobi"),e.createElement("option",{value:"Kiambu",__self:this,__source:{fileName:I,lineNumber:308,columnNumber:25}},"Kiambu"),e.createElement("option",{value:"Nakuru",__self:this,__source:{fileName:I,lineNumber:309,columnNumber:25}},"Nakuru"),e.createElement("option",{value:"Mombasa",__self:this,__source:{fileName:I,lineNumber:310,columnNumber:25}},"Mombasa"),e.createElement("option",{value:"Kisumu",__self:this,__source:{fileName:I,lineNumber:311,columnNumber:25}},"Kisumu"),e.createElement("option",{value:"Eldoret",__self:this,__source:{fileName:I,lineNumber:312,columnNumber:25}},"Eldoret"),e.createElement("option",{value:"Thika",__self:this,__source:{fileName:I,lineNumber:313,columnNumber:25}},"Thika"),e.createElement("option",{value:"Nyeri",__self:this,__source:{fileName:I,lineNumber:314,columnNumber:25}},"Nyeri")):e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:I,lineNumber:317,columnNumber:23}},t?.county)),e.createElement("div",{__self:this,__source:{fileName:I,lineNumber:321,columnNumber:19}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:I,lineNumber:322,columnNumber:21}},e.createElement(wt,{className:"w-4 h-4 inline mr-1",__self:this,__source:{fileName:I,lineNumber:323,columnNumber:23}}),"Member Since"),e.createElement("p",{className:"text-gray-900 py-2",__self:this,__source:{fileName:I,lineNumber:326,columnNumber:21}},new Date(t?.createdAt||new Date).toLocaleDateString())))))),e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:I,lineNumber:338,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:I,lineNumber:340,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:I,lineNumber:341,columnNumber:15}},"Account Summary"),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:I,lineNumber:344,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:I,lineNumber:345,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:I,lineNumber:346,columnNumber:19}},e.createElement(ut,{className:"w-5 h-5 text-blue-600 mr-2",__self:this,__source:{fileName:I,lineNumber:347,columnNumber:21}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:I,lineNumber:348,columnNumber:21}},"Total Orders")),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:I,lineNumber:350,columnNumber:19}},u.totalOrders)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:I,lineNumber:355,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:I,lineNumber:356,columnNumber:19}},e.createElement(De,{className:"w-5 h-5 text-yellow-600 mr-2",__self:this,__source:{fileName:I,lineNumber:357,columnNumber:21}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:I,lineNumber:358,columnNumber:21}},"Pending")),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:I,lineNumber:360,columnNumber:19}},u.pendingOrders)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:I,lineNumber:365,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:I,lineNumber:366,columnNumber:19}},e.createElement(Ne,{className:"w-5 h-5 text-green-600 mr-2",__self:this,__source:{fileName:I,lineNumber:367,columnNumber:21}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:I,lineNumber:368,columnNumber:21}},"Completed")),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:I,lineNumber:370,columnNumber:19}},u.completedOrders)),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:I,lineNumber:375,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:I,lineNumber:376,columnNumber:19}},e.createElement(Lt,{className:"w-5 h-5 text-green-600 mr-2",__self:this,__source:{fileName:I,lineNumber:377,columnNumber:21}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:I,lineNumber:378,columnNumber:21}},"Total Spent")),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:I,lineNumber:380,columnNumber:19}},"KES ",u.totalSpent.toLocaleString())))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:I,lineNumber:388,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:I,lineNumber:389,columnNumber:15}},"Quick Actions"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:I,lineNumber:392,columnNumber:15}},e.createElement("button",{onClick:()=>s("/marketplace"),className:"w-full flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",__self:this,__source:{fileName:I,lineNumber:393,columnNumber:17}},e.createElement(ut,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:I,lineNumber:397,columnNumber:19}}),"Browse Marketplace"),e.createElement("button",{onClick:()=>s("/customer/orders"),className:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",__self:this,__source:{fileName:I,lineNumber:401,columnNumber:17}},e.createElement(Ne,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:I,lineNumber:405,columnNumber:19}}),"View Order History"),e.createElement("button",{onClick:()=>s("/cart"),className:"w-full flex items-center justify-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",__self:this,__source:{fileName:I,lineNumber:409,columnNumber:17}},e.createElement(ut,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:I,lineNumber:413,columnNumber:19}}),"View Cart"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:I,lineNumber:420,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between mb-4",__self:this,__source:{fileName:I,lineNumber:421,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:I,lineNumber:422,columnNumber:17}},"Recent Orders"),e.createElement("button",{onClick:()=>s("/customer/orders"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",__self:this,__source:{fileName:I,lineNumber:425,columnNumber:17}},"View All")),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:I,lineNumber:432,columnNumber:15}},i.slice(0,3).map(p=>e.createElement("div",{key:p.id,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",__self:this,__source:{fileName:I,lineNumber:434,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:I,lineNumber:438,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:I,lineNumber:439,columnNumber:23}},"Order #",p.id.slice(-6)),e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:I,lineNumber:442,columnNumber:23}},new Date(p.orderDate).toLocaleDateString())),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:I,lineNumber:446,columnNumber:21}},e.createElement("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${w(p.status)}`,__self:this,__source:{fileName:I,lineNumber:447,columnNumber:23}},p.status),e.createElement("p",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:I,lineNumber:452,columnNumber:23}},"KES ",p.totalAmount.toLocaleString())))),i.length===0&&e.createElement("div",{className:"text-center py-4",__self:this,__source:{fileName:I,lineNumber:459,columnNumber:19}},e.createElement(Ne,{className:"w-8 h-8 text-gray-400 mx-auto mb-2",__self:this,__source:{fileName:I,lineNumber:460,columnNumber:21}}),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:I,lineNumber:461,columnNumber:21}},"No orders yet"),e.createElement("button",{onClick:()=>s("/marketplace"),className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium",__self:this,__source:{fileName:I,lineNumber:462,columnNumber:21}},"Start Shopping"))))))))}var q="/app/code/frontend/src/pages/customer/OrderHistoryPage.tsx";function fu(){const{user:t}=xe(),[r,s]=T.useState([]),[l,a]=T.useState(!0),[m,n]=T.useState(null);T.useEffect(()=>{i()},[]);const i=async()=>{try{a(!0);const o=localStorage.getItem("token"),b=await ae.get("/api/orders",{headers:{Authorization:`Bearer ${o}`}});s(b.data)}catch(o){console.error("Failed to fetch orders:",o),V.error("Failed to load orders")}finally{a(!1)}},_=o=>({PENDING:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",PROCESSING:"bg-indigo-100 text-indigo-800",SHIPPED:"bg-purple-100 text-purple-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",u=o=>{const g={PENDING:De,CONFIRMED:Ne,PROCESSING:Ne,SHIPPED:ve,DELIVERED:Pe,CANCELLED:st}[o]||Ne;return e.createElement(g,{className:"w-4 h-4",__self:this,__source:{fileName:q,lineNumber:94,columnNumber:12}})},c=o=>({PENDING:"bg-yellow-100 text-yellow-800",COMPLETED:"bg-green-100 text-green-800",FAILED:"bg-red-100 text-red-800",CANCELLED:"bg-gray-100 text-gray-800"})[o]||"bg-gray-100 text-gray-800";return l?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:q,lineNumber:109,columnNumber:7}},e.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600",__self:this,__source:{fileName:q,lineNumber:110,columnNumber:9}})):e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:q,lineNumber:116,columnNumber:5}},e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:q,lineNumber:117,columnNumber:7}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:q,lineNumber:119,columnNumber:9}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:q,lineNumber:120,columnNumber:11}},"Order History"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:q,lineNumber:121,columnNumber:11}},"Track and manage your orders")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:q,lineNumber:125,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:q,lineNumber:126,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:q,lineNumber:127,columnNumber:13}},e.createElement(Ne,{className:"w-8 h-8 text-blue-600",__self:this,__source:{fileName:q,lineNumber:128,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:q,lineNumber:129,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:q,lineNumber:130,columnNumber:17}},"Total Orders"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:q,lineNumber:133,columnNumber:17}},r.length)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:q,lineNumber:140,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:q,lineNumber:141,columnNumber:13}},e.createElement(De,{className:"w-8 h-8 text-yellow-600",__self:this,__source:{fileName:q,lineNumber:142,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:q,lineNumber:143,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:q,lineNumber:144,columnNumber:17}},"Pending"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:q,lineNumber:145,columnNumber:17}},r.filter(o=>o.status==="PENDING").length)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:q,lineNumber:152,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:q,lineNumber:153,columnNumber:13}},e.createElement(Pe,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:q,lineNumber:154,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:q,lineNumber:155,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:q,lineNumber:156,columnNumber:17}},"Delivered"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:q,lineNumber:157,columnNumber:17}},r.filter(o=>o.status==="DELIVERED").length)))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",__self:this,__source:{fileName:q,lineNumber:164,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:q,lineNumber:165,columnNumber:13}},e.createElement(Lt,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:q,lineNumber:166,columnNumber:15}}),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:q,lineNumber:167,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-500",__self:this,__source:{fileName:q,lineNumber:168,columnNumber:17}},"Total Spent"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:q,lineNumber:169,columnNumber:17}},"KES"," ",r.filter(o=>o.paymentStatus==="COMPLETED").reduce((o,b)=>o+b.totalAmount,0).toLocaleString()))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:q,lineNumber:182,columnNumber:9}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:q,lineNumber:183,columnNumber:11}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:q,lineNumber:184,columnNumber:13}},"All Orders")),r.length===0?e.createElement("div",{className:"p-12 text-center",__self:this,__source:{fileName:q,lineNumber:188,columnNumber:13}},e.createElement(Ne,{className:"w-16 h-16 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:q,lineNumber:189,columnNumber:15}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:q,lineNumber:190,columnNumber:15}},"No orders yet"),e.createElement("p",{className:"text-gray-500 mb-6",__self:this,__source:{fileName:q,lineNumber:193,columnNumber:15}},"Start shopping to see your orders here"),e.createElement("button",{onClick:()=>window.location.href="/marketplace",className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700",__self:this,__source:{fileName:q,lineNumber:196,columnNumber:15}},"Browse Marketplace")):e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:q,lineNumber:204,columnNumber:13}},r.map(o=>e.createElement("div",{key:o.id,className:"p-6",__self:this,__source:{fileName:q,lineNumber:206,columnNumber:17}},e.createElement("div",{className:"flex items-center justify-between mb-4",__self:this,__source:{fileName:q,lineNumber:207,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:q,lineNumber:208,columnNumber:21}},e.createElement("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",__self:this,__source:{fileName:q,lineNumber:209,columnNumber:23}},o.items[0]?.product?.images?.[0]?e.createElement("img",{src:o.items[0].product.images[0],alt:o.items[0].product.name,className:"w-12 h-12 rounded-lg object-cover",__self:this,__source:{fileName:q,lineNumber:211,columnNumber:27}}):e.createElement(Ne,{className:"w-6 h-6 text-gray-400",__self:this,__source:{fileName:q,lineNumber:217,columnNumber:27}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:q,lineNumber:220,columnNumber:23}},e.createElement("h3",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:q,lineNumber:221,columnNumber:25}},"Order #",o.id.slice(-8)),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:q,lineNumber:224,columnNumber:25}},o.items.length," item",o.items.length>1?"s":""," • KES"," ",o.totalAmount.toLocaleString()))),e.createElement("div",{className:"flex items-center space-x-3",__self:this,__source:{fileName:q,lineNumber:232,columnNumber:21}},e.createElement("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_(o.status)}`,__self:this,__source:{fileName:q,lineNumber:233,columnNumber:23}},u(o.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:q,lineNumber:237,columnNumber:25}},o.status)),e.createElement("button",{onClick:()=>n(o),className:"text-blue-600 hover:text-blue-800 font-medium text-sm flex items-center",__self:this,__source:{fileName:q,lineNumber:239,columnNumber:23}},e.createElement(ot,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:q,lineNumber:243,columnNumber:25}}),"View Details"))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",__self:this,__source:{fileName:q,lineNumber:249,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:q,lineNumber:250,columnNumber:21}},e.createElement(wt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:q,lineNumber:251,columnNumber:23}}),"Ordered: ",new Date(o.orderDate).toLocaleDateString()),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:q,lineNumber:254,columnNumber:21}},e.createElement(Lt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:q,lineNumber:255,columnNumber:23}}),"Payment:"," ",e.createElement("span",{className:`ml-1 px-2 py-0.5 rounded text-xs ${c(o.paymentStatus)}`,__self:this,__source:{fileName:q,lineNumber:257,columnNumber:23}},o.paymentStatus)),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:q,lineNumber:263,columnNumber:21}},e.createElement(ve,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:q,lineNumber:264,columnNumber:23}}),"Method: ",o.paymentMethod)),o.status==="SHIPPED"||o.status==="DELIVERED"?e.createElement("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",__self:this,__source:{fileName:q,lineNumber:271,columnNumber:21}},e.createElement("p",{className:"text-sm text-green-800",__self:this,__source:{fileName:q,lineNumber:272,columnNumber:23}},o.status==="DELIVERED"?"Order delivered successfully!":"Your order is on the way!")):null)))),m&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:q,lineNumber:287,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",__self:this,__source:{fileName:q,lineNumber:288,columnNumber:13}},e.createElement("div",{className:"px-6 py-4 border-b border-gray-200",__self:this,__source:{fileName:q,lineNumber:289,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:q,lineNumber:290,columnNumber:17}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:q,lineNumber:291,columnNumber:19}},"Order Details #",m.id.slice(-8)),e.createElement("button",{onClick:()=>n(null),className:"text-gray-500 hover:text-gray-700",__self:this,__source:{fileName:q,lineNumber:294,columnNumber:19}},e.createElement(st,{className:"w-6 h-6",__self:this,__source:{fileName:q,lineNumber:298,columnNumber:21}})))),e.createElement("div",{className:"p-6 space-y-6",__self:this,__source:{fileName:q,lineNumber:303,columnNumber:15}},e.createElement("div",{__self:this,__source:{fileName:q,lineNumber:305,columnNumber:17}},e.createElement("h4",{className:"font-medium text-gray-900 mb-2",__self:this,__source:{fileName:q,lineNumber:306,columnNumber:19}},"Order Status"),e.createElement("div",{className:"flex items-center space-x-4",__self:this,__source:{fileName:q,lineNumber:309,columnNumber:19}},e.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${_(m.status)}`,__self:this,__source:{fileName:q,lineNumber:310,columnNumber:21}},u(m.status),e.createElement("span",{className:"ml-1",__self:this,__source:{fileName:q,lineNumber:314,columnNumber:23}},m.status)),e.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${c(m.paymentStatus)}`,__self:this,__source:{fileName:q,lineNumber:316,columnNumber:21}},m.paymentStatus))),e.createElement("div",{__self:this,__source:{fileName:q,lineNumber:325,columnNumber:17}},e.createElement("h4",{className:"font-medium text-gray-900 mb-2",__self:this,__source:{fileName:q,lineNumber:326,columnNumber:19}},"Items Ordered"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:q,lineNumber:329,columnNumber:19}},m.items.map(o=>e.createElement("div",{key:o.id,className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",__self:this,__source:{fileName:q,lineNumber:331,columnNumber:23}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:q,lineNumber:335,columnNumber:25}},e.createElement("img",{src:o.product.images[0]||"/placeholder.jpg",alt:o.product.name,className:"w-12 h-12 rounded-lg object-cover",__self:this,__source:{fileName:q,lineNumber:336,columnNumber:27}}),e.createElement("div",{className:"ml-3",__self:this,__source:{fileName:q,lineNumber:341,columnNumber:27}},e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:q,lineNumber:342,columnNumber:29}},o.product.name),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:q,lineNumber:345,columnNumber:29}},o.quantity," ",o.product.unit," × KES"," ",o.pricePerUnit))),e.createElement("p",{className:"font-medium text-gray-900",__self:this,__source:{fileName:q,lineNumber:351,columnNumber:25}},"KES ",o.totalPrice.toLocaleString()))))),e.createElement("div",{__self:this,__source:{fileName:q,lineNumber:360,columnNumber:17}},e.createElement("h4",{className:"font-medium text-gray-900 mb-2",__self:this,__source:{fileName:q,lineNumber:361,columnNumber:19}},"Delivery Information"),e.createElement("div",{className:"space-y-2 text-sm text-gray-600",__self:this,__source:{fileName:q,lineNumber:364,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:q,lineNumber:365,columnNumber:21}},e.createElement(Nt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:q,lineNumber:366,columnNumber:23}}),m.deliveryAddress),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:q,lineNumber:369,columnNumber:21}},e.createElement(Ct,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:q,lineNumber:370,columnNumber:23}}),m.deliveryPhone),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:q,lineNumber:373,columnNumber:21}},e.createElement(wt,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:q,lineNumber:374,columnNumber:23}}),"Expected:"," ",new Date(m.estimatedDelivery).toLocaleDateString()))),e.createElement("div",{className:"border-t pt-4",__self:this,__source:{fileName:q,lineNumber:384,columnNumber:17}},e.createElement("div",{className:"flex justify-between items-center",__self:this,__source:{fileName:q,lineNumber:385,columnNumber:19}},e.createElement("span",{className:"text-lg font-medium text-gray-900",__self:this,__source:{fileName:q,lineNumber:386,columnNumber:21}},"Total Amount"),e.createElement("span",{className:"text-lg font-bold text-gray-900",__self:this,__source:{fileName:q,lineNumber:389,columnNumber:21}},"KES ",m.totalAmount.toLocaleString())),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:q,lineNumber:393,columnNumber:19}},"Payment via ",m.paymentMethod)))))))}var H="/app/code/frontend/src/pages/cart/CartPage.tsx";function bu(){const{cart:t,updateQuantity:r,removeFromCart:s,clearCart:l,refreshCart:a}=kt(),{user:m,isAuthenticated:n}=xe();et();const[i,_]=T.useState(null),[u,c]=T.useState(""),[o,b]=T.useState(null);T.useEffect(()=>{a()},[a]);const g=async(N,J)=>{if(!(J<0)){_(N);try{J===0?s(N):r(N,J)}catch{}finally{_(null)}}},h=async N=>{if(window.confirm("Are you sure you want to remove this item from your cart?"))try{s(N)}catch{}},x=async()=>{if(window.confirm("Are you sure you want to clear your entire cart?"))try{await l()}catch{}},w=()=>{u.toLowerCase()==="first10"?(b({code:"FIRST10",discount:10,type:"percentage"}),V.success("Coupon applied successfully!"),c("")):u.toLowerCase()==="save100"?(b({code:"SAVE100",discount:100,type:"fixed"}),V.success("Coupon applied successfully!"),c("")):V.error("Invalid coupon code")},p=()=>{b(null),V.success("Coupon removed")},y=N=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(N),B=N=>o?o.type==="percentage"?N*o.discount/100:Math.min(o.discount,N):0,P=N=>N>=1e3?0:150;if(!t||t.items.length===0)return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:H,lineNumber:171,columnNumber:7}},e.createElement("div",{className:"text-center py-16",__self:this,__source:{fileName:H,lineNumber:172,columnNumber:9}},e.createElement(ut,{className:"w-24 h-24 text-gray-300 mx-auto mb-6",__self:this,__source:{fileName:H,lineNumber:173,columnNumber:11}}),e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:H,lineNumber:174,columnNumber:11}},"Your cart is empty"),e.createElement("p",{className:"text-gray-600 mb-8",__self:this,__source:{fileName:H,lineNumber:177,columnNumber:11}},"Looks like you haven't added any items to your cart yet."),e.createElement(_e,{to:"/marketplace",className:"bg-primary-600 text-white px-8 py-3 rounded-lg hover:bg-primary-700 transition-colors font-medium inline-flex items-center",__self:this,__source:{fileName:H,lineNumber:180,columnNumber:11}},e.createElement(ut,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:H,lineNumber:184,columnNumber:13}}),"Start Shopping")));const L=t.totalAmount,O=B(L),Y=L-O,S=P(Y),Z=Y+S;return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:H,lineNumber:199,columnNumber:5}},e.createElement("div",{className:"flex items-center justify-between mb-8",__self:this,__source:{fileName:H,lineNumber:201,columnNumber:7}},e.createElement("div",{__self:this,__source:{fileName:H,lineNumber:202,columnNumber:9}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:H,lineNumber:203,columnNumber:11}},"Shopping Cart"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:H,lineNumber:204,columnNumber:11}},t.totalItems," ",t.totalItems===1?"item":"items"," in your cart")),t.items.length>0&&e.createElement("button",{onClick:x,className:"text-red-600 hover:text-red-700 text-sm font-medium",__self:this,__source:{fileName:H,lineNumber:211,columnNumber:11}},"Clear Cart")),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",__self:this,__source:{fileName:H,lineNumber:220,columnNumber:7}},e.createElement("div",{className:"lg:col-span-2",__self:this,__source:{fileName:H,lineNumber:222,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border",__self:this,__source:{fileName:H,lineNumber:223,columnNumber:11}},e.createElement("div",{className:"p-6",__self:this,__source:{fileName:H,lineNumber:224,columnNumber:13}},e.createElement("div",{className:"space-y-6",__self:this,__source:{fileName:H,lineNumber:225,columnNumber:15}},t.items.map(N=>e.createElement("div",{key:N.id,className:"flex items-start space-x-4 pb-6 border-b border-gray-200 last:border-b-0 last:pb-0",__self:this,__source:{fileName:H,lineNumber:227,columnNumber:19}},e.createElement("div",{className:"flex-shrink-0",__self:this,__source:{fileName:H,lineNumber:232,columnNumber:21}},e.createElement("div",{className:"w-20 h-20 bg-gray-200 rounded-lg overflow-hidden",__self:this,__source:{fileName:H,lineNumber:233,columnNumber:23}},N.images&&N.images.length>0?e.createElement("img",{src:N.images[0],alt:N.name,className:"w-full h-full object-cover",onError:J=>{J.currentTarget.src="/api/placeholder/80/80?text="+encodeURIComponent(N.name)},__self:this,__source:{fileName:H,lineNumber:235,columnNumber:27}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",__self:this,__source:{fileName:H,lineNumber:246,columnNumber:27}},"📦"))),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:H,lineNumber:254,columnNumber:21}},e.createElement("div",{className:"flex items-start justify-between",__self:this,__source:{fileName:H,lineNumber:255,columnNumber:23}},e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:H,lineNumber:256,columnNumber:25}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-1",__self:this,__source:{fileName:H,lineNumber:257,columnNumber:27}},e.createElement(_e,{to:`/marketplace/product/${N.productId}`,className:"hover:text-primary-600 transition-colors",__self:this,__source:{fileName:H,lineNumber:258,columnNumber:29}},N.name)),e.createElement("div",{className:"flex items-center text-sm text-gray-600 mb-2",__self:this,__source:{fileName:H,lineNumber:266,columnNumber:27}},e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:267,columnNumber:29}},"Fresh Produce")),e.createElement("div",{className:"flex items-center space-x-4 mb-3",__self:this,__source:{fileName:H,lineNumber:270,columnNumber:27}},e.createElement("span",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:H,lineNumber:271,columnNumber:29}},y(N.pricePerUnit)," / ",N.unit))),e.createElement("div",{className:"flex flex-col items-end space-y-2 ml-4",__self:this,__source:{fileName:H,lineNumber:278,columnNumber:25}},e.createElement("button",{onClick:()=>h(N.id),className:"text-gray-400 hover:text-red-500 transition-colors",title:"Remove item",__self:this,__source:{fileName:H,lineNumber:279,columnNumber:27}},e.createElement(Fa,{className:"w-5 h-5",__self:this,__source:{fileName:H,lineNumber:284,columnNumber:29}})),e.createElement("button",{className:"text-gray-400 hover:text-red-500 transition-colors",__self:this,__source:{fileName:H,lineNumber:287,columnNumber:27}},e.createElement(Zr,{className:"w-5 h-5",__self:this,__source:{fileName:H,lineNumber:288,columnNumber:29}})))),e.createElement("div",{className:"flex items-center justify-between mt-4",__self:this,__source:{fileName:H,lineNumber:294,columnNumber:23}},e.createElement("div",{className:"flex items-center border border-gray-300 rounded-lg",__self:this,__source:{fileName:H,lineNumber:295,columnNumber:25}},e.createElement("button",{onClick:()=>g(N.id,N.quantity-1),disabled:i===N.id||N.quantity<=1,className:"p-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:H,lineNumber:296,columnNumber:27}},e.createElement(Ta,{className:"w-4 h-4",__self:this,__source:{fileName:H,lineNumber:305,columnNumber:29}})),e.createElement("input",{type:"number",min:"1",max:999,value:N.quantity,onChange:J=>{const re=parseInt(J.target.value)||1;re!==N.quantity&&g(N.id,re)},className:"w-16 px-2 py-2 text-center border-0 focus:ring-0",disabled:i===N.id,__self:this,__source:{fileName:H,lineNumber:308,columnNumber:27}}),e.createElement("button",{onClick:()=>g(N.id,N.quantity+1),disabled:i===N.id,className:"p-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",__self:this,__source:{fileName:H,lineNumber:323,columnNumber:27}},e.createElement(nr,{className:"w-4 h-4",__self:this,__source:{fileName:H,lineNumber:330,columnNumber:29}}))),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:H,lineNumber:334,columnNumber:25}},e.createElement("div",{className:"text-lg font-bold text-gray-900",__self:this,__source:{fileName:H,lineNumber:335,columnNumber:27}},y((N.pricePerUnit||0)*(N.quantity||0))),N.quantity>1&&e.createElement("div",{className:"text-sm text-gray-600",__self:this,__source:{fileName:H,lineNumber:341,columnNumber:29}},N.quantity," ×"," ",y(N.pricePerUnit||0)))),i===N.id&&e.createElement("div",{className:"mt-2 text-sm text-primary-600",__self:this,__source:{fileName:H,lineNumber:350,columnNumber:25}},"Updating..."))))))),e.createElement("div",{className:"mt-6",__self:this,__source:{fileName:H,lineNumber:362,columnNumber:11}},e.createElement(_e,{to:"/marketplace",className:"text-primary-600 hover:text-primary-700 font-medium inline-flex items-center",__self:this,__source:{fileName:H,lineNumber:363,columnNumber:13}},"← Continue Shopping"))),e.createElement("div",{__self:this,__source:{fileName:H,lineNumber:373,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6 sticky top-6",__self:this,__source:{fileName:H,lineNumber:374,columnNumber:11}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:H,lineNumber:375,columnNumber:13}},"Order Summary"),e.createElement("div",{className:"space-y-3 mb-6",__self:this,__source:{fileName:H,lineNumber:379,columnNumber:13}},e.createElement("div",{className:"flex justify-between text-gray-600",__self:this,__source:{fileName:H,lineNumber:380,columnNumber:15}},e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:381,columnNumber:17}},"Subtotal (",t.totalItems," items)"),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:382,columnNumber:17}},y(L))),o&&e.createElement("div",{className:"flex justify-between text-green-600",__self:this,__source:{fileName:H,lineNumber:386,columnNumber:17}},e.createElement("span",{className:"flex items-center",__self:this,__source:{fileName:H,lineNumber:387,columnNumber:19}},e.createElement(_l,{className:"w-4 h-4 mr-1",__self:this,__source:{fileName:H,lineNumber:388,columnNumber:21}}),o.code,e.createElement("button",{onClick:p,className:"ml-2 text-red-500 hover:text-red-700",__self:this,__source:{fileName:H,lineNumber:390,columnNumber:21}},"×")),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:397,columnNumber:19}},"-",y(O))),e.createElement("div",{className:"flex justify-between text-gray-600",__self:this,__source:{fileName:H,lineNumber:401,columnNumber:15}},e.createElement("span",{className:"flex items-center",__self:this,__source:{fileName:H,lineNumber:402,columnNumber:17}},"Delivery Fee",S===0&&e.createElement("span",{className:"ml-2 text-green-600 text-sm",__self:this,__source:{fileName:H,lineNumber:405,columnNumber:21}},"(Free)")),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:408,columnNumber:17}},y(S))),e.createElement("div",{className:"border-t border-gray-200 pt-3",__self:this,__source:{fileName:H,lineNumber:411,columnNumber:15}},e.createElement("div",{className:"flex justify-between text-lg font-semibold text-gray-900",__self:this,__source:{fileName:H,lineNumber:412,columnNumber:17}},e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:413,columnNumber:19}},"Total"),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:414,columnNumber:19}},y(Z))))),e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:H,lineNumber:420,columnNumber:13}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:H,lineNumber:421,columnNumber:15}},"Coupon Code"),e.createElement("div",{className:"flex space-x-2",__self:this,__source:{fileName:H,lineNumber:424,columnNumber:15}},e.createElement("input",{type:"text",placeholder:"Enter coupon code",value:u,onChange:N=>c(N.target.value),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",__self:this,__source:{fileName:H,lineNumber:425,columnNumber:17}}),e.createElement("button",{onClick:w,disabled:!u.trim(),className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",__self:this,__source:{fileName:H,lineNumber:432,columnNumber:17}},"Apply")),e.createElement("p",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:H,lineNumber:440,columnNumber:15}},"Try: FIRST10 (10% off) or SAVE100 (KES 100 off)")),e.createElement("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",__self:this,__source:{fileName:H,lineNumber:446,columnNumber:13}},e.createElement("div",{className:"flex items-center text-sm text-gray-600 mb-2",__self:this,__source:{fileName:H,lineNumber:447,columnNumber:15}},e.createElement(De,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:H,lineNumber:448,columnNumber:17}}),e.createElement("span",{__self:this,__source:{fileName:H,lineNumber:449,columnNumber:17}},"Estimated delivery: 1-2 business days")),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:H,lineNumber:451,columnNumber:15}},S===0?"🎉 You qualify for free delivery!":`Spend ${y(1e3-Y)} more for free delivery`)),e.createElement(_e,{to:"/checkout",className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg hover:bg-primary-700 transition-colors font-medium inline-flex items-center justify-center",__self:this,__source:{fileName:H,lineNumber:459,columnNumber:13}},"Proceed to Checkout",e.createElement(ts,{className:"w-5 h-5 ml-2",__self:this,__source:{fileName:H,lineNumber:464,columnNumber:15}})),e.createElement("div",{className:"mt-4 text-center",__self:this,__source:{fileName:H,lineNumber:468,columnNumber:13}},e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:H,lineNumber:469,columnNumber:15}},"🔒 Secure checkout powered by M-Pesa"))))))}const mr=t=>{const r=t.replace(/[\s\-\(\)]/g,"");return r.startsWith("+254")?r.substring(1):r.startsWith("254")?r:r.startsWith("0")?"254"+r.substring(1):r.length===9&&(r.startsWith("7")||r.startsWith("1"))?"254"+r:r},Jr=t=>{const r=mr(t);return/^254[71]\d{8}$/.test(r)},du=async(t,r=30,s=2e3)=>{for(let l=0;l<r;l++)try{const m=await(await fetch(`/api/payments/status/${t}`)).json();if(m.status==="COMPLETED")return{success:!0,status:"COMPLETED",data:m};if(m.status==="FAILED"||m.status==="CANCELLED")return{success:!1,status:m.status,data:m};await new Promise(n=>setTimeout(n,s))}catch(a){console.error("Error polling payment status:",a)}return{success:!1,status:"TIMEOUT"}};var E="/app/code/frontend/src/pages/checkout/CheckoutPage.tsx";const hu=["Nairobi","Mombasa","Kiambu","Nakuru","Machakos","Kajiado","Murang'a","Nyeri","Meru","Embu","Tharaka-Nithi","Kirinyaga","Nyandarua","Laikipia","Samburu","Trans-Nzoia","Uasin-Gishu","Elgeyo-Marakwet","Nandi","Baringo","Kericho","Bomet","Kakamega","Vihiga","Bungoma","Busia","Siaya","Kisumu","Homa Bay","Migori","Kisii","Nyamira","Narok","Turkana","West Pokot","Isiolo","Marsabit","Mandera","Wajir","Garissa","Tana River","Lamu","Taita-Taveta","Kwale","Kilifi"];function gu(){const t=et(),{cart:r,clearCart:s}=kt(),{user:l,isAuthenticated:a,loginWithData:m}=xe(),[n,i]=T.useState(null),[_,u]=T.useState(!0),[c,o]=T.useState(!1),[b,g]=T.useState(1),[h,x]=T.useState(null),{register:w,handleSubmit:p,watch:y,setValue:B,formState:{errors:P}}=ma({defaultValues:{firstName:l?.firstName||"",lastName:l?.lastName||"",phone:l?.phone||"",email:l?.email||"",paymentMethod:"MPESA",mpesaPhone:l?.phone||"",createAccount:!a,password:""}}),L=y("paymentMethod");y("county");const O=y("createAccount");T.useEffect(()=>{Y()},[]);const Y=async()=>{try{u(!0);const N=r.totalAmount>2e3?0:300,J={items:r.items,totalItems:r.totalItems,totalAmount:r.totalAmount,isReadyForCheckout:r.items.length>0,deliveryFee:N,subtotal:r.totalAmount,total:r.totalAmount+N,grandTotal:r.totalAmount+N,unavailableItems:[]};if(i(J),r.totalItems===0){V.error("Your cart is empty"),t("/marketplace");return}}catch(N){console.error("Failed to load cart summary:",N),V.error("Failed to load cart summary"),t("/cart")}finally{u(!1)}},S=async N=>{if(n){o(!0);try{const J={items:n.items.map(se=>({productId:se.productId,quantity:se.quantity,price:se.pricePerUnit})),customerInfo:{firstName:N.firstName,lastName:N.lastName,phone:N.phone,email:N.email,address:`${N.street}, ${N.ward}, ${N.subCounty}, ${N.county}`,county:N.county,buildingName:N.buildingName,deliveryInstructions:N.deliveryInstructions},paymentMethod:N.paymentMethod,mpesaPhone:N.paymentMethod==="MPESA"?N.mpesaPhone:void 0,deliveryFee:n.deliveryFee,totalAmount:n.grandTotal},re=await ae.post("/api/orders",J);if(x(re.data),N.paymentMethod==="MPESA"&&N.mpesaPhone)try{const se=mr(N.mpesaPhone);if(!Jr(se)){V.error("Please enter a valid Kenyan phone number");return}V("Initiating M-Pesa payment...",{icon:"ℹ️"});const ue=await ae.post("/api/payments/stk-push",{phone:se,amount:n.grandTotal,orderId:re.data.orderId,accountReference:`Order-${re.data.orderId}`,transactionDesc:`Payment for order ${re.data.orderId}`});if(ue.data.success){V.success("M-Pesa payment request sent! Please check your phone.");try{V("Waiting for payment confirmation...",{icon:"ℹ️"});const fe=await du(ue.data.transactionId);fe.success?V.success("Payment completed successfully!"):V.error(`Payment ${fe.status.toLowerCase()}. Please try again.`)}catch(fe){console.error("Payment polling error:",fe),V("Payment initiated. Status will be updated shortly.",{icon:"⚠️"})}}else V.error("Failed to initiate M-Pesa payment")}catch(se){console.error("M-Pesa STK push error:",se),V.error("Failed to process M-Pesa payment")}if(!a&&N.createAccount&&N.password)try{const se={firstName:N.firstName,lastName:N.lastName,phone:N.phone,email:N.email,password:N.password,county:N.county,role:"CUSTOMER"},ue=await ae.post("/api/auth/register",se);if(ue.data.success){const{user:fe,token:he}=ue.data;m(fe,he),V.success("Account created and logged in successfully!")}}catch(se){console.error("Failed to create account:",se),V.error("Order placed successfully, but failed to create account. You can register later.")}await s(),g(4),V.success("Order placed successfully!")}catch(J){console.error("Failed to create order:",J);const re=J.response?.data?.error||"Failed to place order";V.error(re)}finally{o(!1)}}},Z=N=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(N);return _?e.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:E,lineNumber:325,columnNumber:7}},e.createElement("div",{className:"animate-pulse",__self:this,__source:{fileName:E,lineNumber:326,columnNumber:9}},e.createElement("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8",__self:this,__source:{fileName:E,lineNumber:327,columnNumber:11}}),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",__self:this,__source:{fileName:E,lineNumber:328,columnNumber:11}},e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:E,lineNumber:329,columnNumber:13}},e.createElement("div",{className:"h-32 bg-gray-200 rounded-lg",__self:this,__source:{fileName:E,lineNumber:330,columnNumber:15}}),e.createElement("div",{className:"h-48 bg-gray-200 rounded-lg",__self:this,__source:{fileName:E,lineNumber:331,columnNumber:15}})),e.createElement("div",{className:"h-64 bg-gray-200 rounded-lg",__self:this,__source:{fileName:E,lineNumber:333,columnNumber:13}})))):!n||n.totalItems===0?e.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:E,lineNumber:342,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:E,lineNumber:343,columnNumber:9}},e.createElement(ut,{className:"w-16 h-16 text-gray-300 mx-auto mb-4",__self:this,__source:{fileName:E,lineNumber:344,columnNumber:11}}),e.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2",__self:this,__source:{fileName:E,lineNumber:345,columnNumber:11}},"No items to checkout"),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:E,lineNumber:348,columnNumber:11}},"Your cart is empty or items are unavailable"),e.createElement("button",{onClick:()=>t("/marketplace"),className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:E,lineNumber:351,columnNumber:11}},"Continue Shopping"))):e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:E,lineNumber:363,columnNumber:5}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:E,lineNumber:365,columnNumber:7}},e.createElement("button",{onClick:()=>t("/cart"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",__self:this,__source:{fileName:E,lineNumber:366,columnNumber:9}},e.createElement(It,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:E,lineNumber:370,columnNumber:11}}),"Back to Cart"),e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:E,lineNumber:374,columnNumber:9}},"Checkout"),e.createElement("div",{className:"mt-6",__self:this,__source:{fileName:E,lineNumber:377,columnNumber:9}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:E,lineNumber:378,columnNumber:11}},[{step:1,title:"Information"},{step:2,title:"Review"},{step:3,title:"Payment"},{step:4,title:"Confirmation"}].map((N,J)=>e.createElement(e.Fragment,{key:N.step,__self:this,__source:{fileName:E,lineNumber:385,columnNumber:15}},e.createElement("div",{className:`flex items-center ${b>=N.step?"text-primary-600":"text-gray-400"}`,__self:this,__source:{fileName:E,lineNumber:386,columnNumber:17}},e.createElement("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${b>=N.step?"border-primary-600 bg-primary-600 text-white":"border-gray-300"}`,__self:this,__source:{fileName:E,lineNumber:391,columnNumber:19}},b>N.step?e.createElement(Jt,{className:"w-4 h-4",__self:this,__source:{fileName:E,lineNumber:399,columnNumber:23}}):N.step),e.createElement("span",{className:"ml-2 text-sm font-medium",__self:this,__source:{fileName:E,lineNumber:404,columnNumber:19}},N.title)),J<3&&e.createElement("div",{className:`flex-1 h-0.5 mx-4 ${b>N.step?"bg-primary-600":"bg-gray-200"}`,__self:this,__source:{fileName:E,lineNumber:407,columnNumber:19}})))))),b===4?e.createElement("div",{className:"max-w-2xl mx-auto",__self:this,__source:{fileName:E,lineNumber:421,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-8 text-center",__self:this,__source:{fileName:E,lineNumber:422,columnNumber:11}},e.createElement("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",__self:this,__source:{fileName:E,lineNumber:423,columnNumber:13}},e.createElement(Jt,{className:"w-8 h-8 text-green-600",__self:this,__source:{fileName:E,lineNumber:424,columnNumber:15}})),e.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:E,lineNumber:427,columnNumber:13}},"Order Placed Successfully!"),h&&e.createElement("div",{className:"mb-6",__self:this,__source:{fileName:E,lineNumber:432,columnNumber:15}},e.createElement("p",{className:"text-gray-600 mb-2",__self:this,__source:{fileName:E,lineNumber:433,columnNumber:17}},"Order Number:"),e.createElement("p",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:E,lineNumber:434,columnNumber:17}},h.order?.orderNumber||h.order?.id),e.createElement("p",{className:"text-gray-600 mb-2",__self:this,__source:{fileName:E,lineNumber:438,columnNumber:17}},"Total Amount:"),e.createElement("p",{className:"text-2xl font-bold text-primary-600 mb-6",__self:this,__source:{fileName:E,lineNumber:439,columnNumber:17}},Z(n.grandTotal)),e.createElement("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",__self:this,__source:{fileName:E,lineNumber:443,columnNumber:17}},e.createElement("div",{className:"flex items-center text-blue-700 mb-2",__self:this,__source:{fileName:E,lineNumber:444,columnNumber:19}},e.createElement(De,{className:"w-5 h-5 mr-2",__self:this,__source:{fileName:E,lineNumber:445,columnNumber:21}}),e.createElement("span",{className:"font-medium",__self:this,__source:{fileName:E,lineNumber:446,columnNumber:21}},"Estimated Delivery")),e.createElement("p",{className:"text-blue-600",__self:this,__source:{fileName:E,lineNumber:448,columnNumber:19}},"1-2 business days"))),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:E,lineNumber:453,columnNumber:13}},e.createElement("button",{onClick:()=>t("/customer/dashboard"),className:"w-full bg-primary-600 text-white py-3 px-6 rounded-lg hover:bg-primary-700 transition-colors font-medium",__self:this,__source:{fileName:E,lineNumber:454,columnNumber:15}},"View Order Status"),e.createElement("button",{onClick:()=>t("/marketplace"),className:"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-200 transition-colors font-medium",__self:this,__source:{fileName:E,lineNumber:461,columnNumber:15}},"Continue Shopping")))):e.createElement("form",{onSubmit:p(S),__self:this,__source:{fileName:E,lineNumber:471,columnNumber:9}},e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",__self:this,__source:{fileName:E,lineNumber:472,columnNumber:11}},e.createElement("div",{className:"lg:col-span-2 space-y-8",__self:this,__source:{fileName:E,lineNumber:474,columnNumber:13}},b>=1&&e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6",__self:this,__source:{fileName:E,lineNumber:477,columnNumber:17}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:E,lineNumber:478,columnNumber:19}},e.createElement(Ke,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:E,lineNumber:479,columnNumber:21}}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:E,lineNumber:480,columnNumber:21}},"Customer Information")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",__self:this,__source:{fileName:E,lineNumber:485,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:E,lineNumber:486,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:E,lineNumber:487,columnNumber:23}},"First Name *"),e.createElement("input",{...w("firstName",{required:"First name is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:E,lineNumber:490,columnNumber:23}}),P.firstName&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:E,lineNumber:498,columnNumber:25}},P.firstName.message)),e.createElement("div",{__self:this,__source:{fileName:E,lineNumber:504,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:E,lineNumber:505,columnNumber:23}},"Last Name *"),e.createElement("input",{...w("lastName",{required:"Last name is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:E,lineNumber:508,columnNumber:23}}),P.lastName&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:E,lineNumber:516,columnNumber:25}},P.lastName.message)),e.createElement("div",{__self:this,__source:{fileName:E,lineNumber:522,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:E,lineNumber:523,columnNumber:23}},"Phone Number *"),e.createElement("input",{...w("phone",{required:"Phone number is required",pattern:{value:/^(\+254|0)[7-9]\d{8}$/,message:"Please enter a valid Kenyan phone number"}}),placeholder:"+254712345678",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:E,lineNumber:526,columnNumber:23}}),P.phone&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:E,lineNumber:539,columnNumber:25}},P.phone.message)),e.createElement("div",{__self:this,__source:{fileName:E,lineNumber:545,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:E,lineNumber:546,columnNumber:23}},"Email Address"),e.createElement("input",{...w("email",{pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"}}),type:"email",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:E,lineNumber:549,columnNumber:23}}),P.email&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:E,lineNumber:561,columnNumber:25}},P.email.message)))),b>=1&&!a&&e.createElement("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-6",__self:this,__source:{fileName:E,lineNumber:572,columnNumber:17}},e.createElement("div",{className:"flex items-center mb-4",__self:this,__source:{fileName:E,lineNumber:573,columnNumber:19}},e.createElement(Oa,{className:"w-5 h-5 text-blue-600 mr-2",__self:this,__source:{fileName:E,lineNumber:574,columnNumber:21}}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:E,lineNumber:575,columnNumber:21}},"Create Account (Optional)")),e.createElement("div",{className:"mb-4",__self:this,__source:{fileName:E,lineNumber:580,columnNumber:19}},e.createElement("label",{className:"flex items-center",__self:this,__source:{fileName:E,lineNumber:581,columnNumber:21}},e.createElement("input",{...w("createAccount"),type:"checkbox",className:"mr-2",__self:this,__source:{fileName:E,lineNumber:582,columnNumber:23}}),e.createElement("span",{className:"text-sm text-gray-700",__self:this,__source:{fileName:E,lineNumber:587,columnNumber:23}},"Create an account to track your orders and save delivery addresses"))),O&&e.createElement("div",{__self:this,__source:{fileName:E,lineNumber:595,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:E,lineNumber:596,columnNumber:23}},"Password *"),e.createElement("input",{...w("password",{required:O?"Password is required":!1,minLength:{value:6,message:"Password must be at least 6 characters"}}),type:"password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter password for your new account",disabled:b>1,__self:this,__source:{fileName:E,lineNumber:599,columnNumber:23}}),P.password&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:E,lineNumber:615,columnNumber:25}},P.password.message))),b>=1&&e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6",__self:this,__source:{fileName:E,lineNumber:626,columnNumber:17}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:E,lineNumber:627,columnNumber:19}},e.createElement(Nt,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:E,lineNumber:628,columnNumber:21}}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:E,lineNumber:629,columnNumber:21}},"Delivery Address")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",__self:this,__source:{fileName:E,lineNumber:634,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:E,lineNumber:635,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:E,lineNumber:636,columnNumber:23}},"County *"),e.createElement("select",{...w("county",{required:"County is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:E,lineNumber:639,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:E,lineNumber:646,columnNumber:25}},"Select County"),hu.map(N=>e.createElement("option",{key:N,value:N,__self:this,__source:{fileName:E,lineNumber:648,columnNumber:27}},N))),P.county&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:E,lineNumber:654,columnNumber:25}},P.county.message)),e.createElement("div",{__self:this,__source:{fileName:E,lineNumber:660,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:E,lineNumber:661,columnNumber:23}},"Sub-County *"),e.createElement("input",{...w("subCounty",{required:"Sub-county is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:E,lineNumber:664,columnNumber:23}}),P.subCounty&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:E,lineNumber:672,columnNumber:25}},P.subCounty.message)),e.createElement("div",{__self:this,__source:{fileName:E,lineNumber:678,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:E,lineNumber:679,columnNumber:23}},"Ward *"),e.createElement("input",{...w("ward",{required:"Ward is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:E,lineNumber:682,columnNumber:23}}),P.ward&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:E,lineNumber:688,columnNumber:25}},P.ward.message)),e.createElement("div",{__self:this,__source:{fileName:E,lineNumber:694,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:E,lineNumber:695,columnNumber:23}},"Street/Road *"),e.createElement("input",{...w("street",{required:"Street is required"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:E,lineNumber:698,columnNumber:23}}),P.street&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:E,lineNumber:706,columnNumber:25}},P.street.message)),e.createElement("div",{className:"md:col-span-2",__self:this,__source:{fileName:E,lineNumber:712,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:E,lineNumber:713,columnNumber:23}},"Building/House Name"),e.createElement("input",{...w("buildingName"),placeholder:"Optional: Building name, house number, apartment, etc.",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:E,lineNumber:716,columnNumber:23}})),e.createElement("div",{className:"md:col-span-2",__self:this,__source:{fileName:E,lineNumber:724,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:E,lineNumber:725,columnNumber:23}},"Delivery Instructions"),e.createElement("textarea",{...w("deliveryInstructions"),rows:3,placeholder:"Optional: Special delivery instructions, landmarks, etc.",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>1,__self:this,__source:{fileName:E,lineNumber:728,columnNumber:23}})))),b>=2&&e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6",__self:this,__source:{fileName:E,lineNumber:742,columnNumber:17}},e.createElement("div",{className:"flex items-center mb-6",__self:this,__source:{fileName:E,lineNumber:743,columnNumber:19}},e.createElement(Lt,{className:"w-5 h-5 text-gray-400 mr-2",__self:this,__source:{fileName:E,lineNumber:744,columnNumber:21}}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:E,lineNumber:745,columnNumber:21}},"Payment Method")),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:E,lineNumber:750,columnNumber:19}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:E,lineNumber:751,columnNumber:21}},e.createElement("input",{...w("paymentMethod"),type:"radio",value:"MPESA",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300",disabled:b>2,__self:this,__source:{fileName:E,lineNumber:752,columnNumber:23}}),e.createElement("label",{className:"ml-3 block text-sm font-medium text-gray-700",__self:this,__source:{fileName:E,lineNumber:759,columnNumber:23}},"M-Pesa STK Push")),L==="MPESA"&&e.createElement("div",{className:"ml-7",__self:this,__source:{fileName:E,lineNumber:765,columnNumber:23}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:E,lineNumber:766,columnNumber:25}},"M-Pesa Phone Number *"),e.createElement("input",{...w("mpesaPhone",{required:L==="MPESA"?"M-Pesa phone number is required":!1,pattern:{value:/^(\+254|0)[7-9]\d{8}$/,message:"Please enter a valid Kenyan phone number"}}),placeholder:"+254712345678",className:"w-full max-w-md border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:b>2,__self:this,__source:{fileName:E,lineNumber:769,columnNumber:25}}),P.mpesaPhone&&e.createElement("p",{className:"mt-1 text-sm text-red-600",__self:this,__source:{fileName:E,lineNumber:786,columnNumber:27}},P.mpesaPhone.message)),e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:E,lineNumber:793,columnNumber:21}},e.createElement("input",{...w("paymentMethod"),type:"radio",value:"COD",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300",disabled:b>2,__self:this,__source:{fileName:E,lineNumber:794,columnNumber:23}}),e.createElement("label",{className:"ml-3 block text-sm font-medium text-gray-700",__self:this,__source:{fileName:E,lineNumber:801,columnNumber:23}},"Cash on Delivery")))),e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:E,lineNumber:810,columnNumber:15}},b>1&&b<4&&e.createElement("button",{type:"button",onClick:()=>g(b-1),className:"bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium",__self:this,__source:{fileName:E,lineNumber:812,columnNumber:19}},"Previous"),b<3&&e.createElement("button",{type:"button",onClick:()=>g(b+1),className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors font-medium ml-auto",__self:this,__source:{fileName:E,lineNumber:822,columnNumber:19}},"Next"),b===3&&e.createElement("button",{type:"submit",disabled:c,className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium ml-auto",__self:this,__source:{fileName:E,lineNumber:832,columnNumber:19}},c?"Placing Order...":"Place Order"))),e.createElement("div",{__self:this,__source:{fileName:E,lineNumber:844,columnNumber:13}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6 sticky top-6",__self:this,__source:{fileName:E,lineNumber:845,columnNumber:15}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:E,lineNumber:846,columnNumber:17}},"Order Summary"),e.createElement("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto",__self:this,__source:{fileName:E,lineNumber:851,columnNumber:17}},n.items.map(N=>e.createElement("div",{key:N.id,className:"flex items-center space-x-3",__self:this,__source:{fileName:E,lineNumber:853,columnNumber:21}},e.createElement("div",{className:"w-12 h-12 bg-gray-200 rounded overflow-hidden flex-shrink-0",__self:this,__source:{fileName:E,lineNumber:854,columnNumber:23}},N.images&&N.images.length>0?e.createElement("img",{src:N.images[0],alt:N.name,className:"w-full h-full object-cover",onError:J=>{J.currentTarget.src="/api/placeholder/48/48?text="+encodeURIComponent(N.name)},__self:this,__source:{fileName:E,lineNumber:856,columnNumber:27}}):e.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",__self:this,__source:{fileName:E,lineNumber:867,columnNumber:27}},"📦")),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:E,lineNumber:873,columnNumber:23}},e.createElement("p",{className:"text-sm font-medium text-gray-900 truncate",__self:this,__source:{fileName:E,lineNumber:874,columnNumber:25}},N.name),e.createElement("p",{className:"text-xs text-gray-600",__self:this,__source:{fileName:E,lineNumber:877,columnNumber:25}},N.quantity," × ",Z(N.pricePerUnit))),e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:E,lineNumber:882,columnNumber:23}},Z((N.pricePerUnit||0)*(N.quantity||0)))))),e.createElement("div",{className:"space-y-2 mb-6",__self:this,__source:{fileName:E,lineNumber:892,columnNumber:17}},e.createElement("div",{className:"flex justify-between text-gray-600",__self:this,__source:{fileName:E,lineNumber:893,columnNumber:19}},e.createElement("span",{__self:this,__source:{fileName:E,lineNumber:894,columnNumber:21}},"Subtotal (",n.totalItems," items)"),e.createElement("span",{__self:this,__source:{fileName:E,lineNumber:895,columnNumber:21}},Z(n.totalAmount))),e.createElement("div",{className:"flex justify-between text-gray-600",__self:this,__source:{fileName:E,lineNumber:898,columnNumber:19}},e.createElement("span",{className:"flex items-center",__self:this,__source:{fileName:E,lineNumber:899,columnNumber:21}},"Delivery Fee",n.deliveryFee===0&&e.createElement("span",{className:"ml-2 text-green-600 text-sm",__self:this,__source:{fileName:E,lineNumber:902,columnNumber:25}},"(Free)")),e.createElement("span",{__self:this,__source:{fileName:E,lineNumber:907,columnNumber:21}},Z(n.deliveryFee))),e.createElement("div",{className:"border-t border-gray-200 pt-2",__self:this,__source:{fileName:E,lineNumber:910,columnNumber:19}},e.createElement("div",{className:"flex justify-between text-lg font-semibold text-gray-900",__self:this,__source:{fileName:E,lineNumber:911,columnNumber:21}},e.createElement("span",{__self:this,__source:{fileName:E,lineNumber:912,columnNumber:23}},"Total"),e.createElement("span",{__self:this,__source:{fileName:E,lineNumber:913,columnNumber:23}},Z(n.grandTotal))))),e.createElement("div",{className:"bg-gray-50 rounded-lg p-4",__self:this,__source:{fileName:E,lineNumber:919,columnNumber:17}},e.createElement("div",{className:"flex items-center text-sm text-gray-600 mb-2",__self:this,__source:{fileName:E,lineNumber:920,columnNumber:19}},e.createElement(ve,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:E,lineNumber:921,columnNumber:21}}),e.createElement("span",{__self:this,__source:{fileName:E,lineNumber:922,columnNumber:21}},"Estimated delivery: 1-2 business days")),e.createElement("div",{className:"text-xs text-gray-500",__self:this,__source:{fileName:E,lineNumber:924,columnNumber:19}},"Orders placed before 3 PM are processed the same day")))))))}var D="/app/code/frontend/src/pages/admin/AdminDashboard.tsx";function pu(){const{user:t,token:r}=xe(),s=et(),l=h=>{s("/admin/consignments")},a=async h=>{try{await new Promise(x=>setTimeout(x,500)),V.success(`User ${h} approved successfully`),i(x=>({...x,recentUsers:x.recentUsers.map(w=>w.id===h?{...w,status:"ACTIVE"}:w),pendingApprovals:Math.max(0,x.pendingApprovals-1)}))}catch(x){console.error("Error approving user:",x),V.error("Failed to approve user")}},m=async()=>{try{console.log("👥 Fetching users from real database");const h=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!h.ok)throw new Error(`HTTP ${h.status}: ${h.statusText}`);const x=await h.json(),w=x.users||x;console.log("👥 Users data received:",w);const p=Array.isArray(w)?w:[];i(y=>({...y,totalUsers:p.length,pendingApprovals:p.filter(B=>B.status==="PENDING").length,recentUsers:p.slice(0,5).map(B=>({id:B.id,name:`${B.first_name||B.firstName} ${B.last_name||B.lastName}`,email:B.email,role:B.role,status:B.verified?"ACTIVE":"PENDING",joinedAt:new Date(B.created_at||B.createdAt).toLocaleDateString()}))}))}catch(h){console.error("Error fetching users:",h),V.error("Failed to fetch users data")}},[n,i]=T.useState({totalUsers:1247,pendingApprovals:12,activeConsignments:85,monthlyRevenue:4567890,recentActivities:[],pendingConsignments:[],recentUsers:[]}),[_,u]=T.useState(!0);T.useEffect(()=>{m(),setTimeout(()=>{i(h=>({...h,recentActivities:[{id:1,type:"user",message:"New farmer registration: John Kimani",time:"5 minutes ago",status:"pending"},{id:2,type:"consignment",message:"Consignment submitted by Jane Wanjiku",time:"15 minutes ago",status:"pending"},{id:3,type:"order",message:"Large order placed: KSh 25,000",time:"1 hour ago",status:"completed"},{id:4,type:"driver",message:"Driver verification requested",time:"2 hours ago",status:"pending"}],pendingConsignments:[{id:1,title:"Organic Tomatoes - 100kg",farmer:"Jane Wanjiku",value:13e3,submittedAt:"2 hours ago"},{id:2,title:"Premium Maize - 200kg",farmer:"Peter Kamau",value:12e3,submittedAt:"5 hours ago"},{id:3,title:"Fresh Spinach - 50 bunches",farmer:"Grace Muthoni",value:2500,submittedAt:"1 day ago"}],recentUsers:[{id:1,name:"John Kimani",role:"FARMER",status:"PENDING",joinedAt:"5 minutes ago"},{id:2,name:"Sarah Wanjiru",role:"CUSTOMER",status:"ACTIVE",joinedAt:"2 hours ago"},{id:3,name:"David Mwangi",role:"DRIVER",status:"PENDING",joinedAt:"1 day ago"}]})),u(!1)},1e3)},[]);const c=[{title:"Manage Users",description:"View and manage platform users",icon:Ze,color:"bg-blue-500",link:"/admin/users",count:n.totalUsers},{title:"Review Consignments",description:"Approve pending consignments",icon:Ne,color:"bg-green-500",link:"/admin/consignments",count:n.pendingApprovals},{title:"View Analytics",description:"Platform insights and metrics",icon:Yr,color:"bg-purple-500",link:"/admin/analytics",count:null},{title:"System Settings",description:"Configure platform settings",icon:Qt,color:"bg-gray-500",link:"/admin/settings",count:null}],o=h=>{switch(h){case"user":return e.createElement(Ze,{className:"w-4 h-4",__self:this,__source:{fileName:D,lineNumber:248,columnNumber:16}});case"consignment":return e.createElement(Ne,{className:"w-4 h-4",__self:this,__source:{fileName:D,lineNumber:250,columnNumber:16}});case"order":return e.createElement(_t,{className:"w-4 h-4",__self:this,__source:{fileName:D,lineNumber:252,columnNumber:16}});case"driver":return e.createElement(ve,{className:"w-4 h-4",__self:this,__source:{fileName:D,lineNumber:254,columnNumber:16}});default:return e.createElement(Yt,{className:"w-4 h-4",__self:this,__source:{fileName:D,lineNumber:256,columnNumber:16}})}},b=h=>{switch(h){case"pending":return"text-yellow-600 bg-yellow-100";case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},g=h=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(h);return _?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:D,lineNumber:283,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:D,lineNumber:284,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:D,lineNumber:285,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:D,lineNumber:286,columnNumber:11}},"Loading dashboard..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:D,lineNumber:293,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:D,lineNumber:294,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:D,lineNumber:296,columnNumber:9}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:D,lineNumber:297,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:298,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:D,lineNumber:299,columnNumber:15}},"Welcome back, ",t?.firstName,"!"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:D,lineNumber:302,columnNumber:15}},"Here's what's happening on your platform today.")),e.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600",__self:this,__source:{fileName:D,lineNumber:306,columnNumber:13}},e.createElement(Yt,{className:"w-4 h-4",__self:this,__source:{fileName:D,lineNumber:307,columnNumber:15}}),e.createElement("span",{__self:this,__source:{fileName:D,lineNumber:308,columnNumber:15}},"Admin Dashboard")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:D,lineNumber:314,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:D,lineNumber:315,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:D,lineNumber:316,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:D,lineNumber:317,columnNumber:15}},e.createElement(Ze,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:D,lineNumber:318,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:D,lineNumber:320,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:D,lineNumber:321,columnNumber:17}},n.totalUsers),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:D,lineNumber:324,columnNumber:17}},"Total Users")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:D,lineNumber:329,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:D,lineNumber:330,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:D,lineNumber:331,columnNumber:15}},e.createElement(ct,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:D,lineNumber:332,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:D,lineNumber:334,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:D,lineNumber:335,columnNumber:17}},n.pendingApprovals),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:D,lineNumber:338,columnNumber:17}},"Pending Approvals")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:D,lineNumber:343,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:D,lineNumber:344,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:D,lineNumber:345,columnNumber:15}},e.createElement(Ne,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:D,lineNumber:346,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:D,lineNumber:348,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:D,lineNumber:349,columnNumber:17}},n.activeConsignments),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:D,lineNumber:352,columnNumber:17}},"Active Consignments")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:D,lineNumber:357,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:D,lineNumber:358,columnNumber:13}},e.createElement("div",{className:"p-3 bg-purple-100 rounded-lg",__self:this,__source:{fileName:D,lineNumber:359,columnNumber:15}},e.createElement(_t,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:D,lineNumber:360,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:D,lineNumber:362,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:D,lineNumber:363,columnNumber:17}},g(n.monthlyRevenue)),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:D,lineNumber:366,columnNumber:17}},"Monthly Revenue"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:D,lineNumber:373,columnNumber:9}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-6",__self:this,__source:{fileName:D,lineNumber:374,columnNumber:11}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",__self:this,__source:{fileName:D,lineNumber:377,columnNumber:11}},c.map((h,x)=>e.createElement(_e,{key:x,to:h.link,className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-all duration-200 group",__self:this,__source:{fileName:D,lineNumber:379,columnNumber:15}},e.createElement("div",{className:"flex items-start justify-between mb-3",__self:this,__source:{fileName:D,lineNumber:384,columnNumber:17}},e.createElement("div",{className:`p-2 rounded-lg ${h.color}`,__self:this,__source:{fileName:D,lineNumber:385,columnNumber:19}},e.createElement(h.icon,{className:"w-5 h-5 text-white",__self:this,__source:{fileName:D,lineNumber:386,columnNumber:21}})),h.count!==null&&e.createElement("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs font-medium",__self:this,__source:{fileName:D,lineNumber:389,columnNumber:21}},h.count)),e.createElement("h3",{className:"font-medium text-gray-900 group-hover:text-primary-600 transition-colors",__self:this,__source:{fileName:D,lineNumber:394,columnNumber:17}},h.title),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:D,lineNumber:397,columnNumber:17}},h.description),e.createElement("div",{className:"flex items-center mt-3 text-primary-600 group-hover:text-primary-700",__self:this,__source:{fileName:D,lineNumber:400,columnNumber:17}},e.createElement("span",{className:"text-sm font-medium",__self:this,__source:{fileName:D,lineNumber:401,columnNumber:19}},"Manage"),e.createElement(ts,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",__self:this,__source:{fileName:D,lineNumber:402,columnNumber:19}})))))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",__self:this,__source:{fileName:D,lineNumber:410,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:D,lineNumber:412,columnNumber:11}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:D,lineNumber:413,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:D,lineNumber:414,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:D,lineNumber:415,columnNumber:17}},"Recent Activity"),e.createElement(cl,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:D,lineNumber:418,columnNumber:17}}))),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:D,lineNumber:421,columnNumber:13}},n.recentActivities.map(h=>e.createElement("div",{key:h.id,className:"p-6",__self:this,__source:{fileName:D,lineNumber:423,columnNumber:17}},e.createElement("div",{className:"flex items-start",__self:this,__source:{fileName:D,lineNumber:424,columnNumber:19}},e.createElement("div",{className:`p-2 rounded-lg ${b(h.status)} mr-4`,__self:this,__source:{fileName:D,lineNumber:425,columnNumber:21}},o(h.type)),e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:D,lineNumber:430,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:D,lineNumber:431,columnNumber:23}},h.message),e.createElement("p",{className:"text-sm text-gray-500 mt-1",__self:this,__source:{fileName:D,lineNumber:434,columnNumber:23}},h.time)),h.status==="pending"&&e.createElement("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium",__self:this,__source:{fileName:D,lineNumber:439,columnNumber:23}},"Action Required"))))),e.createElement("div",{className:"p-6 border-t border-gray-200",__self:this,__source:{fileName:D,lineNumber:447,columnNumber:13}},e.createElement(_e,{to:"/admin/notifications",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",__self:this,__source:{fileName:D,lineNumber:448,columnNumber:15}},"View all activities →"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:D,lineNumber:458,columnNumber:11}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:D,lineNumber:459,columnNumber:13}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:D,lineNumber:460,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:D,lineNumber:461,columnNumber:17}},"Pending Consignments"),e.createElement(Ne,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:D,lineNumber:464,columnNumber:17}}))),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:D,lineNumber:467,columnNumber:13}},n.pendingConsignments.map(h=>e.createElement("div",{key:h.id,className:"p-6",__self:this,__source:{fileName:D,lineNumber:469,columnNumber:17}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:D,lineNumber:470,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:D,lineNumber:471,columnNumber:21}},e.createElement("h4",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:D,lineNumber:472,columnNumber:23}},h.title),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:D,lineNumber:475,columnNumber:23}},"by ",h.farmer),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:D,lineNumber:478,columnNumber:23}},h.submittedAt)),e.createElement("div",{className:"text-right",__self:this,__source:{fileName:D,lineNumber:482,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:D,lineNumber:483,columnNumber:23}},g(h.value)),e.createElement("button",{onClick:()=>l(h.id),className:"mt-2 bg-primary-600 text-white px-3 py-1 rounded text-xs hover:bg-primary-700",__self:this,__source:{fileName:D,lineNumber:486,columnNumber:23}},"Review")))))),e.createElement("div",{className:"p-6 border-t border-gray-200",__self:this,__source:{fileName:D,lineNumber:497,columnNumber:13}},e.createElement(_e,{to:"/admin/consignments",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",__self:this,__source:{fileName:D,lineNumber:498,columnNumber:15}},"View all consignments →")))),e.createElement("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:D,lineNumber:509,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:D,lineNumber:510,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:D,lineNumber:511,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:D,lineNumber:512,columnNumber:15}},"Recent Users"),e.createElement(Ur,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:D,lineNumber:515,columnNumber:15}}))),e.createElement("div",{className:"overflow-x-auto",__self:this,__source:{fileName:D,lineNumber:518,columnNumber:11}},e.createElement("table",{className:"min-w-full divide-y divide-gray-200",__self:this,__source:{fileName:D,lineNumber:519,columnNumber:13}},e.createElement("thead",{className:"bg-gray-50",__self:this,__source:{fileName:D,lineNumber:520,columnNumber:15}},e.createElement("tr",{__self:this,__source:{fileName:D,lineNumber:521,columnNumber:17}},e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:D,lineNumber:522,columnNumber:19}},"User"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:D,lineNumber:525,columnNumber:19}},"Role"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:D,lineNumber:528,columnNumber:19}},"Status"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:D,lineNumber:531,columnNumber:19}},"Joined"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:D,lineNumber:534,columnNumber:19}},"Action"))),e.createElement("tbody",{className:"bg-white divide-y divide-gray-200",__self:this,__source:{fileName:D,lineNumber:539,columnNumber:15}},n.recentUsers.map(h=>e.createElement("tr",{key:h.id,__self:this,__source:{fileName:D,lineNumber:541,columnNumber:19}},e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:D,lineNumber:542,columnNumber:21}},e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:D,lineNumber:543,columnNumber:23}},h.name)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:D,lineNumber:547,columnNumber:21}},e.createElement("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",__self:this,__source:{fileName:D,lineNumber:548,columnNumber:23}},h.role)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:D,lineNumber:552,columnNumber:21}},e.createElement("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${h.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,__self:this,__source:{fileName:D,lineNumber:553,columnNumber:23}},h.status)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",__self:this,__source:{fileName:D,lineNumber:563,columnNumber:21}},h.joinedAt),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",__self:this,__source:{fileName:D,lineNumber:566,columnNumber:21}},h.status==="PENDING"?e.createElement("button",{onClick:()=>a(h.id),className:"text-green-600 hover:text-green-900",__self:this,__source:{fileName:D,lineNumber:568,columnNumber:25}},"Approve"):e.createElement("button",{onClick:()=>s("/admin/users"),className:"text-primary-600 hover:text-primary-900",__self:this,__source:{fileName:D,lineNumber:575,columnNumber:25}},"View"))))))),e.createElement("div",{className:"p-6 border-t border-gray-200",__self:this,__source:{fileName:D,lineNumber:588,columnNumber:11}},e.createElement(_e,{to:"/admin/users",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",__self:this,__source:{fileName:D,lineNumber:589,columnNumber:13}},"View all users →")))))}var M="/app/code/frontend/src/pages/admin/UserManagementPage.tsx";const yu={ADMIN:"bg-red-100 text-red-800",FARMER:"bg-green-100 text-green-800",CUSTOMER:"bg-blue-100 text-blue-800",DRIVER:"bg-purple-100 text-purple-800",AGENT:"bg-yellow-100 text-yellow-800"},Eu={ACTIVE:"bg-green-100 text-green-800",PENDING:"bg-yellow-100 text-yellow-800",SUSPENDED:"bg-orange-100 text-orange-800",BLOCKED:"bg-red-100 text-red-800"};function xu(){const{token:t}=xe(),[r,s]=T.useState([]),[l,a]=T.useState(!0),[m,n]=T.useState(""),[i,_]=T.useState("ALL"),[u,c]=T.useState("ALL"),[o,b]=T.useState(null),[g,h]=T.useState(!1),[x,w]=T.useState("activate");T.useEffect(()=>{p()},[]);const p=async()=>{try{const S=[{id:"1",phone:"+254712345678",email:"admin@zuasoko.com",firstName:"Admin",lastName:"User",role:"ADMIN",status:"ACTIVE",createdAt:new Date().toISOString()},{id:"2",phone:"+254734567890",email:"farmer@zuasoko.com",firstName:"Jane",lastName:"Wanjiku",role:"FARMER",status:"ACTIVE",profile:{farmName:"Green Valley Farm",county:"Kiambu"},createdAt:new Date(Date.now()-6048e5).toISOString()},{id:"3",phone:"+254756789012",email:"customer@zuasoko.com",firstName:"Mary",lastName:"Wangari",role:"CUSTOMER",status:"ACTIVE",profile:{county:"Nairobi"},createdAt:new Date(Date.now()-12096e5).toISOString()},{id:"4",phone:"+254778901234",email:"driver@zuasoko.com",firstName:"Michael",lastName:"Kiprotich",role:"DRIVER",status:"ACTIVE",profile:{vehicleType:"Pickup Truck",licenseNumber:"DL123456789"},createdAt:new Date(Date.now()-18144e5).toISOString()},{id:"5",phone:"+254790123456",email:"pending.farmer@zuasoko.com",firstName:"John",lastName:"Kimani",role:"FARMER",status:"PENDING",profile:{farmName:"Highlands Farm",county:"Nyeri"},createdAt:new Date(Date.now()-1728e5).toISOString()}];s(S)}catch(S){console.error("Error fetching users:",S),V.error("Failed to fetch users")}finally{a(!1)}},y=(S,Z)=>{b(S),w(Z),h(!0)},B=async()=>{if(o)try{let S=o.status,Z="";switch(x){case"activate":S="ACTIVE",Z="User activated successfully";break;case"suspend":S="SUSPENDED",Z="User suspended successfully";break;case"block":S="BLOCKED",Z="User blocked successfully";break;case"delete":s(r.filter(N=>N.id!==o.id)),V.success("User deleted successfully"),h(!1);return}s(r.map(N=>N.id===o.id?{...N,status:S}:N)),V.success(Z),h(!1)}catch{V.error("Failed to update user")}},P=Array.isArray(r)?r:[],L=P.filter(S=>{const Z=S.firstName.toLowerCase().includes(m.toLowerCase())||S.lastName.toLowerCase().includes(m.toLowerCase())||S.email?.toLowerCase().includes(m.toLowerCase())||S.phone.includes(m),N=i==="ALL"||S.role===i,J=u==="ALL"||S.status===u;return Z&&N&&J}),Y=(()=>{const S=P.length,Z=P.filter(re=>re.status==="ACTIVE").length,N=P.filter(re=>re.status==="PENDING").length,J=P.filter(re=>re.status==="BLOCKED"||re.status==="SUSPENDED").length;return{total:S,active:Z,pending:N,blocked:J}})();return l?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:M,lineNumber:223,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:M,lineNumber:224,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:M,lineNumber:225,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:M,lineNumber:226,columnNumber:11}},"Loading users..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:M,lineNumber:233,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:M,lineNumber:234,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:M,lineNumber:236,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:M,lineNumber:237,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:M,lineNumber:238,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:M,lineNumber:239,columnNumber:15}},"User Management"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:M,lineNumber:242,columnNumber:15}},"Manage platform users and their permissions")),e.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600",__self:this,__source:{fileName:M,lineNumber:246,columnNumber:13}},e.createElement(vt,{className:"w-4 h-4",__self:this,__source:{fileName:M,lineNumber:247,columnNumber:15}}),e.createElement("span",{__self:this,__source:{fileName:M,lineNumber:248,columnNumber:15}},"Admin Panel")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:M,lineNumber:254,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:M,lineNumber:255,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:M,lineNumber:256,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:M,lineNumber:257,columnNumber:15}},e.createElement(Ze,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:M,lineNumber:258,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:M,lineNumber:260,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:M,lineNumber:261,columnNumber:17}},Y.total),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:M,lineNumber:264,columnNumber:17}},"Total Users")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:M,lineNumber:269,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:M,lineNumber:270,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:M,lineNumber:271,columnNumber:15}},e.createElement(Ur,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:M,lineNumber:272,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:M,lineNumber:274,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:M,lineNumber:275,columnNumber:17}},Y.active),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:M,lineNumber:278,columnNumber:17}},"Active Users")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:M,lineNumber:283,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:M,lineNumber:284,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:M,lineNumber:285,columnNumber:15}},e.createElement(Ur,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:M,lineNumber:286,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:M,lineNumber:288,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:M,lineNumber:289,columnNumber:17}},Y.pending),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:M,lineNumber:292,columnNumber:17}},"Pending Approval")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:M,lineNumber:297,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:M,lineNumber:298,columnNumber:13}},e.createElement("div",{className:"p-3 bg-red-100 rounded-lg",__self:this,__source:{fileName:M,lineNumber:299,columnNumber:15}},e.createElement(Ia,{className:"w-6 h-6 text-red-600",__self:this,__source:{fileName:M,lineNumber:300,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:M,lineNumber:302,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:M,lineNumber:303,columnNumber:17}},Y.blocked),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:M,lineNumber:306,columnNumber:17}},"Blocked/Suspended"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:M,lineNumber:313,columnNumber:9}},e.createElement("div",{className:"flex flex-col lg:flex-row gap-4",__self:this,__source:{fileName:M,lineNumber:314,columnNumber:11}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:M,lineNumber:315,columnNumber:13}},e.createElement("div",{className:"relative",__self:this,__source:{fileName:M,lineNumber:316,columnNumber:15}},e.createElement(ol,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5",__self:this,__source:{fileName:M,lineNumber:317,columnNumber:17}}),e.createElement("input",{type:"text",placeholder:"Search users...",value:m,onChange:S=>n(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",__self:this,__source:{fileName:M,lineNumber:318,columnNumber:17}}))),e.createElement("div",{className:"flex gap-4",__self:this,__source:{fileName:M,lineNumber:328,columnNumber:13}},e.createElement("select",{value:i,onChange:S=>_(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",__self:this,__source:{fileName:M,lineNumber:329,columnNumber:15}},e.createElement("option",{value:"ALL",__self:this,__source:{fileName:M,lineNumber:334,columnNumber:17}},"All Roles"),e.createElement("option",{value:"ADMIN",__self:this,__source:{fileName:M,lineNumber:335,columnNumber:17}},"Admin"),e.createElement("option",{value:"FARMER",__self:this,__source:{fileName:M,lineNumber:336,columnNumber:17}},"Farmer"),e.createElement("option",{value:"CUSTOMER",__self:this,__source:{fileName:M,lineNumber:337,columnNumber:17}},"Customer"),e.createElement("option",{value:"DRIVER",__self:this,__source:{fileName:M,lineNumber:338,columnNumber:17}},"Driver"),e.createElement("option",{value:"AGENT",__self:this,__source:{fileName:M,lineNumber:339,columnNumber:17}},"Agent")),e.createElement("select",{value:u,onChange:S=>c(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",__self:this,__source:{fileName:M,lineNumber:342,columnNumber:15}},e.createElement("option",{value:"ALL",__self:this,__source:{fileName:M,lineNumber:347,columnNumber:17}},"All Status"),e.createElement("option",{value:"ACTIVE",__self:this,__source:{fileName:M,lineNumber:348,columnNumber:17}},"Active"),e.createElement("option",{value:"PENDING",__self:this,__source:{fileName:M,lineNumber:349,columnNumber:17}},"Pending"),e.createElement("option",{value:"SUSPENDED",__self:this,__source:{fileName:M,lineNumber:350,columnNumber:17}},"Suspended"),e.createElement("option",{value:"BLOCKED",__self:this,__source:{fileName:M,lineNumber:351,columnNumber:17}},"Blocked"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",__self:this,__source:{fileName:M,lineNumber:358,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:M,lineNumber:359,columnNumber:11}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:M,lineNumber:360,columnNumber:13}},"Users (",L.length,")")),e.createElement("div",{className:"overflow-x-auto",__self:this,__source:{fileName:M,lineNumber:365,columnNumber:11}},e.createElement("table",{className:"min-w-full divide-y divide-gray-200",__self:this,__source:{fileName:M,lineNumber:366,columnNumber:13}},e.createElement("thead",{className:"bg-gray-50",__self:this,__source:{fileName:M,lineNumber:367,columnNumber:15}},e.createElement("tr",{__self:this,__source:{fileName:M,lineNumber:368,columnNumber:17}},e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:M,lineNumber:369,columnNumber:19}},"User"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:M,lineNumber:372,columnNumber:19}},"Contact"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:M,lineNumber:375,columnNumber:19}},"Role"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:M,lineNumber:378,columnNumber:19}},"Status"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:M,lineNumber:381,columnNumber:19}},"Joined"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:M,lineNumber:384,columnNumber:19}},"Actions"))),e.createElement("tbody",{className:"bg-white divide-y divide-gray-200",__self:this,__source:{fileName:M,lineNumber:389,columnNumber:15}},L.map(S=>e.createElement("tr",{key:S.id,className:"hover:bg-gray-50",__self:this,__source:{fileName:M,lineNumber:391,columnNumber:19}},e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:M,lineNumber:392,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:M,lineNumber:393,columnNumber:23}},e.createElement("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",__self:this,__source:{fileName:M,lineNumber:394,columnNumber:25}},e.createElement("span",{className:"text-primary-600 font-medium",__self:this,__source:{fileName:M,lineNumber:395,columnNumber:27}},S.firstName[0],S.lastName[0])),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:M,lineNumber:400,columnNumber:25}},e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:M,lineNumber:401,columnNumber:27}},S.firstName," ",S.lastName),S.profile?.farmName&&e.createElement("div",{className:"text-sm text-gray-500",__self:this,__source:{fileName:M,lineNumber:405,columnNumber:29}},S.profile.farmName)))),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:M,lineNumber:412,columnNumber:21}},e.createElement("div",{className:"text-sm text-gray-900",__self:this,__source:{fileName:M,lineNumber:413,columnNumber:23}},e.createElement("div",{className:"flex items-center gap-1 mb-1",__self:this,__source:{fileName:M,lineNumber:414,columnNumber:25}},e.createElement(Ct,{className:"w-3 h-3",__self:this,__source:{fileName:M,lineNumber:415,columnNumber:27}}),S.phone),S.email&&e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:M,lineNumber:419,columnNumber:27}},e.createElement(es,{className:"w-3 h-3",__self:this,__source:{fileName:M,lineNumber:420,columnNumber:29}}),S.email))),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:M,lineNumber:426,columnNumber:21}},e.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${yu[S.role]||"bg-gray-100 text-gray-800"}`,__self:this,__source:{fileName:M,lineNumber:427,columnNumber:23}},S.role)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:M,lineNumber:436,columnNumber:21}},e.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Eu[S.status]||"bg-gray-100 text-gray-800"}`,__self:this,__source:{fileName:M,lineNumber:437,columnNumber:23}},S.status)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",__self:this,__source:{fileName:M,lineNumber:447,columnNumber:21}},new Date(S.createdAt).toLocaleDateString()),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",__self:this,__source:{fileName:M,lineNumber:450,columnNumber:21}},e.createElement("div",{className:"flex items-center gap-2",__self:this,__source:{fileName:M,lineNumber:451,columnNumber:23}},S.status==="PENDING"&&e.createElement("button",{onClick:()=>y(S,"activate"),className:"text-green-600 hover:text-green-900",__self:this,__source:{fileName:M,lineNumber:453,columnNumber:27}},"Activate"),S.status==="ACTIVE"&&e.createElement("button",{onClick:()=>y(S,"suspend"),className:"text-yellow-600 hover:text-yellow-900",__self:this,__source:{fileName:M,lineNumber:461,columnNumber:27}},"Suspend"),S.status!=="BLOCKED"&&e.createElement("button",{onClick:()=>y(S,"block"),className:"text-red-600 hover:text-red-900",__self:this,__source:{fileName:M,lineNumber:469,columnNumber:27}},"Block"))))))))),g&&o&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:M,lineNumber:487,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full",__self:this,__source:{fileName:M,lineNumber:488,columnNumber:13}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:M,lineNumber:489,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:M,lineNumber:490,columnNumber:17}},"Confirm Action")),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:M,lineNumber:495,columnNumber:15}},e.createElement("p",{className:"text-gray-600 mb-4",__self:this,__source:{fileName:M,lineNumber:496,columnNumber:17}},"Are you sure you want to ",x,' user "',o.firstName," ",o.lastName,'"?'),x==="delete"&&e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",__self:this,__source:{fileName:M,lineNumber:502,columnNumber:19}},e.createElement("p",{className:"text-red-700 text-sm",__self:this,__source:{fileName:M,lineNumber:503,columnNumber:21}},e.createElement("strong",{__self:this,__source:{fileName:M,lineNumber:504,columnNumber:23}},"Warning:")," This action cannot be undone. All user data will be permanently deleted.")),e.createElement("div",{className:"flex gap-4",__self:this,__source:{fileName:M,lineNumber:510,columnNumber:17}},e.createElement("button",{type:"button",onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",__self:this,__source:{fileName:M,lineNumber:511,columnNumber:19}},"Cancel"),e.createElement("button",{onClick:B,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${x==="delete"?"bg-red-600 text-white hover:bg-red-700":"bg-primary-600 text-white hover:bg-primary-700"}`,__self:this,__source:{fileName:M,lineNumber:518,columnNumber:19}},"Confirm ",x)))))))}var U="/app/code/frontend/src/pages/admin/ConsignmentManagementPage.tsx";const vu={PENDING:{color:"bg-yellow-100 text-yellow-800",icon:De,label:"Pending Review"},APPROVED:{color:"bg-green-100 text-green-800",icon:Pe,label:"Approved"},REJECTED:{color:"bg-red-100 text-red-800",icon:La,label:"Rejected"},PRICE_SUGGESTED:{color:"bg-blue-100 text-blue-800",icon:_t,label:"Price Suggested"},DRIVER_ASSIGNED:{color:"bg-purple-100 text-purple-800",icon:ve,label:"Driver Assigned"},IN_TRANSIT:{color:"bg-indigo-100 text-indigo-800",icon:ve,label:"In Transit"},DELIVERED:{color:"bg-teal-100 text-teal-800",icon:Ne,label:"Delivered"},COMPLETED:{color:"bg-gray-100 text-gray-800",icon:Pe,label:"Completed"}};function wu(){const{token:t}=xe(),[r,s]=T.useState([]),[l,a]=T.useState([]),[m,n]=T.useState(!0),[i,_]=T.useState("ALL"),[u,c]=T.useState(null),[o,b]=T.useState(!1),[g,h]=T.useState("approve"),[x,w]=T.useState(""),[p,y]=T.useState("");T.useEffect(()=>{B(),P()},[]);const B=async()=>{try{console.log("📦 Fetching consignments from live database");const N=await ae.get("/api/consignments",{headers:{Authorization:`Bearer ${t}`}});console.log("📦 Consignments response:",N.data);const J=Array.isArray(N.data)?N.data:N.data.consignments||[];console.log("📦 Setting consignments array:",J),s(Array.isArray(J)?J:[])}catch(N){console.error("❌ Error fetching consignments:",N),V.error("Failed to fetch consignments from database"),s([])}finally{n(!1)}},P=async()=>{try{console.log("🚛 Fetching drivers from live database");const N=await ae.get("/api/drivers",{headers:{Authorization:`Bearer ${t}`}});console.log("🚛 Drivers response:",N.data);const J=Array.isArray(N.data)?N.data:N.data.drivers||[];console.log("🚛 Setting drivers array:",J),a(Array.isArray(J)?J:[])}catch(N){console.error("❌ Error fetching drivers:",N),V.error("Failed to fetch drivers from database"),a([])}},L=async(N,J)=>{c(N),h(J),b(!0),J==="suggest_price"&&w(N.proposedPricePerUnit.toString())},O=async()=>{if(u)try{let N={};switch(g){case"approve":N={status:"APPROVED"};break;case"reject":N={status:"REJECTED"};break;case"suggest_price":if(!x||Number(x)<=0){V.error("Please enter a valid price");return}N={status:"PRICE_SUGGESTED",suggestedPrice:Number(x)};break;case"assign_driver":if(!p){V.error("Please select a driver");return}N={status:"DRIVER_ASSIGNED",driverId:p};break}await ae.patch(`/api/admin/consignments/${u.id}`,N,{headers:{Authorization:`Bearer ${t}`}}),V.success("Consignment updated successfully!"),b(!1),B(),w(""),y("")}catch(N){console.error("Error updating consignment:",N),V.error("Failed to update consignment")}},Y=Array.isArray(r)?r:[],S=i==="ALL"?Y:Y.filter(N=>N.status===i),Z=N=>{switch(N.status){case"PENDING":return e.createElement("div",{className:"flex gap-2",__self:this,__source:{fileName:U,lineNumber:248,columnNumber:11}},e.createElement("button",{onClick:()=>L(N,"approve"),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",__self:this,__source:{fileName:U,lineNumber:249,columnNumber:13}},"Approve"),e.createElement("button",{onClick:()=>L(N,"suggest_price"),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",__self:this,__source:{fileName:U,lineNumber:255,columnNumber:13}},"Suggest Price"),e.createElement("button",{onClick:()=>L(N,"reject"),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",__self:this,__source:{fileName:U,lineNumber:261,columnNumber:13}},"Reject"));case"APPROVED":return e.createElement("button",{onClick:()=>L(N,"assign_driver"),className:"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700",__self:this,__source:{fileName:U,lineNumber:272,columnNumber:11}},"Assign Driver");default:return null}};return m?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:U,lineNumber:287,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:U,lineNumber:288,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:U,lineNumber:289,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:U,lineNumber:290,columnNumber:11}},"Loading consignments..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:U,lineNumber:297,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:U,lineNumber:298,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:U,lineNumber:300,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:U,lineNumber:301,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:U,lineNumber:302,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:U,lineNumber:303,columnNumber:15}},"Consignment Management"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:U,lineNumber:306,columnNumber:15}},"Review and manage farmer consignments")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:U,lineNumber:314,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:U,lineNumber:315,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:U,lineNumber:316,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:U,lineNumber:317,columnNumber:15}},e.createElement(De,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:U,lineNumber:318,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:U,lineNumber:320,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:U,lineNumber:321,columnNumber:17}},Y.filter(N=>N.status==="PENDING").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:U,lineNumber:327,columnNumber:17}},"Pending Review")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:U,lineNumber:332,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:U,lineNumber:333,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:U,lineNumber:334,columnNumber:15}},e.createElement(Pe,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:U,lineNumber:335,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:U,lineNumber:337,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:U,lineNumber:338,columnNumber:17}},Y.filter(N=>N.status==="APPROVED").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:U,lineNumber:344,columnNumber:17}},"Approved")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:U,lineNumber:349,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:U,lineNumber:350,columnNumber:13}},e.createElement("div",{className:"p-3 bg-purple-100 rounded-lg",__self:this,__source:{fileName:U,lineNumber:351,columnNumber:15}},e.createElement(ve,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:U,lineNumber:352,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:U,lineNumber:354,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:U,lineNumber:355,columnNumber:17}},Y.filter(N=>N.status==="DRIVER_ASSIGNED"||N.status==="IN_TRANSIT").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:U,lineNumber:364,columnNumber:17}},"In Transit")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:U,lineNumber:369,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:U,lineNumber:370,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:U,lineNumber:371,columnNumber:15}},e.createElement(Ne,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:U,lineNumber:372,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:U,lineNumber:374,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:U,lineNumber:375,columnNumber:17}},Y.filter(N=>N.status==="DELIVERED"||N.status==="COMPLETED").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:U,lineNumber:383,columnNumber:17}},"Completed"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:U,lineNumber:390,columnNumber:9}},e.createElement("div",{className:"flex flex-wrap gap-2",__self:this,__source:{fileName:U,lineNumber:391,columnNumber:11}},["ALL","PENDING","APPROVED","DRIVER_ASSIGNED","IN_TRANSIT","DELIVERED"].map(N=>e.createElement("button",{key:N,onClick:()=>_(N),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i===N?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,__self:this,__source:{fileName:U,lineNumber:400,columnNumber:15}},N.replace("_"," "))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:U,lineNumber:416,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:U,lineNumber:417,columnNumber:11}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:U,lineNumber:418,columnNumber:13}},"Consignments (",S.length,")")),S.length===0?e.createElement("div",{className:"p-12 text-center",__self:this,__source:{fileName:U,lineNumber:424,columnNumber:13}},e.createElement(Ne,{className:"w-16 h-16 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:U,lineNumber:425,columnNumber:15}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:U,lineNumber:426,columnNumber:15}},"No consignments found"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:U,lineNumber:429,columnNumber:15}},i==="ALL"?"No consignments have been submitted yet":`No ${i.toLowerCase()} consignments`)):e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:U,lineNumber:436,columnNumber:13}},S.map(N=>{const J=vu[N.status],re=J?.icon||Ne,se=(N.finalPricePerUnit||N.proposedPricePerUnit)*N.quantity;return e.createElement("div",{key:N.id,className:"p-6 hover:bg-gray-50",__self:this,__source:{fileName:U,lineNumber:446,columnNumber:19}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",__self:this,__source:{fileName:U,lineNumber:447,columnNumber:21}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:U,lineNumber:448,columnNumber:23}},e.createElement("div",{className:"flex items-start gap-4",__self:this,__source:{fileName:U,lineNumber:449,columnNumber:25}},e.createElement("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",__self:this,__source:{fileName:U,lineNumber:450,columnNumber:27}},e.createElement(Ne,{className:"w-8 h-8 text-gray-600",__self:this,__source:{fileName:U,lineNumber:451,columnNumber:29}})),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:U,lineNumber:454,columnNumber:27}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-1",__self:this,__source:{fileName:U,lineNumber:455,columnNumber:29}},N.title),e.createElement("p",{className:"text-gray-600 text-sm mb-3",__self:this,__source:{fileName:U,lineNumber:458,columnNumber:29}},N.description),N.farmer&&e.createElement("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-2",__self:this,__source:{fileName:U,lineNumber:464,columnNumber:31}},e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:U,lineNumber:465,columnNumber:33}},e.createElement(Ke,{className:"w-4 h-4",__self:this,__source:{fileName:U,lineNumber:466,columnNumber:35}}),e.createElement("span",{__self:this,__source:{fileName:U,lineNumber:467,columnNumber:35}},N.farmer.name)),e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:U,lineNumber:469,columnNumber:33}},e.createElement(Ct,{className:"w-4 h-4",__self:this,__source:{fileName:U,lineNumber:470,columnNumber:35}}),e.createElement("span",{__self:this,__source:{fileName:U,lineNumber:471,columnNumber:35}},N.farmer.phone)),N.farmer.profile?.county&&e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:U,lineNumber:474,columnNumber:35}},e.createElement(Nt,{className:"w-4 h-4",__self:this,__source:{fileName:U,lineNumber:475,columnNumber:37}}),e.createElement("span",{__self:this,__source:{fileName:U,lineNumber:476,columnNumber:37}},N.farmer.profile.county))),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 mb-3",__self:this,__source:{fileName:U,lineNumber:485,columnNumber:29}},e.createElement("span",{__self:this,__source:{fileName:U,lineNumber:486,columnNumber:31}},N.quantity," ",N.unit),e.createElement("span",{__self:this,__source:{fileName:U,lineNumber:489,columnNumber:31}},"•"),e.createElement("span",{__self:this,__source:{fileName:U,lineNumber:490,columnNumber:31}},"KSh ",N.proposedPricePerUnit," per"," ",N.unit),e.createElement("span",{__self:this,__source:{fileName:U,lineNumber:494,columnNumber:31}},"•"),e.createElement("span",{__self:this,__source:{fileName:U,lineNumber:495,columnNumber:31}},N.category),e.createElement("span",{__self:this,__source:{fileName:U,lineNumber:496,columnNumber:31}},"•"),e.createElement("span",{__self:this,__source:{fileName:U,lineNumber:497,columnNumber:31}},"Total: KSh ",se.toLocaleString())),N.status==="PRICE_SUGGESTED"&&N.adminSuggestedPrice&&e.createElement("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",__self:this,__source:{fileName:U,lineNumber:505,columnNumber:33}},e.createElement("p",{className:"text-sm text-blue-700",__self:this,__source:{fileName:U,lineNumber:506,columnNumber:35}},e.createElement("strong",{__self:this,__source:{fileName:U,lineNumber:507,columnNumber:37}},"Price suggested:")," KSh"," ",N.adminSuggestedPrice," per"," ",N.unit,e.createElement("span",{className:"ml-2 text-blue-600",__self:this,__source:{fileName:U,lineNumber:510,columnNumber:37}},"(Total: KSh"," ",(N.adminSuggestedPrice*N.quantity).toLocaleString(),")")))))),e.createElement("div",{className:"flex flex-col lg:items-end gap-3",__self:this,__source:{fileName:U,lineNumber:525,columnNumber:23}},e.createElement("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${J?.color||"bg-gray-100 text-gray-800"}`,__self:this,__source:{fileName:U,lineNumber:526,columnNumber:25}},e.createElement(re,{className:"w-4 h-4",__self:this,__source:{fileName:U,lineNumber:529,columnNumber:27}}),J?.label||N.status),e.createElement("div",{className:"flex items-center gap-2 text-xs text-gray-400",__self:this,__source:{fileName:U,lineNumber:533,columnNumber:25}},e.createElement(wt,{className:"w-3 h-3",__self:this,__source:{fileName:U,lineNumber:534,columnNumber:27}}),new Date(N.createdAt).toLocaleDateString()),Z(N))))}))),o&&u&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:U,lineNumber:550,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-md w-full",__self:this,__source:{fileName:U,lineNumber:551,columnNumber:13}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:U,lineNumber:552,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:U,lineNumber:553,columnNumber:17}},g==="approve"&&"Approve Consignment",g==="reject"&&"Reject Consignment",g==="suggest_price"&&"Suggest New Price",g==="assign_driver"&&"Assign Driver"),e.createElement("p",{className:"text-gray-600 text-sm mt-1",__self:this,__source:{fileName:U,lineNumber:559,columnNumber:17}},u.title)),e.createElement("div",{className:"p-6",__self:this,__source:{fileName:U,lineNumber:564,columnNumber:15}},g==="suggest_price"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:U,lineNumber:566,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:U,lineNumber:567,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:U,lineNumber:568,columnNumber:23}},"Current proposed price: KSh"," ",u.proposedPricePerUnit," per"," ",u.unit),e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:U,lineNumber:573,columnNumber:23}},"Your suggested price (KSh per ",u.unit,")"),e.createElement("input",{type:"number",value:x,onChange:N=>w(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter suggested price",min:"1",required:!0,__self:this,__source:{fileName:U,lineNumber:577,columnNumber:23}}))),g==="assign_driver"&&e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:U,lineNumber:591,columnNumber:19}},e.createElement("div",{__self:this,__source:{fileName:U,lineNumber:592,columnNumber:21}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:U,lineNumber:593,columnNumber:23}},"Select Driver"),e.createElement("select",{value:p,onChange:N=>y(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,__self:this,__source:{fileName:U,lineNumber:596,columnNumber:23}},e.createElement("option",{value:"",__self:this,__source:{fileName:U,lineNumber:602,columnNumber:25}},"Choose a driver"),Array.isArray(l)?l.filter(N=>N.isAvailable).map(N=>e.createElement("option",{key:N.id,value:N.userId,__self:this,__source:{fileName:U,lineNumber:607,columnNumber:33}},N.name," - ",N.vehicleType," (",N.vehicleRegNo,") - Rating:"," ",N.rating,"⭐")):[]))),(g==="approve"||g==="reject")&&e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:U,lineNumber:620,columnNumber:19}},"Are you sure you want to ",g," this consignment?"),e.createElement("div",{className:"flex gap-4 mt-6",__self:this,__source:{fileName:U,lineNumber:625,columnNumber:17}},e.createElement("button",{type:"button",onClick:()=>b(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",__self:this,__source:{fileName:U,lineNumber:626,columnNumber:19}},"Cancel"),e.createElement("button",{onClick:O,className:"flex-1 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:U,lineNumber:633,columnNumber:19}},"Confirm")))))))}var F="/app/code/frontend/src/pages/admin/AnalyticsPage.tsx";function Su(){const{token:t}=xe(),[r,s]=T.useState(!0),[l,a]=T.useState("30"),[m,n]=T.useState({totalUsers:1247,totalConsignments:856,totalOrders:2341,totalRevenue:4567890,activeDrivers:23,pendingApprovals:12,userGrowth:12.5,revenueGrowth:8.2}),[i]=T.useState([{name:"Jan",value:32e4},{name:"Feb",value:28e4},{name:"Mar",value:45e4},{name:"Apr",value:38e4},{name:"May",value:52e4},{name:"Jun",value:49e4},{name:"Jul",value:64e4},{name:"Aug",value:58e4},{name:"Sep",value:72e4},{name:"Oct",value:68e4},{name:"Nov",value:75e4},{name:"Dec",value:82e4}]),[_]=T.useState([{name:"Vegetables",value:45},{name:"Fruits",value:25},{name:"Grains",value:15},{name:"Leafy Greens",value:10},{name:"Others",value:5}]),[u]=T.useState([{id:1,type:"order",message:"New order placed by Mary Wangari",amount:"KSh 2,450",time:"5 minutes ago"},{id:2,type:"consignment",message:"Consignment approved for Jane Wanjiku",amount:"KSh 15,000",time:"12 minutes ago"},{id:3,type:"user",message:"New farmer registered: Peter Kamau",amount:"",time:"25 minutes ago"},{id:4,type:"delivery",message:"Delivery completed by Michael Kiprotich",amount:"KSh 3,200",time:"1 hour ago"},{id:5,type:"payment",message:"Payment processed for Grace Muthoni",amount:"KSh 8,750",time:"2 hours ago"}]);T.useEffect(()=>{setTimeout(()=>s(!1),1e3)},[l]);const c=b=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(b),o=b=>{switch(b){case"order":return e.createElement(Ne,{className:"w-4 h-4 text-blue-600",__self:this,__source:{fileName:F,lineNumber:127,columnNumber:16}});case"consignment":return e.createElement(nt,{className:"w-4 h-4 text-green-600",__self:this,__source:{fileName:F,lineNumber:129,columnNumber:16}});case"user":return e.createElement(Ze,{className:"w-4 h-4 text-purple-600",__self:this,__source:{fileName:F,lineNumber:131,columnNumber:16}});case"delivery":return e.createElement(ve,{className:"w-4 h-4 text-orange-600",__self:this,__source:{fileName:F,lineNumber:133,columnNumber:16}});case"payment":return e.createElement(_t,{className:"w-4 h-4 text-emerald-600",__self:this,__source:{fileName:F,lineNumber:135,columnNumber:16}});default:return e.createElement(Yt,{className:"w-4 h-4 text-gray-600",__self:this,__source:{fileName:F,lineNumber:137,columnNumber:16}})}};return r?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:F,lineNumber:143,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:F,lineNumber:144,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:F,lineNumber:145,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:F,lineNumber:146,columnNumber:11}},"Loading analytics..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:F,lineNumber:153,columnNumber:5}},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:F,lineNumber:154,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:F,lineNumber:156,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:F,lineNumber:157,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:F,lineNumber:158,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:F,lineNumber:159,columnNumber:15}},"Analytics Dashboard"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:F,lineNumber:162,columnNumber:15}},"Platform insights and performance metrics")),e.createElement("div",{className:"flex items-center gap-4",__self:this,__source:{fileName:F,lineNumber:166,columnNumber:13}},e.createElement("select",{value:l,onChange:b=>a(b.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",__self:this,__source:{fileName:F,lineNumber:167,columnNumber:15}},e.createElement("option",{value:"7",__self:this,__source:{fileName:F,lineNumber:172,columnNumber:17}},"Last 7 days"),e.createElement("option",{value:"30",__self:this,__source:{fileName:F,lineNumber:173,columnNumber:17}},"Last 30 days"),e.createElement("option",{value:"90",__self:this,__source:{fileName:F,lineNumber:174,columnNumber:17}},"Last 3 months"),e.createElement("option",{value:"365",__self:this,__source:{fileName:F,lineNumber:175,columnNumber:17}},"Last year")),e.createElement("button",{className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2",__self:this,__source:{fileName:F,lineNumber:177,columnNumber:15}},e.createElement(xs,{className:"w-4 h-4",__self:this,__source:{fileName:F,lineNumber:178,columnNumber:17}}),"Export")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:F,lineNumber:186,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:F,lineNumber:187,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:F,lineNumber:188,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:F,lineNumber:189,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:F,lineNumber:190,columnNumber:17}},"Total Revenue"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:F,lineNumber:193,columnNumber:17}},c(m.totalRevenue))),e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:F,lineNumber:197,columnNumber:15}},e.createElement(_t,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:F,lineNumber:198,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex items-center",__self:this,__source:{fileName:F,lineNumber:201,columnNumber:13}},e.createElement(nt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:F,lineNumber:202,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium text-green-600",__self:this,__source:{fileName:F,lineNumber:203,columnNumber:15}},"+",m.revenueGrowth,"%"),e.createElement("span",{className:"text-sm text-gray-500 ml-2",__self:this,__source:{fileName:F,lineNumber:206,columnNumber:15}},"vs last month"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:F,lineNumber:210,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:F,lineNumber:211,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:F,lineNumber:212,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:F,lineNumber:213,columnNumber:17}},"Total Users"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:F,lineNumber:214,columnNumber:17}},m.totalUsers.toLocaleString())),e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:F,lineNumber:218,columnNumber:15}},e.createElement(Ze,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:F,lineNumber:219,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex items-center",__self:this,__source:{fileName:F,lineNumber:222,columnNumber:13}},e.createElement(nt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:F,lineNumber:223,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium text-green-600",__self:this,__source:{fileName:F,lineNumber:224,columnNumber:15}},"+",m.userGrowth,"%"),e.createElement("span",{className:"text-sm text-gray-500 ml-2",__self:this,__source:{fileName:F,lineNumber:227,columnNumber:15}},"vs last month"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:F,lineNumber:231,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:F,lineNumber:232,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:F,lineNumber:233,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:F,lineNumber:234,columnNumber:17}},"Total Orders"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:F,lineNumber:237,columnNumber:17}},m.totalOrders.toLocaleString())),e.createElement("div",{className:"p-3 bg-purple-100 rounded-lg",__self:this,__source:{fileName:F,lineNumber:241,columnNumber:15}},e.createElement(Ne,{className:"w-6 h-6 text-purple-600",__self:this,__source:{fileName:F,lineNumber:242,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex items-center",__self:this,__source:{fileName:F,lineNumber:245,columnNumber:13}},e.createElement(nt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:F,lineNumber:246,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium text-green-600",__self:this,__source:{fileName:F,lineNumber:247,columnNumber:15}},"+15.3%"),e.createElement("span",{className:"text-sm text-gray-500 ml-2",__self:this,__source:{fileName:F,lineNumber:248,columnNumber:15}},"vs last month"))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:F,lineNumber:252,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:F,lineNumber:253,columnNumber:13}},e.createElement("div",{__self:this,__source:{fileName:F,lineNumber:254,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:F,lineNumber:255,columnNumber:17}},"Active Drivers"),e.createElement("p",{className:"text-2xl font-bold text-gray-900",__self:this,__source:{fileName:F,lineNumber:258,columnNumber:17}},m.activeDrivers)),e.createElement("div",{className:"p-3 bg-orange-100 rounded-lg",__self:this,__source:{fileName:F,lineNumber:262,columnNumber:15}},e.createElement(ve,{className:"w-6 h-6 text-orange-600",__self:this,__source:{fileName:F,lineNumber:263,columnNumber:17}}))),e.createElement("div",{className:"mt-4 flex items-center",__self:this,__source:{fileName:F,lineNumber:266,columnNumber:13}},e.createElement(nt,{className:"w-4 h-4 text-green-600 mr-1",__self:this,__source:{fileName:F,lineNumber:267,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium text-green-600",__self:this,__source:{fileName:F,lineNumber:268,columnNumber:15}},"+2"),e.createElement("span",{className:"text-sm text-gray-500 ml-2",__self:this,__source:{fileName:F,lineNumber:269,columnNumber:15}},"vs last month")))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",__self:this,__source:{fileName:F,lineNumber:275,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:F,lineNumber:277,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between mb-6",__self:this,__source:{fileName:F,lineNumber:278,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:F,lineNumber:279,columnNumber:15}},"Monthly Revenue"),e.createElement(Yr,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:F,lineNumber:282,columnNumber:15}})),e.createElement("div",{className:"h-64 flex items-end justify-between gap-2",__self:this,__source:{fileName:F,lineNumber:284,columnNumber:13}},i.map((b,g)=>e.createElement("div",{key:g,className:"flex flex-col items-center flex-1",__self:this,__source:{fileName:F,lineNumber:286,columnNumber:17}},e.createElement("div",{className:"bg-primary-600 rounded-t w-full transition-all duration-300 hover:bg-primary-700",style:{height:`${b.value/Math.max(...i.map(h=>h.value))*100}%`,minHeight:"4px"},__self:this,__source:{fileName:F,lineNumber:287,columnNumber:19}}),e.createElement("span",{className:"text-xs text-gray-500 mt-2",__self:this,__source:{fileName:F,lineNumber:294,columnNumber:19}},b.name))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:F,lineNumber:303,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between mb-6",__self:this,__source:{fileName:F,lineNumber:304,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:F,lineNumber:305,columnNumber:15}},"Product Categories"),e.createElement(Ma,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:F,lineNumber:308,columnNumber:15}})),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:F,lineNumber:310,columnNumber:13}},_.map((b,g)=>e.createElement("div",{key:g,className:"flex items-center justify-between",__self:this,__source:{fileName:F,lineNumber:312,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:F,lineNumber:313,columnNumber:19}},e.createElement("div",{className:"w-4 h-4 rounded mr-3",style:{backgroundColor:`hsl(${g*72}, 70%, 50%)`},__self:this,__source:{fileName:F,lineNumber:314,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-gray-700",__self:this,__source:{fileName:F,lineNumber:320,columnNumber:21}},b.name)),e.createElement("span",{className:"text-sm text-gray-500",__self:this,__source:{fileName:F,lineNumber:324,columnNumber:19}},b.value,"%")))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:F,lineNumber:332,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:F,lineNumber:333,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:F,lineNumber:334,columnNumber:13}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:F,lineNumber:335,columnNumber:15}},"Recent Activity"),e.createElement(Yt,{className:"w-5 h-5 text-gray-400",__self:this,__source:{fileName:F,lineNumber:338,columnNumber:15}}))),e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:F,lineNumber:341,columnNumber:11}},u.map(b=>e.createElement("div",{key:b.id,className:"p-6 hover:bg-gray-50",__self:this,__source:{fileName:F,lineNumber:343,columnNumber:15}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:F,lineNumber:344,columnNumber:17}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:F,lineNumber:345,columnNumber:19}},e.createElement("div",{className:"p-2 bg-gray-100 rounded-lg mr-4",__self:this,__source:{fileName:F,lineNumber:346,columnNumber:21}},o(b.type)),e.createElement("div",{__self:this,__source:{fileName:F,lineNumber:349,columnNumber:21}},e.createElement("p",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:F,lineNumber:350,columnNumber:23}},b.message),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:F,lineNumber:353,columnNumber:23}},b.time))),b.amount&&e.createElement("div",{className:"text-sm font-medium text-gray-900",__self:this,__source:{fileName:F,lineNumber:357,columnNumber:21}},b.amount)))))),e.createElement("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:F,lineNumber:368,columnNumber:9}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:F,lineNumber:369,columnNumber:11}},"Quick Actions"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",__self:this,__source:{fileName:F,lineNumber:372,columnNumber:11}},e.createElement("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",__self:this,__source:{fileName:F,lineNumber:373,columnNumber:13}},e.createElement(Ze,{className:"w-6 h-6 text-blue-600 mb-2",__self:this,__source:{fileName:F,lineNumber:374,columnNumber:15}}),e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:F,lineNumber:375,columnNumber:15}},"Manage Users"),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:F,lineNumber:376,columnNumber:15}},"View and manage platform users")),e.createElement("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",__self:this,__source:{fileName:F,lineNumber:381,columnNumber:13}},e.createElement(Ne,{className:"w-6 h-6 text-green-600 mb-2",__self:this,__source:{fileName:F,lineNumber:382,columnNumber:15}}),e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:F,lineNumber:383,columnNumber:15}},"Review Consignments"),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:F,lineNumber:384,columnNumber:15}},"Approve pending consignments")),e.createElement("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",__self:this,__source:{fileName:F,lineNumber:389,columnNumber:13}},e.createElement(xs,{className:"w-6 h-6 text-purple-600 mb-2",__self:this,__source:{fileName:F,lineNumber:390,columnNumber:15}}),e.createElement("h4",{className:"font-medium text-gray-900",__self:this,__source:{fileName:F,lineNumber:391,columnNumber:15}},"Generate Reports"),e.createElement("p",{className:"text-sm text-gray-500",__self:this,__source:{fileName:F,lineNumber:392,columnNumber:15}},"Download detailed analytics"))))))}var G="/app/code/frontend/src/pages/driver/DriverDashboard.tsx";function Cu(){const{user:t,token:r}=xe(),[s,l]=T.useState([]),[a,m]=T.useState(!0);T.useEffect(()=>{n()},[]);const n=async()=>{try{const p=await ae.get("/api/driver/assignments",{headers:{Authorization:`Bearer ${r}`}});l(p.data)}catch(p){console.error("Error fetching assignments:",p),V.error("Failed to fetch assignments")}finally{m(!1)}},i=async p=>{try{await ae.put(`/api/driver/assignments/${p}/status`,{status:"IN_TRANSIT",notes:"Pickup started"},{headers:{Authorization:`Bearer ${r}`}}),V.success(`Started pickup for delivery ${p}`),n()}catch(y){console.error("Error updating delivery status:",y),V.error("Failed to start pickup")}},_=async p=>{try{await ae.put(`/api/driver/assignments/${p}/status`,{status:"DELIVERED",notes:"Delivery completed"},{headers:{Authorization:`Bearer ${r}`}}),V.success(`Marked delivery ${p} as completed`),n()}catch(y){console.error("Error updating delivery status:",y),V.error("Failed to mark as delivered")}},u=async()=>{try{if(!navigator.geolocation){V.error("Geolocation is not supported by this browser");return}V("Getting your location...",{icon:"ℹ️"}),navigator.geolocation.getCurrentPosition(async p=>{const{latitude:y,longitude:B}=p.coords;try{await ae.put("/api/driver/location",{latitude:y,longitude:B,timestamp:new Date().toISOString()},{headers:{Authorization:`Bearer ${r}`}}),V.success(`Location updated: ${y.toFixed(6)}, ${B.toFixed(6)}`)}catch(P){console.error("Error updating location on server:",P),V.success(`Location obtained: ${y.toFixed(6)}, ${B.toFixed(6)}`),V("Could not sync with server - using local GPS",{icon:"⚠️"})}},p=>{console.error("Geolocation error:",p),V.error("Failed to get location. Please enable GPS and try again.")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}catch(p){console.error("Location update error:",p),V.error("Failed to update location")}},c=()=>{V.success("Looking for new deliveries...")},o=()=>{V("Issue reporting form would open here",{icon:"ℹ️"})},b=()=>{V("Earnings details would be shown here",{icon:"ℹ️"})},g=[{title:"Deliveries Today",value:"8",icon:e.createElement(ve,{className:"w-6 h-6",__self:this,__source:{fileName:G,lineNumber:152,columnNumber:13}}),color:"bg-blue-500"},{title:"Total Earnings",value:"KES 12,500",icon:e.createElement(_t,{className:"w-6 h-6",__self:this,__source:{fileName:G,lineNumber:158,columnNumber:13}}),color:"bg-green-500"},{title:"Average Rating",value:"4.8",icon:e.createElement(Pe,{className:"w-6 h-6",__self:this,__source:{fileName:G,lineNumber:164,columnNumber:13}}),color:"bg-yellow-500"},{title:"Pending Pickups",value:"3",icon:e.createElement(ct,{className:"w-6 h-6",__self:this,__source:{fileName:G,lineNumber:170,columnNumber:13}}),color:"bg-red-500"}],h=s.map(p=>({id:p.id,customer:`${p.farmer?.user?.firstName||"Unknown"} ${p.farmer?.user?.lastName||"Farmer"}`,location:p.location||"Unknown location",status:p.status==="DRIVER_ASSIGNED"?"pending":p.status==="IN_TRANSIT"?"in_transit":p.status==="DELIVERED"?"delivered":"unknown",time:new Date(p.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),value:`KES ${((p.finalPricePerUnit||p.bidPricePerUnit)*p.quantity).toLocaleString()}`})),x=p=>{switch(p){case"pending":return"bg-yellow-100 text-yellow-800";case"in_transit":return"bg-blue-100 text-blue-800";case"delivered":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},w=p=>{switch(p){case"pending":return"Pending Pickup";case"in_transit":return"In Transit";case"delivered":return"Delivered";default:return p}};return e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",__self:this,__source:{fileName:G,lineNumber:222,columnNumber:5}},e.createElement("div",{className:"mb-8",__self:this,__source:{fileName:G,lineNumber:223,columnNumber:7}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:G,lineNumber:224,columnNumber:9}},"Welcome back, ",t?.firstName,"!"),e.createElement("p",{className:"text-gray-600 mt-2",__self:this,__source:{fileName:G,lineNumber:227,columnNumber:9}},"Here's your delivery schedule for today.")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",__self:this,__source:{fileName:G,lineNumber:233,columnNumber:7}},g.map((p,y)=>e.createElement("div",{key:y,className:"bg-white rounded-lg shadow p-6",__self:this,__source:{fileName:G,lineNumber:235,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:G,lineNumber:236,columnNumber:13}},e.createElement("div",{className:`${p.color} text-white p-3 rounded-lg`,__self:this,__source:{fileName:G,lineNumber:237,columnNumber:15}},p.icon),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:G,lineNumber:240,columnNumber:15}},e.createElement("p",{className:"text-sm font-medium text-gray-600",__self:this,__source:{fileName:G,lineNumber:241,columnNumber:17}},p.title),e.createElement("p",{className:"text-2xl font-semibold text-gray-900",__self:this,__source:{fileName:G,lineNumber:244,columnNumber:17}},p.value)))))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",__self:this,__source:{fileName:G,lineNumber:254,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow p-6",__self:this,__source:{fileName:G,lineNumber:255,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:G,lineNumber:256,columnNumber:11}},"Driver Status"),e.createElement("div",{className:"space-y-4",__self:this,__source:{fileName:G,lineNumber:259,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:G,lineNumber:260,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:G,lineNumber:261,columnNumber:15}},"Status"),e.createElement("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",__self:this,__source:{fileName:G,lineNumber:262,columnNumber:15}},"Available")),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:G,lineNumber:266,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:G,lineNumber:267,columnNumber:15}},"Vehicle"),e.createElement("span",{className:"text-gray-900 font-medium",__self:this,__source:{fileName:G,lineNumber:268,columnNumber:15}},"Pickup Truck - KCA123X")),e.createElement("div",{className:"flex items-center justify-between",__self:this,__source:{fileName:G,lineNumber:272,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:G,lineNumber:273,columnNumber:15}},"Current Location"),e.createElement("span",{className:"text-gray-900 font-medium",__self:this,__source:{fileName:G,lineNumber:274,columnNumber:15}},"Nairobi CBD")),e.createElement("button",{onClick:u,className:"w-full bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors",__self:this,__source:{fileName:G,lineNumber:276,columnNumber:13}},"Update Location"))),e.createElement("div",{className:"bg-white rounded-lg shadow p-6",__self:this,__source:{fileName:G,lineNumber:285,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:G,lineNumber:286,columnNumber:11}},"Quick Actions"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:G,lineNumber:289,columnNumber:11}},e.createElement("button",{onClick:c,className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",__self:this,__source:{fileName:G,lineNumber:290,columnNumber:13}},e.createElement("div",{className:"font-medium text-gray-900",__self:this,__source:{fileName:G,lineNumber:294,columnNumber:15}},"Accept New Delivery"),e.createElement("div",{className:"text-sm text-gray-600",__self:this,__source:{fileName:G,lineNumber:297,columnNumber:15}},"Find deliveries near you")),e.createElement("button",{onClick:o,className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",__self:this,__source:{fileName:G,lineNumber:301,columnNumber:13}},e.createElement("div",{className:"font-medium text-gray-900",__self:this,__source:{fileName:G,lineNumber:305,columnNumber:15}},"Report Issue"),e.createElement("div",{className:"text-sm text-gray-600",__self:this,__source:{fileName:G,lineNumber:306,columnNumber:15}},"Report delivery problems")),e.createElement("button",{onClick:b,className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",__self:this,__source:{fileName:G,lineNumber:310,columnNumber:13}},e.createElement("div",{className:"font-medium text-gray-900",__self:this,__source:{fileName:G,lineNumber:314,columnNumber:15}},"View Earnings"),e.createElement("div",{className:"text-sm text-gray-600",__self:this,__source:{fileName:G,lineNumber:315,columnNumber:15}},"Check payment history")))),e.createElement("div",{className:"bg-white rounded-lg shadow p-6",__self:this,__source:{fileName:G,lineNumber:320,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4",__self:this,__source:{fileName:G,lineNumber:321,columnNumber:11}},"Today's Summary"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:G,lineNumber:324,columnNumber:11}},e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:G,lineNumber:325,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:G,lineNumber:326,columnNumber:15}},"Completed"),e.createElement("span",{className:"font-semibold text-green-600",__self:this,__source:{fileName:G,lineNumber:327,columnNumber:15}},"5 deliveries")),e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:G,lineNumber:329,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:G,lineNumber:330,columnNumber:15}},"In Progress"),e.createElement("span",{className:"font-semibold text-blue-600",__self:this,__source:{fileName:G,lineNumber:331,columnNumber:15}},"1 delivery")),e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:G,lineNumber:333,columnNumber:13}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:G,lineNumber:334,columnNumber:15}},"Pending"),e.createElement("span",{className:"font-semibold text-orange-600",__self:this,__source:{fileName:G,lineNumber:335,columnNumber:15}},"2 deliveries")),e.createElement("div",{className:"border-t pt-3 mt-3",__self:this,__source:{fileName:G,lineNumber:339,columnNumber:13}},e.createElement("div",{className:"flex justify-between",__self:this,__source:{fileName:G,lineNumber:340,columnNumber:15}},e.createElement("span",{className:"text-gray-600",__self:this,__source:{fileName:G,lineNumber:341,columnNumber:17}},"Total Earnings"),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:G,lineNumber:342,columnNumber:17}},"KES 2,400")))))),e.createElement("div",{className:"bg-white rounded-lg shadow",__self:this,__source:{fileName:G,lineNumber:350,columnNumber:7}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:G,lineNumber:351,columnNumber:9}},e.createElement("h2",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:G,lineNumber:352,columnNumber:11}},"Today's Deliveries")),e.createElement("div",{className:"overflow-x-auto",__self:this,__source:{fileName:G,lineNumber:356,columnNumber:9}},e.createElement("table",{className:"w-full",__self:this,__source:{fileName:G,lineNumber:357,columnNumber:11}},e.createElement("thead",{className:"bg-gray-50",__self:this,__source:{fileName:G,lineNumber:358,columnNumber:13}},e.createElement("tr",{__self:this,__source:{fileName:G,lineNumber:359,columnNumber:15}},e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:G,lineNumber:360,columnNumber:17}},"Order ID"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:G,lineNumber:363,columnNumber:17}},"Customer"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:G,lineNumber:366,columnNumber:17}},"Location"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:G,lineNumber:369,columnNumber:17}},"Time"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:G,lineNumber:372,columnNumber:17}},"Value"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:G,lineNumber:375,columnNumber:17}},"Status"),e.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",__self:this,__source:{fileName:G,lineNumber:378,columnNumber:17}},"Actions"))),e.createElement("tbody",{className:"bg-white divide-y divide-gray-200",__self:this,__source:{fileName:G,lineNumber:383,columnNumber:13}},a?e.createElement("tr",{__self:this,__source:{fileName:G,lineNumber:385,columnNumber:17}},e.createElement("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",__self:this,__source:{fileName:G,lineNumber:386,columnNumber:19}},"Loading deliveries...")):h.length===0?e.createElement("tr",{__self:this,__source:{fileName:G,lineNumber:394,columnNumber:17}},e.createElement("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",__self:this,__source:{fileName:G,lineNumber:395,columnNumber:19}},"No deliveries assigned")):h.map(p=>e.createElement("tr",{key:p.id,__self:this,__source:{fileName:G,lineNumber:404,columnNumber:19}},e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",__self:this,__source:{fileName:G,lineNumber:405,columnNumber:21}},p.id),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:G,lineNumber:408,columnNumber:21}},p.customer),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:G,lineNumber:411,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:G,lineNumber:412,columnNumber:23}},e.createElement(Nt,{className:"w-4 h-4 text-gray-400 mr-1",__self:this,__source:{fileName:G,lineNumber:413,columnNumber:25}}),p.location)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:G,lineNumber:417,columnNumber:21}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:G,lineNumber:418,columnNumber:23}},e.createElement(De,{className:"w-4 h-4 text-gray-400 mr-1",__self:this,__source:{fileName:G,lineNumber:419,columnNumber:25}}),p.time)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:G,lineNumber:423,columnNumber:21}},p.value),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap",__self:this,__source:{fileName:G,lineNumber:426,columnNumber:21}},e.createElement("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(p.status)}`,__self:this,__source:{fileName:G,lineNumber:427,columnNumber:23}},w(p.status))),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",__self:this,__source:{fileName:G,lineNumber:433,columnNumber:21}},p.status==="pending"&&e.createElement("button",{onClick:()=>i(p.id),className:"text-primary-600 hover:text-primary-700 font-medium",__self:this,__source:{fileName:G,lineNumber:435,columnNumber:25}},"Start Pickup"),p.status==="in_transit"&&e.createElement("button",{onClick:()=>_(p.id),className:"text-green-600 hover:text-green-700 font-medium",__self:this,__source:{fileName:G,lineNumber:443,columnNumber:25}},"Mark Delivered"),p.status==="delivered"&&e.createElement("span",{className:"text-gray-400",__self:this,__source:{fileName:G,lineNumber:451,columnNumber:25}},"Completed")))))))))}var $="/app/code/frontend/src/pages/driver/AssignmentsPage.tsx";const Au={DRIVER_ASSIGNED:{color:"bg-yellow-100 text-yellow-800",icon:De,label:"Ready for Pickup",action:"Start Transport"},IN_TRANSIT:{color:"bg-blue-100 text-blue-800",icon:jr,label:"In Transit",action:"Mark as Delivered"},DELIVERED:{color:"bg-green-100 text-green-800",icon:Pe,label:"Delivered",action:null}};function Pu(){const{token:t}=xe(),[r,s]=T.useState([]),[l,a]=T.useState(!0),[m,n]=T.useState(null);T.useEffect(()=>{i()},[]);const i=async()=>{try{const c=await ae.get("/api/driver/assignments",{headers:{Authorization:`Bearer ${t}`}});s(c.data.assignments)}catch(c){console.error("Error fetching assignments:",c),V.error("Failed to fetch assignments")}finally{a(!1)}},_=async(c,o)=>{n(c);try{await ae.patch(`/api/driver/assignments/${c}/status`,{status:o},{headers:{Authorization:`Bearer ${t}`}}),V.success("Assignment status updated successfully!"),i()}catch(b){console.error("Error updating assignment status:",b),V.error("Failed to update assignment status")}finally{n(null)}},u=c=>{c.status==="DRIVER_ASSIGNED"?_(c.id,"IN_TRANSIT"):c.status==="IN_TRANSIT"&&_(c.id,"DELIVERED")};return l?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:$,lineNumber:122,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:$,lineNumber:123,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:$,lineNumber:124,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:$,lineNumber:125,columnNumber:11}},"Loading assignments..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:$,lineNumber:132,columnNumber:5}},e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:$,lineNumber:133,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:$,lineNumber:135,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:$,lineNumber:136,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:$,lineNumber:137,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:$,lineNumber:138,columnNumber:15}},"My Assignments"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:$,lineNumber:141,columnNumber:15}},"Manage your transport assignments and deliveries")),e.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600",__self:this,__source:{fileName:$,lineNumber:145,columnNumber:13}},e.createElement(ve,{className:"w-4 h-4",__self:this,__source:{fileName:$,lineNumber:146,columnNumber:15}}),e.createElement("span",{__self:this,__source:{fileName:$,lineNumber:147,columnNumber:15}},"Driver Dashboard")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",__self:this,__source:{fileName:$,lineNumber:153,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:$,lineNumber:154,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:$,lineNumber:155,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:$,lineNumber:156,columnNumber:15}},e.createElement(De,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:$,lineNumber:157,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:$,lineNumber:159,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:$,lineNumber:160,columnNumber:17}},r.filter(c=>c.status==="DRIVER_ASSIGNED").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:$,lineNumber:166,columnNumber:17}},"Ready for Pickup")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:$,lineNumber:171,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:$,lineNumber:172,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:$,lineNumber:173,columnNumber:15}},e.createElement(jr,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:$,lineNumber:174,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:$,lineNumber:176,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:$,lineNumber:177,columnNumber:17}},r.filter(c=>c.status==="IN_TRANSIT").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:$,lineNumber:180,columnNumber:17}},"In Transit")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:$,lineNumber:185,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:$,lineNumber:186,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:$,lineNumber:187,columnNumber:15}},e.createElement(Pe,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:$,lineNumber:188,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:$,lineNumber:190,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:$,lineNumber:191,columnNumber:17}},r.filter(c=>c.status==="DELIVERED").length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:$,lineNumber:194,columnNumber:17}},"Completed"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:$,lineNumber:201,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:$,lineNumber:202,columnNumber:11}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:$,lineNumber:203,columnNumber:13}},"Active Assignments")),r.length===0?e.createElement("div",{className:"p-12 text-center",__self:this,__source:{fileName:$,lineNumber:209,columnNumber:13}},e.createElement(ve,{className:"w-16 h-16 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:$,lineNumber:210,columnNumber:15}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:$,lineNumber:211,columnNumber:15}},"No assignments yet"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:$,lineNumber:214,columnNumber:15}},"You'll see your transport assignments here when they are assigned to you")):e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:$,lineNumber:220,columnNumber:13}},r.map(c=>{const o=Au[c.status],b=o?.icon||Ne,g=c.finalPricePerUnit*c.quantity;return e.createElement("div",{key:c.id,className:"p-6 hover:bg-gray-50",__self:this,__source:{fileName:$,lineNumber:229,columnNumber:19}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",__self:this,__source:{fileName:$,lineNumber:230,columnNumber:21}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:$,lineNumber:231,columnNumber:23}},e.createElement("div",{className:"flex items-start gap-4",__self:this,__source:{fileName:$,lineNumber:232,columnNumber:25}},e.createElement("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",__self:this,__source:{fileName:$,lineNumber:233,columnNumber:27}},e.createElement(Ne,{className:"w-8 h-8 text-gray-600",__self:this,__source:{fileName:$,lineNumber:234,columnNumber:29}})),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:$,lineNumber:237,columnNumber:27}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-1",__self:this,__source:{fileName:$,lineNumber:238,columnNumber:29}},c.title),e.createElement("p",{className:"text-gray-600 text-sm mb-3",__self:this,__source:{fileName:$,lineNumber:241,columnNumber:29}},c.description),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 mb-3",__self:this,__source:{fileName:$,lineNumber:246,columnNumber:29}},e.createElement("span",{__self:this,__source:{fileName:$,lineNumber:247,columnNumber:31}},c.quantity," ",c.unit),e.createElement("span",{__self:this,__source:{fileName:$,lineNumber:250,columnNumber:31}},"•"),e.createElement("span",{__self:this,__source:{fileName:$,lineNumber:251,columnNumber:31}},c.category),e.createElement("span",{__self:this,__source:{fileName:$,lineNumber:252,columnNumber:31}},"•"),e.createElement("span",{__self:this,__source:{fileName:$,lineNumber:253,columnNumber:31}},"Value: KSh ",g.toLocaleString())),c.farmer&&e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",__self:this,__source:{fileName:$,lineNumber:260,columnNumber:31}},e.createElement("h4",{className:"text-sm font-medium text-blue-900 mb-2",__self:this,__source:{fileName:$,lineNumber:261,columnNumber:33}},"Farmer Contact"),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-sm text-blue-700",__self:this,__source:{fileName:$,lineNumber:264,columnNumber:33}},e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:$,lineNumber:265,columnNumber:35}},e.createElement(Ke,{className:"w-4 h-4",__self:this,__source:{fileName:$,lineNumber:266,columnNumber:37}}),e.createElement("span",{__self:this,__source:{fileName:$,lineNumber:267,columnNumber:37}},c.farmer.name)),e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:$,lineNumber:269,columnNumber:35}},e.createElement(Ct,{className:"w-4 h-4",__self:this,__source:{fileName:$,lineNumber:270,columnNumber:37}}),e.createElement("a",{href:`tel:${c.farmer.phone}`,className:"hover:underline",__self:this,__source:{fileName:$,lineNumber:271,columnNumber:37}},c.farmer.phone)),c.farmer.profile?.county&&e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:$,lineNumber:279,columnNumber:37}},e.createElement(Nt,{className:"w-4 h-4",__self:this,__source:{fileName:$,lineNumber:280,columnNumber:39}}),e.createElement("span",{__self:this,__source:{fileName:$,lineNumber:281,columnNumber:39}},c.farmer.profile.county)))),e.createElement("div",{className:"flex items-center gap-4 text-sm text-gray-500",__self:this,__source:{fileName:$,lineNumber:291,columnNumber:29}},e.createElement("div",{className:"flex items-center gap-1",__self:this,__source:{fileName:$,lineNumber:292,columnNumber:31}},e.createElement(wt,{className:"w-4 h-4",__self:this,__source:{fileName:$,lineNumber:293,columnNumber:33}}),e.createElement("span",{__self:this,__source:{fileName:$,lineNumber:294,columnNumber:33}},"Expected:"," ",new Date(c.expectedDeliveryDate).toLocaleDateString())))))),e.createElement("div",{className:"flex flex-col lg:items-end gap-3",__self:this,__source:{fileName:$,lineNumber:306,columnNumber:23}},e.createElement("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${o?.color||"bg-gray-100 text-gray-800"}`,__self:this,__source:{fileName:$,lineNumber:307,columnNumber:25}},e.createElement(b,{className:"w-4 h-4",__self:this,__source:{fileName:$,lineNumber:310,columnNumber:27}}),o?.label||c.status),e.createElement("div",{className:"flex items-center gap-2 text-xs text-gray-400",__self:this,__source:{fileName:$,lineNumber:314,columnNumber:25}},e.createElement(wt,{className:"w-3 h-3",__self:this,__source:{fileName:$,lineNumber:315,columnNumber:27}}),"Assigned:"," ",new Date(c.createdAt).toLocaleDateString()),o?.action&&e.createElement("button",{onClick:()=>u(c),disabled:m===c.id,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c.status==="DRIVER_ASSIGNED"?"bg-blue-600 text-white hover:bg-blue-700":"bg-green-600 text-white hover:bg-green-700"} disabled:bg-gray-400 disabled:cursor-not-allowed`,__self:this,__source:{fileName:$,lineNumber:322,columnNumber:27}},m===c.id?e.createElement(e.Fragment,null,e.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white",__self:this,__source:{fileName:$,lineNumber:333,columnNumber:33}}),"Updating..."):e.createElement(e.Fragment,null,c.status==="DRIVER_ASSIGNED"?e.createElement(Ua,{className:"w-4 h-4",__self:this,__source:{fileName:$,lineNumber:339,columnNumber:35}}):e.createElement(ja,{className:"w-4 h-4",__self:this,__source:{fileName:$,lineNumber:341,columnNumber:35}}),o.action)),c.status==="DELIVERED"&&e.createElement("div",{className:"text-xs text-green-600 font-medium",__self:this,__source:{fileName:$,lineNumber:350,columnNumber:27}},"✓ Ready for warehouse processing"))),c.status==="DRIVER_ASSIGNED"&&e.createElement("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",__self:this,__source:{fileName:$,lineNumber:359,columnNumber:23}},e.createElement("div",{className:"flex items-start gap-2",__self:this,__source:{fileName:$,lineNumber:360,columnNumber:25}},e.createElement(ct,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0",__self:this,__source:{fileName:$,lineNumber:361,columnNumber:27}}),e.createElement("div",{className:"text-sm text-yellow-700",__self:this,__source:{fileName:$,lineNumber:362,columnNumber:27}},e.createElement("p",{className:"font-medium mb-1",__self:this,__source:{fileName:$,lineNumber:363,columnNumber:29}},"Transport Instructions:"),e.createElement("ul",{className:"text-xs space-y-1",__self:this,__source:{fileName:$,lineNumber:366,columnNumber:29}},e.createElement("li",{__self:this,__source:{fileName:$,lineNumber:367,columnNumber:31}},"• Contact farmer to arrange pickup time"),e.createElement("li",{__self:this,__source:{fileName:$,lineNumber:368,columnNumber:31}},"• Verify produce quality and quantity"),e.createElement("li",{__self:this,__source:{fileName:$,lineNumber:369,columnNumber:31}},"• Handle with care during transport"),e.createElement("li",{__self:this,__source:{fileName:$,lineNumber:370,columnNumber:31}},"• Deliver to Main Warehouse, Nairobi Industrial Area"))))),c.status==="IN_TRANSIT"&&e.createElement("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",__self:this,__source:{fileName:$,lineNumber:381,columnNumber:23}},e.createElement("div",{className:"flex items-start gap-2",__self:this,__source:{fileName:$,lineNumber:382,columnNumber:25}},e.createElement(jr,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0",__self:this,__source:{fileName:$,lineNumber:383,columnNumber:27}}),e.createElement("div",{className:"text-sm text-blue-700",__self:this,__source:{fileName:$,lineNumber:384,columnNumber:27}},e.createElement("p",{className:"font-medium mb-1",__self:this,__source:{fileName:$,lineNumber:385,columnNumber:29}},"En Route to Warehouse"),e.createElement("p",{className:"text-xs",__self:this,__source:{fileName:$,lineNumber:388,columnNumber:29}},"Mark as delivered once you arrive at the warehouse and unload the produce.")))))})))))}var j="/app/code/frontend/src/pages/driver/WarehousePage.tsx";function ku(){const{token:t}=xe(),[r,s]=T.useState([]),[l,a]=T.useState(!0),[m,n]=T.useState(!1),[i,_]=T.useState(null),[u,c]=T.useState({marketPrice:"",description:"",images:[],isFeatured:!1,tags:[]}),[o,b]=T.useState(""),[g,h]=T.useState(!1);T.useEffect(()=>{x()},[]);const x=async()=>{try{const O=await ae.get("/api/warehouse/inventory",{headers:{Authorization:`Bearer ${t}`}});s(O.data.inventory)}catch(O){console.error("Error fetching inventory:",O),V.error("Failed to fetch warehouse inventory")}finally{a(!1)}},w=O=>{_(O),c({marketPrice:O.finalPricePerUnit.toString(),description:O.description,images:O.images,isFeatured:!1,tags:[]}),n(!0)},p=()=>{o.trim()&&!u.tags.includes(o.trim())&&(c({...u,tags:[...u.tags,o.trim()]}),b(""))},y=O=>{c({...u,tags:u.tags.filter(Y=>Y!==O)})},B=()=>{const O=prompt("Enter image URL:");O&&O.trim()&&c({...u,images:[...u.images,O.trim()]})},P=O=>{c({...u,images:u.images.filter((Y,S)=>S!==O)})},L=async()=>{if(i){if(!u.marketPrice||Number(u.marketPrice)<=0){V.error("Please enter a valid market price");return}h(!0);try{await ae.post("/api/warehouse/add-to-marketplace",{consignmentId:i.id,marketPrice:Number(u.marketPrice),description:u.description,images:u.images,isFeatured:u.isFeatured,tags:u.tags},{headers:{Authorization:`Bearer ${t}`}}),V.success("Product added to marketplace successfully!"),n(!1),x(),c({marketPrice:"",description:"",images:[],isFeatured:!1,tags:[]})}catch(O){console.error("Error adding to marketplace:",O),V.error("Failed to add product to marketplace")}finally{h(!1)}}};return l?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",__self:this,__source:{fileName:j,lineNumber:171,columnNumber:7}},e.createElement("div",{className:"text-center",__self:this,__source:{fileName:j,lineNumber:172,columnNumber:9}},e.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto",__self:this,__source:{fileName:j,lineNumber:173,columnNumber:11}}),e.createElement("p",{className:"mt-4 text-gray-600",__self:this,__source:{fileName:j,lineNumber:174,columnNumber:11}},"Loading warehouse inventory..."))):e.createElement("div",{className:"min-h-screen bg-gray-50 py-8",__self:this,__source:{fileName:j,lineNumber:181,columnNumber:5}},e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",__self:this,__source:{fileName:j,lineNumber:182,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",__self:this,__source:{fileName:j,lineNumber:184,columnNumber:9}},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",__self:this,__source:{fileName:j,lineNumber:185,columnNumber:11}},e.createElement("div",{__self:this,__source:{fileName:j,lineNumber:186,columnNumber:13}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900",__self:this,__source:{fileName:j,lineNumber:187,columnNumber:15}},"Warehouse Management"),e.createElement("p",{className:"text-gray-600 mt-1",__self:this,__source:{fileName:j,lineNumber:190,columnNumber:15}},"Manage delivered produce and add items to marketplace")),e.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600",__self:this,__source:{fileName:j,lineNumber:194,columnNumber:13}},e.createElement(Ne,{className:"w-4 h-4",__self:this,__source:{fileName:j,lineNumber:195,columnNumber:15}}),e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:196,columnNumber:15}},"Inventory Manager")))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",__self:this,__source:{fileName:j,lineNumber:202,columnNumber:9}},e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:j,lineNumber:203,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:j,lineNumber:204,columnNumber:13}},e.createElement("div",{className:"p-3 bg-blue-100 rounded-lg",__self:this,__source:{fileName:j,lineNumber:205,columnNumber:15}},e.createElement(Ne,{className:"w-6 h-6 text-blue-600",__self:this,__source:{fileName:j,lineNumber:206,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:j,lineNumber:208,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:j,lineNumber:209,columnNumber:17}},r.length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:j,lineNumber:212,columnNumber:17}},"Items in Warehouse")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:j,lineNumber:217,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:j,lineNumber:218,columnNumber:13}},e.createElement("div",{className:"p-3 bg-green-100 rounded-lg",__self:this,__source:{fileName:j,lineNumber:219,columnNumber:15}},e.createElement(Pe,{className:"w-6 h-6 text-green-600",__self:this,__source:{fileName:j,lineNumber:220,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:j,lineNumber:222,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:j,lineNumber:223,columnNumber:17}},r.filter(O=>O.marketplaceProductId).length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:j,lineNumber:226,columnNumber:17}},"Added to Marketplace")))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",__self:this,__source:{fileName:j,lineNumber:231,columnNumber:11}},e.createElement("div",{className:"flex items-center",__self:this,__source:{fileName:j,lineNumber:232,columnNumber:13}},e.createElement("div",{className:"p-3 bg-yellow-100 rounded-lg",__self:this,__source:{fileName:j,lineNumber:233,columnNumber:15}},e.createElement(vs,{className:"w-6 h-6 text-yellow-600",__self:this,__source:{fileName:j,lineNumber:234,columnNumber:17}})),e.createElement("div",{className:"ml-4",__self:this,__source:{fileName:j,lineNumber:236,columnNumber:15}},e.createElement("h3",{className:"text-lg font-semibold text-gray-900",__self:this,__source:{fileName:j,lineNumber:237,columnNumber:17}},r.filter(O=>!O.marketplaceProductId).length),e.createElement("p",{className:"text-gray-600 text-sm",__self:this,__source:{fileName:j,lineNumber:243,columnNumber:17}},"Pending Upload"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",__self:this,__source:{fileName:j,lineNumber:250,columnNumber:9}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:j,lineNumber:251,columnNumber:11}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:j,lineNumber:252,columnNumber:13}},"Warehouse Inventory")),r.length===0?e.createElement("div",{className:"p-12 text-center",__self:this,__source:{fileName:j,lineNumber:258,columnNumber:13}},e.createElement(Ne,{className:"w-16 h-16 text-gray-400 mx-auto mb-4",__self:this,__source:{fileName:j,lineNumber:259,columnNumber:15}}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2",__self:this,__source:{fileName:j,lineNumber:260,columnNumber:15}},"No inventory items"),e.createElement("p",{className:"text-gray-600",__self:this,__source:{fileName:j,lineNumber:263,columnNumber:15}},"Delivered produce will appear here for marketplace processing")):e.createElement("div",{className:"divide-y divide-gray-200",__self:this,__source:{fileName:j,lineNumber:268,columnNumber:13}},r.map(O=>e.createElement("div",{key:O.id,className:"p-6 hover:bg-gray-50",__self:this,__source:{fileName:j,lineNumber:270,columnNumber:17}},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",__self:this,__source:{fileName:j,lineNumber:271,columnNumber:19}},e.createElement("div",{className:"flex-1",__self:this,__source:{fileName:j,lineNumber:272,columnNumber:21}},e.createElement("div",{className:"flex items-start gap-4",__self:this,__source:{fileName:j,lineNumber:273,columnNumber:23}},e.createElement("div",{className:"w-20 h-20 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",__self:this,__source:{fileName:j,lineNumber:274,columnNumber:25}},O.images.length>0?e.createElement("img",{src:O.images[0],alt:O.title,className:"w-full h-full object-cover rounded-lg",__self:this,__source:{fileName:j,lineNumber:276,columnNumber:29}}):e.createElement(Ne,{className:"w-8 h-8 text-gray-600",__self:this,__source:{fileName:j,lineNumber:282,columnNumber:29}})),e.createElement("div",{className:"flex-1 min-w-0",__self:this,__source:{fileName:j,lineNumber:286,columnNumber:25}},e.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-1",__self:this,__source:{fileName:j,lineNumber:287,columnNumber:27}},O.title),e.createElement("p",{className:"text-gray-600 text-sm mb-3",__self:this,__source:{fileName:j,lineNumber:290,columnNumber:27}},O.description),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 mb-2",__self:this,__source:{fileName:j,lineNumber:294,columnNumber:27}},e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:295,columnNumber:29}},O.quantity," ",O.unit),e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:298,columnNumber:29}},"•"),e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:299,columnNumber:29}},"KSh ",O.finalPricePerUnit," per ",O.unit),e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:302,columnNumber:29}},"•"),e.createElement("span",{__self:this,__source:{fileName:j,lineNumber:303,columnNumber:29}},O.category)),e.createElement("div",{className:"text-sm",__self:this,__source:{fileName:j,lineNumber:306,columnNumber:27}},e.createElement("span",{className:"text-gray-500",__self:this,__source:{fileName:j,lineNumber:307,columnNumber:29}},"Total Value: "),e.createElement("span",{className:"font-semibold text-gray-900",__self:this,__source:{fileName:j,lineNumber:308,columnNumber:29}},"KSh"," ",(O.finalPricePerUnit*O.quantity).toLocaleString()))))),e.createElement("div",{className:"flex flex-col lg:items-end gap-3",__self:this,__source:{fileName:j,lineNumber:319,columnNumber:21}},O.marketplaceProductId?e.createElement("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",__self:this,__source:{fileName:j,lineNumber:321,columnNumber:25}},e.createElement(Pe,{className:"w-4 h-4",__self:this,__source:{fileName:j,lineNumber:322,columnNumber:27}}),"On Marketplace"):e.createElement("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",__self:this,__source:{fileName:j,lineNumber:326,columnNumber:25}},e.createElement(vs,{className:"w-4 h-4",__self:this,__source:{fileName:j,lineNumber:327,columnNumber:27}}),"Ready to Upload"),O.marketplaceProductId?e.createElement("button",{className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors flex items-center gap-2",disabled:!0,__self:this,__source:{fileName:j,lineNumber:341,columnNumber:25}},e.createElement(ot,{className:"w-4 h-4",__self:this,__source:{fileName:j,lineNumber:345,columnNumber:27}}),"View on Marketplace"):e.createElement("button",{onClick:()=>w(O),className:"bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-700 transition-colors flex items-center gap-2",__self:this,__source:{fileName:j,lineNumber:333,columnNumber:25}},e.createElement(nr,{className:"w-4 h-4",__self:this,__source:{fileName:j,lineNumber:337,columnNumber:27}}),"Add to Marketplace"))))))),m&&i&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",__self:this,__source:{fileName:j,lineNumber:359,columnNumber:11}},e.createElement("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",__self:this,__source:{fileName:j,lineNumber:360,columnNumber:13}},e.createElement("div",{className:"p-6 border-b border-gray-200",__self:this,__source:{fileName:j,lineNumber:361,columnNumber:15}},e.createElement("h2",{className:"text-xl font-semibold text-gray-900",__self:this,__source:{fileName:j,lineNumber:362,columnNumber:17}},"Add to Marketplace"),e.createElement("p",{className:"text-gray-600 text-sm mt-1",__self:this,__source:{fileName:j,lineNumber:365,columnNumber:17}},i.title)),e.createElement("div",{className:"p-6 space-y-6",__self:this,__source:{fileName:j,lineNumber:370,columnNumber:15}},e.createElement("div",{__self:this,__source:{fileName:j,lineNumber:372,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:j,lineNumber:373,columnNumber:19}},"Market Price (KSh per ",i.unit,") *"),e.createElement("input",{type:"number",value:u.marketPrice,onChange:O=>c({...u,marketPrice:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter market price",min:"1",required:!0,__self:this,__source:{fileName:j,lineNumber:376,columnNumber:19}}),e.createElement("p",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:j,lineNumber:390,columnNumber:19}},"Farmer price: KSh ",i.finalPricePerUnit," per"," ",i.unit)),e.createElement("div",{__self:this,__source:{fileName:j,lineNumber:397,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:j,lineNumber:398,columnNumber:19}},"Market Description"),e.createElement("textarea",{value:u.description,onChange:O=>c({...u,description:O.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enhance the product description for customers",__self:this,__source:{fileName:j,lineNumber:401,columnNumber:19}})),e.createElement("div",{__self:this,__source:{fileName:j,lineNumber:416,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:j,lineNumber:417,columnNumber:19}},"Product Images"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:j,lineNumber:420,columnNumber:19}},u.images.length>0&&e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",__self:this,__source:{fileName:j,lineNumber:422,columnNumber:23}},u.images.map((O,Y)=>e.createElement("div",{key:Y,className:"relative",__self:this,__source:{fileName:j,lineNumber:424,columnNumber:27}},e.createElement("img",{src:O,alt:`Product ${Y+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-200",__self:this,__source:{fileName:j,lineNumber:425,columnNumber:29}}),e.createElement("button",{onClick:()=>P(Y),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",__self:this,__source:{fileName:j,lineNumber:430,columnNumber:29}},"×")))),e.createElement("button",{onClick:B,className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",__self:this,__source:{fileName:j,lineNumber:440,columnNumber:21}},e.createElement(qa,{className:"w-6 h-6 text-gray-400 mx-auto mb-2",__self:this,__source:{fileName:j,lineNumber:444,columnNumber:23}}),e.createElement("span",{className:"text-sm text-gray-600",__self:this,__source:{fileName:j,lineNumber:445,columnNumber:23}},"Add Image URL")))),e.createElement("div",{__self:this,__source:{fileName:j,lineNumber:453,columnNumber:17}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:j,lineNumber:454,columnNumber:19}},"Product Tags"),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:j,lineNumber:457,columnNumber:19}},u.tags.length>0&&e.createElement("div",{className:"flex flex-wrap gap-2",__self:this,__source:{fileName:j,lineNumber:459,columnNumber:23}},u.tags.map((O,Y)=>e.createElement("span",{key:Y,className:"inline-flex items-center gap-1 bg-primary-100 text-primary-800 px-2 py-1 rounded text-sm",__self:this,__source:{fileName:j,lineNumber:461,columnNumber:27}},O,e.createElement("button",{onClick:()=>y(O),className:"text-primary-600 hover:text-primary-800",__self:this,__source:{fileName:j,lineNumber:466,columnNumber:29}},"×")))),e.createElement("div",{className:"flex gap-2",__self:this,__source:{fileName:j,lineNumber:476,columnNumber:21}},e.createElement("input",{type:"text",value:o,onChange:O=>b(O.target.value),onKeyPress:O=>O.key==="Enter"&&p(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Add a tag (e.g., organic, fresh)",__self:this,__source:{fileName:j,lineNumber:477,columnNumber:23}}),e.createElement("button",{onClick:p,className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors",__self:this,__source:{fileName:j,lineNumber:485,columnNumber:23}},e.createElement(_l,{className:"w-4 h-4",__self:this,__source:{fileName:j,lineNumber:489,columnNumber:25}}))))),e.createElement("div",{__self:this,__source:{fileName:j,lineNumber:496,columnNumber:17}},e.createElement("label",{className:"flex items-center gap-2",__self:this,__source:{fileName:j,lineNumber:497,columnNumber:19}},e.createElement("input",{type:"checkbox",checked:u.isFeatured,onChange:O=>c({...u,isFeatured:O.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500",__self:this,__source:{fileName:j,lineNumber:498,columnNumber:21}}),e.createElement("span",{className:"text-sm font-medium text-gray-700",__self:this,__source:{fileName:j,lineNumber:509,columnNumber:21}},"Mark as Featured Product")),e.createElement("p",{className:"text-xs text-gray-500 mt-1",__self:this,__source:{fileName:j,lineNumber:513,columnNumber:19}},"Featured products appear prominently on the marketplace")),e.createElement("div",{className:"flex gap-4 pt-4",__self:this,__source:{fileName:j,lineNumber:519,columnNumber:17}},e.createElement("button",{type:"button",onClick:()=>n(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:g,__self:this,__source:{fileName:j,lineNumber:520,columnNumber:19}},"Cancel"),e.createElement("button",{onClick:L,className:"flex-1 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:g,__self:this,__source:{fileName:j,lineNumber:528,columnNumber:19}},g?"Adding...":"Add to Marketplace")))))))}var ye="/app/code/frontend/src/pages/ComingSoonPage.tsx";function al({title:t="Coming Soon",description:r="This feature is currently under development and will be available soon.",features:s=[]}){const l=et();return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center py-12 px-4",__self:this,__source:{fileName:ye,lineNumber:19,columnNumber:5}},e.createElement("div",{className:"max-w-md w-full",__self:this,__source:{fileName:ye,lineNumber:20,columnNumber:7}},e.createElement("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",__self:this,__source:{fileName:ye,lineNumber:21,columnNumber:9}},e.createElement("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6",__self:this,__source:{fileName:ye,lineNumber:23,columnNumber:11}},e.createElement($a,{className:"w-10 h-10 text-primary-600",__self:this,__source:{fileName:ye,lineNumber:24,columnNumber:13}})),e.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-4",__self:this,__source:{fileName:ye,lineNumber:28,columnNumber:11}},t),e.createElement("p",{className:"text-gray-600 mb-6",__self:this,__source:{fileName:ye,lineNumber:31,columnNumber:11}},r),s.length>0&&e.createElement("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",__self:this,__source:{fileName:ye,lineNumber:35,columnNumber:13}},e.createElement("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",__self:this,__source:{fileName:ye,lineNumber:36,columnNumber:15}},e.createElement(Xr,{className:"w-4 h-4 text-yellow-500 mr-2",__self:this,__source:{fileName:ye,lineNumber:37,columnNumber:17}}),"Coming Features:"),e.createElement("ul",{className:"space-y-2",__self:this,__source:{fileName:ye,lineNumber:40,columnNumber:15}},s.map((a,m)=>e.createElement("li",{key:m,className:"text-sm text-gray-600 flex items-center",__self:this,__source:{fileName:ye,lineNumber:42,columnNumber:19}},e.createElement("div",{className:"w-1.5 h-1.5 bg-primary-600 rounded-full mr-2",__self:this,__source:{fileName:ye,lineNumber:46,columnNumber:21}}),a)))),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",__self:this,__source:{fileName:ye,lineNumber:55,columnNumber:11}},e.createElement("div",{className:"flex items-center justify-center text-blue-700",__self:this,__source:{fileName:ye,lineNumber:56,columnNumber:13}},e.createElement(De,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:ye,lineNumber:57,columnNumber:15}}),e.createElement("span",{className:"text-sm font-medium",__self:this,__source:{fileName:ye,lineNumber:58,columnNumber:15}},"Expected Launch: Coming Soon"))),e.createElement("div",{className:"space-y-3",__self:this,__source:{fileName:ye,lineNumber:65,columnNumber:11}},e.createElement("button",{onClick:()=>l(-1),className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 transition-colors flex items-center justify-center",__self:this,__source:{fileName:ye,lineNumber:66,columnNumber:13}},e.createElement(It,{className:"w-4 h-4 mr-2",__self:this,__source:{fileName:ye,lineNumber:70,columnNumber:15}}),"Go Back"),e.createElement(_e,{to:"/",className:"block w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors",__self:this,__source:{fileName:ye,lineNumber:74,columnNumber:13}},"Return to Homepage")),e.createElement("div",{className:"mt-6 pt-6 border-t border-gray-200",__self:this,__source:{fileName:ye,lineNumber:83,columnNumber:11}},e.createElement("p",{className:"text-xs text-gray-500",__self:this,__source:{fileName:ye,lineNumber:84,columnNumber:13}},"We're working hard to bring you the best experience.",e.createElement("br",{__self:this,__source:{fileName:ye,lineNumber:86,columnNumber:15}}),"Thank you for your patience!")))))}var oe="/app/code/frontend/src/pages/TestMpesaPage.tsx";function Du(){const[t,r]=T.useState("0712345678"),[s,l]=T.useState(100),[a,m]=T.useState(!1),n=()=>localStorage.getItem("token"),i=async()=>{m(!0);try{const o=n();if(!o){V.error("Please login first");return}const b=await ae.post("/api/payments/registration-fee",{phoneNumber:t},{headers:{Authorization:`Bearer ${o}`}});V.success("Registration fee payment initiated!"),console.log("Registration fee response:",b.data)}catch(o){V.error(o.response?.data?.error||"Payment failed"),console.error("Registration fee error:",o)}finally{m(!1)}},_=async()=>{m(!0);try{const o=n();if(!o){V.error("Please login first");return}const b=await ae.post("/api/wallet/withdraw",{amount:s,phoneNumber:t},{headers:{Authorization:`Bearer ${o}`}});V.success("Wallet withdrawal initiated!"),console.log("Withdrawal response:",b.data)}catch(o){V.error(o.response?.data?.error||"Withdrawal failed"),console.error("Withdrawal error:",o)}finally{m(!1)}},u=async()=>{m(!0);try{const o=mr(t);if(!Jr(o)){V.error("Please enter a valid Kenyan phone number");return}const b=await ae.post("/api/payments/stk-push",{phone:o,amount:s,orderId:"test-order-"+Date.now(),accountReference:"Test Payment",transactionDesc:"Test STK Push"});b.data.success?(V.success("M-Pesa payment request sent!"),console.log("STK Push response:",b.data)):V.error("Failed to initiate payment")}catch(o){V.error(o.response?.data?.error||"STK Push failed"),console.error("STK Push error:",o)}finally{m(!1)}},c=()=>{const o=mr(t),b=Jr(t);V(`Phone: ${t} → ${o} (Valid: ${b})`,{icon:"ℹ️"}),console.log("Phone validation:",{original:t,formatted:o,isValid:b})};return e.createElement("div",{className:"max-w-4xl mx-auto p-6",__self:this,__source:{fileName:oe,lineNumber:112,columnNumber:5}},e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-8",__self:this,__source:{fileName:oe,lineNumber:113,columnNumber:7}},"M-Pesa Integration Test"),e.createElement("div",{className:"bg-white rounded-lg shadow p-6 mb-6",__self:this,__source:{fileName:oe,lineNumber:117,columnNumber:7}},e.createElement("h2",{className:"text-xl font-semibold mb-4",__self:this,__source:{fileName:oe,lineNumber:118,columnNumber:9}},"Test Configuration"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",__self:this,__source:{fileName:oe,lineNumber:120,columnNumber:9}},e.createElement("div",{__self:this,__source:{fileName:oe,lineNumber:121,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:oe,lineNumber:122,columnNumber:13}},"Phone Number"),e.createElement("input",{type:"tel",value:t,onChange:o=>r(o.target.value),placeholder:"0712345678",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",__self:this,__source:{fileName:oe,lineNumber:125,columnNumber:13}})),e.createElement("div",{__self:this,__source:{fileName:oe,lineNumber:134,columnNumber:11}},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2",__self:this,__source:{fileName:oe,lineNumber:135,columnNumber:13}},"Amount (KES)"),e.createElement("input",{type:"number",value:s,onChange:o=>l(Number(o.target.value)),min:"1",max:"150000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",__self:this,__source:{fileName:oe,lineNumber:138,columnNumber:13}}))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",__self:this,__source:{fileName:oe,lineNumber:149,columnNumber:9}},e.createElement("button",{onClick:c,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",__self:this,__source:{fileName:oe,lineNumber:150,columnNumber:11}},"Validate Phone"),e.createElement("button",{onClick:i,disabled:a,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",__self:this,__source:{fileName:oe,lineNumber:157,columnNumber:11}},"Test Registration Fee"),e.createElement("button",{onClick:_,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",__self:this,__source:{fileName:oe,lineNumber:165,columnNumber:11}},"Test Withdrawal"),e.createElement("button",{onClick:u,disabled:a,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",__self:this,__source:{fileName:oe,lineNumber:173,columnNumber:11}},"Test STK Push"))),e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",__self:this,__source:{fileName:oe,lineNumber:183,columnNumber:7}},e.createElement("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",__self:this,__source:{fileName:oe,lineNumber:184,columnNumber:9}},"Demo Configuration"),e.createElement("div",{className:"text-sm text-yellow-700 space-y-1",__self:this,__source:{fileName:oe,lineNumber:187,columnNumber:9}},e.createElement("p",{__self:this,__source:{fileName:oe,lineNumber:188,columnNumber:11}},e.createElement("strong",{__self:this,__source:{fileName:oe,lineNumber:189,columnNumber:13}},"Environment:")," Sandbox"),e.createElement("p",{__self:this,__source:{fileName:oe,lineNumber:191,columnNumber:11}},e.createElement("strong",{__self:this,__source:{fileName:oe,lineNumber:192,columnNumber:13}},"Business Short Code:")," 174379"),e.createElement("p",{__self:this,__source:{fileName:oe,lineNumber:194,columnNumber:11}},e.createElement("strong",{__self:this,__source:{fileName:oe,lineNumber:195,columnNumber:13}},"Test Phone:")," 0712345678 (or any valid Kenyan number)"),e.createElement("p",{__self:this,__source:{fileName:oe,lineNumber:197,columnNumber:11}},e.createElement("strong",{__self:this,__source:{fileName:oe,lineNumber:198,columnNumber:13}},"Demo Credentials:")," Configured for development"))),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",__self:this,__source:{fileName:oe,lineNumber:203,columnNumber:7}},e.createElement("h3",{className:"text-lg font-semibold text-blue-800 mb-2",__self:this,__source:{fileName:oe,lineNumber:204,columnNumber:9}},"How to Test"),e.createElement("div",{className:"text-sm text-blue-700 space-y-2",__self:this,__source:{fileName:oe,lineNumber:207,columnNumber:9}},e.createElement("p",{__self:this,__source:{fileName:oe,lineNumber:208,columnNumber:11}},"1. ",e.createElement("strong",{__self:this,__source:{fileName:oe,lineNumber:209,columnNumber:16}},"Login:")," Use demo credentials to login as farmer/customer"),e.createElement("p",{__self:this,__source:{fileName:oe,lineNumber:212,columnNumber:11}},"2. ",e.createElement("strong",{__self:this,__source:{fileName:oe,lineNumber:213,columnNumber:16}},"Registration Fee:")," Test farmer activation payment (KES 300)"),e.createElement("p",{__self:this,__source:{fileName:oe,lineNumber:216,columnNumber:11}},"3. ",e.createElement("strong",{__self:this,__source:{fileName:oe,lineNumber:217,columnNumber:16}},"Wallet Withdrawal:")," Test farmer wallet withdrawal"),e.createElement("p",{__self:this,__source:{fileName:oe,lineNumber:219,columnNumber:11}},"4. ",e.createElement("strong",{__self:this,__source:{fileName:oe,lineNumber:220,columnNumber:16}},"STK Push:")," Test direct M-Pesa payment request"),e.createElement("p",{__self:this,__source:{fileName:oe,lineNumber:222,columnNumber:11}},"5. ",e.createElement("strong",{__self:this,__source:{fileName:oe,lineNumber:223,columnNumber:16}},"Checkout:")," Go to marketplace, add items, and checkout with M-Pesa"))))}var z="/app/code/frontend/src/App.tsx";const Be=({children:t,allowedRoles:r})=>{const{user:s,isAuthenticated:l}=xe();return l?r&&s&&!r.includes(s.role)?e.createElement(Ye,{to:"/",replace:!0,__self:void 0,__source:{fileName:z,lineNumber:62,columnNumber:12}}):e.createElement(e.Fragment,null,t):e.createElement(Ye,{to:"/login",replace:!0,__self:void 0,__source:{fileName:z,lineNumber:58,columnNumber:12}})},Ru=()=>{const{user:t}=xe();if(!t)return e.createElement(Ye,{to:"/login",replace:!0,__self:void 0,__source:{fileName:z,lineNumber:73,columnNumber:12}});switch(t.role){case"FARMER":return e.createElement(Ye,{to:"/farmer/dashboard",replace:!0,__self:void 0,__source:{fileName:z,lineNumber:78,columnNumber:14}});case"CUSTOMER":return e.createElement(Ye,{to:"/customer/profile",replace:!0,__self:void 0,__source:{fileName:z,lineNumber:80,columnNumber:14}});case"ADMIN":return e.createElement(Ye,{to:"/admin/dashboard",replace:!0,__self:void 0,__source:{fileName:z,lineNumber:82,columnNumber:14}});case"DRIVER":return e.createElement(Ye,{to:"/driver/dashboard",replace:!0,__self:void 0,__source:{fileName:z,lineNumber:84,columnNumber:14}});default:return e.createElement(Ye,{to:"/",replace:!0,__self:void 0,__source:{fileName:z,lineNumber:86,columnNumber:14}})}};function Fu(){const{isAuthenticated:t,user:r}=xe();return T.useEffect(()=>{wi()},[]),e.createElement(vi,{__self:this,__source:{fileName:z,lineNumber:98,columnNumber:5}},e.createElement(Ea,{__self:this,__source:{fileName:z,lineNumber:99,columnNumber:7}},e.createElement("div",{className:"min-h-screen bg-gray-50",__self:this,__source:{fileName:z,lineNumber:100,columnNumber:9}},e.createElement(Ci,{__self:this,__source:{fileName:z,lineNumber:101,columnNumber:11}}),e.createElement("main",{className:"pb-16 lg:pb-0",__self:this,__source:{fileName:z,lineNumber:103,columnNumber:11}},e.createElement(xa,{__self:this,__source:{fileName:z,lineNumber:104,columnNumber:13}},e.createElement(pe,{path:"/",element:e.createElement(ki,{__self:this,__source:{fileName:z,lineNumber:106,columnNumber:40}}),__self:this,__source:{fileName:z,lineNumber:106,columnNumber:15}}),e.createElement(pe,{path:"/marketplace",element:e.createElement(Ri,{__self:this,__source:{fileName:z,lineNumber:107,columnNumber:51}}),__self:this,__source:{fileName:z,lineNumber:107,columnNumber:15}}),e.createElement(pe,{path:"/marketplace/product/:id",element:e.createElement(Fi,{__self:this,__source:{fileName:z,lineNumber:110,columnNumber:26}}),__self:this,__source:{fileName:z,lineNumber:108,columnNumber:15}}),e.createElement(pe,{path:"/login",element:e.createElement(Ti,{__self:this,__source:{fileName:z,lineNumber:112,columnNumber:45}}),__self:this,__source:{fileName:z,lineNumber:112,columnNumber:15}}),e.createElement(pe,{path:"/register",element:e.createElement(lu,{__self:this,__source:{fileName:z,lineNumber:113,columnNumber:48}}),__self:this,__source:{fileName:z,lineNumber:113,columnNumber:15}}),e.createElement(pe,{path:"/dashboard",element:e.createElement(Ru,{__self:this,__source:{fileName:z,lineNumber:116,columnNumber:49}}),__self:this,__source:{fileName:z,lineNumber:116,columnNumber:15}}),e.createElement(pe,{path:"/farmer/dashboard",element:e.createElement(Be,{allowedRoles:["FARMER"],__self:this,__source:{fileName:z,lineNumber:122,columnNumber:19}},e.createElement(au,{__self:this,__source:{fileName:z,lineNumber:123,columnNumber:21}})),__self:this,__source:{fileName:z,lineNumber:119,columnNumber:15}}),e.createElement(pe,{path:"/customer/dashboard",element:e.createElement(Be,{allowedRoles:["CUSTOMER"],__self:this,__source:{fileName:z,lineNumber:132,columnNumber:19}},e.createElement(_u,{__self:this,__source:{fileName:z,lineNumber:133,columnNumber:21}})),__self:this,__source:{fileName:z,lineNumber:129,columnNumber:15}}),e.createElement(pe,{path:"/customer/profile",element:e.createElement(Be,{allowedRoles:["CUSTOMER"],__self:this,__source:{fileName:z,lineNumber:140,columnNumber:19}},e.createElement(Nu,{__self:this,__source:{fileName:z,lineNumber:141,columnNumber:21}})),__self:this,__source:{fileName:z,lineNumber:137,columnNumber:15}}),e.createElement(pe,{path:"/customer/orders",element:e.createElement(Be,{allowedRoles:["CUSTOMER"],__self:this,__source:{fileName:z,lineNumber:148,columnNumber:19}},e.createElement(fu,{__self:this,__source:{fileName:z,lineNumber:149,columnNumber:21}})),__self:this,__source:{fileName:z,lineNumber:145,columnNumber:15}}),e.createElement(pe,{path:"/cart",element:e.createElement(bu,{__self:this,__source:{fileName:z,lineNumber:153,columnNumber:44}}),__self:this,__source:{fileName:z,lineNumber:153,columnNumber:15}}),e.createElement(pe,{path:"/checkout",element:e.createElement(gu,{__self:this,__source:{fileName:z,lineNumber:154,columnNumber:48}}),__self:this,__source:{fileName:z,lineNumber:154,columnNumber:15}}),e.createElement(pe,{path:"/admin/dashboard",element:e.createElement(Be,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:z,lineNumber:160,columnNumber:19}},e.createElement(pu,{__self:this,__source:{fileName:z,lineNumber:161,columnNumber:21}})),__self:this,__source:{fileName:z,lineNumber:157,columnNumber:15}}),e.createElement(pe,{path:"/admin/users",element:e.createElement(Be,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:z,lineNumber:168,columnNumber:19}},e.createElement(xu,{__self:this,__source:{fileName:z,lineNumber:169,columnNumber:21}})),__self:this,__source:{fileName:z,lineNumber:165,columnNumber:15}}),e.createElement(pe,{path:"/admin/consignments",element:e.createElement(Be,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:z,lineNumber:176,columnNumber:19}},e.createElement(wu,{__self:this,__source:{fileName:z,lineNumber:177,columnNumber:21}})),__self:this,__source:{fileName:z,lineNumber:173,columnNumber:15}}),e.createElement(pe,{path:"/admin/analytics",element:e.createElement(Be,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:z,lineNumber:184,columnNumber:19}},e.createElement(Su,{__self:this,__source:{fileName:z,lineNumber:185,columnNumber:21}})),__self:this,__source:{fileName:z,lineNumber:181,columnNumber:15}}),e.createElement(pe,{path:"/admin/settings",element:e.createElement(Be,{allowedRoles:["ADMIN"],__self:this,__source:{fileName:z,lineNumber:192,columnNumber:19}},e.createElement(al,{title:"System Settings",description:"Platform configuration and settings management will be available soon.",features:["Platform configuration","User role management","Payment settings","Notification preferences","System monitoring"],__self:this,__source:{fileName:z,lineNumber:193,columnNumber:21}})),__self:this,__source:{fileName:z,lineNumber:189,columnNumber:15}}),e.createElement(pe,{path:"/driver/dashboard",element:e.createElement(Be,{allowedRoles:["DRIVER"],__self:this,__source:{fileName:z,lineNumber:212,columnNumber:19}},e.createElement(Cu,{__self:this,__source:{fileName:z,lineNumber:213,columnNumber:21}})),__self:this,__source:{fileName:z,lineNumber:209,columnNumber:15}}),e.createElement(pe,{path:"/driver/assignments",element:e.createElement(Be,{allowedRoles:["DRIVER"],__self:this,__source:{fileName:z,lineNumber:220,columnNumber:19}},e.createElement(Pu,{__self:this,__source:{fileName:z,lineNumber:221,columnNumber:21}})),__self:this,__source:{fileName:z,lineNumber:217,columnNumber:15}}),e.createElement(pe,{path:"/driver/warehouse",element:e.createElement(Be,{allowedRoles:["DRIVER"],__self:this,__source:{fileName:z,lineNumber:228,columnNumber:19}},e.createElement(ku,{__self:this,__source:{fileName:z,lineNumber:229,columnNumber:21}})),__self:this,__source:{fileName:z,lineNumber:225,columnNumber:15}}),e.createElement(pe,{path:"/farmer/consignments",element:e.createElement(Ye,{to:"/farmer/dashboard",replace:!0,__self:this,__source:{fileName:z,lineNumber:237,columnNumber:26}}),__self:this,__source:{fileName:z,lineNumber:235,columnNumber:15}}),e.createElement(pe,{path:"/farmer/wallet",element:e.createElement(Ye,{to:"/farmer/dashboard",replace:!0,__self:this,__source:{fileName:z,lineNumber:241,columnNumber:26}}),__self:this,__source:{fileName:z,lineNumber:239,columnNumber:15}}),e.createElement(pe,{path:"/test-mpesa",element:e.createElement(Du,{__self:this,__source:{fileName:z,lineNumber:245,columnNumber:50}}),__self:this,__source:{fileName:z,lineNumber:245,columnNumber:15}}),e.createElement(pe,{path:"*",element:e.createElement(al,{__self:this,__source:{fileName:z,lineNumber:248,columnNumber:40}}),__self:this,__source:{fileName:z,lineNumber:248,columnNumber:15}}))),t&&r&&e.createElement(Ai,{__self:this,__source:{fileName:z,lineNumber:253,columnNumber:39}}),e.createElement(Pi,{__self:this,__source:{fileName:z,lineNumber:256,columnNumber:11}}),e.createElement(Va,{position:"top-right",__self:this,__source:{fileName:z,lineNumber:258,columnNumber:11}}))))}window.addEventListener("error",t=>{t.error&&t.error.message&&t.error.message.includes("filter is not a function")&&(console.error("🔴 ARRAY OPERATION ERROR DETECTED:",t.error.message),console.error("This error has been caught and handled gracefully."),t.preventDefault())});window.addEventListener("unhandledrejection",t=>{t.reason&&typeof t.reason=="string"&&t.reason.includes("filter")&&(console.error("🔴 PROMISE REJECTION WITH ARRAY ERROR:",t.reason),t.preventDefault())});const Tu=new im({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5*60*1e3,cacheTime:5*60*1e3},mutations:{retry:1}}}),na=document.getElementById("root");if(!na)throw new Error("Root element not found");const Ou=qr.createRoot(na);Ou.render(e.createElement(Nm,{client:Tu},e.createElement(Fu)));
